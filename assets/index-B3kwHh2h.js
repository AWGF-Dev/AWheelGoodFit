(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function Q1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var D_={exports:{}},Im={};var uE;function PB(){if(uE)return Im;uE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,r){var c=null;if(r!==void 0&&(c=""+r),s.key!==void 0&&(c=""+s.key),"key"in s){r={};for(var h in s)h!=="key"&&(r[h]=s[h])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:c,ref:s!==void 0?s:null,props:r}}return Im.Fragment=e,Im.jsx=t,Im.jsxs=t,Im}var hE;function FB(){return hE||(hE=1,D_.exports=PB()),D_.exports}var g=FB(),U_={exports:{}},_n={};var fE;function HB(){if(fE)return _n;fE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=x&&X[x]||X["@@iterator"],typeof X=="function"?X:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,R={};function T(X,ce,xe){this.props=X,this.context=ce,this.refs=R,this.updater=xe||_}T.prototype.isReactComponent={},T.prototype.setState=function(X,ce){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ce,"setState")},T.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function M(){}M.prototype=T.prototype;function B(X,ce,xe){this.props=X,this.context=ce,this.refs=R,this.updater=xe||_}var N=B.prototype=new M;N.constructor=B,E(N,T.prototype),N.isPureReactComponent=!0;var D=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function j(X,ce,xe,Te,He,at){return xe=at.ref,{$$typeof:i,type:X,key:ce,ref:xe!==void 0?xe:null,props:at}}function k(X,ce){return j(X.type,ce,void 0,void 0,void 0,X.props)}function O(X){return typeof X=="object"&&X!==null&&X.$$typeof===i}function P(X){var ce={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(xe){return ce[xe]})}var Y=/\/+/g;function ie(X,ce){return typeof X=="object"&&X!==null&&X.key!=null?P(""+X.key):ce.toString(36)}function re(){}function de(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(re,re):(X.status="pending",X.then(function(ce){X.status==="pending"&&(X.status="fulfilled",X.value=ce)},function(ce){X.status==="pending"&&(X.status="rejected",X.reason=ce)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function pe(X,ce,xe,Te,He){var at=typeof X;(at==="undefined"||at==="boolean")&&(X=null);var me=!1;if(X===null)me=!0;else switch(at){case"bigint":case"string":case"number":me=!0;break;case"object":switch(X.$$typeof){case i:case e:me=!0;break;case y:return me=X._init,pe(me(X._payload),ce,xe,Te,He)}}if(me)return He=He(X),me=Te===""?"."+ie(X,0):Te,D(He)?(xe="",me!=null&&(xe=me.replace(Y,"$&/")+"/"),pe(He,ce,xe,"",function(_t){return _t})):He!=null&&(O(He)&&(He=k(He,xe+(He.key==null||X&&X.key===He.key?"":(""+He.key).replace(Y,"$&/")+"/")+me)),ce.push(He)),1;me=0;var Ge=Te===""?".":Te+":";if(D(X))for(var qe=0;qe<X.length;qe++)Te=X[qe],at=Ge+ie(Te,qe),me+=pe(Te,ce,xe,at,He);else if(qe=b(X),typeof qe=="function")for(X=qe.call(X),qe=0;!(Te=X.next()).done;)Te=Te.value,at=Ge+ie(Te,qe++),me+=pe(Te,ce,xe,at,He);else if(at==="object"){if(typeof X.then=="function")return pe(de(X),ce,xe,Te,He);throw ce=String(X),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return me}function H(X,ce,xe){if(X==null)return X;var Te=[],He=0;return pe(X,Te,"","",function(at){return ce.call(xe,at,He++)}),Te}function Z(X){if(X._status===-1){var ce=X._result;ce=ce(),ce.then(function(xe){(X._status===0||X._status===-1)&&(X._status=1,X._result=xe)},function(xe){(X._status===0||X._status===-1)&&(X._status=2,X._result=xe)}),X._status===-1&&(X._status=0,X._result=ce)}if(X._status===1)return X._result.default;throw X._result}var $=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function ge(){}return _n.Children={map:H,forEach:function(X,ce,xe){H(X,function(){ce.apply(this,arguments)},xe)},count:function(X){var ce=0;return H(X,function(){ce++}),ce},toArray:function(X){return H(X,function(ce){return ce})||[]},only:function(X){if(!O(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},_n.Component=T,_n.Fragment=t,_n.Profiler=s,_n.PureComponent=B,_n.StrictMode=n,_n.Suspense=d,_n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,_n.__COMPILER_RUNTIME={__proto__:null,c:function(X){return L.H.useMemoCache(X)}},_n.cache=function(X){return function(){return X.apply(null,arguments)}},_n.cloneElement=function(X,ce,xe){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Te=E({},X.props),He=X.key,at=void 0;if(ce!=null)for(me in ce.ref!==void 0&&(at=void 0),ce.key!==void 0&&(He=""+ce.key),ce)!I.call(ce,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&ce.ref===void 0||(Te[me]=ce[me]);var me=arguments.length-2;if(me===1)Te.children=xe;else if(1<me){for(var Ge=Array(me),qe=0;qe<me;qe++)Ge[qe]=arguments[qe+2];Te.children=Ge}return j(X.type,He,void 0,void 0,at,Te)},_n.createContext=function(X){return X={$$typeof:c,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:r,_context:X},X},_n.createElement=function(X,ce,xe){var Te,He={},at=null;if(ce!=null)for(Te in ce.key!==void 0&&(at=""+ce.key),ce)I.call(ce,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(He[Te]=ce[Te]);var me=arguments.length-2;if(me===1)He.children=xe;else if(1<me){for(var Ge=Array(me),qe=0;qe<me;qe++)Ge[qe]=arguments[qe+2];He.children=Ge}if(X&&X.defaultProps)for(Te in me=X.defaultProps,me)He[Te]===void 0&&(He[Te]=me[Te]);return j(X,at,void 0,void 0,null,He)},_n.createRef=function(){return{current:null}},_n.forwardRef=function(X){return{$$typeof:h,render:X}},_n.isValidElement=O,_n.lazy=function(X){return{$$typeof:y,_payload:{_status:-1,_result:X},_init:Z}},_n.memo=function(X,ce){return{$$typeof:p,type:X,compare:ce===void 0?null:ce}},_n.startTransition=function(X){var ce=L.T,xe={};L.T=xe;try{var Te=X(),He=L.S;He!==null&&He(xe,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(ge,$)}catch(at){$(at)}finally{L.T=ce}},_n.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},_n.use=function(X){return L.H.use(X)},_n.useActionState=function(X,ce,xe){return L.H.useActionState(X,ce,xe)},_n.useCallback=function(X,ce){return L.H.useCallback(X,ce)},_n.useContext=function(X){return L.H.useContext(X)},_n.useDebugValue=function(){},_n.useDeferredValue=function(X,ce){return L.H.useDeferredValue(X,ce)},_n.useEffect=function(X,ce,xe){var Te=L.H;if(typeof xe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Te.useEffect(X,ce)},_n.useId=function(){return L.H.useId()},_n.useImperativeHandle=function(X,ce,xe){return L.H.useImperativeHandle(X,ce,xe)},_n.useInsertionEffect=function(X,ce){return L.H.useInsertionEffect(X,ce)},_n.useLayoutEffect=function(X,ce){return L.H.useLayoutEffect(X,ce)},_n.useMemo=function(X,ce){return L.H.useMemo(X,ce)},_n.useOptimistic=function(X,ce){return L.H.useOptimistic(X,ce)},_n.useReducer=function(X,ce,xe){return L.H.useReducer(X,ce,xe)},_n.useRef=function(X){return L.H.useRef(X)},_n.useState=function(X){return L.H.useState(X)},_n.useSyncExternalStore=function(X,ce,xe){return L.H.useSyncExternalStore(X,ce,xe)},_n.useTransition=function(){return L.H.useTransition()},_n.version="19.1.1",_n}var dE;function gp(){return dE||(dE=1,U_.exports=HB()),U_.exports}var Ae=gp();const dl=Q1(Ae);var O_={exports:{}},Pm={},L_={exports:{}},I_={};var pE;function zB(){return pE||(pE=1,(function(i){function e(H,Z){var $=H.length;H.push(Z);e:for(;0<$;){var ge=$-1>>>1,X=H[ge];if(0<s(X,Z))H[ge]=Z,H[$]=X,$=ge;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var Z=H[0],$=H.pop();if($!==Z){H[0]=$;e:for(var ge=0,X=H.length,ce=X>>>1;ge<ce;){var xe=2*(ge+1)-1,Te=H[xe],He=xe+1,at=H[He];if(0>s(Te,$))He<X&&0>s(at,Te)?(H[ge]=at,H[He]=$,ge=He):(H[ge]=Te,H[xe]=$,ge=xe);else if(He<X&&0>s(at,$))H[ge]=at,H[He]=$,ge=He;else break e}}return Z}function s(H,Z){var $=H.sortIndex-Z.sortIndex;return $!==0?$:H.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var c=Date,h=c.now();i.unstable_now=function(){return c.now()-h}}var d=[],p=[],y=1,x=null,b=3,_=!1,E=!1,R=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function D(H){for(var Z=t(p);Z!==null;){if(Z.callback===null)n(p);else if(Z.startTime<=H)n(p),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(p)}}function L(H){if(R=!1,D(H),!E)if(t(d)!==null)E=!0,I||(I=!0,ie());else{var Z=t(p);Z!==null&&pe(L,Z.startTime-H)}}var I=!1,j=-1,k=5,O=-1;function P(){return T?!0:!(i.unstable_now()-O<k)}function Y(){if(T=!1,I){var H=i.unstable_now();O=H;var Z=!0;try{e:{E=!1,R&&(R=!1,B(j),j=-1),_=!0;var $=b;try{t:{for(D(H),x=t(d);x!==null&&!(x.expirationTime>H&&P());){var ge=x.callback;if(typeof ge=="function"){x.callback=null,b=x.priorityLevel;var X=ge(x.expirationTime<=H);if(H=i.unstable_now(),typeof X=="function"){x.callback=X,D(H),Z=!0;break t}x===t(d)&&n(d),D(H)}else n(d);x=t(d)}if(x!==null)Z=!0;else{var ce=t(p);ce!==null&&pe(L,ce.startTime-H),Z=!1}}break e}finally{x=null,b=$,_=!1}Z=void 0}}finally{Z?ie():I=!1}}}var ie;if(typeof N=="function")ie=function(){N(Y)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,de=re.port2;re.port1.onmessage=Y,ie=function(){de.postMessage(null)}}else ie=function(){M(Y,0)};function pe(H,Z){j=M(function(){H(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(H){switch(b){case 1:case 2:case 3:var Z=3;break;default:Z=b}var $=b;b=Z;try{return H()}finally{b=$}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var $=b;b=H;try{return Z()}finally{b=$}},i.unstable_scheduleCallback=function(H,Z,$){var ge=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ge+$:ge):$=ge,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=$+X,H={id:y++,callback:Z,priorityLevel:H,startTime:$,expirationTime:X,sortIndex:-1},$>ge?(H.sortIndex=$,e(p,H),t(d)===null&&H===t(p)&&(R?(B(j),j=-1):R=!0,pe(L,$-ge))):(H.sortIndex=X,e(d,H),E||_||(E=!0,I||(I=!0,ie()))),H},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(H){var Z=b;return function(){var $=b;b=Z;try{return H.apply(this,arguments)}finally{b=$}}}})(I_)),I_}var mE;function GB(){return mE||(mE=1,L_.exports=zB()),L_.exports}var P_={exports:{}},ea={};var gE;function jB(){if(gE)return ea;gE=1;var i=gp();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(d,p,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:x==null?null:""+x,children:d,containerInfo:p,implementation:y}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ea.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ea.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return r(d,p,null,y)},ea.flushSync=function(d){var p=c.T,y=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=p,n.p=y,n.d.f()}},ea.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(d,p))},ea.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},ea.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,x=h(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?n.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:_}):y==="script"&&n.d.X(d,{crossOrigin:x,integrity:b,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ea.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);n.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(d)},ea.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,x=h(y,p.crossOrigin);n.d.L(d,y,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ea.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=h(p.as,p.crossOrigin);n.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(d)},ea.requestFormReset=function(d){n.d.r(d)},ea.unstable_batchedUpdates=function(d,p){return d(p)},ea.useFormState=function(d,p,y){return c.H.useFormState(d,p,y)},ea.useFormStatus=function(){return c.H.useHostTransitionStatus()},ea.version="19.1.1",ea}var vE;function kB(){if(vE)return P_.exports;vE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),P_.exports=jB(),P_.exports}var yE;function VB(){if(yE)return Pm;yE=1;var i=GB(),e=gp(),t=kB();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var o=a,f=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(f=o.return),a=o.return;while(a)}return o.tag===3?f:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function h(a){if(r(a)!==a)throw Error(n(188))}function d(a){var o=a.alternate;if(!o){if(o=r(a),o===null)throw Error(n(188));return o!==a?null:a}for(var f=a,m=o;;){var A=f.return;if(A===null)break;var C=A.alternate;if(C===null){if(m=A.return,m!==null){f=m;continue}break}if(A.child===C.child){for(C=A.child;C;){if(C===f)return h(A),a;if(C===m)return h(A),o;C=C.sibling}throw Error(n(188))}if(f.return!==m.return)f=A,m=C;else{for(var F=!1,q=A.child;q;){if(q===f){F=!0,f=A,m=C;break}if(q===m){F=!0,m=A,f=C;break}q=q.sibling}if(!F){for(q=C.child;q;){if(q===f){F=!0,f=C,m=A;break}if(q===m){F=!0,m=C,f=A;break}q=q.sibling}if(!F)throw Error(n(189))}}if(f.alternate!==m)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?a:o}function p(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=p(a),o!==null)return o;a=a.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),N=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function ie(a){return a===null||typeof a!="object"?null:(a=Y&&a[Y]||a["@@iterator"],typeof a=="function"?a:null)}var re=Symbol.for("react.client.reference");function de(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===re?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case E:return"Fragment";case T:return"Profiler";case R:return"StrictMode";case L:return"Suspense";case I:return"SuspenseList";case O:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case _:return"Portal";case N:return(a.displayName||"Context")+".Provider";case B:return(a._context.displayName||"Context")+".Consumer";case D:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case j:return o=a.displayName||null,o!==null?o:de(a.type)||"Memo";case k:o=a._payload,a=a._init;try{return de(a(o))}catch{}}return null}var pe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},ge=[],X=-1;function ce(a){return{current:a}}function xe(a){0>X||(a.current=ge[X],ge[X]=null,X--)}function Te(a,o){X++,ge[X]=a.current,a.current=o}var He=ce(null),at=ce(null),me=ce(null),Ge=ce(null);function qe(a,o){switch(Te(me,o),Te(at,a),Te(He,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?FM(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=FM(o),a=HM(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}xe(He),Te(He,a)}function _t(){xe(He),xe(at),xe(me)}function vt(a){a.memoizedState!==null&&Te(Ge,a);var o=He.current,f=HM(o,a.type);o!==f&&(Te(at,a),Te(He,f))}function yt(a){at.current===a&&(xe(He),xe(at)),Ge.current===a&&(xe(Ge),Nm._currentValue=$)}var zt=Object.prototype.hasOwnProperty,ne=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,ke=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Le=i.unstable_now,dt=i.unstable_getCurrentPriorityLevel,st=i.unstable_ImmediatePriority,lt=i.unstable_UserBlockingPriority,Ft=i.unstable_NormalPriority,kt=i.unstable_LowPriority,Q=i.unstable_IdlePriority,V=i.log,Me=i.unstable_setDisableYieldValue,Ie=null,je=null;function Pe(a){if(typeof V=="function"&&Me(a),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Ie,a)}catch{}}var xt=Math.clz32?Math.clz32:Nt,pt=Math.log,Bt=Math.LN2;function Nt(a){return a>>>=0,a===0?32:31-(pt(a)/Bt|0)|0}var tt=256,ot=4194304;function Ut(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ae(a,o,f){var m=a.pendingLanes;if(m===0)return 0;var A=0,C=a.suspendedLanes,F=a.pingedLanes;a=a.warmLanes;var q=m&134217727;return q!==0?(m=q&~C,m!==0?A=Ut(m):(F&=q,F!==0?A=Ut(F):f||(f=q&~a,f!==0&&(A=Ut(f))))):(q=m&~C,q!==0?A=Ut(q):F!==0?A=Ut(F):f||(f=m&~a,f!==0&&(A=Ut(f)))),A===0?0:o!==0&&o!==A&&(o&C)===0&&(C=A&-A,f=o&-o,C>=f||C===32&&(f&4194048)!==0)?o:A}function Se(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function nt(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function le(){var a=tt;return tt<<=1,(tt&4194048)===0&&(tt=256),a}function be(){var a=ot;return ot<<=1,(ot&62914560)===0&&(ot=4194304),a}function rt(a){for(var o=[],f=0;31>f;f++)o.push(a);return o}function bt(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ct(a,o,f,m,A,C){var F=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var q=a.entanglements,oe=a.expirationTimes,we=a.hiddenUpdates;for(f=F&~f;0<f;){var Ke=31-xt(f),it=1<<Ke;q[Ke]=0,oe[Ke]=-1;var De=we[Ke];if(De!==null)for(we[Ke]=null,Ke=0;Ke<De.length;Ke++){var Ue=De[Ke];Ue!==null&&(Ue.lane&=-536870913)}f&=~it}m!==0&&$e(a,m,0),C!==0&&A===0&&a.tag!==0&&(a.suspendedLanes|=C&~(F&~o))}function $e(a,o,f){a.pendingLanes|=o,a.suspendedLanes&=~o;var m=31-xt(o);a.entangledLanes|=o,a.entanglements[m]=a.entanglements[m]|1073741824|f&4194090}function Mt(a,o){var f=a.entangledLanes|=o;for(a=a.entanglements;f;){var m=31-xt(f),A=1<<m;A&o|a[m]&o&&(a[m]|=o),f&=~A}}function Ot(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function un(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function an(){var a=Z.p;return a!==0?a:(a=window.event,a===void 0?32:sE(a.type))}function Fi(a,o){var f=Z.p;try{return Z.p=a,o()}finally{Z.p=f}}var ni=Math.random().toString(36).slice(2),Si="__reactFiber$"+ni,li="__reactProps$"+ni,as="__reactContainer$"+ni,Bs="__reactEvents$"+ni,Xa="__reactListeners$"+ni,ki="__reactHandles$"+ni,Kt="__reactResources$"+ni,ys="__reactMarker$"+ni;function Zn(a){delete a[Si],delete a[li],delete a[Bs],delete a[Xa],delete a[ki]}function G(a){var o=a[Si];if(o)return o;for(var f=a.parentNode;f;){if(o=f[as]||f[Si]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(a=kM(a);a!==null;){if(f=a[Si])return f;a=kM(a)}return o}a=f,f=a.parentNode}return null}function J(a){if(a=a[Si]||a[as]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function fe(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function Re(a){var o=a[Kt];return o||(o=a[Kt]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ne(a){a[ys]=!0}var ze=new Set,ut={};function z(a,o){ee(a,o),ee(a+"Capture",o)}function ee(a,o){for(ut[a]=o,a=0;a<o.length;a++)ze.add(o[a])}var se=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),he={},te={};function Qe(a){return zt.call(te,a)?!0:zt.call(he,a)?!1:se.test(a)?te[a]=!0:(he[a]=!0,!1)}function Fe(a,o,f){if(Qe(o))if(f===null)a.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+f)}}function Ve(a,o,f){if(f===null)a.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+f)}}function We(a,o,f,m){if(m===null)a.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(o,f,""+m)}}var ht,At;function gt(a){if(ht===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);ht=o&&o[1]||"",At=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ht+a+At}var Pt=!1;function Zt(a,o){if(!a||Pt)return"";Pt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(Ue){var De=Ue}Reflect.construct(a,[],it)}else{try{it.call()}catch(Ue){De=Ue}a.call(it.prototype)}}else{try{throw Error()}catch(Ue){De=Ue}(it=a())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(Ue){if(Ue&&De&&typeof Ue.stack=="string")return[Ue.stack,De.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=m.DetermineComponentFrameRoot(),F=C[0],q=C[1];if(F&&q){var oe=F.split(`
`),we=q.split(`
`);for(A=m=0;m<oe.length&&!oe[m].includes("DetermineComponentFrameRoot");)m++;for(;A<we.length&&!we[A].includes("DetermineComponentFrameRoot");)A++;if(m===oe.length||A===we.length)for(m=oe.length-1,A=we.length-1;1<=m&&0<=A&&oe[m]!==we[A];)A--;for(;1<=m&&0<=A;m--,A--)if(oe[m]!==we[A]){if(m!==1||A!==1)do if(m--,A--,0>A||oe[m]!==we[A]){var Ke=`
`+oe[m].replace(" at new "," at ");return a.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",a.displayName)),Ke}while(1<=m&&0<=A);break}}}finally{Pt=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?gt(f):""}function Xt(a){switch(a.tag){case 26:case 27:case 5:return gt(a.type);case 16:return gt("Lazy");case 13:return gt("Suspense");case 19:return gt("SuspenseList");case 0:case 15:return Zt(a.type,!1);case 11:return Zt(a.type.render,!1);case 1:return Zt(a.type,!0);case 31:return gt("Activity");default:return""}}function vn(a){try{var o="";do o+=Xt(a),a=a.return;while(a);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Dt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Tt(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Rn(a){var o=Tt(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),m=""+a[o];if(!a.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var A=f.get,C=f.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return A.call(this)},set:function(F){m=""+F,C.call(this,F)}}),Object.defineProperty(a,o,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(F){m=""+F},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function rn(a){a._valueTracker||(a._valueTracker=Rn(a))}function kn(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var f=o.getValue(),m="";return a&&(m=Tt(a)?a.checked?"true":"false":a.value),a=m,a!==f?(o.setValue(a),!0):!1}function yn(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Dn=/[\n"\\]/g;function on(a){return a.replace(Dn,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ht(a,o,f,m,A,C,F,q){a.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?a.type=F:a.removeAttribute("type"),o!=null?F==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+Dt(o)):a.value!==""+Dt(o)&&(a.value=""+Dt(o)):F!=="submit"&&F!=="reset"||a.removeAttribute("value"),o!=null?mi(a,F,Dt(o)):f!=null?mi(a,F,Dt(f)):m!=null&&a.removeAttribute("value"),A==null&&C!=null&&(a.defaultChecked=!!C),A!=null&&(a.checked=A&&typeof A!="function"&&typeof A!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?a.name=""+Dt(q):a.removeAttribute("name")}function Wn(a,o,f,m,A,C,F,q){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),o!=null||f!=null){if(!(C!=="submit"&&C!=="reset"||o!=null))return;f=f!=null?""+Dt(f):"",o=o!=null?""+Dt(o):f,q||o===a.value||(a.value=o),a.defaultValue=o}m=m??A,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=q?a.checked:!!m,a.defaultChecked=!!m,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(a.name=F)}function mi(a,o,f){o==="number"&&yn(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function En(a,o,f,m){if(a=a.options,o){o={};for(var A=0;A<f.length;A++)o["$"+f[A]]=!0;for(f=0;f<a.length;f++)A=o.hasOwnProperty("$"+a[f].value),a[f].selected!==A&&(a[f].selected=A),A&&m&&(a[f].defaultSelected=!0)}else{for(f=""+Dt(f),o=null,A=0;A<a.length;A++){if(a[A].value===f){a[A].selected=!0,m&&(a[A].defaultSelected=!0);return}o!==null||a[A].disabled||(o=a[A])}o!==null&&(o.selected=!0)}}function ci(a,o,f){if(o!=null&&(o=""+Dt(o),o!==a.value&&(a.value=o),f==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=f!=null?""+Dt(f):""}function _l(a,o,f,m){if(o==null){if(m!=null){if(f!=null)throw Error(n(92));if(pe(m)){if(1<m.length)throw Error(n(93));m=m[0]}f=m}f==null&&(f=""),o=f}f=Dt(o),a.defaultValue=f,m=a.textContent,m===f&&m!==""&&m!==null&&(a.value=m)}function Vi(a,o){if(o){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=o;return}}a.textContent=o}var h0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cu(a,o,f){var m=o.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":m?a.setProperty(o,f):typeof f!="number"||f===0||h0.has(o)?o==="float"?a.cssFloat=f:a[o]=(""+f).trim():a[o]=f+"px"}function wu(a,o,f){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var A in o)m=o[A],o.hasOwnProperty(A)&&f[A]!==m&&Cu(a,A,m)}else for(var C in o)o.hasOwnProperty(C)&&Cu(a,C,o[C])}function ff(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),f0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ru(a){return f0.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var df=null;function pf(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var wo=null,Al=null;function Mp(a){var o=J(a);if(o&&(a=o.stateNode)){var f=a[li]||null;e:switch(a=o.stateNode,o.type){case"input":if(Ht(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),o=f.name,f.type==="radio"&&o!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+on(""+o)+'"][type="radio"]'),o=0;o<f.length;o++){var m=f[o];if(m!==a&&m.form===a.form){var A=m[li]||null;if(!A)throw Error(n(90));Ht(m,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(o=0;o<f.length;o++)m=f[o],m.form===a.form&&kn(m)}break e;case"textarea":ci(a,f.value,f.defaultValue);break e;case"select":o=f.value,o!=null&&En(a,!!f.multiple,o,!1)}}}var Bu=!1;function Ep(a,o,f){if(Bu)return a(o,f);Bu=!0;try{var m=a(o);return m}finally{if(Bu=!1,(wo!==null||Al!==null)&&(Tr(),wo&&(o=wo,a=Al,Al=wo=null,Mp(o),a)))for(o=0;o<a.length;o++)Mp(a[o])}}function uc(a,o){var f=a.stateNode;if(f===null)return null;var m=f[li]||null;if(m===null)return null;f=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(n(231,o,typeof f));return f}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nu=!1;if(hr)try{var hc={};Object.defineProperty(hc,"passive",{get:function(){Nu=!0}}),window.addEventListener("test",hc,hc),window.removeEventListener("test",hc,hc)}catch{Nu=!1}var Gr=null,Tp=null,mf=null;function Cp(){if(mf)return mf;var a,o=Tp,f=o.length,m,A="value"in Gr?Gr.value:Gr.textContent,C=A.length;for(a=0;a<f&&o[a]===A[a];a++);var F=f-a;for(m=1;m<=F&&o[f-m]===A[C-m];m++);return mf=A.slice(a,1<m?1-m:void 0)}function Ro(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function fc(){return!0}function Du(){return!1}function Ns(a){function o(f,m,A,C,F){this._reactName=f,this._targetInst=A,this.type=m,this.nativeEvent=C,this.target=F,this.currentTarget=null;for(var q in a)a.hasOwnProperty(q)&&(f=a[q],this[q]=f?f(C):C[q]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?fc:Du,this.isPropagationStopped=Du,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=fc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=fc)},persist:function(){},isPersistent:fc}),o}var Bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dc=Ns(Bo),pc=y({},Bo,{view:0,detail:0}),d0=Ns(pc),jr,mc,gc,vc=y({},pc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ou,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==gc&&(gc&&a.type==="mousemove"?(jr=a.screenX-gc.screenX,mc=a.screenY-gc.screenY):mc=jr=0,gc=a),jr)},movementY:function(a){return"movementY"in a?a.movementY:mc}}),wp=Ns(vc),p0=y({},vc,{dataTransfer:0}),Kb=Ns(p0),rs=y({},pc,{relatedTarget:0}),gf=Ns(rs),m0=y({},Bo,{animationName:0,elapsedTime:0,pseudoElement:0}),g0=Ns(m0),v0=y({},Bo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),y0=Ns(v0),Uu=y({},Bo,{data:0}),vf=Ns(Uu),x0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rp(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=_0[a])?!!o[a]:!1}function Ou(){return Rp}var A0=y({},pc,{key:function(a){if(a.key){var o=x0[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Ro(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?b0[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ou,charCode:function(a){return a.type==="keypress"?Ro(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ro(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Bp=Ns(A0),Np=y({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yf=Ns(Np),S0=y({},pc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ou}),Dp=Ns(S0),M0=y({},Bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),kr=Ns(M0),Up=y({},vc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zb=Ns(Up),E0=y({},Bo,{newState:0,oldState:0}),No=Ns(E0),Vr=[9,13,27,32],Lu=hr&&"CompositionEvent"in window,Sl=null;hr&&"documentMode"in document&&(Sl=document.documentMode);var Iu=hr&&"TextEvent"in window&&!Sl,Pu=hr&&(!Lu||Sl&&8<Sl&&11>=Sl),Do=" ",os=!1;function Fu(a,o){switch(a){case"keyup":return Vr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Op(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Uo=!1;function Hu(a,o){switch(a){case"compositionend":return Op(o);case"keypress":return o.which!==32?null:(os=!0,Do);case"textInput":return a=o.data,a===Do&&os?null:a;default:return null}}function Lp(a,o){if(Uo)return a==="compositionend"||!Lu&&Fu(a,o)?(a=Cp(),mf=Tp=Gr=null,Uo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Pu&&o.locale!=="ko"?null:o.data;default:return null}}var xf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ip(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!xf[a.type]:o==="textarea"}function Ys(a,o,f,m){wo?Al?Al.push(m):Al=[m]:wo=m,o=Mv(o,"onChange"),0<o.length&&(f=new dc("onChange","change",null,f,m),a.push({event:f,listeners:o}))}var yc=null,Ml=null;function T0(a){UM(a,0)}function zu(a){var o=fe(a);if(kn(o))return a}function bf(a,o){if(a==="change")return o}var _f=!1;if(hr){var Af;if(hr){var xc="oninput"in document;if(!xc){var bc=document.createElement("div");bc.setAttribute("oninput","return;"),xc=typeof bc.oninput=="function"}Af=xc}else Af=!1;_f=Af&&(!document.documentMode||9<document.documentMode)}function yi(){yc&&(yc.detachEvent("onpropertychange",C0),Ml=yc=null)}function C0(a){if(a.propertyName==="value"&&zu(Ml)){var o=[];Ys(o,Ml,a,pf(a)),Ep(T0,o)}}function Qb(a,o,f){a==="focusin"?(yi(),yc=o,Ml=f,yc.attachEvent("onpropertychange",C0)):a==="focusout"&&yi()}function w0(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return zu(Ml)}function Gu(a,o){if(a==="click")return zu(o)}function Oo(a,o){if(a==="input"||a==="change")return zu(o)}function R0(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var qs=typeof Object.is=="function"?Object.is:R0;function Ya(a,o){if(qs(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var f=Object.keys(a),m=Object.keys(o);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var A=f[m];if(!zt.call(o,A)||!qs(a[A],o[A]))return!1}return!0}function Ws(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Pp(a,o){var f=Ws(a);a=0;for(var m;f;){if(f.nodeType===3){if(m=a+f.textContent.length,a<=o&&m>=o)return{node:f,offset:o-a};a=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Ws(f)}}function Fp(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Fp(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Hp(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=yn(a.document);o instanceof a.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)a=o.contentWindow;else break;o=yn(a.document)}return o}function ju(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var zp=hr&&"documentMode"in document&&11>=document.documentMode,Xr=null,Sf=null,ku=null,Mf=!1;function Gp(a,o,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Mf||Xr==null||Xr!==yn(m)||(m=Xr,"selectionStart"in m&&ju(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ku&&Ya(ku,m)||(ku=m,m=Mv(Sf,"onSelect"),0<m.length&&(o=new dc("onSelect","select",null,o,f),a.push({event:o,listeners:m}),o.target=Xr)))}function ls(a,o){var f={};return f[a.toLowerCase()]=o.toLowerCase(),f["Webkit"+a]="webkit"+o,f["Moz"+a]="moz"+o,f}var Lo={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},Ef={},B0={};hr&&(B0=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Yr(a){if(Ef[a])return Ef[a];if(!Lo[a])return a;var o=Lo[a],f;for(f in o)if(o.hasOwnProperty(f)&&f in B0)return Ef[a]=o[f];return a}var Ds=Yr("animationend"),jp=Yr("animationiteration"),Js=Yr("animationstart"),N0=Yr("transitionrun"),qr=Yr("transitionstart"),_c=Yr("transitioncancel"),Wr=Yr("transitionend"),Tf=new Map,Vu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vu.push("scrollEnd");function Qi(a,o){Tf.set(a,o),z(o,[a])}var kp=new WeakMap;function cs(a,o){if(typeof a=="object"&&a!==null){var f=kp.get(a);return f!==void 0?f:(o={value:a,source:o,stack:vn(o)},kp.set(a,o),o)}return{value:a,source:o,stack:vn(o)}}var xs=[],Ta=0,Cf=0;function Xu(){for(var a=Ta,o=Cf=Ta=0;o<a;){var f=xs[o];xs[o++]=null;var m=xs[o];xs[o++]=null;var A=xs[o];xs[o++]=null;var C=xs[o];if(xs[o++]=null,m!==null&&A!==null){var F=m.pending;F===null?A.next=A:(A.next=F.next,F.next=A),m.pending=A}C!==0&&Vp(f,A,C)}}function Io(a,o,f,m){xs[Ta++]=a,xs[Ta++]=o,xs[Ta++]=f,xs[Ta++]=m,Cf|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function wf(a,o,f,m){return Io(a,o,f,m),Ac(a)}function Jr(a,o){return Io(a,null,null,o),Ac(a)}function Vp(a,o,f){a.lanes|=f;var m=a.alternate;m!==null&&(m.lanes|=f);for(var A=!1,C=a.return;C!==null;)C.childLanes|=f,m=C.alternate,m!==null&&(m.childLanes|=f),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(A=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,A&&o!==null&&(A=31-xt(f),a=C.hiddenUpdates,m=a[A],m===null?a[A]=[o]:m.push(o),o.lane=f|536870912),C):null}function Ac(a){if(50<Er)throw Er=0,jl=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Po={};function Xp(a,o,f,m){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(a,o,f,m){return new Xp(a,o,f,m)}function Yu(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ni(a,o){var f=a.alternate;return f===null?(f=Ks(a.tag,o,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=o,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,o=a.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function Yp(a,o){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,o=f.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function $i(a,o,f,m,A,C){var F=0;if(m=a,typeof a=="function")Yu(a)&&(F=1);else if(typeof a=="string")F=MB(a,f,He.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case O:return a=Ks(31,f,o,A),a.elementType=O,a.lanes=C,a;case E:return Fo(f.children,A,C,o);case R:F=8,A|=24;break;case T:return a=Ks(12,f,o,A|2),a.elementType=T,a.lanes=C,a;case L:return a=Ks(13,f,o,A),a.elementType=L,a.lanes=C,a;case I:return a=Ks(19,f,o,A),a.elementType=I,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:case N:F=10;break e;case B:F=9;break e;case D:F=11;break e;case j:F=14;break e;case k:F=16,m=null;break e}F=29,f=Error(n(130,a===null?"null":typeof a,"")),m=null}return o=Ks(F,f,o,A),o.elementType=a,o.type=m,o.lanes=C,o}function Fo(a,o,f,m){return a=Ks(7,a,m,o),a.lanes=f,a}function qu(a,o,f){return a=Ks(6,a,null,o),a.lanes=f,a}function Rf(a,o,f){return o=Ks(4,a.children!==null?a.children:[],a.key,o),o.lanes=f,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Sc=[],Zs=0,Wu=null,Mc=0,us=[],aa=0,Ho=null,fr=1,dr="";function Kr(a,o){Sc[Zs++]=Mc,Sc[Zs++]=Wu,Wu=a,Mc=o}function Bf(a,o,f){us[aa++]=fr,us[aa++]=dr,us[aa++]=Ho,Ho=a;var m=fr;a=dr;var A=32-xt(m)-1;m&=~(1<<A),f+=1;var C=32-xt(o)+A;if(30<C){var F=A-A%5;C=(m&(1<<F)-1).toString(32),m>>=F,A-=F,fr=1<<32-xt(o)+A|f<<A|m,dr=C+a}else fr=1<<C|f<<A|m,dr=a}function qp(a){a.return!==null&&(Kr(a,1),Bf(a,1,0))}function Wp(a){for(;a===Wu;)Wu=Sc[--Zs],Sc[Zs]=null,Mc=Sc[--Zs],Sc[Zs]=null;for(;a===Ho;)Ho=us[--aa],us[aa]=null,dr=us[--aa],us[aa]=null,fr=us[--aa],us[aa]=null}var Us=null,xi=null,Fn=!1,Ca=null,ra=!1,Nf=Error(n(519));function zo(a){var o=Error(n(418,""));throw El(cs(o,a)),Nf}function D0(a){var o=a.stateNode,f=a.type,m=a.memoizedProps;switch(o[Si]=a,o[li]=m,f){case"dialog":Bn("cancel",o),Bn("close",o);break;case"iframe":case"object":case"embed":Bn("load",o);break;case"video":case"audio":for(f=0;f<Em.length;f++)Bn(Em[f],o);break;case"source":Bn("error",o);break;case"img":case"image":case"link":Bn("error",o),Bn("load",o);break;case"details":Bn("toggle",o);break;case"input":Bn("invalid",o),Wn(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),rn(o);break;case"select":Bn("invalid",o);break;case"textarea":Bn("invalid",o),_l(o,m.value,m.defaultValue,m.children),rn(o)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||o.textContent===""+f||m.suppressHydrationWarning===!0||PM(o.textContent,f)?(m.popover!=null&&(Bn("beforetoggle",o),Bn("toggle",o)),m.onScroll!=null&&Bn("scroll",o),m.onScrollEnd!=null&&Bn("scrollend",o),m.onClick!=null&&(o.onclick=Ev),o=!0):o=!1,o||zo(a)}function Jp(a){for(Us=a.return;Us;)switch(Us.tag){case 5:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:Us=Us.return}}function qa(a){if(a!==Us)return!1;if(!Fn)return Jp(a),Fn=!0,!1;var o=a.tag,f;if((f=o!==3&&o!==27)&&((f=o===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||y_(a.type,a.memoizedProps)),f=!f),f&&xi&&zo(a),Jp(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(f=a.data,f==="/$"){if(o===0){xi=uo(a.nextSibling);break e}o--}else f!=="$"&&f!=="$!"&&f!=="$?"||o++;a=a.nextSibling}xi=null}}else o===27?(o=xi,Jc(a.type)?(a=A_,A_=null,xi=a):xi=o):xi=Us?uo(a.stateNode.nextSibling):null;return!0}function Ec(){xi=Us=null,Fn=!1}function Vn(){var a=Ca;return a!==null&&(qt===null?qt=a:qt.push.apply(qt,a),Ca=null),a}function El(a){Ca===null?Ca=[a]:Ca.push(a)}var Kp=ce(null),Go=null,Zr=null;function jo(a,o,f){Te(Kp,o._currentValue),o._currentValue=f}function Qr(a){a._currentValue=Kp.current,xe(Kp)}function Zp(a,o,f){for(;a!==null;){var m=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),a===f)break;a=a.return}}function Ju(a,o,f,m){var A=a.child;for(A!==null&&(A.return=a);A!==null;){var C=A.dependencies;if(C!==null){var F=A.child;C=C.firstContext;e:for(;C!==null;){var q=C;C=A;for(var oe=0;oe<o.length;oe++)if(q.context===o[oe]){C.lanes|=f,q=C.alternate,q!==null&&(q.lanes|=f),Zp(C.return,f,a),m||(F=null);break e}C=q.next}}else if(A.tag===18){if(F=A.return,F===null)throw Error(n(341));F.lanes|=f,C=F.alternate,C!==null&&(C.lanes|=f),Zp(F,f,a),F=null}else F=A.child;if(F!==null)F.return=A;else for(F=A;F!==null;){if(F===a){F=null;break}if(A=F.sibling,A!==null){A.return=F.return,F=A;break}F=F.return}A=F}}function wa(a,o,f,m){a=null;for(var A=o,C=!1;A!==null;){if(!C){if((A.flags&524288)!==0)C=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var F=A.alternate;if(F===null)throw Error(n(387));if(F=F.memoizedProps,F!==null){var q=A.type;qs(A.pendingProps.value,F.value)||(a!==null?a.push(q):a=[q])}}else if(A===Ge.current){if(F=A.alternate,F===null)throw Error(n(387));F.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(a!==null?a.push(Nm):a=[Nm])}A=A.return}a!==null&&Ju(o,a,f,m),o.flags|=262144}function Ku(a){for(a=a.firstContext;a!==null;){if(!qs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function pr(a){Go=a,Zr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Mi(a){return Df(Go,a)}function Zu(a,o){return Go===null&&pr(a),Df(a,o)}function Df(a,o){var f=o._currentValue;if(o={context:o,memoizedValue:f,next:null},Zr===null){if(a===null)throw Error(n(308));Zr=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Zr=Zr.next=o;return f}var Qp=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(f,m){a.push(m)}};this.abort=function(){o.aborted=!0,a.forEach(function(f){return f()})}},$b=i.unstable_scheduleCallback,U0=i.unstable_NormalPriority,Hi={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uf(){return{controller:new Qp,data:new Map,refCount:0}}function Tc(a){a.refCount--,a.refCount===0&&$b(U0,function(){a.controller.abort()})}var Cc=null,Qu=0,hn=0,wc=null;function oa(a,o){if(Cc===null){var f=Cc=[];Qu=0,hn=c_(),wc={status:"pending",value:void 0,then:function(m){f.push(m)}}}return Qu++,o.then(Of,Of),o}function Of(){if(--Qu===0&&Cc!==null){wc!==null&&(wc.status="fulfilled");var a=Cc;Cc=null,hn=0,wc=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function e_(a,o){var f=[],m={status:"pending",value:null,reason:null,then:function(A){f.push(A)}};return a.then(function(){m.status="fulfilled",m.value=o;for(var A=0;A<f.length;A++)(0,f[A])(o)},function(A){for(m.status="rejected",m.reason=A,A=0;A<f.length;A++)(0,f[A])(void 0)}),m}var $u=H.S;H.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&oa(a,o),$u!==null&&$u(a,o)};var Ra=ce(null);function ko(){var a=Ra.current;return a!==null?a:ln.pooledCache}function eh(a,o){o===null?Te(Ra,Ra.current):Te(Ra,o.pool)}function Lf(){var a=ko();return a===null?null:{parent:Hi._currentValue,pool:a}}var th=Error(n(460)),$p=Error(n(474)),Wa=Error(n(542)),nh={then:function(){}};function If(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Rc(){}function Pf(a,o,f){switch(f=a[f],f===void 0?a.push(o):f!==o&&(o.then(Rc,Rc),o=f),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,O0(a),a;default:if(typeof o.status=="string")o.then(Rc,Rc);else{if(a=ln,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(m){if(o.status==="pending"){var A=o;A.status="fulfilled",A.value=m}},function(m){if(o.status==="pending"){var A=o;A.status="rejected",A.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,O0(a),a}throw Ba=o,th}}var Ba=null;function em(){if(Ba===null)throw Error(n(459));var a=Ba;return Ba=null,a}function O0(a){if(a===th||a===Wa)throw Error(n(483))}var $r=!1;function tm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function en(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function mr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function eo(a,o,f){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(Xn&2)!==0){var A=m.pending;return A===null?o.next=o:(o.next=A.next,A.next=o),m.pending=o,o=Ac(a),Vp(a,null,f),o}return Io(a,m,o,f),Ac(a)}function Tl(a,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194048)!==0)){var m=o.lanes;m&=a.pendingLanes,f|=m,o.lanes=f,Mt(a,f)}}function Bc(a,o){var f=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var A=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var F={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};C===null?A=C=F:C=C.next=F,f=f.next}while(f!==null);C===null?A=C=o:C=C.next=o}else A=C=o;f={baseState:m.baseState,firstBaseUpdate:A,lastBaseUpdate:C,shared:m.shared,callbacks:m.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=o:a.next=o,f.lastBaseUpdate=o}var nm=!1;function ih(){if(nm){var a=wc;if(a!==null)throw a}}function Nc(a,o,f,m){nm=!1;var A=a.updateQueue;$r=!1;var C=A.firstBaseUpdate,F=A.lastBaseUpdate,q=A.shared.pending;if(q!==null){A.shared.pending=null;var oe=q,we=oe.next;oe.next=null,F===null?C=we:F.next=we,F=oe;var Ke=a.alternate;Ke!==null&&(Ke=Ke.updateQueue,q=Ke.lastBaseUpdate,q!==F&&(q===null?Ke.firstBaseUpdate=we:q.next=we,Ke.lastBaseUpdate=oe))}if(C!==null){var it=A.baseState;F=0,Ke=we=oe=null,q=C;do{var De=q.lane&-536870913,Ue=De!==q.lane;if(Ue?(Vt&De)===De:(m&De)===De){De!==0&&De===hn&&(nm=!0),Ke!==null&&(Ke=Ke.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var sn=a,Qt=q;De=o;var pi=f;switch(Qt.tag){case 1:if(sn=Qt.payload,typeof sn=="function"){it=sn.call(pi,it,De);break e}it=sn;break e;case 3:sn.flags=sn.flags&-65537|128;case 0:if(sn=Qt.payload,De=typeof sn=="function"?sn.call(pi,it,De):sn,De==null)break e;it=y({},it,De);break e;case 2:$r=!0}}De=q.callback,De!==null&&(a.flags|=64,Ue&&(a.flags|=8192),Ue=A.callbacks,Ue===null?A.callbacks=[De]:Ue.push(De))}else Ue={lane:De,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Ke===null?(we=Ke=Ue,oe=it):Ke=Ke.next=Ue,F|=De;if(q=q.next,q===null){if(q=A.shared.pending,q===null)break;Ue=q,q=Ue.next,Ue.next=null,A.lastBaseUpdate=Ue,A.shared.pending=null}}while(!0);Ke===null&&(oe=it),A.baseState=oe,A.firstBaseUpdate=we,A.lastBaseUpdate=Ke,C===null&&(A.shared.lanes=0),nr|=F,a.lanes=F,a.memoizedState=it}}function Dc(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function L0(a,o){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)Dc(f[a],o)}var Uc=ce(null),Ff=ce(0);function I0(a,o){a=Ia,Te(Ff,a),Te(Uc,o),Ia=a|o.baseLanes}function im(){Te(Ff,Ia),Te(Uc,Uc.current)}function sh(){Ia=Ff.current,xe(Uc),xe(Ff)}var to=0,fn=null,Jn=null,zi=null,Hf=!1,Vo=!1,Os=!1,Xi=0,Na=0,hs=null,P0=0;function Di(){throw Error(n(321))}function bs(a,o){if(o===null)return!1;for(var f=0;f<o.length&&f<a.length;f++)if(!qs(a[f],o[f]))return!1;return!0}function no(a,o,f,m,A,C){return to=C,fn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,H.H=a===null||a.memoizedState===null?Wf:xm,Os=!1,C=f(m,A),Os=!1,Vo&&(C=H0(o,f,m,A)),F0(a),C}function F0(a){H.H=oh;var o=Jn!==null&&Jn.next!==null;if(to=0,zi=Jn=fn=null,Hf=!1,Na=0,hs=null,o)throw Error(n(300));a===null||es||(a=a.dependencies,a!==null&&Ku(a)&&(es=!0))}function H0(a,o,f,m){fn=a;var A=0;do{if(Vo&&(hs=null),Na=0,Vo=!1,25<=A)throw Error(n(301));if(A+=1,zi=Jn=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}H.H=hv,C=o(f,m)}while(Vo);return C}function t_(){var a=H.H,o=a.useState()[0];return o=typeof o.then=="function"?Ja(o):o,a=a.useState()[0],(Jn!==null?Jn.memoizedState:null)!==a&&(fn.flags|=1024),o}function sm(){var a=Xi!==0;return Xi=0,a}function zf(a,o,f){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~f}function am(a){if(Hf){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Hf=!1}to=0,zi=Jn=fn=null,Vo=!1,Na=Xi=0,hs=null}function Ls(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zi===null?fn.memoizedState=zi=a:zi=zi.next=a,zi}function Gi(){if(Jn===null){var a=fn.alternate;a=a!==null?a.memoizedState:null}else a=Jn.next;var o=zi===null?fn.memoizedState:zi.next;if(o!==null)zi=o,Jn=a;else{if(a===null)throw fn.alternate===null?Error(n(467)):Error(n(310));Jn=a,a={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},zi===null?fn.memoizedState=zi=a:zi=zi.next=a}return zi}function Xo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ja(a){var o=Na;return Na+=1,hs===null&&(hs=[]),a=Pf(hs,a,o),o=fn,(zi===null?o.memoizedState:zi.next)===null&&(o=o.alternate,H.H=o===null||o.memoizedState===null?Wf:xm),a}function Gf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ja(a);if(a.$$typeof===N)return Mi(a)}throw Error(n(438,String(a)))}function rm(a){var o=null,f=fn.updateQueue;if(f!==null&&(o=f.memoCache),o==null){var m=fn.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(A){return A.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),f===null&&(f=Xo(),fn.updateQueue=f),f.memoCache=o,f=o.data[o.index],f===void 0)for(f=o.data[o.index]=Array(a),m=0;m<a;m++)f[m]=P;return o.index++,f}function io(a,o){return typeof o=="function"?o(a):o}function Yo(a){var o=Gi();return om(o,Jn,a)}function om(a,o,f){var m=a.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=f;var A=a.baseQueue,C=m.pending;if(C!==null){if(A!==null){var F=A.next;A.next=C.next,C.next=F}o.baseQueue=A=C,m.pending=null}if(C=a.baseState,A===null)a.memoizedState=C;else{o=A.next;var q=F=null,oe=null,we=o,Ke=!1;do{var it=we.lane&-536870913;if(it!==we.lane?(Vt&it)===it:(to&it)===it){var De=we.revertLane;if(De===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),it===hn&&(Ke=!0);else if((to&De)===De){we=we.next,De===hn&&(Ke=!0);continue}else it={lane:0,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},oe===null?(q=oe=it,F=C):oe=oe.next=it,fn.lanes|=De,nr|=De;it=we.action,Os&&f(C,it),C=we.hasEagerState?we.eagerState:f(C,it)}else De={lane:it,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},oe===null?(q=oe=De,F=C):oe=oe.next=De,fn.lanes|=it,nr|=it;we=we.next}while(we!==null&&we!==o);if(oe===null?F=C:oe.next=q,!qs(C,a.memoizedState)&&(es=!0,Ke&&(f=wc,f!==null)))throw f;a.memoizedState=C,a.baseState=F,a.baseQueue=oe,m.lastRenderedState=C}return A===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function lm(a){var o=Gi(),f=o.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=a;var m=f.dispatch,A=f.pending,C=o.memoizedState;if(A!==null){f.pending=null;var F=A=A.next;do C=a(C,F.action),F=F.next;while(F!==A);qs(C,o.memoizedState)||(es=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),f.lastRenderedState=C}return[C,m]}function z0(a,o,f){var m=fn,A=Gi(),C=Fn;if(C){if(f===void 0)throw Error(n(407));f=f()}else f=o();var F=!qs((Jn||A).memoizedState,f);F&&(A.memoizedState=f,es=!0),A=A.queue;var q=j0.bind(null,m,A,a);if(Ic(2048,8,q,[a]),A.getSnapshot!==o||F||zi!==null&&zi.memoizedState.tag&1){if(m.flags|=2048,Lc(9,ah(),G0.bind(null,m,A,f,o),null),ln===null)throw Error(n(349));C||(to&124)!==0||Oc(m,o,f)}return f}function Oc(a,o,f){a.flags|=16384,a={getSnapshot:o,value:f},o=fn.updateQueue,o===null?(o=Xo(),fn.updateQueue=o,o.stores=[a]):(f=o.stores,f===null?o.stores=[a]:f.push(a))}function G0(a,o,f,m){o.value=f,o.getSnapshot=m,k0(o)&&V0(a)}function j0(a,o,f){return f(function(){k0(o)&&V0(a)})}function k0(a){var o=a.getSnapshot;a=a.value;try{var f=o();return!qs(a,f)}catch{return!0}}function V0(a){var o=Jr(a,2);o!==null&&Fs(o,a,2)}function cm(a){var o=Ls();if(typeof a=="function"){var f=a;if(a=f(),Os){Pe(!0);try{f()}finally{Pe(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:a},o}function X0(a,o,f,m){return a.baseState=f,om(a,Jn,typeof m=="function"?m:io)}function n_(a,o,f,m,A){if(qf(a))throw Error(n(485));if(a=o.action,a!==null){var C={payload:A,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){C.listeners.push(F)}};H.T!==null?f(!0):C.isTransition=!1,m(C),f=o.pending,f===null?(C.next=o.pending=C,Y0(o,C)):(C.next=f.next,o.pending=f.next=C)}}function Y0(a,o){var f=o.action,m=o.payload,A=a.state;if(o.isTransition){var C=H.T,F={};H.T=F;try{var q=f(A,m),oe=H.S;oe!==null&&oe(F,q),q0(a,o,q)}catch(we){um(a,o,we)}finally{H.T=C}}else try{C=f(A,m),q0(a,o,C)}catch(we){um(a,o,we)}}function q0(a,o,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){W0(a,o,m)},function(m){return um(a,o,m)}):W0(a,o,f)}function W0(a,o,f){o.status="fulfilled",o.value=f,J0(o),a.state=f,o=a.pending,o!==null&&(f=o.next,f===o?a.pending=null:(f=f.next,o.next=f,Y0(a,f)))}function um(a,o,f){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=f,J0(o),o=o.next;while(o!==m)}a.action=null}function J0(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function hm(a,o){return o}function K0(a,o){if(Fn){var f=ln.formState;if(f!==null){e:{var m=fn;if(Fn){if(xi){t:{for(var A=xi,C=ra;A.nodeType!==8;){if(!C){A=null;break t}if(A=uo(A.nextSibling),A===null){A=null;break t}}C=A.data,A=C==="F!"||C==="F"?A:null}if(A){xi=uo(A.nextSibling),m=A.data==="F!";break e}}zo(m)}m=!1}m&&(o=f[0])}}return f=Ls(),f.memoizedState=f.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hm,lastRenderedState:o},f.queue=m,f=cv.bind(null,fn,m),m.dispatch=f,m=cm(!1),C=Yf.bind(null,fn,!1,m.queue),m=Ls(),A={state:o,dispatch:null,action:a,pending:null},m.queue=A,f=n_.bind(null,fn,A,C,f),A.dispatch=f,m.memoizedState=a,[o,f,!1]}function Z0(a){var o=Gi();return Q0(o,Jn,a)}function Q0(a,o,f){if(o=om(a,o,hm)[0],a=Yo(io)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Ja(o)}catch(F){throw F===th?Wa:F}else m=o;o=Gi();var A=o.queue,C=A.dispatch;return f!==o.memoizedState&&(fn.flags|=2048,Lc(9,ah(),i_.bind(null,A,f),null)),[m,C,a]}function i_(a,o){a.action=o}function $0(a){var o=Gi(),f=Jn;if(f!==null)return Q0(o,f,a);Gi(),o=o.memoizedState,f=Gi();var m=f.queue.dispatch;return f.memoizedState=a,[o,m,!1]}function Lc(a,o,f,m){return a={tag:a,create:f,deps:m,inst:o,next:null},o=fn.updateQueue,o===null&&(o=Xo(),fn.updateQueue=o),f=o.lastEffect,f===null?o.lastEffect=a.next=a:(m=f.next,f.next=a,a.next=m,o.lastEffect=a),a}function ah(){return{destroy:void 0,resource:void 0}}function fm(){return Gi().memoizedState}function jf(a,o,f,m){var A=Ls();m=m===void 0?null:m,fn.flags|=a,A.memoizedState=Lc(1|o,ah(),f,m)}function Ic(a,o,f,m){var A=Gi();m=m===void 0?null:m;var C=A.memoizedState.inst;Jn!==null&&m!==null&&bs(m,Jn.memoizedState.deps)?A.memoizedState=Lc(o,C,f,m):(fn.flags|=a,A.memoizedState=Lc(1|o,C,f,m))}function dm(a,o){jf(8390656,8,a,o)}function pm(a,o){Ic(2048,8,a,o)}function kf(a,o){return Ic(4,2,a,o)}function Vf(a,o){return Ic(4,4,a,o)}function ev(a,o){if(typeof o=="function"){a=a();var f=o(a);return function(){typeof f=="function"?f():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function tv(a,o,f){f=f!=null?f.concat([a]):null,Ic(4,4,ev.bind(null,o,a),f)}function mm(){}function nv(a,o){var f=Gi();o=o===void 0?null:o;var m=f.memoizedState;return o!==null&&bs(o,m[1])?m[0]:(f.memoizedState=[a,o],a)}function gm(a,o){var f=Gi();o=o===void 0?null:o;var m=f.memoizedState;if(o!==null&&bs(o,m[1]))return m[0];if(m=a(),Os){Pe(!0);try{a()}finally{Pe(!1)}}return f.memoizedState=[m,o],m}function Xf(a,o,f){return f===void 0||(to&1073741824)!==0?a.memoizedState=o:(a.memoizedState=f,a=ad(),fn.lanes|=a,nr|=a,f)}function iv(a,o,f,m){return qs(f,o)?f:Uc.current!==null?(a=Xf(a,f,m),qs(a,o)||(es=!0),a):(to&42)===0?(es=!0,a.memoizedState=f):(a=ad(),fn.lanes|=a,nr|=a,o)}function sv(a,o,f,m,A){var C=Z.p;Z.p=C!==0&&8>C?C:8;var F=H.T,q={};H.T=q,Yf(a,!1,o,f);try{var oe=A(),we=H.S;if(we!==null&&we(q,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Ke=e_(oe,m);rh(a,o,Ke,Ci(a))}else rh(a,o,m,Ci(a))}catch(it){rh(a,o,{then:function(){},status:"rejected",reason:it},Ci())}finally{Z.p=C,H.T=F}}function s_(){}function vm(a,o,f,m){if(a.tag!==5)throw Error(n(476));var A=av(a).queue;sv(a,A,o,$,f===null?s_:function(){return rv(a),f(m)})}function av(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:$},next:null};var f={};return o.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:f},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function rv(a){var o=av(a).next.queue;rh(a,o,{},Ci())}function ym(){return Mi(Nm)}function ov(){return Gi().memoizedState}function lv(){return Gi().memoizedState}function a_(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var f=Ci();a=mr(f);var m=eo(o,a,f);m!==null&&(Fs(m,o,f),Tl(m,o,f)),o={cache:Uf()},a.payload=o;return}o=o.return}}function r_(a,o,f){var m=Ci();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},qf(a)?uv(o,f):(f=wf(a,o,f,m),f!==null&&(Fs(f,a,m),la(f,o,m)))}function cv(a,o,f){var m=Ci();rh(a,o,f,m)}function rh(a,o,f,m){var A={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(qf(a))uv(o,A);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var F=o.lastRenderedState,q=C(F,f);if(A.hasEagerState=!0,A.eagerState=q,qs(q,F))return Io(a,o,A,0),ln===null&&Xu(),!1}catch{}finally{}if(f=wf(a,o,A,m),f!==null)return Fs(f,a,m),la(f,o,m),!0}return!1}function Yf(a,o,f,m){if(m={lane:2,revertLane:c_(),action:m,hasEagerState:!1,eagerState:null,next:null},qf(a)){if(o)throw Error(n(479))}else o=wf(a,f,m,2),o!==null&&Fs(o,a,2)}function qf(a){var o=a.alternate;return a===fn||o!==null&&o===fn}function uv(a,o){Vo=Hf=!0;var f=a.pending;f===null?o.next=o:(o.next=f.next,f.next=o),a.pending=o}function la(a,o,f){if((f&4194048)!==0){var m=o.lanes;m&=a.pendingLanes,f|=m,o.lanes=f,Mt(a,f)}}var oh={readContext:Mi,use:Gf,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useLayoutEffect:Di,useInsertionEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useSyncExternalStore:Di,useId:Di,useHostTransitionStatus:Di,useFormState:Di,useActionState:Di,useOptimistic:Di,useMemoCache:Di,useCacheRefresh:Di},Wf={readContext:Mi,use:Gf,useCallback:function(a,o){return Ls().memoizedState=[a,o===void 0?null:o],a},useContext:Mi,useEffect:dm,useImperativeHandle:function(a,o,f){f=f!=null?f.concat([a]):null,jf(4194308,4,ev.bind(null,o,a),f)},useLayoutEffect:function(a,o){return jf(4194308,4,a,o)},useInsertionEffect:function(a,o){jf(4,2,a,o)},useMemo:function(a,o){var f=Ls();o=o===void 0?null:o;var m=a();if(Os){Pe(!0);try{a()}finally{Pe(!1)}}return f.memoizedState=[m,o],m},useReducer:function(a,o,f){var m=Ls();if(f!==void 0){var A=f(o);if(Os){Pe(!0);try{f(o)}finally{Pe(!1)}}}else A=o;return m.memoizedState=m.baseState=A,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:A},m.queue=a,a=a.dispatch=r_.bind(null,fn,a),[m.memoizedState,a]},useRef:function(a){var o=Ls();return a={current:a},o.memoizedState=a},useState:function(a){a=cm(a);var o=a.queue,f=cv.bind(null,fn,o);return o.dispatch=f,[a.memoizedState,f]},useDebugValue:mm,useDeferredValue:function(a,o){var f=Ls();return Xf(f,a,o)},useTransition:function(){var a=cm(!1);return a=sv.bind(null,fn,a.queue,!0,!1),Ls().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,f){var m=fn,A=Ls();if(Fn){if(f===void 0)throw Error(n(407));f=f()}else{if(f=o(),ln===null)throw Error(n(349));(Vt&124)!==0||Oc(m,o,f)}A.memoizedState=f;var C={value:f,getSnapshot:o};return A.queue=C,dm(j0.bind(null,m,C,a),[a]),m.flags|=2048,Lc(9,ah(),G0.bind(null,m,C,f,o),null),f},useId:function(){var a=Ls(),o=ln.identifierPrefix;if(Fn){var f=dr,m=fr;f=(m&~(1<<32-xt(m)-1)).toString(32)+f,o=""+o+"R"+f,f=Xi++,0<f&&(o+="H"+f.toString(32)),o+=""}else f=P0++,o=""+o+"r"+f.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:ym,useFormState:K0,useActionState:K0,useOptimistic:function(a){var o=Ls();o.memoizedState=o.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=f,o=Yf.bind(null,fn,!0,f),f.dispatch=o,[a,o]},useMemoCache:rm,useCacheRefresh:function(){return Ls().memoizedState=a_.bind(null,fn)}},xm={readContext:Mi,use:Gf,useCallback:nv,useContext:Mi,useEffect:pm,useImperativeHandle:tv,useInsertionEffect:kf,useLayoutEffect:Vf,useMemo:gm,useReducer:Yo,useRef:fm,useState:function(){return Yo(io)},useDebugValue:mm,useDeferredValue:function(a,o){var f=Gi();return iv(f,Jn.memoizedState,a,o)},useTransition:function(){var a=Yo(io)[0],o=Gi().memoizedState;return[typeof a=="boolean"?a:Ja(a),o]},useSyncExternalStore:z0,useId:ov,useHostTransitionStatus:ym,useFormState:Z0,useActionState:Z0,useOptimistic:function(a,o){var f=Gi();return X0(f,Jn,a,o)},useMemoCache:rm,useCacheRefresh:lv},hv={readContext:Mi,use:Gf,useCallback:nv,useContext:Mi,useEffect:pm,useImperativeHandle:tv,useInsertionEffect:kf,useLayoutEffect:Vf,useMemo:gm,useReducer:lm,useRef:fm,useState:function(){return lm(io)},useDebugValue:mm,useDeferredValue:function(a,o){var f=Gi();return Jn===null?Xf(f,a,o):iv(f,Jn.memoizedState,a,o)},useTransition:function(){var a=lm(io)[0],o=Gi().memoizedState;return[typeof a=="boolean"?a:Ja(a),o]},useSyncExternalStore:z0,useId:ov,useHostTransitionStatus:ym,useFormState:$0,useActionState:$0,useOptimistic:function(a,o){var f=Gi();return Jn!==null?X0(f,Jn,a,o):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:rm,useCacheRefresh:lv},Cl=null,lh=0;function ch(a){var o=lh;return lh+=1,Cl===null&&(Cl=[]),Pf(Cl,a,o)}function Pc(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Jf(a,o){throw o.$$typeof===x?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function fv(a){var o=a._init;return o(a._payload)}function dv(a){function o(_e,ye){if(a){var Ce=_e.deletions;Ce===null?(_e.deletions=[ye],_e.flags|=16):Ce.push(ye)}}function f(_e,ye){if(!a)return null;for(;ye!==null;)o(_e,ye),ye=ye.sibling;return null}function m(_e){for(var ye=new Map;_e!==null;)_e.key!==null?ye.set(_e.key,_e):ye.set(_e.index,_e),_e=_e.sibling;return ye}function A(_e,ye){return _e=Ni(_e,ye),_e.index=0,_e.sibling=null,_e}function C(_e,ye,Ce){return _e.index=Ce,a?(Ce=_e.alternate,Ce!==null?(Ce=Ce.index,Ce<ye?(_e.flags|=67108866,ye):Ce):(_e.flags|=67108866,ye)):(_e.flags|=1048576,ye)}function F(_e){return a&&_e.alternate===null&&(_e.flags|=67108866),_e}function q(_e,ye,Ce,et){return ye===null||ye.tag!==6?(ye=qu(Ce,_e.mode,et),ye.return=_e,ye):(ye=A(ye,Ce),ye.return=_e,ye)}function oe(_e,ye,Ce,et){var Lt=Ce.type;return Lt===E?Ke(_e,ye,Ce.props.children,et,Ce.key):ye!==null&&(ye.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===k&&fv(Lt)===ye.type)?(ye=A(ye,Ce.props),Pc(ye,Ce),ye.return=_e,ye):(ye=$i(Ce.type,Ce.key,Ce.props,null,_e.mode,et),Pc(ye,Ce),ye.return=_e,ye)}function we(_e,ye,Ce,et){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ce.containerInfo||ye.stateNode.implementation!==Ce.implementation?(ye=Rf(Ce,_e.mode,et),ye.return=_e,ye):(ye=A(ye,Ce.children||[]),ye.return=_e,ye)}function Ke(_e,ye,Ce,et,Lt){return ye===null||ye.tag!==7?(ye=Fo(Ce,_e.mode,et,Lt),ye.return=_e,ye):(ye=A(ye,Ce),ye.return=_e,ye)}function it(_e,ye,Ce){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=qu(""+ye,_e.mode,Ce),ye.return=_e,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return Ce=$i(ye.type,ye.key,ye.props,null,_e.mode,Ce),Pc(Ce,ye),Ce.return=_e,Ce;case _:return ye=Rf(ye,_e.mode,Ce),ye.return=_e,ye;case k:var et=ye._init;return ye=et(ye._payload),it(_e,ye,Ce)}if(pe(ye)||ie(ye))return ye=Fo(ye,_e.mode,Ce,null),ye.return=_e,ye;if(typeof ye.then=="function")return it(_e,ch(ye),Ce);if(ye.$$typeof===N)return it(_e,Zu(_e,ye),Ce);Jf(_e,ye)}return null}function De(_e,ye,Ce,et){var Lt=ye!==null?ye.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Lt!==null?null:q(_e,ye,""+Ce,et);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case b:return Ce.key===Lt?oe(_e,ye,Ce,et):null;case _:return Ce.key===Lt?we(_e,ye,Ce,et):null;case k:return Lt=Ce._init,Ce=Lt(Ce._payload),De(_e,ye,Ce,et)}if(pe(Ce)||ie(Ce))return Lt!==null?null:Ke(_e,ye,Ce,et,null);if(typeof Ce.then=="function")return De(_e,ye,ch(Ce),et);if(Ce.$$typeof===N)return De(_e,ye,Zu(_e,Ce),et);Jf(_e,Ce)}return null}function Ue(_e,ye,Ce,et,Lt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return _e=_e.get(Ce)||null,q(ye,_e,""+et,Lt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case b:return _e=_e.get(et.key===null?Ce:et.key)||null,oe(ye,_e,et,Lt);case _:return _e=_e.get(et.key===null?Ce:et.key)||null,we(ye,_e,et,Lt);case k:var wn=et._init;return et=wn(et._payload),Ue(_e,ye,Ce,et,Lt)}if(pe(et)||ie(et))return _e=_e.get(Ce)||null,Ke(ye,_e,et,Lt,null);if(typeof et.then=="function")return Ue(_e,ye,Ce,ch(et),Lt);if(et.$$typeof===N)return Ue(_e,ye,Ce,Zu(ye,et),Lt);Jf(ye,et)}return null}function sn(_e,ye,Ce,et){for(var Lt=null,wn=null,jt=ye,$t=ye=0,Ss=null;jt!==null&&$t<Ce.length;$t++){jt.index>$t?(Ss=jt,jt=null):Ss=jt.sibling;var qn=De(_e,jt,Ce[$t],et);if(qn===null){jt===null&&(jt=Ss);break}a&&jt&&qn.alternate===null&&o(_e,jt),ye=C(qn,ye,$t),wn===null?Lt=qn:wn.sibling=qn,wn=qn,jt=Ss}if($t===Ce.length)return f(_e,jt),Fn&&Kr(_e,$t),Lt;if(jt===null){for(;$t<Ce.length;$t++)jt=it(_e,Ce[$t],et),jt!==null&&(ye=C(jt,ye,$t),wn===null?Lt=jt:wn.sibling=jt,wn=jt);return Fn&&Kr(_e,$t),Lt}for(jt=m(jt);$t<Ce.length;$t++)Ss=Ue(jt,_e,$t,Ce[$t],et),Ss!==null&&(a&&Ss.alternate!==null&&jt.delete(Ss.key===null?$t:Ss.key),ye=C(Ss,ye,$t),wn===null?Lt=Ss:wn.sibling=Ss,wn=Ss);return a&&jt.forEach(function(eu){return o(_e,eu)}),Fn&&Kr(_e,$t),Lt}function Qt(_e,ye,Ce,et){if(Ce==null)throw Error(n(151));for(var Lt=null,wn=null,jt=ye,$t=ye=0,Ss=null,qn=Ce.next();jt!==null&&!qn.done;$t++,qn=Ce.next()){jt.index>$t?(Ss=jt,jt=null):Ss=jt.sibling;var eu=De(_e,jt,qn.value,et);if(eu===null){jt===null&&(jt=Ss);break}a&&jt&&eu.alternate===null&&o(_e,jt),ye=C(eu,ye,$t),wn===null?Lt=eu:wn.sibling=eu,wn=eu,jt=Ss}if(qn.done)return f(_e,jt),Fn&&Kr(_e,$t),Lt;if(jt===null){for(;!qn.done;$t++,qn=Ce.next())qn=it(_e,qn.value,et),qn!==null&&(ye=C(qn,ye,$t),wn===null?Lt=qn:wn.sibling=qn,wn=qn);return Fn&&Kr(_e,$t),Lt}for(jt=m(jt);!qn.done;$t++,qn=Ce.next())qn=Ue(jt,_e,$t,qn.value,et),qn!==null&&(a&&qn.alternate!==null&&jt.delete(qn.key===null?$t:qn.key),ye=C(qn,ye,$t),wn===null?Lt=qn:wn.sibling=qn,wn=qn);return a&&jt.forEach(function(IB){return o(_e,IB)}),Fn&&Kr(_e,$t),Lt}function pi(_e,ye,Ce,et){if(typeof Ce=="object"&&Ce!==null&&Ce.type===E&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case b:e:{for(var Lt=Ce.key;ye!==null;){if(ye.key===Lt){if(Lt=Ce.type,Lt===E){if(ye.tag===7){f(_e,ye.sibling),et=A(ye,Ce.props.children),et.return=_e,_e=et;break e}}else if(ye.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===k&&fv(Lt)===ye.type){f(_e,ye.sibling),et=A(ye,Ce.props),Pc(et,Ce),et.return=_e,_e=et;break e}f(_e,ye);break}else o(_e,ye);ye=ye.sibling}Ce.type===E?(et=Fo(Ce.props.children,_e.mode,et,Ce.key),et.return=_e,_e=et):(et=$i(Ce.type,Ce.key,Ce.props,null,_e.mode,et),Pc(et,Ce),et.return=_e,_e=et)}return F(_e);case _:e:{for(Lt=Ce.key;ye!==null;){if(ye.key===Lt)if(ye.tag===4&&ye.stateNode.containerInfo===Ce.containerInfo&&ye.stateNode.implementation===Ce.implementation){f(_e,ye.sibling),et=A(ye,Ce.children||[]),et.return=_e,_e=et;break e}else{f(_e,ye);break}else o(_e,ye);ye=ye.sibling}et=Rf(Ce,_e.mode,et),et.return=_e,_e=et}return F(_e);case k:return Lt=Ce._init,Ce=Lt(Ce._payload),pi(_e,ye,Ce,et)}if(pe(Ce))return sn(_e,ye,Ce,et);if(ie(Ce)){if(Lt=ie(Ce),typeof Lt!="function")throw Error(n(150));return Ce=Lt.call(Ce),Qt(_e,ye,Ce,et)}if(typeof Ce.then=="function")return pi(_e,ye,ch(Ce),et);if(Ce.$$typeof===N)return pi(_e,ye,Zu(_e,Ce),et);Jf(_e,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,ye!==null&&ye.tag===6?(f(_e,ye.sibling),et=A(ye,Ce),et.return=_e,_e=et):(f(_e,ye),et=qu(Ce,_e.mode,et),et.return=_e,_e=et),F(_e)):f(_e,ye)}return function(_e,ye,Ce,et){try{lh=0;var Lt=pi(_e,ye,Ce,et);return Cl=null,Lt}catch(jt){if(jt===th||jt===Wa)throw jt;var wn=Ks(29,jt,null,_e.mode);return wn.lanes=et,wn.return=_e,wn}finally{}}}var wl=dv(!0),pv=dv(!1),ii=ce(null),Ka=null;function qo(a){var o=a.alternate;Te(Ui,Ui.current&1),Te(ii,a),Ka===null&&(o===null||Uc.current!==null||o.memoizedState!==null)&&(Ka=a)}function mv(a){if(a.tag===22){if(Te(Ui,Ui.current),Te(ii,a),Ka===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(Ka=a)}}else Wo()}function Wo(){Te(Ui,Ui.current),Te(ii,ii.current)}function gr(a){xe(ii),Ka===a&&(Ka=null),xe(Ui)}var Ui=ce(0);function so(a){for(var o=a;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||__(f)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Jo(a,o,f,m){o=a.memoizedState,f=f(m,o),f=f==null?o:y({},o,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Is={enqueueSetState:function(a,o,f){a=a._reactInternals;var m=Ci(),A=mr(m);A.payload=o,f!=null&&(A.callback=f),o=eo(a,A,m),o!==null&&(Fs(o,a,m),Tl(o,a,m))},enqueueReplaceState:function(a,o,f){a=a._reactInternals;var m=Ci(),A=mr(m);A.tag=1,A.payload=o,f!=null&&(A.callback=f),o=eo(a,A,m),o!==null&&(Fs(o,a,m),Tl(o,a,m))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var f=Ci(),m=mr(f);m.tag=2,o!=null&&(m.callback=o),o=eo(a,m,f),o!==null&&(Fs(o,a,f),Tl(o,a,f))}};function gv(a,o,f,m,A,C,F){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,C,F):o.prototype&&o.prototype.isPureReactComponent?!Ya(f,m)||!Ya(A,C):!0}function vv(a,o,f,m){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,m),o.state!==a&&Is.enqueueReplaceState(o,o.state,null)}function vr(a,o){var f=o;if("ref"in o){f={};for(var m in o)m!=="ref"&&(f[m]=o[m])}if(a=a.defaultProps){f===o&&(f=y({},f));for(var A in a)f[A]===void 0&&(f[A]=a[A])}return f}var Rl=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function uh(a){Rl(a)}function Kf(a){console.error(a)}function yv(a){Rl(a)}function Zf(a,o){try{var f=a.onUncaughtError;f(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function Da(a,o,f){try{var m=a.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Qf(a,o,f){return f=mr(f),f.tag=3,f.payload={element:null},f.callback=function(){Zf(a,o)},f}function xv(a){return a=mr(a),a.tag=3,a}function $f(a,o,f,m){var A=f.type.getDerivedStateFromError;if(typeof A=="function"){var C=m.value;a.payload=function(){return A(C)},a.callback=function(){Da(o,f,m)}}var F=f.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(a.callback=function(){Da(o,f,m),typeof A!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var q=m.stack;this.componentDidCatch(m.value,{componentStack:q!==null?q:""})})}function o_(a,o,f,m,A){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=f.alternate,o!==null&&wa(o,f,A,!0),f=ii.current,f!==null){switch(f.tag){case 13:return Ka===null?l():f.alternate===null&&gi===0&&(gi=3),f.flags&=-257,f.flags|=65536,f.lanes=A,m===nh?f.flags|=16384:(o=f.updateQueue,o===null?f.updateQueue=new Set([m]):o.add(m),Oe(a,m,A)),!1;case 22:return f.flags|=65536,m===nh?f.flags|=16384:(o=f.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=o):(f=o.retryQueue,f===null?o.retryQueue=new Set([m]):f.add(m)),Oe(a,m,A)),!1}throw Error(n(435,f.tag))}return Oe(a,m,A),l(),!1}if(Fn)return o=ii.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=A,m!==Nf&&(a=Error(n(422),{cause:m}),El(cs(a,f)))):(m!==Nf&&(o=Error(n(423),{cause:m}),El(cs(o,f))),a=a.current.alternate,a.flags|=65536,A&=-A,a.lanes|=A,m=cs(m,f),A=Qf(a.stateNode,m,A),Bc(a,A),gi!==4&&(gi=2)),!1;var C=Error(n(520),{cause:m});if(C=cs(C,f),Yn===null?Yn=[C]:Yn.push(C),gi!==4&&(gi=2),o===null)return!0;m=cs(m,f),f=o;do{switch(f.tag){case 3:return f.flags|=65536,a=A&-A,f.lanes|=a,a=Qf(f.stateNode,m,a),Bc(f,a),!1;case 1:if(o=f.type,C=f.stateNode,(f.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ga===null||!ga.has(C))))return f.flags|=65536,A&=-A,f.lanes|=A,A=xv(A),$f(A,a,f,m),Bc(f,A),!1}f=f.return}while(f!==null);return!1}var bv=Error(n(461)),es=!1;function Oi(a,o,f,m){o.child=a===null?pv(o,null,f,m):wl(o,a.child,f,m)}function Qs(a,o,f,m,A){f=f.render;var C=o.ref;if("ref"in m){var F={};for(var q in m)q!=="ref"&&(F[q]=m[q])}else F=m;return pr(o),m=no(a,o,f,F,C,A),q=sm(),a!==null&&!es?(zf(a,o,A),ts(a,o,A)):(Fn&&q&&qp(o),o.flags|=1,Oi(a,o,m,A),o.child)}function $s(a,o,f,m,A){if(a===null){var C=f.type;return typeof C=="function"&&!Yu(C)&&C.defaultProps===void 0&&f.compare===null?(o.tag=15,o.type=C,bm(a,o,C,m,A)):(a=$i(f.type,null,m,o,o.mode,A),a.ref=o.ref,a.return=o,o.child=a)}if(C=a.child,!hh(a,A)){var F=C.memoizedProps;if(f=f.compare,f=f!==null?f:Ya,f(F,m)&&a.ref===o.ref)return ts(a,o,A)}return o.flags|=1,a=Ni(C,m),a.ref=o.ref,a.return=o,o.child=a}function bm(a,o,f,m,A){if(a!==null){var C=a.memoizedProps;if(Ya(C,m)&&a.ref===o.ref)if(es=!1,o.pendingProps=m=C,hh(a,A))(a.flags&131072)!==0&&(es=!0);else return o.lanes=a.lanes,ts(a,o,A)}return Fc(a,o,f,m,A)}function Bl(a,o,f){var m=o.pendingProps,A=m.children,C=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((o.flags&128)!==0){if(m=C!==null?C.baseLanes|f:f,a!==null){for(A=o.child=a.child,C=0;A!==null;)C=C|A.lanes|A.childLanes,A=A.sibling;o.childLanes=C&~m}else o.childLanes=0,o.child=null;return Nl(a,o,m,f)}if((f&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&eh(o,C!==null?C.cachePool:null),C!==null?I0(o,C):im(),mv(o);else return o.lanes=o.childLanes=536870912,Nl(a,o,C!==null?C.baseLanes|f:f,f)}else C!==null?(eh(o,C.cachePool),I0(o,C),Wo(),o.memoizedState=null):(a!==null&&eh(o,null),im(),Wo());return Oi(a,o,A,f),o.child}function Nl(a,o,f,m){var A=ko();return A=A===null?null:{parent:Hi._currentValue,pool:A},o.memoizedState={baseLanes:f,cachePool:A},a!==null&&eh(o,null),im(),mv(o),a!==null&&wa(a,o,m,!0),null}function Dl(a,o){var f=o.ref;if(f===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(a===null||a.ref!==f)&&(o.flags|=4194816)}}function Fc(a,o,f,m,A){return pr(o),f=no(a,o,f,m,void 0,A),m=sm(),a!==null&&!es?(zf(a,o,A),ts(a,o,A)):(Fn&&m&&qp(o),o.flags|=1,Oi(a,o,f,A),o.child)}function ca(a,o,f,m,A,C){return pr(o),o.updateQueue=null,f=H0(o,m,f,A),F0(a),m=sm(),a!==null&&!es?(zf(a,o,C),ts(a,o,C)):(Fn&&m&&qp(o),o.flags|=1,Oi(a,o,f,C),o.child)}function ua(a,o,f,m,A){if(pr(o),o.stateNode===null){var C=Po,F=f.contextType;typeof F=="object"&&F!==null&&(C=Mi(F)),C=new f(m,C),o.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Is,o.stateNode=C,C._reactInternals=o,C=o.stateNode,C.props=m,C.state=o.memoizedState,C.refs={},tm(o),F=f.contextType,C.context=typeof F=="object"&&F!==null?Mi(F):Po,C.state=o.memoizedState,F=f.getDerivedStateFromProps,typeof F=="function"&&(Jo(o,f,F,m),C.state=o.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(F=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),F!==C.state&&Is.enqueueReplaceState(C,C.state,null),Nc(o,m,C,A),ih(),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(a===null){C=o.stateNode;var q=o.memoizedProps,oe=vr(f,q);C.props=oe;var we=C.context,Ke=f.contextType;F=Po,typeof Ke=="object"&&Ke!==null&&(F=Mi(Ke));var it=f.getDerivedStateFromProps;Ke=typeof it=="function"||typeof C.getSnapshotBeforeUpdate=="function",q=o.pendingProps!==q,Ke||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(q||we!==F)&&vv(o,C,m,F),$r=!1;var De=o.memoizedState;C.state=De,Nc(o,m,C,A),ih(),we=o.memoizedState,q||De!==we||$r?(typeof it=="function"&&(Jo(o,f,it,m),we=o.memoizedState),(oe=$r||gv(o,f,oe,m,De,we,F))?(Ke||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=we),C.props=m,C.state=we,C.context=F,m=oe):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{C=o.stateNode,en(a,o),F=o.memoizedProps,Ke=vr(f,F),C.props=Ke,it=o.pendingProps,De=C.context,we=f.contextType,oe=Po,typeof we=="object"&&we!==null&&(oe=Mi(we)),q=f.getDerivedStateFromProps,(we=typeof q=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(F!==it||De!==oe)&&vv(o,C,m,oe),$r=!1,De=o.memoizedState,C.state=De,Nc(o,m,C,A),ih();var Ue=o.memoizedState;F!==it||De!==Ue||$r||a!==null&&a.dependencies!==null&&Ku(a.dependencies)?(typeof q=="function"&&(Jo(o,f,q,m),Ue=o.memoizedState),(Ke=$r||gv(o,f,Ke,m,De,Ue,oe)||a!==null&&a.dependencies!==null&&Ku(a.dependencies))?(we||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(m,Ue,oe),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(m,Ue,oe)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||F===a.memoizedProps&&De===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===a.memoizedProps&&De===a.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Ue),C.props=m,C.state=Ue,C.context=oe,m=Ke):(typeof C.componentDidUpdate!="function"||F===a.memoizedProps&&De===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===a.memoizedProps&&De===a.memoizedState||(o.flags|=1024),m=!1)}return C=m,Dl(a,o),m=(o.flags&128)!==0,C||m?(C=o.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:C.render(),o.flags|=1,a!==null&&m?(o.child=wl(o,a.child,null,A),o.child=wl(o,null,f,A)):Oi(a,o,f,A),o.memoizedState=C.state,a=o.child):a=ts(a,o,A),a}function Ko(a,o,f,m){return Ec(),o.flags|=256,Oi(a,o,f,m),o.child}var Za={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qa(a){return{baseLanes:a,cachePool:Lf()}}function Yi(a,o,f){return a=a!==null?a.childLanes&~f:0,o&&(a|=Pa),a}function Hc(a,o,f){var m=o.pendingProps,A=!1,C=(o.flags&128)!==0,F;if((F=C)||(F=a!==null&&a.memoizedState===null?!1:(Ui.current&2)!==0),F&&(A=!0,o.flags&=-129),F=(o.flags&32)!==0,o.flags&=-33,a===null){if(Fn){if(A?qo(o):Wo(),Fn){var q=xi,oe;if(oe=q){e:{for(oe=q,q=ra;oe.nodeType!==8;){if(!q){q=null;break e}if(oe=uo(oe.nextSibling),oe===null){q=null;break e}}q=oe}q!==null?(o.memoizedState={dehydrated:q,treeContext:Ho!==null?{id:fr,overflow:dr}:null,retryLane:536870912,hydrationErrors:null},oe=Ks(18,null,null,0),oe.stateNode=q,oe.return=o,o.child=oe,Us=o,xi=null,oe=!0):oe=!1}oe||zo(o)}if(q=o.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return __(q)?o.lanes=32:o.lanes=536870912,null;gr(o)}return q=m.children,m=m.fallback,A?(Wo(),A=o.mode,q=Ul({mode:"hidden",children:q},A),m=Fo(m,A,f,null),q.return=o,m.return=o,q.sibling=m,o.child=q,A=o.child,A.memoizedState=Qa(f),A.childLanes=Yi(a,F,f),o.memoizedState=Za,m):(qo(o),yr(o,q))}if(oe=a.memoizedState,oe!==null&&(q=oe.dehydrated,q!==null)){if(C)o.flags&256?(qo(o),o.flags&=-257,o=fs(a,o,f)):o.memoizedState!==null?(Wo(),o.child=a.child,o.flags|=128,o=null):(Wo(),A=m.fallback,q=o.mode,m=Ul({mode:"visible",children:m.children},q),A=Fo(A,q,f,null),A.flags|=2,m.return=o,A.return=o,m.sibling=A,o.child=m,wl(o,a.child,null,f),m=o.child,m.memoizedState=Qa(f),m.childLanes=Yi(a,F,f),o.memoizedState=Za,o=A);else if(qo(o),__(q)){if(F=q.nextSibling&&q.nextSibling.dataset,F)var we=F.dgst;F=we,m=Error(n(419)),m.stack="",m.digest=F,El({value:m,source:null,stack:null}),o=fs(a,o,f)}else if(es||wa(a,o,f,!1),F=(f&a.childLanes)!==0,es||F){if(F=ln,F!==null&&(m=f&-f,m=(m&42)!==0?1:Ot(m),m=(m&(F.suspendedLanes|f))!==0?0:m,m!==0&&m!==oe.retryLane))throw oe.retryLane=m,Jr(a,m),Fs(F,a,m),bv;q.data==="$?"||l(),o=fs(a,o,f)}else q.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=oe.treeContext,xi=uo(q.nextSibling),Us=o,Fn=!0,Ca=null,ra=!1,a!==null&&(us[aa++]=fr,us[aa++]=dr,us[aa++]=Ho,fr=a.id,dr=a.overflow,Ho=o),o=yr(o,m.children),o.flags|=4096);return o}return A?(Wo(),A=m.fallback,q=o.mode,oe=a.child,we=oe.sibling,m=Ni(oe,{mode:"hidden",children:m.children}),m.subtreeFlags=oe.subtreeFlags&65011712,we!==null?A=Ni(we,A):(A=Fo(A,q,f,null),A.flags|=2),A.return=o,m.return=o,m.sibling=A,o.child=m,m=A,A=o.child,q=a.child.memoizedState,q===null?q=Qa(f):(oe=q.cachePool,oe!==null?(we=Hi._currentValue,oe=oe.parent!==we?{parent:we,pool:we}:oe):oe=Lf(),q={baseLanes:q.baseLanes|f,cachePool:oe}),A.memoizedState=q,A.childLanes=Yi(a,F,f),o.memoizedState=Za,m):(qo(o),f=a.child,a=f.sibling,f=Ni(f,{mode:"visible",children:m.children}),f.return=o,f.sibling=null,a!==null&&(F=o.deletions,F===null?(o.deletions=[a],o.flags|=16):F.push(a)),o.child=f,o.memoizedState=null,f)}function yr(a,o){return o=Ul({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Ul(a,o){return a=Ks(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function fs(a,o,f){return wl(o,a.child,null,f),a=yr(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function ds(a,o,f){a.lanes|=o;var m=a.alternate;m!==null&&(m.lanes|=o),Zp(a.return,o,f)}function Un(a,o,f,m,A){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:A}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=f,C.tailMode=A)}function Ua(a,o,f){var m=o.pendingProps,A=m.revealOrder,C=m.tail;if(Oi(a,o,m.children,f),m=Ui.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&ds(a,f,o);else if(a.tag===19)ds(a,f,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(Te(Ui,m),A){case"forwards":for(f=o.child,A=null;f!==null;)a=f.alternate,a!==null&&so(a)===null&&(A=f),f=f.sibling;f=A,f===null?(A=o.child,o.child=null):(A=f.sibling,f.sibling=null),Un(o,!1,A,f,C);break;case"backwards":for(f=null,A=o.child,o.child=null;A!==null;){if(a=A.alternate,a!==null&&so(a)===null){o.child=A;break}a=A.sibling,A.sibling=f,f=A,A=a}Un(o,!0,f,null,C);break;case"together":Un(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ts(a,o,f){if(a!==null&&(o.dependencies=a.dependencies),nr|=o.lanes,(f&o.childLanes)===0)if(a!==null){if(wa(a,o,f,!1),(f&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,f=Ni(a,a.pendingProps),o.child=f,f.return=o;a.sibling!==null;)a=a.sibling,f=f.sibling=Ni(a,a.pendingProps),f.return=o;f.sibling=null}return o.child}function hh(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Ku(a)))}function Oa(a,o,f){switch(o.tag){case 3:qe(o,o.stateNode.containerInfo),jo(o,Hi,a.memoizedState.cache),Ec();break;case 27:case 5:vt(o);break;case 4:qe(o,o.stateNode.containerInfo);break;case 10:jo(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(qo(o),o.flags|=128,null):(f&o.child.childLanes)!==0?Hc(a,o,f):(qo(o),a=ts(a,o,f),a!==null?a.sibling:null);qo(o);break;case 19:var A=(a.flags&128)!==0;if(m=(f&o.childLanes)!==0,m||(wa(a,o,f,!1),m=(f&o.childLanes)!==0),A){if(m)return Ua(a,o,f);o.flags|=128}if(A=o.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Te(Ui,Ui.current),m)break;return null;case 22:case 23:return o.lanes=0,Bl(a,o,f);case 24:jo(o,Hi,a.memoizedState.cache)}return ts(a,o,f)}function Ol(a,o,f){if(a!==null)if(a.memoizedProps!==o.pendingProps)es=!0;else{if(!hh(a,f)&&(o.flags&128)===0)return es=!1,Oa(a,o,f);es=(a.flags&131072)!==0}else es=!1,Fn&&(o.flags&1048576)!==0&&Bf(o,Mc,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var m=o.elementType,A=m._init;if(m=A(m._payload),o.type=m,typeof m=="function")Yu(m)?(a=vr(m,a),o.tag=1,o=ua(null,o,m,a,f)):(o.tag=0,o=Fc(null,o,m,a,f));else{if(m!=null){if(A=m.$$typeof,A===D){o.tag=11,o=Qs(null,o,m,a,f);break e}else if(A===j){o.tag=14,o=$s(null,o,m,a,f);break e}}throw o=de(m)||m,Error(n(306,o,""))}}return o;case 0:return Fc(a,o,o.type,o.pendingProps,f);case 1:return m=o.type,A=vr(m,o.pendingProps),ua(a,o,m,A,f);case 3:e:{if(qe(o,o.stateNode.containerInfo),a===null)throw Error(n(387));m=o.pendingProps;var C=o.memoizedState;A=C.element,en(a,o),Nc(o,m,null,f);var F=o.memoizedState;if(m=F.cache,jo(o,Hi,m),m!==C.cache&&Ju(o,[Hi],f,!0),ih(),m=F.element,C.isDehydrated)if(C={element:m,isDehydrated:!1,cache:F.cache},o.updateQueue.baseState=C,o.memoizedState=C,o.flags&256){o=Ko(a,o,m,f);break e}else if(m!==A){A=cs(Error(n(424)),o),El(A),o=Ko(a,o,m,f);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(xi=uo(a.firstChild),Us=o,Fn=!0,Ca=null,ra=!0,f=pv(o,null,m,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Ec(),m===A){o=ts(a,o,f);break e}Oi(a,o,m,f)}o=o.child}return o;case 26:return Dl(a,o),a===null?(f=qM(o.type,null,o.pendingProps,null))?o.memoizedState=f:Fn||(f=o.type,a=o.pendingProps,m=Tv(me.current).createElement(f),m[Si]=o,m[li]=a,Hs(m,f,a),Ne(m),o.stateNode=m):o.memoizedState=qM(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return vt(o),a===null&&Fn&&(m=o.stateNode=VM(o.type,o.pendingProps,me.current),Us=o,ra=!0,A=xi,Jc(o.type)?(A_=A,xi=uo(m.firstChild)):xi=A),Oi(a,o,o.pendingProps.children,f),Dl(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Fn&&((A=m=xi)&&(m=hB(m,o.type,o.pendingProps,ra),m!==null?(o.stateNode=m,Us=o,xi=uo(m.firstChild),ra=!1,A=!0):A=!1),A||zo(o)),vt(o),A=o.type,C=o.pendingProps,F=a!==null?a.memoizedProps:null,m=C.children,y_(A,C)?m=null:F!==null&&y_(A,F)&&(o.flags|=32),o.memoizedState!==null&&(A=no(a,o,t_,null,null,f),Nm._currentValue=A),Dl(a,o),Oi(a,o,m,f),o.child;case 6:return a===null&&Fn&&((a=f=xi)&&(f=fB(f,o.pendingProps,ra),f!==null?(o.stateNode=f,Us=o,xi=null,a=!0):a=!1),a||zo(o)),null;case 13:return Hc(a,o,f);case 4:return qe(o,o.stateNode.containerInfo),m=o.pendingProps,a===null?o.child=wl(o,null,m,f):Oi(a,o,m,f),o.child;case 11:return Qs(a,o,o.type,o.pendingProps,f);case 7:return Oi(a,o,o.pendingProps,f),o.child;case 8:return Oi(a,o,o.pendingProps.children,f),o.child;case 12:return Oi(a,o,o.pendingProps.children,f),o.child;case 10:return m=o.pendingProps,jo(o,o.type,m.value),Oi(a,o,m.children,f),o.child;case 9:return A=o.type._context,m=o.pendingProps.children,pr(o),A=Mi(A),m=m(A),o.flags|=1,Oi(a,o,m,f),o.child;case 14:return $s(a,o,o.type,o.pendingProps,f);case 15:return bm(a,o,o.type,o.pendingProps,f);case 19:return Ua(a,o,f);case 31:return m=o.pendingProps,f=o.mode,m={mode:m.mode,children:m.children},a===null?(f=Ul(m,f),f.ref=o.ref,o.child=f,f.return=o,o=f):(f=Ni(a.child,m),f.ref=o.ref,o.child=f,f.return=o,o=f),o;case 22:return Bl(a,o,f);case 24:return pr(o),m=Mi(Hi),a===null?(A=ko(),A===null&&(A=ln,C=Uf(),A.pooledCache=C,C.refCount++,C!==null&&(A.pooledCacheLanes|=f),A=C),o.memoizedState={parent:m,cache:A},tm(o),jo(o,Hi,A)):((a.lanes&f)!==0&&(en(a,o),Nc(o,null,null,f),ih()),A=a.memoizedState,C=o.memoizedState,A.parent!==m?(A={parent:m,cache:m},o.memoizedState=A,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=A),jo(o,Hi,m)):(m=C.cache,jo(o,Hi,m),m!==A.cache&&Ju(o,[Hi],f,!0))),Oi(a,o,o.pendingProps.children,f),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function $a(a){a.flags|=4}function fh(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!QM(o)){if(o=ii.current,o!==null&&((Vt&4194048)===Vt?Ka!==null:(Vt&62914560)!==Vt&&(Vt&536870912)===0||o!==Ka))throw Ba=nh,$p;a.flags|=8192}}function ao(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?be():536870912,a.lanes|=o,Ln|=o)}function Ll(a,o){if(!Fn)switch(a.tailMode){case"hidden":o=a.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function ui(a){var o=a.alternate!==null&&a.alternate.child===a.child,f=0,m=0;if(o)for(var A=a.child;A!==null;)f|=A.lanes|A.childLanes,m|=A.subtreeFlags&65011712,m|=A.flags&65011712,A.return=a,A=A.sibling;else for(A=a.child;A!==null;)f|=A.lanes|A.childLanes,m|=A.subtreeFlags,m|=A.flags,A.return=a,A=A.sibling;return a.subtreeFlags|=m,a.childLanes=f,o}function _m(a,o,f){var m=o.pendingProps;switch(Wp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ui(o),null;case 1:return ui(o),null;case 3:return f=o.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Qr(Hi),_t(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(qa(o)?$a(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Vn())),ui(o),null;case 26:return f=o.memoizedState,a===null?($a(o),f!==null?(ui(o),fh(o,f)):(ui(o),o.flags&=-16777217)):f?f!==a.memoizedState?($a(o),ui(o),fh(o,f)):(ui(o),o.flags&=-16777217):(a.memoizedProps!==m&&$a(o),ui(o),o.flags&=-16777217),null;case 27:yt(o),f=me.current;var A=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==m&&$a(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ui(o),null}a=He.current,qa(o)?D0(o):(a=VM(A,m,f),o.stateNode=a,$a(o))}return ui(o),null;case 5:if(yt(o),f=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==m&&$a(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return ui(o),null}if(a=He.current,qa(o))D0(o);else{switch(A=Tv(me.current),a){case 1:a=A.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:a=A.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":a=A.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":a=A.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":a=A.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?A.createElement("select",{is:m.is}):A.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?A.createElement(f,{is:m.is}):A.createElement(f)}}a[Si]=o,a[li]=m;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)a.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=a;e:switch(Hs(a,f,m),f){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&$a(o)}}return ui(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==m&&$a(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(a=me.current,qa(o)){if(a=o.stateNode,f=o.memoizedProps,m=null,A=Us,A!==null)switch(A.tag){case 27:case 5:m=A.memoizedProps}a[Si]=o,a=!!(a.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||PM(a.nodeValue,f)),a||zo(o)}else a=Tv(a).createTextNode(m),a[Si]=o,o.stateNode=a}return ui(o),null;case 13:if(m=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(A=qa(o),m!==null&&m.dehydrated!==null){if(a===null){if(!A)throw Error(n(318));if(A=o.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Si]=o}else Ec(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ui(o),A=!1}else A=Vn(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=A),A=!0;if(!A)return o.flags&256?(gr(o),o):(gr(o),null)}if(gr(o),(o.flags&128)!==0)return o.lanes=f,o;if(f=m!==null,a=a!==null&&a.memoizedState!==null,f){m=o.child,A=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(A=m.alternate.memoizedState.cachePool.pool);var C=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==A&&(m.flags|=2048)}return f!==a&&f&&(o.child.flags|=8192),ao(o,o.updateQueue),ui(o),null;case 4:return _t(),a===null&&d_(o.stateNode.containerInfo),ui(o),null;case 10:return Qr(o.type),ui(o),null;case 19:if(xe(Ui),A=o.memoizedState,A===null)return ui(o),null;if(m=(o.flags&128)!==0,C=A.rendering,C===null)if(m)Ll(A,!1);else{if(gi!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(C=so(a),C!==null){for(o.flags|=128,Ll(A,!1),a=C.updateQueue,o.updateQueue=a,ao(o,a),o.subtreeFlags=0,a=f,f=o.child;f!==null;)Yp(f,a),f=f.sibling;return Te(Ui,Ui.current&1|2),o.child}a=a.sibling}A.tail!==null&&Le()>_s&&(o.flags|=128,m=!0,Ll(A,!1),o.lanes=4194304)}else{if(!m)if(a=so(C),a!==null){if(o.flags|=128,m=!0,a=a.updateQueue,o.updateQueue=a,ao(o,a),Ll(A,!0),A.tail===null&&A.tailMode==="hidden"&&!C.alternate&&!Fn)return ui(o),null}else 2*Le()-A.renderingStartTime>_s&&f!==536870912&&(o.flags|=128,m=!0,Ll(A,!1),o.lanes=4194304);A.isBackwards?(C.sibling=o.child,o.child=C):(a=A.last,a!==null?a.sibling=C:o.child=C,A.last=C)}return A.tail!==null?(o=A.tail,A.rendering=o,A.tail=o.sibling,A.renderingStartTime=Le(),o.sibling=null,a=Ui.current,Te(Ui,m?a&1|2:a&1),o):(ui(o),null);case 22:case 23:return gr(o),sh(),m=o.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(f&536870912)!==0&&(o.flags&128)===0&&(ui(o),o.subtreeFlags&6&&(o.flags|=8192)):ui(o),f=o.updateQueue,f!==null&&ao(o,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048),a!==null&&xe(Ra),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Qr(Hi),ui(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function zc(a,o){switch(Wp(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Qr(Hi),_t(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return yt(o),null;case 13:if(gr(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Ec()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return xe(Ui),null;case 4:return _t(),null;case 10:return Qr(o.type),null;case 22:case 23:return gr(o),sh(),a!==null&&xe(Ra),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Qr(Hi),null;case 25:return null;default:return null}}function Gc(a,o){switch(Wp(o),o.tag){case 3:Qr(Hi),_t();break;case 26:case 27:case 5:yt(o);break;case 4:_t();break;case 13:gr(o);break;case 19:xe(Ui);break;case 10:Qr(o.type);break;case 22:case 23:gr(o),sh(),a!==null&&xe(Ra);break;case 24:Qr(Hi)}}function Il(a,o){try{var f=o.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var A=m.next;f=A;do{if((f.tag&a)===a){m=void 0;var C=f.create,F=f.inst;m=C(),F.destroy=m}f=f.next}while(f!==A)}}catch(q){ve(o,o.return,q)}}function ha(a,o,f){try{var m=o.updateQueue,A=m!==null?m.lastEffect:null;if(A!==null){var C=A.next;m=C;do{if((m.tag&a)===a){var F=m.inst,q=F.destroy;if(q!==void 0){F.destroy=void 0,A=o;var oe=f,we=q;try{we()}catch(Ke){ve(A,oe,Ke)}}}m=m.next}while(m!==C)}}catch(Ke){ve(o,o.return,Ke)}}function Pl(a){var o=a.updateQueue;if(o!==null){var f=a.stateNode;try{L0(o,f)}catch(m){ve(a,a.return,m)}}}function ro(a,o,f){f.props=vr(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(m){ve(a,o,m)}}function Fl(a,o){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof f=="function"?a.refCleanup=f(m):f.current=m}}catch(A){ve(a,o,A)}}function xr(a,o){var f=a.ref,m=a.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(A){ve(a,o,A)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(A){ve(a,o,A)}else f.current=null}function jc(a){var o=a.type,f=a.memoizedProps,m=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(A){ve(a,a.return,A)}}function dh(a,o,f){try{var m=a.stateNode;rB(m,a.type,f,o),m[li]=o}catch(A){ve(a,a.return,A)}}function ph(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Jc(a.type)||a.tag===4}function Zo(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ph(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Jc(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Qo(a,o,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,o):(o=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,o.appendChild(a),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=Ev));else if(m!==4&&(m===27&&Jc(a.type)&&(f=a.stateNode,o=null),a=a.child,a!==null))for(Qo(a,o,f),a=a.sibling;a!==null;)Qo(a,o,f),a=a.sibling}function $o(a,o,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?f.insertBefore(a,o):f.appendChild(a);else if(m!==4&&(m===27&&Jc(a.type)&&(f=a.stateNode),a=a.child,a!==null))for($o(a,o,f),a=a.sibling;a!==null;)$o(a,o,f),a=a.sibling}function el(a){var o=a.stateNode,f=a.memoizedProps;try{for(var m=a.type,A=o.attributes;A.length;)o.removeAttributeNode(A[0]);Hs(o,m,f),o[Si]=a,o[li]=f}catch(C){ve(a,a.return,C)}}var br=!1,hi=!1,kc=!1,fa=typeof WeakSet=="function"?WeakSet:Set,si=null;function qi(a,o){if(a=a.containerInfo,g_=Dv,a=Hp(a),ju(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var A=m.anchorOffset,C=m.focusNode;m=m.focusOffset;try{f.nodeType,C.nodeType}catch{f=null;break e}var F=0,q=-1,oe=-1,we=0,Ke=0,it=a,De=null;t:for(;;){for(var Ue;it!==f||A!==0&&it.nodeType!==3||(q=F+A),it!==C||m!==0&&it.nodeType!==3||(oe=F+m),it.nodeType===3&&(F+=it.nodeValue.length),(Ue=it.firstChild)!==null;)De=it,it=Ue;for(;;){if(it===a)break t;if(De===f&&++we===A&&(q=F),De===C&&++Ke===m&&(oe=F),(Ue=it.nextSibling)!==null)break;it=De,De=it.parentNode}it=Ue}f=q===-1||oe===-1?null:{start:q,end:oe}}else f=null}f=f||{start:0,end:0}}else f=null;for(v_={focusedElem:a,selectionRange:f},Dv=!1,si=o;si!==null;)if(o=si,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,si=a;else for(;si!==null;){switch(o=si,C=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,f=o,A=C.memoizedProps,C=C.memoizedState,m=f.stateNode;try{var sn=vr(f.type,A,f.elementType===f.type);a=m.getSnapshotBeforeUpdate(sn,C),m.__reactInternalSnapshotBeforeUpdate=a}catch(Qt){ve(f,f.return,Qt)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,f=a.nodeType,f===9)b_(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":b_(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,si=a;break}si=o.return}}function oo(a,o,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:Ps(a,f),m&4&&Il(5,f);break;case 1:if(Ps(a,f),m&4)if(a=f.stateNode,o===null)try{a.componentDidMount()}catch(F){ve(f,f.return,F)}else{var A=vr(f.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(A,o,a.__reactInternalSnapshotBeforeUpdate)}catch(F){ve(f,f.return,F)}}m&64&&Pl(f),m&512&&Fl(f,f.return);break;case 3:if(Ps(a,f),m&64&&(a=f.updateQueue,a!==null)){if(o=null,f.child!==null)switch(f.child.tag){case 27:case 5:o=f.child.stateNode;break;case 1:o=f.child.stateNode}try{L0(a,o)}catch(F){ve(f,f.return,F)}}break;case 27:o===null&&m&4&&el(f);case 26:case 5:Ps(a,f),o===null&&m&4&&jc(f),m&512&&Fl(f,f.return);break;case 12:Ps(a,f);break;case 13:Ps(a,f),m&4&&tl(a,f),m&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=vi.bind(null,f),dB(a,f))));break;case 22:if(m=f.memoizedState!==null||br,!m){o=o!==null&&o.memoizedState!==null||hi,A=br;var C=hi;br=m,(hi=o)&&!C?_r(a,f,(f.subtreeFlags&8772)!==0):Ps(a,f),br=A,hi=C}break;case 30:break;default:Ps(a,f)}}function xn(a){var o=a.alternate;o!==null&&(a.alternate=null,xn(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Zn(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Yt=null,On=!1;function La(a,o,f){for(f=f.child;f!==null;)Hl(a,o,f),f=f.sibling}function Hl(a,o,f){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Ie,f)}catch{}switch(f.tag){case 26:hi||xr(f,o),La(a,o,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:hi||xr(f,o);var m=Yt,A=On;Jc(f.type)&&(Yt=f.stateNode,On=!1),La(a,o,f),Cm(f.stateNode),Yt=m,On=A;break;case 5:hi||xr(f,o);case 6:if(m=Yt,A=On,Yt=null,La(a,o,f),Yt=m,On=A,Yt!==null)if(On)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(f.stateNode)}catch(C){ve(f,o,C)}else try{Yt.removeChild(f.stateNode)}catch(C){ve(f,o,C)}break;case 18:Yt!==null&&(On?(a=Yt,jM(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),Lm(a)):jM(Yt,f.stateNode));break;case 4:m=Yt,A=On,Yt=f.stateNode.containerInfo,On=!0,La(a,o,f),Yt=m,On=A;break;case 0:case 11:case 14:case 15:hi||ha(2,f,o),hi||ha(4,f,o),La(a,o,f);break;case 1:hi||(xr(f,o),m=f.stateNode,typeof m.componentWillUnmount=="function"&&ro(f,o,m)),La(a,o,f);break;case 21:La(a,o,f);break;case 22:hi=(m=hi)||f.memoizedState!==null,La(a,o,f),hi=m;break;default:La(a,o,f)}}function tl(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Lm(a)}catch(f){ve(o,o.return,f)}}function ed(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new fa),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new fa),o;default:throw Error(n(435,a.tag))}}function zl(a,o){var f=ed(a);o.forEach(function(m){var A=tn.bind(null,a,m);f.has(m)||(f.add(m),m.then(A,A))})}function ns(a,o){var f=o.deletions;if(f!==null)for(var m=0;m<f.length;m++){var A=f[m],C=a,F=o,q=F;e:for(;q!==null;){switch(q.tag){case 27:if(Jc(q.type)){Yt=q.stateNode,On=!1;break e}break;case 5:Yt=q.stateNode,On=!1;break e;case 3:case 4:Yt=q.stateNode.containerInfo,On=!0;break e}q=q.return}if(Yt===null)throw Error(n(160));Hl(C,F,A),Yt=null,On=!1,C=A.alternate,C!==null&&(C.return=null),A.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)td(o,a),o=o.sibling}var er=null;function td(a,o){var f=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ns(o,a),Ei(a),m&4&&(ha(3,a,a.return),Il(3,a),ha(5,a,a.return));break;case 1:ns(o,a),Ei(a),m&512&&(hi||f===null||xr(f,f.return)),m&64&&br&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var A=er;if(ns(o,a),Ei(a),m&512&&(hi||f===null||xr(f,f.return)),m&4){var C=f!==null?f.memoizedState:null;if(m=a.memoizedState,f===null)if(m===null)if(a.stateNode===null){e:{m=a.type,f=a.memoizedProps,A=A.ownerDocument||A;t:switch(m){case"title":C=A.getElementsByTagName("title")[0],(!C||C[ys]||C[Si]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=A.createElement(m),A.head.insertBefore(C,A.querySelector("head > title"))),Hs(C,m,f),C[Si]=a,Ne(C),m=C;break e;case"link":var F=KM("link","href",A).get(m+(f.href||""));if(F){for(var q=0;q<F.length;q++)if(C=F[q],C.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&C.getAttribute("rel")===(f.rel==null?null:f.rel)&&C.getAttribute("title")===(f.title==null?null:f.title)&&C.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){F.splice(q,1);break t}}C=A.createElement(m),Hs(C,m,f),A.head.appendChild(C);break;case"meta":if(F=KM("meta","content",A).get(m+(f.content||""))){for(q=0;q<F.length;q++)if(C=F[q],C.getAttribute("content")===(f.content==null?null:""+f.content)&&C.getAttribute("name")===(f.name==null?null:f.name)&&C.getAttribute("property")===(f.property==null?null:f.property)&&C.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&C.getAttribute("charset")===(f.charSet==null?null:f.charSet)){F.splice(q,1);break t}}C=A.createElement(m),Hs(C,m,f),A.head.appendChild(C);break;default:throw Error(n(468,m))}C[Si]=a,Ne(C),m=C}a.stateNode=m}else ZM(A,a.type,a.stateNode);else a.stateNode=JM(A,m,a.memoizedProps);else C!==m?(C===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):C.count--,m===null?ZM(A,a.type,a.stateNode):JM(A,m,a.memoizedProps)):m===null&&a.stateNode!==null&&dh(a,a.memoizedProps,f.memoizedProps)}break;case 27:ns(o,a),Ei(a),m&512&&(hi||f===null||xr(f,f.return)),f!==null&&m&4&&dh(a,a.memoizedProps,f.memoizedProps);break;case 5:if(ns(o,a),Ei(a),m&512&&(hi||f===null||xr(f,f.return)),a.flags&32){A=a.stateNode;try{Vi(A,"")}catch(Ue){ve(a,a.return,Ue)}}m&4&&a.stateNode!=null&&(A=a.memoizedProps,dh(a,A,f!==null?f.memoizedProps:A)),m&1024&&(kc=!0);break;case 6:if(ns(o,a),Ei(a),m&4){if(a.stateNode===null)throw Error(n(162));m=a.memoizedProps,f=a.stateNode;try{f.nodeValue=m}catch(Ue){ve(a,a.return,Ue)}}break;case 3:if(Rv=null,A=er,er=Cv(o.containerInfo),ns(o,a),er=A,Ei(a),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Lm(o.containerInfo)}catch(Ue){ve(a,a.return,Ue)}kc&&(kc=!1,nl(a));break;case 4:m=er,er=Cv(a.stateNode.containerInfo),ns(o,a),Ei(a),er=m;break;case 12:ns(o,a),Ei(a);break;case 13:ns(o,a),Ei(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Qn=Le()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,zl(a,m)));break;case 22:A=a.memoizedState!==null;var oe=f!==null&&f.memoizedState!==null,we=br,Ke=hi;if(br=we||A,hi=Ke||oe,ns(o,a),hi=Ke,br=we,Ei(a),m&8192)e:for(o=a.stateNode,o._visibility=A?o._visibility&-2:o._visibility|1,A&&(f===null||oe||br||hi||da(a)),f=null,o=a;;){if(o.tag===5||o.tag===26){if(f===null){oe=f=o;try{if(C=oe.stateNode,A)F=C.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{q=oe.stateNode;var it=oe.memoizedProps.style,De=it!=null&&it.hasOwnProperty("display")?it.display:null;q.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(Ue){ve(oe,oe.return,Ue)}}}else if(o.tag===6){if(f===null){oe=o;try{oe.stateNode.nodeValue=A?"":oe.memoizedProps}catch(Ue){ve(oe,oe.return,Ue)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;f===o&&(f=null),o=o.return}f===o&&(f=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=a.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,zl(a,f))));break;case 19:ns(o,a),Ei(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,zl(a,m)));break;case 30:break;case 21:break;default:ns(o,a),Ei(a)}}function Ei(a){var o=a.flags;if(o&2){try{for(var f,m=a.return;m!==null;){if(ph(m)){f=m;break}m=m.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var A=f.stateNode,C=Zo(a);$o(a,C,A);break;case 5:var F=f.stateNode;f.flags&32&&(Vi(F,""),f.flags&=-33);var q=Zo(a);$o(a,q,F);break;case 3:case 4:var oe=f.stateNode.containerInfo,we=Zo(a);Qo(a,we,oe);break;default:throw Error(n(161))}}catch(Ke){ve(a,a.return,Ke)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function nl(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;nl(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Ps(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)oo(a,o.alternate,o),o=o.sibling}function da(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:ha(4,o,o.return),da(o);break;case 1:xr(o,o.return);var f=o.stateNode;typeof f.componentWillUnmount=="function"&&ro(o,o.return,f),da(o);break;case 27:Cm(o.stateNode);case 26:case 5:xr(o,o.return),da(o);break;case 22:o.memoizedState===null&&da(o);break;case 30:da(o);break;default:da(o)}a=a.sibling}}function _r(a,o,f){for(f=f&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,A=a,C=o,F=C.flags;switch(C.tag){case 0:case 11:case 15:_r(A,C,f),Il(4,C);break;case 1:if(_r(A,C,f),m=C,A=m.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(we){ve(m,m.return,we)}if(m=C,A=m.updateQueue,A!==null){var q=m.stateNode;try{var oe=A.shared.hiddenCallbacks;if(oe!==null)for(A.shared.hiddenCallbacks=null,A=0;A<oe.length;A++)Dc(oe[A],q)}catch(we){ve(m,m.return,we)}}f&&F&64&&Pl(C),Fl(C,C.return);break;case 27:el(C);case 26:case 5:_r(A,C,f),f&&m===null&&F&4&&jc(C),Fl(C,C.return);break;case 12:_r(A,C,f);break;case 13:_r(A,C,f),f&&F&4&&tl(A,C);break;case 22:C.memoizedState===null&&_r(A,C,f),Fl(C,C.return);break;case 30:break;default:_r(A,C,f)}o=o.sibling}}function nd(a,o){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&Tc(f))}function id(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Tc(a))}function ai(a,o,f,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)sd(a,o,f,m),o=o.sibling}function sd(a,o,f,m){var A=o.flags;switch(o.tag){case 0:case 11:case 15:ai(a,o,f,m),A&2048&&Il(9,o);break;case 1:ai(a,o,f,m);break;case 3:ai(a,o,f,m),A&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Tc(a)));break;case 12:if(A&2048){ai(a,o,f,m),a=o.stateNode;try{var C=o.memoizedProps,F=C.id,q=C.onPostCommit;typeof q=="function"&&q(F,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(oe){ve(o,o.return,oe)}}else ai(a,o,f,m);break;case 13:ai(a,o,f,m);break;case 23:break;case 22:C=o.stateNode,F=o.alternate,o.memoizedState!==null?C._visibility&2?ai(a,o,f,m):tr(a,o):C._visibility&2?ai(a,o,f,m):(C._visibility|=2,lo(a,o,f,m,(o.subtreeFlags&10256)!==0)),A&2048&&nd(F,o);break;case 24:ai(a,o,f,m),A&2048&&id(o.alternate,o);break;default:ai(a,o,f,m)}}function lo(a,o,f,m,A){for(A=A&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var C=a,F=o,q=f,oe=m,we=F.flags;switch(F.tag){case 0:case 11:case 15:lo(C,F,q,oe,A),Il(8,F);break;case 23:break;case 22:var Ke=F.stateNode;F.memoizedState!==null?Ke._visibility&2?lo(C,F,q,oe,A):tr(C,F):(Ke._visibility|=2,lo(C,F,q,oe,A)),A&&we&2048&&nd(F.alternate,F);break;case 24:lo(C,F,q,oe,A),A&&we&2048&&id(F.alternate,F);break;default:lo(C,F,q,oe,A)}o=o.sibling}}function tr(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var f=a,m=o,A=m.flags;switch(m.tag){case 22:tr(f,m),A&2048&&nd(m.alternate,m);break;case 24:tr(f,m),A&2048&&id(m.alternate,m);break;default:tr(f,m)}o=o.sibling}}var pa=8192;function Vc(a){if(a.subtreeFlags&pa)for(a=a.child;a!==null;)_v(a),a=a.sibling}function _v(a){switch(a.tag){case 26:Vc(a),a.flags&pa&&a.memoizedState!==null&&TB(er,a.memoizedState,a.memoizedProps);break;case 5:Vc(a);break;case 3:case 4:var o=er;er=Cv(a.stateNode.containerInfo),Vc(a),er=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=pa,pa=16777216,Vc(a),pa=o):Vc(a));break;default:Vc(a)}}function Av(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function fi(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];si=m,Sr(m,a)}Av(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Am(a),a=a.sibling}function Am(a){switch(a.tag){case 0:case 11:case 15:fi(a),a.flags&2048&&ha(9,a,a.return);break;case 3:fi(a);break;case 12:fi(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Ar(a)):fi(a);break;default:fi(a)}}function Ar(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];si=m,Sr(m,a)}Av(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:ha(8,o,o.return),Ar(o);break;case 22:f=o.stateNode,f._visibility&2&&(f._visibility&=-3,Ar(o));break;default:Ar(o)}a=a.sibling}}function Sr(a,o){for(;si!==null;){var f=si;switch(f.tag){case 0:case 11:case 15:ha(8,f,o);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Tc(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,si=m;else e:for(f=a;si!==null;){m=si;var A=m.sibling,C=m.return;if(xn(m),m===f){si=null;break e}if(A!==null){A.return=C,si=A;break e}si=C}}}var Ti={getCacheForType:function(a){var o=Mi(Hi),f=o.data.get(a);return f===void 0&&(f=a(),o.data.set(a,f)),f}},Sm=typeof WeakMap=="function"?WeakMap:Map,Xn=0,ln=null,Sn=null,Vt=0,mn=0,bi=null,ma=!1,Xc=!1,Yc=!1,Ia=0,gi=0,nr=0,Mr=0,Gl=0,Pa=0,Ln=0,Yn=null,qt=null,Cn=!1,Qn=0,_s=1/0,Fa=null,ga=null,Wi=0,As=null,ri=null,va=0,co=0,mh=null,ya=null,Er=0,jl=null;function Ci(){if((Xn&2)!==0&&Vt!==0)return Vt&-Vt;if(H.T!==null){var a=hn;return a!==0?a:c_()}return an()}function ad(){Pa===0&&(Pa=(Vt&536870912)===0||Fn?le():536870912);var a=ii.current;return a!==null&&(a.flags|=32),Pa}function Fs(a,o,f){(a===ln&&(mn===2||mn===9)||a.cancelPendingCommit!==null)&&(sl(a,0),ir(a,Vt,Pa,!1)),bt(a,f),((Xn&2)===0||a!==ln)&&(a===ln&&((Xn&2)===0&&(Mr|=f),gi===4&&ir(a,Vt,Pa,!1)),ol(a))}function qc(a,o,f){if((Xn&6)!==0)throw Error(n(327));var m=!f&&(o&124)===0&&(o&a.expiredLanes)===0||Se(a,o),A=m?S(a,o):u(a,o,!0),C=m;do{if(A===0){Xc&&!m&&ir(a,o,0,!1);break}else{if(f=a.current.alternate,C&&!il(f)){A=u(a,o,!1),C=!1;continue}if(A===2){if(C=o,a.errorRecoveryDisabledLanes&C)var F=0;else F=a.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){o=F;e:{var q=a;A=Yn;var oe=q.current.memoizedState.isDehydrated;if(oe&&(sl(q,F).flags|=256),F=u(q,F,!1),F!==2){if(Yc&&!oe){q.errorRecoveryDisabledLanes|=C,Mr|=C,A=4;break e}C=qt,qt=A,C!==null&&(qt===null?qt=C:qt.push.apply(qt,C))}A=F}if(C=!1,A!==2)continue}}if(A===1){sl(a,0),ir(a,o,0,!0);break}e:{switch(m=a,C=A,C){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:ir(m,o,Pa,!ma);break e;case 2:qt=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(A=Qn+300-Le(),10<A)){if(ir(m,o,Pa,!ma),ae(m,0,!0)!==0)break e;m.timeoutHandle=zM(gh.bind(null,m,f,qt,Fa,Cn,o,Pa,Mr,Ln,ma,C,2,-0,0),A);break e}gh(m,f,qt,Fa,Cn,o,Pa,Mr,Ln,ma,C,0,-0,0)}}break}while(!0);ol(a)}function gh(a,o,f,m,A,C,F,q,oe,we,Ke,it,De,Ue){if(a.timeoutHandle=-1,it=o.subtreeFlags,(it&8192||(it&16785408)===16785408)&&(Bm={stylesheets:null,count:0,unsuspend:EB},_v(o),it=CB(),it!==null)){a.cancelPendingCommit=it(mt.bind(null,a,o,C,f,m,A,F,q,oe,Ke,1,De,Ue)),ir(a,C,F,!we);return}mt(a,o,C,f,m,A,F,q,oe)}function il(a){for(var o=a;;){var f=o.tag;if((f===0||f===11||f===15)&&o.flags&16384&&(f=o.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var A=f[m],C=A.getSnapshot;A=A.value;try{if(!qs(C(),A))return!1}catch{return!1}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ir(a,o,f,m){o&=~Gl,o&=~Mr,a.suspendedLanes|=o,a.pingedLanes&=~o,m&&(a.warmLanes|=o),m=a.expirationTimes;for(var A=o;0<A;){var C=31-xt(A),F=1<<C;m[C]=-1,A&=~F}f!==0&&$e(a,f,o)}function Tr(){return(Xn&6)===0?(Mm(0),!1):!0}function kl(){if(Sn!==null){if(mn===0)var a=Sn.return;else a=Sn,Zr=Go=null,am(a),Cl=null,lh=0,a=Sn;for(;a!==null;)Gc(a.alternate,a),a=a.return;Sn=null}}function sl(a,o){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,lB(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),kl(),ln=a,Sn=f=Ni(a.current,null),Vt=o,mn=0,bi=null,ma=!1,Xc=Se(a,o),Yc=!1,Ln=Pa=Gl=Mr=nr=gi=0,qt=Yn=null,Cn=!1,(o&8)!==0&&(o|=o&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=o;0<m;){var A=31-xt(m),C=1<<A;o|=a[A],m&=~C}return Ia=o,Xu(),f}function rd(a,o){fn=null,H.H=oh,o===th||o===Wa?(o=em(),mn=3):o===$p?(o=em(),mn=4):mn=o===bv?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,bi=o,Sn===null&&(gi=1,Zf(a,cs(o,a.current)))}function Wc(){var a=H.H;return H.H=oh,a===null?oh:a}function od(){var a=H.A;return H.A=Ti,a}function l(){gi=4,ma||(Vt&4194048)!==Vt&&ii.current!==null||(Xc=!0),(nr&134217727)===0&&(Mr&134217727)===0||ln===null||ir(ln,Vt,Pa,!1)}function u(a,o,f){var m=Xn;Xn|=2;var A=Wc(),C=od();(ln!==a||Vt!==o)&&(Fa=null,sl(a,o)),o=!1;var F=gi;e:do try{if(mn!==0&&Sn!==null){var q=Sn,oe=bi;switch(mn){case 8:kl(),F=6;break e;case 3:case 2:case 9:case 6:ii.current===null&&(o=!0);var we=mn;if(mn=0,bi=null,ue(a,q,oe,we),f&&Xc){F=0;break e}break;default:we=mn,mn=0,bi=null,ue(a,q,oe,we)}}v(),F=gi;break}catch(Ke){rd(a,Ke)}while(!0);return o&&a.shellSuspendCounter++,Zr=Go=null,Xn=m,H.H=A,H.A=C,Sn===null&&(ln=null,Vt=0,Xu()),F}function v(){for(;Sn!==null;)U(Sn)}function S(a,o){var f=Xn;Xn|=2;var m=Wc(),A=od();ln!==a||Vt!==o?(Fa=null,_s=Le()+500,sl(a,o)):Xc=Se(a,o);e:do try{if(mn!==0&&Sn!==null){o=Sn;var C=bi;t:switch(mn){case 1:mn=0,bi=null,ue(a,o,C,1);break;case 2:case 9:if(If(C)){mn=0,bi=null,W(o);break}o=function(){mn!==2&&mn!==9||ln!==a||(mn=7),ol(a)},C.then(o,o);break e;case 3:mn=7;break e;case 4:mn=5;break e;case 7:If(C)?(mn=0,bi=null,W(o)):(mn=0,bi=null,ue(a,o,C,7));break;case 5:var F=null;switch(Sn.tag){case 26:F=Sn.memoizedState;case 5:case 27:var q=Sn;if(!F||QM(F)){mn=0,bi=null;var oe=q.sibling;if(oe!==null)Sn=oe;else{var we=q.return;we!==null?(Sn=we,Ee(we)):Sn=null}break t}}mn=0,bi=null,ue(a,o,C,5);break;case 6:mn=0,bi=null,ue(a,o,C,6);break;case 8:kl(),gi=6;break e;default:throw Error(n(462))}}w();break}catch(Ke){rd(a,Ke)}while(!0);return Zr=Go=null,H.H=m,H.A=A,Xn=f,Sn!==null?0:(ln=null,Vt=0,Xu(),gi)}function w(){for(;Sn!==null&&!ke();)U(Sn)}function U(a){var o=Ol(a.alternate,a,Ia);a.memoizedProps=a.pendingProps,o===null?Ee(a):Sn=o}function W(a){var o=a,f=o.alternate;switch(o.tag){case 15:case 0:o=ca(f,o,o.pendingProps,o.type,void 0,Vt);break;case 11:o=ca(f,o,o.pendingProps,o.type.render,o.ref,Vt);break;case 5:am(o);default:Gc(f,o),o=Sn=Yp(o,Ia),o=Ol(f,o,Ia)}a.memoizedProps=a.pendingProps,o===null?Ee(a):Sn=o}function ue(a,o,f,m){Zr=Go=null,am(o),Cl=null,lh=0;var A=o.return;try{if(o_(a,A,o,f,Vt)){gi=1,Zf(a,cs(f,a.current)),Sn=null;return}}catch(C){if(A!==null)throw Sn=A,C;gi=1,Zf(a,cs(f,a.current)),Sn=null;return}o.flags&32768?(Fn||m===1?a=!0:Xc||(Vt&536870912)!==0?a=!1:(ma=a=!0,(m===2||m===9||m===3||m===6)&&(m=ii.current,m!==null&&m.tag===13&&(m.flags|=16384))),Je(o,a)):Ee(o)}function Ee(a){var o=a;do{if((o.flags&32768)!==0){Je(o,ma);return}a=o.return;var f=_m(o.alternate,o,Ia);if(f!==null){Sn=f;return}if(o=o.sibling,o!==null){Sn=o;return}Sn=o=a}while(o!==null);gi===0&&(gi=5)}function Je(a,o){do{var f=zc(a.alternate,a);if(f!==null){f.flags&=32767,Sn=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!o&&(a=a.sibling,a!==null)){Sn=a;return}Sn=a=f}while(a!==null);gi=6,Sn=null}function mt(a,o,f,m,A,C,F,q,oe){a.cancelPendingCommit=null;do al();while(Wi!==0);if((Xn&6)!==0)throw Error(n(327));if(o!==null){if(o===a.current)throw Error(n(177));if(C=o.lanes|o.childLanes,C|=Cf,ct(a,f,C,F,q,oe),a===ln&&(Sn=ln=null,Vt=0),ri=o,As=a,va=f,co=C,mh=A,ya=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Hn(Ft,function(){return rl(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=H.T,H.T=null,A=Z.p,Z.p=2,F=Xn,Xn|=4;try{qi(a,o,f)}finally{Xn=F,Z.p=A,H.T=m}}Wi=1,Ct(),Rt(),cn()}}function Ct(){if(Wi===1){Wi=0;var a=As,o=ri,f=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var m=Z.p;Z.p=2;var A=Xn;Xn|=4;try{td(o,a);var C=v_,F=Hp(a.containerInfo),q=C.focusedElem,oe=C.selectionRange;if(F!==q&&q&&q.ownerDocument&&Fp(q.ownerDocument.documentElement,q)){if(oe!==null&&ju(q)){var we=oe.start,Ke=oe.end;if(Ke===void 0&&(Ke=we),"selectionStart"in q)q.selectionStart=we,q.selectionEnd=Math.min(Ke,q.value.length);else{var it=q.ownerDocument||document,De=it&&it.defaultView||window;if(De.getSelection){var Ue=De.getSelection(),sn=q.textContent.length,Qt=Math.min(oe.start,sn),pi=oe.end===void 0?Qt:Math.min(oe.end,sn);!Ue.extend&&Qt>pi&&(F=pi,pi=Qt,Qt=F);var _e=Pp(q,Qt),ye=Pp(q,pi);if(_e&&ye&&(Ue.rangeCount!==1||Ue.anchorNode!==_e.node||Ue.anchorOffset!==_e.offset||Ue.focusNode!==ye.node||Ue.focusOffset!==ye.offset)){var Ce=it.createRange();Ce.setStart(_e.node,_e.offset),Ue.removeAllRanges(),Qt>pi?(Ue.addRange(Ce),Ue.extend(ye.node,ye.offset)):(Ce.setEnd(ye.node,ye.offset),Ue.addRange(Ce))}}}}for(it=[],Ue=q;Ue=Ue.parentNode;)Ue.nodeType===1&&it.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<it.length;q++){var et=it[q];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}Dv=!!g_,v_=g_=null}finally{Xn=A,Z.p=m,H.T=f}}a.current=o,Wi=2}}function Rt(){if(Wi===2){Wi=0;var a=As,o=ri,f=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var m=Z.p;Z.p=2;var A=Xn;Xn|=4;try{oo(a,o.alternate,o)}finally{Xn=A,Z.p=m,H.T=f}}Wi=3}}function cn(){if(Wi===4||Wi===3){Wi=0,Xe();var a=As,o=ri,f=va,m=ya;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Wi=5:(Wi=0,ri=As=null,xa(a,a.pendingLanes));var A=a.pendingLanes;if(A===0&&(ga=null),un(f),o=o.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Ie,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=H.T,A=Z.p,Z.p=2,H.T=null;try{for(var C=a.onRecoverableError,F=0;F<m.length;F++){var q=m[F];C(q.value,{componentStack:q.stack})}}finally{H.T=o,Z.p=A}}(va&3)!==0&&al(),ol(a),A=a.pendingLanes,(f&4194090)!==0&&(A&42)!==0?a===jl?Er++:(Er=0,jl=a):Er=0,Mm(0)}}function xa(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Tc(o)))}function al(a){return Ct(),Rt(),cn(),rl()}function rl(){if(Wi!==5)return!1;var a=As,o=co;co=0;var f=un(va),m=H.T,A=Z.p;try{Z.p=32>f?32:f,H.T=null,f=mh,mh=null;var C=As,F=va;if(Wi=0,ri=As=null,va=0,(Xn&6)!==0)throw Error(n(331));var q=Xn;if(Xn|=4,Am(C.current),sd(C,C.current,F,f),Xn=q,Mm(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Ie,C)}catch{}return!0}finally{Z.p=A,H.T=m,xa(a,o)}}function Be(a,o,f){o=cs(f,o),o=Qf(a.stateNode,o,2),a=eo(a,o,2),a!==null&&(bt(a,2),ol(a))}function ve(a,o,f){if(a.tag===3)Be(a,a,f);else for(;o!==null;){if(o.tag===3){Be(o,a,f);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ga===null||!ga.has(m))){a=cs(f,a),f=xv(2),m=eo(o,f,2),m!==null&&($f(f,m,o,a),bt(m,2),ol(m));break}}o=o.return}}function Oe(a,o,f){var m=a.pingCache;if(m===null){m=a.pingCache=new Sm;var A=new Set;m.set(o,A)}else A=m.get(o),A===void 0&&(A=new Set,m.set(o,A));A.has(f)||(Yc=!0,A.add(f),a=ft.bind(null,a,o,f),o.then(a,a))}function ft(a,o,f){var m=a.pingCache;m!==null&&m.delete(o),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,ln===a&&(Vt&f)===f&&(gi===4||gi===3&&(Vt&62914560)===Vt&&300>Le()-Qn?(Xn&2)===0&&sl(a,0):Gl|=f,Ln===Vt&&(Ln=0)),ol(a)}function Gt(a,o){o===0&&(o=be()),a=Jr(a,o),a!==null&&(bt(a,o),ol(a))}function vi(a){var o=a.memoizedState,f=0;o!==null&&(f=o.retryLane),Gt(a,f)}function tn(a,o){var f=0;switch(a.tag){case 13:var m=a.stateNode,A=a.memoizedState;A!==null&&(f=A.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),Gt(a,f)}function Hn(a,o){return ne(a,o)}var Li=null,Tn=null,Cr=!1,ld=!1,l_=!1,vh=0;function ol(a){a!==Tn&&a.next===null&&(Tn===null?Li=Tn=a:Tn=Tn.next=a),ld=!0,Cr||(Cr=!0,$3())}function Mm(a,o){if(!l_&&ld){l_=!0;do for(var f=!1,m=Li;m!==null;){if(a!==0){var A=m.pendingLanes;if(A===0)var C=0;else{var F=m.suspendedLanes,q=m.pingedLanes;C=(1<<31-xt(42|a)+1)-1,C&=A&~(F&~q),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(f=!0,BM(m,C))}else C=Vt,C=ae(m,m===ln?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(C&3)===0||Se(m,C)||(f=!0,BM(m,C));m=m.next}while(f);l_=!1}}function Q3(){CM()}function CM(){ld=Cr=!1;var a=0;vh!==0&&(oB()&&(a=vh),vh=0);for(var o=Le(),f=null,m=Li;m!==null;){var A=m.next,C=wM(m,o);C===0?(m.next=null,f===null?Li=A:f.next=A,A===null&&(Tn=f)):(f=m,(a!==0||(C&3)!==0)&&(ld=!0)),m=A}Mm(a)}function wM(a,o){for(var f=a.suspendedLanes,m=a.pingedLanes,A=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var F=31-xt(C),q=1<<F,oe=A[F];oe===-1?((q&f)===0||(q&m)!==0)&&(A[F]=nt(q,o)):oe<=o&&(a.expiredLanes|=q),C&=~q}if(o=ln,f=Vt,f=ae(a,a===o?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,f===0||a===o&&(mn===2||mn===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&Ze(m),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||Se(a,f)){if(o=f&-f,o===a.callbackPriority)return o;switch(m!==null&&Ze(m),un(f)){case 2:case 8:f=lt;break;case 32:f=Ft;break;case 268435456:f=Q;break;default:f=Ft}return m=RM.bind(null,a),f=ne(f,m),a.callbackPriority=o,a.callbackNode=f,o}return m!==null&&m!==null&&Ze(m),a.callbackPriority=2,a.callbackNode=null,2}function RM(a,o){if(Wi!==0&&Wi!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(al()&&a.callbackNode!==f)return null;var m=Vt;return m=ae(a,a===ln?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(qc(a,m,o),wM(a,Le()),a.callbackNode!=null&&a.callbackNode===f?RM.bind(null,a):null)}function BM(a,o){if(al())return null;qc(a,o,!0)}function $3(){cB(function(){(Xn&6)!==0?ne(st,Q3):CM()})}function c_(){return vh===0&&(vh=le()),vh}function NM(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ru(""+a)}function DM(a,o){var f=o.ownerDocument.createElement("input");return f.name=o.name,f.value=o.value,a.id&&f.setAttribute("form",a.id),o.parentNode.insertBefore(f,o),a=new FormData(a),f.parentNode.removeChild(f),a}function eB(a,o,f,m,A){if(o==="submit"&&f&&f.stateNode===A){var C=NM((A[li]||null).action),F=m.submitter;F&&(o=(o=F[li]||null)?NM(o.formAction):F.getAttribute("formAction"),o!==null&&(C=o,F=null));var q=new dc("action","action",null,m,A);a.push({event:q,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(vh!==0){var oe=F?DM(A,F):new FormData(A);vm(f,{pending:!0,data:oe,method:A.method,action:C},null,oe)}}else typeof C=="function"&&(q.preventDefault(),oe=F?DM(A,F):new FormData(A),vm(f,{pending:!0,data:oe,method:A.method,action:C},C,oe))},currentTarget:A}]})}}for(var u_=0;u_<Vu.length;u_++){var h_=Vu[u_],tB=h_.toLowerCase(),nB=h_[0].toUpperCase()+h_.slice(1);Qi(tB,"on"+nB)}Qi(Ds,"onAnimationEnd"),Qi(jp,"onAnimationIteration"),Qi(Js,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(N0,"onTransitionRun"),Qi(qr,"onTransitionStart"),Qi(_c,"onTransitionCancel"),Qi(Wr,"onTransitionEnd"),ee("onMouseEnter",["mouseout","mouseover"]),ee("onMouseLeave",["mouseout","mouseover"]),ee("onPointerEnter",["pointerout","pointerover"]),ee("onPointerLeave",["pointerout","pointerover"]),z("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),z("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),z("onBeforeInput",["compositionend","keypress","textInput","paste"]),z("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),z("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),z("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Em="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iB=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Em));function UM(a,o){o=(o&4)!==0;for(var f=0;f<a.length;f++){var m=a[f],A=m.event;m=m.listeners;e:{var C=void 0;if(o)for(var F=m.length-1;0<=F;F--){var q=m[F],oe=q.instance,we=q.currentTarget;if(q=q.listener,oe!==C&&A.isPropagationStopped())break e;C=q,A.currentTarget=we;try{C(A)}catch(Ke){Rl(Ke)}A.currentTarget=null,C=oe}else for(F=0;F<m.length;F++){if(q=m[F],oe=q.instance,we=q.currentTarget,q=q.listener,oe!==C&&A.isPropagationStopped())break e;C=q,A.currentTarget=we;try{C(A)}catch(Ke){Rl(Ke)}A.currentTarget=null,C=oe}}}}function Bn(a,o){var f=o[Bs];f===void 0&&(f=o[Bs]=new Set);var m=a+"__bubble";f.has(m)||(OM(o,a,2,!1),f.add(m))}function f_(a,o,f){var m=0;o&&(m|=4),OM(f,a,m,o)}var Sv="_reactListening"+Math.random().toString(36).slice(2);function d_(a){if(!a[Sv]){a[Sv]=!0,ze.forEach(function(f){f!=="selectionchange"&&(iB.has(f)||f_(f,!1,a),f_(f,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Sv]||(o[Sv]=!0,f_("selectionchange",!1,o))}}function OM(a,o,f,m){switch(sE(o)){case 2:var A=BB;break;case 8:A=NB;break;default:A=C_}f=A.bind(null,o,f,a),A=void 0,!Nu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(A=!0),m?A!==void 0?a.addEventListener(o,f,{capture:!0,passive:A}):a.addEventListener(o,f,!0):A!==void 0?a.addEventListener(o,f,{passive:A}):a.addEventListener(o,f,!1)}function p_(a,o,f,m,A){var C=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var F=m.tag;if(F===3||F===4){var q=m.stateNode.containerInfo;if(q===A)break;if(F===4)for(F=m.return;F!==null;){var oe=F.tag;if((oe===3||oe===4)&&F.stateNode.containerInfo===A)return;F=F.return}for(;q!==null;){if(F=G(q),F===null)return;if(oe=F.tag,oe===5||oe===6||oe===26||oe===27){m=C=F;continue e}q=q.parentNode}}m=m.return}Ep(function(){var we=C,Ke=pf(f),it=[];e:{var De=Tf.get(a);if(De!==void 0){var Ue=dc,sn=a;switch(a){case"keypress":if(Ro(f)===0)break e;case"keydown":case"keyup":Ue=Bp;break;case"focusin":sn="focus",Ue=gf;break;case"focusout":sn="blur",Ue=gf;break;case"beforeblur":case"afterblur":Ue=gf;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=wp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=Kb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=Dp;break;case Ds:case jp:case Js:Ue=g0;break;case Wr:Ue=kr;break;case"scroll":case"scrollend":Ue=d0;break;case"wheel":Ue=Zb;break;case"copy":case"cut":case"paste":Ue=y0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=yf;break;case"toggle":case"beforetoggle":Ue=No}var Qt=(o&4)!==0,pi=!Qt&&(a==="scroll"||a==="scrollend"),_e=Qt?De!==null?De+"Capture":null:De;Qt=[];for(var ye=we,Ce;ye!==null;){var et=ye;if(Ce=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||Ce===null||_e===null||(et=uc(ye,_e),et!=null&&Qt.push(Tm(ye,et,Ce))),pi)break;ye=ye.return}0<Qt.length&&(De=new Ue(De,sn,null,f,Ke),it.push({event:De,listeners:Qt}))}}if((o&7)===0){e:{if(De=a==="mouseover"||a==="pointerover",Ue=a==="mouseout"||a==="pointerout",De&&f!==df&&(sn=f.relatedTarget||f.fromElement)&&(G(sn)||sn[as]))break e;if((Ue||De)&&(De=Ke.window===Ke?Ke:(De=Ke.ownerDocument)?De.defaultView||De.parentWindow:window,Ue?(sn=f.relatedTarget||f.toElement,Ue=we,sn=sn?G(sn):null,sn!==null&&(pi=r(sn),Qt=sn.tag,sn!==pi||Qt!==5&&Qt!==27&&Qt!==6)&&(sn=null)):(Ue=null,sn=we),Ue!==sn)){if(Qt=wp,et="onMouseLeave",_e="onMouseEnter",ye="mouse",(a==="pointerout"||a==="pointerover")&&(Qt=yf,et="onPointerLeave",_e="onPointerEnter",ye="pointer"),pi=Ue==null?De:fe(Ue),Ce=sn==null?De:fe(sn),De=new Qt(et,ye+"leave",Ue,f,Ke),De.target=pi,De.relatedTarget=Ce,et=null,G(Ke)===we&&(Qt=new Qt(_e,ye+"enter",sn,f,Ke),Qt.target=Ce,Qt.relatedTarget=pi,et=Qt),pi=et,Ue&&sn)t:{for(Qt=Ue,_e=sn,ye=0,Ce=Qt;Ce;Ce=cd(Ce))ye++;for(Ce=0,et=_e;et;et=cd(et))Ce++;for(;0<ye-Ce;)Qt=cd(Qt),ye--;for(;0<Ce-ye;)_e=cd(_e),Ce--;for(;ye--;){if(Qt===_e||_e!==null&&Qt===_e.alternate)break t;Qt=cd(Qt),_e=cd(_e)}Qt=null}else Qt=null;Ue!==null&&LM(it,De,Ue,Qt,!1),sn!==null&&pi!==null&&LM(it,pi,sn,Qt,!0)}}e:{if(De=we?fe(we):window,Ue=De.nodeName&&De.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&De.type==="file")var Lt=bf;else if(Ip(De))if(_f)Lt=Oo;else{Lt=w0;var wn=Qb}else Ue=De.nodeName,!Ue||Ue.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?we&&ff(we.elementType)&&(Lt=bf):Lt=Gu;if(Lt&&(Lt=Lt(a,we))){Ys(it,Lt,f,Ke);break e}wn&&wn(a,De,we),a==="focusout"&&we&&De.type==="number"&&we.memoizedProps.value!=null&&mi(De,"number",De.value)}switch(wn=we?fe(we):window,a){case"focusin":(Ip(wn)||wn.contentEditable==="true")&&(Xr=wn,Sf=we,ku=null);break;case"focusout":ku=Sf=Xr=null;break;case"mousedown":Mf=!0;break;case"contextmenu":case"mouseup":case"dragend":Mf=!1,Gp(it,f,Ke);break;case"selectionchange":if(zp)break;case"keydown":case"keyup":Gp(it,f,Ke)}var jt;if(Lu)e:{switch(a){case"compositionstart":var $t="onCompositionStart";break e;case"compositionend":$t="onCompositionEnd";break e;case"compositionupdate":$t="onCompositionUpdate";break e}$t=void 0}else Uo?Fu(a,f)&&($t="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&($t="onCompositionStart");$t&&(Pu&&f.locale!=="ko"&&(Uo||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&Uo&&(jt=Cp()):(Gr=Ke,Tp="value"in Gr?Gr.value:Gr.textContent,Uo=!0)),wn=Mv(we,$t),0<wn.length&&($t=new vf($t,a,null,f,Ke),it.push({event:$t,listeners:wn}),jt?$t.data=jt:(jt=Op(f),jt!==null&&($t.data=jt)))),(jt=Iu?Hu(a,f):Lp(a,f))&&($t=Mv(we,"onBeforeInput"),0<$t.length&&(wn=new vf("onBeforeInput","beforeinput",null,f,Ke),it.push({event:wn,listeners:$t}),wn.data=jt)),eB(it,a,we,f,Ke)}UM(it,o)})}function Tm(a,o,f){return{instance:a,listener:o,currentTarget:f}}function Mv(a,o){for(var f=o+"Capture",m=[];a!==null;){var A=a,C=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||C===null||(A=uc(a,f),A!=null&&m.unshift(Tm(a,A,C)),A=uc(a,o),A!=null&&m.push(Tm(a,A,C))),a.tag===3)return m;a=a.return}return[]}function cd(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function LM(a,o,f,m,A){for(var C=o._reactName,F=[];f!==null&&f!==m;){var q=f,oe=q.alternate,we=q.stateNode;if(q=q.tag,oe!==null&&oe===m)break;q!==5&&q!==26&&q!==27||we===null||(oe=we,A?(we=uc(f,C),we!=null&&F.unshift(Tm(f,we,oe))):A||(we=uc(f,C),we!=null&&F.push(Tm(f,we,oe)))),f=f.return}F.length!==0&&a.push({event:o,listeners:F})}var sB=/\r\n?/g,aB=/\u0000|\uFFFD/g;function IM(a){return(typeof a=="string"?a:""+a).replace(sB,`
`).replace(aB,"")}function PM(a,o){return o=IM(o),IM(a)===o}function Ev(){}function di(a,o,f,m,A,C){switch(f){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Vi(a,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Vi(a,""+m);break;case"className":Ve(a,"class",m);break;case"tabIndex":Ve(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ve(a,f,m);break;case"style":wu(a,m,C);break;case"data":if(o!=="object"){Ve(a,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||f!=="href")){a.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=Ru(""+m),a.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(f==="formAction"?(o!=="input"&&di(a,o,"name",A.name,A,null),di(a,o,"formEncType",A.formEncType,A,null),di(a,o,"formMethod",A.formMethod,A,null),di(a,o,"formTarget",A.formTarget,A,null)):(di(a,o,"encType",A.encType,A,null),di(a,o,"method",A.method,A,null),di(a,o,"target",A.target,A,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=Ru(""+m),a.setAttribute(f,m);break;case"onClick":m!=null&&(a.onclick=Ev);break;case"onScroll":m!=null&&Bn("scroll",a);break;case"onScrollEnd":m!=null&&Bn("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(f=m.__html,f!=null){if(A.children!=null)throw Error(n(60));a.innerHTML=f}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}f=Ru(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""+m):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":m===!0?a.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,m):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(f,m):a.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(f):a.setAttribute(f,m);break;case"popover":Bn("beforetoggle",a),Bn("toggle",a),Fe(a,"popover",m);break;case"xlinkActuate":We(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":We(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":We(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":We(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":We(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":We(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":We(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":We(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":We(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Fe(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Sp.get(f)||f,Fe(a,f,m))}}function m_(a,o,f,m,A,C){switch(f){case"style":wu(a,m,C);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(f=m.__html,f!=null){if(A.children!=null)throw Error(n(60));a.innerHTML=f}}break;case"children":typeof m=="string"?Vi(a,m):(typeof m=="number"||typeof m=="bigint")&&Vi(a,""+m);break;case"onScroll":m!=null&&Bn("scroll",a);break;case"onScrollEnd":m!=null&&Bn("scrollend",a);break;case"onClick":m!=null&&(a.onclick=Ev);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ut.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(A=f.endsWith("Capture"),o=f.slice(2,A?f.length-7:void 0),C=a[li]||null,C=C!=null?C[f]:null,typeof C=="function"&&a.removeEventListener(o,C,A),typeof m=="function")){typeof C!="function"&&C!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(o,m,A);break e}f in a?a[f]=m:m===!0?a.setAttribute(f,""):Fe(a,f,m)}}}function Hs(a,o,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bn("error",a),Bn("load",a);var m=!1,A=!1,C;for(C in f)if(f.hasOwnProperty(C)){var F=f[C];if(F!=null)switch(C){case"src":m=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:di(a,o,C,F,f,null)}}A&&di(a,o,"srcSet",f.srcSet,f,null),m&&di(a,o,"src",f.src,f,null);return;case"input":Bn("invalid",a);var q=C=F=A=null,oe=null,we=null;for(m in f)if(f.hasOwnProperty(m)){var Ke=f[m];if(Ke!=null)switch(m){case"name":A=Ke;break;case"type":F=Ke;break;case"checked":oe=Ke;break;case"defaultChecked":we=Ke;break;case"value":C=Ke;break;case"defaultValue":q=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(n(137,o));break;default:di(a,o,m,Ke,f,null)}}Wn(a,C,q,oe,we,F,A,!1),rn(a);return;case"select":Bn("invalid",a),m=F=C=null;for(A in f)if(f.hasOwnProperty(A)&&(q=f[A],q!=null))switch(A){case"value":C=q;break;case"defaultValue":F=q;break;case"multiple":m=q;default:di(a,o,A,q,f,null)}o=C,f=F,a.multiple=!!m,o!=null?En(a,!!m,o,!1):f!=null&&En(a,!!m,f,!0);return;case"textarea":Bn("invalid",a),C=A=m=null;for(F in f)if(f.hasOwnProperty(F)&&(q=f[F],q!=null))switch(F){case"value":m=q;break;case"defaultValue":A=q;break;case"children":C=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(91));break;default:di(a,o,F,q,f,null)}_l(a,m,A,C),rn(a);return;case"option":for(oe in f)if(f.hasOwnProperty(oe)&&(m=f[oe],m!=null))switch(oe){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:di(a,o,oe,m,f,null)}return;case"dialog":Bn("beforetoggle",a),Bn("toggle",a),Bn("cancel",a),Bn("close",a);break;case"iframe":case"object":Bn("load",a);break;case"video":case"audio":for(m=0;m<Em.length;m++)Bn(Em[m],a);break;case"image":Bn("error",a),Bn("load",a);break;case"details":Bn("toggle",a);break;case"embed":case"source":case"link":Bn("error",a),Bn("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in f)if(f.hasOwnProperty(we)&&(m=f[we],m!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:di(a,o,we,m,f,null)}return;default:if(ff(o)){for(Ke in f)f.hasOwnProperty(Ke)&&(m=f[Ke],m!==void 0&&m_(a,o,Ke,m,f,void 0));return}}for(q in f)f.hasOwnProperty(q)&&(m=f[q],m!=null&&di(a,o,q,m,f,null))}function rB(a,o,f,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,C=null,F=null,q=null,oe=null,we=null,Ke=null;for(Ue in f){var it=f[Ue];if(f.hasOwnProperty(Ue)&&it!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":oe=it;default:m.hasOwnProperty(Ue)||di(a,o,Ue,null,m,it)}}for(var De in m){var Ue=m[De];if(it=f[De],m.hasOwnProperty(De)&&(Ue!=null||it!=null))switch(De){case"type":C=Ue;break;case"name":A=Ue;break;case"checked":we=Ue;break;case"defaultChecked":Ke=Ue;break;case"value":F=Ue;break;case"defaultValue":q=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(n(137,o));break;default:Ue!==it&&di(a,o,De,Ue,m,it)}}Ht(a,F,q,oe,we,Ke,C,A);return;case"select":Ue=F=q=De=null;for(C in f)if(oe=f[C],f.hasOwnProperty(C)&&oe!=null)switch(C){case"value":break;case"multiple":Ue=oe;default:m.hasOwnProperty(C)||di(a,o,C,null,m,oe)}for(A in m)if(C=m[A],oe=f[A],m.hasOwnProperty(A)&&(C!=null||oe!=null))switch(A){case"value":De=C;break;case"defaultValue":q=C;break;case"multiple":F=C;default:C!==oe&&di(a,o,A,C,m,oe)}o=q,f=F,m=Ue,De!=null?En(a,!!f,De,!1):!!m!=!!f&&(o!=null?En(a,!!f,o,!0):En(a,!!f,f?[]:"",!1));return;case"textarea":Ue=De=null;for(q in f)if(A=f[q],f.hasOwnProperty(q)&&A!=null&&!m.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:di(a,o,q,null,m,A)}for(F in m)if(A=m[F],C=f[F],m.hasOwnProperty(F)&&(A!=null||C!=null))switch(F){case"value":De=A;break;case"defaultValue":Ue=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==C&&di(a,o,F,A,m,C)}ci(a,De,Ue);return;case"option":for(var sn in f)if(De=f[sn],f.hasOwnProperty(sn)&&De!=null&&!m.hasOwnProperty(sn))switch(sn){case"selected":a.selected=!1;break;default:di(a,o,sn,null,m,De)}for(oe in m)if(De=m[oe],Ue=f[oe],m.hasOwnProperty(oe)&&De!==Ue&&(De!=null||Ue!=null))switch(oe){case"selected":a.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:di(a,o,oe,De,m,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qt in f)De=f[Qt],f.hasOwnProperty(Qt)&&De!=null&&!m.hasOwnProperty(Qt)&&di(a,o,Qt,null,m,De);for(we in m)if(De=m[we],Ue=f[we],m.hasOwnProperty(we)&&De!==Ue&&(De!=null||Ue!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(n(137,o));break;default:di(a,o,we,De,m,Ue)}return;default:if(ff(o)){for(var pi in f)De=f[pi],f.hasOwnProperty(pi)&&De!==void 0&&!m.hasOwnProperty(pi)&&m_(a,o,pi,void 0,m,De);for(Ke in m)De=m[Ke],Ue=f[Ke],!m.hasOwnProperty(Ke)||De===Ue||De===void 0&&Ue===void 0||m_(a,o,Ke,De,m,Ue);return}}for(var _e in f)De=f[_e],f.hasOwnProperty(_e)&&De!=null&&!m.hasOwnProperty(_e)&&di(a,o,_e,null,m,De);for(it in m)De=m[it],Ue=f[it],!m.hasOwnProperty(it)||De===Ue||De==null&&Ue==null||di(a,o,it,De,m,Ue)}var g_=null,v_=null;function Tv(a){return a.nodeType===9?a:a.ownerDocument}function FM(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function HM(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function y_(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var x_=null;function oB(){var a=window.event;return a&&a.type==="popstate"?a===x_?!1:(x_=a,!0):(x_=null,!1)}var zM=typeof setTimeout=="function"?setTimeout:void 0,lB=typeof clearTimeout=="function"?clearTimeout:void 0,GM=typeof Promise=="function"?Promise:void 0,cB=typeof queueMicrotask=="function"?queueMicrotask:typeof GM<"u"?function(a){return GM.resolve(null).then(a).catch(uB)}:zM;function uB(a){setTimeout(function(){throw a})}function Jc(a){return a==="head"}function jM(a,o){var f=o,m=0,A=0;do{var C=f.nextSibling;if(a.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"){if(0<m&&8>m){f=m;var F=a.ownerDocument;if(f&1&&Cm(F.documentElement),f&2&&Cm(F.body),f&4)for(f=F.head,Cm(f),F=f.firstChild;F;){var q=F.nextSibling,oe=F.nodeName;F[ys]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&F.rel.toLowerCase()==="stylesheet"||f.removeChild(F),F=q}}if(A===0){a.removeChild(C),Lm(o);return}A--}else f==="$"||f==="$?"||f==="$!"?A++:m=f.charCodeAt(0)-48;else m=0;f=C}while(f);Lm(o)}function b_(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var f=o;switch(o=o.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":b_(f),Zn(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function hB(a,o,f,m){for(;a.nodeType===1;){var A=f;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[ys])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==A.rel||a.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||a.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||a.getAttribute("title")!==(A.title==null?null:A.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(A.src==null?null:A.src)||a.getAttribute("type")!==(A.type==null?null:A.type)||a.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var C=A.name==null?null:""+A.name;if(A.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=uo(a.nextSibling),a===null)break}return null}function fB(a,o,f){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=uo(a.nextSibling),a===null))return null;return a}function __(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function dB(a,o){var f=a.ownerDocument;if(a.data!=="$?"||f.readyState==="complete")o();else{var m=function(){o(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function uo(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var A_=null;function kM(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(o===0)return a;o--}else f==="/$"&&o++}a=a.previousSibling}return null}function VM(a,o,f){switch(o=Tv(f),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Cm(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Zn(a)}var wr=new Map,XM=new Set;function Cv(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Vl=Z.d;Z.d={f:pB,r:mB,D:gB,C:vB,L:yB,m:xB,X:_B,S:bB,M:AB};function pB(){var a=Vl.f(),o=Tr();return a||o}function mB(a){var o=J(a);o!==null&&o.tag===5&&o.type==="form"?rv(o):Vl.r(a)}var ud=typeof document>"u"?null:document;function YM(a,o,f){var m=ud;if(m&&typeof o=="string"&&o){var A=on(o);A='link[rel="'+a+'"][href="'+A+'"]',typeof f=="string"&&(A+='[crossorigin="'+f+'"]'),XM.has(A)||(XM.add(A),a={rel:a,crossOrigin:f,href:o},m.querySelector(A)===null&&(o=m.createElement("link"),Hs(o,"link",a),Ne(o),m.head.appendChild(o)))}}function gB(a){Vl.D(a),YM("dns-prefetch",a,null)}function vB(a,o){Vl.C(a,o),YM("preconnect",a,o)}function yB(a,o,f){Vl.L(a,o,f);var m=ud;if(m&&a&&o){var A='link[rel="preload"][as="'+on(o)+'"]';o==="image"&&f&&f.imageSrcSet?(A+='[imagesrcset="'+on(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(A+='[imagesizes="'+on(f.imageSizes)+'"]')):A+='[href="'+on(a)+'"]';var C=A;switch(o){case"style":C=hd(a);break;case"script":C=fd(a)}wr.has(C)||(a=y({rel:"preload",href:o==="image"&&f&&f.imageSrcSet?void 0:a,as:o},f),wr.set(C,a),m.querySelector(A)!==null||o==="style"&&m.querySelector(wm(C))||o==="script"&&m.querySelector(Rm(C))||(o=m.createElement("link"),Hs(o,"link",a),Ne(o),m.head.appendChild(o)))}}function xB(a,o){Vl.m(a,o);var f=ud;if(f&&a){var m=o&&typeof o.as=="string"?o.as:"script",A='link[rel="modulepreload"][as="'+on(m)+'"][href="'+on(a)+'"]',C=A;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=fd(a)}if(!wr.has(C)&&(a=y({rel:"modulepreload",href:a},o),wr.set(C,a),f.querySelector(A)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Rm(C)))return}m=f.createElement("link"),Hs(m,"link",a),Ne(m),f.head.appendChild(m)}}}function bB(a,o,f){Vl.S(a,o,f);var m=ud;if(m&&a){var A=Re(m).hoistableStyles,C=hd(a);o=o||"default";var F=A.get(C);if(!F){var q={loading:0,preload:null};if(F=m.querySelector(wm(C)))q.loading=5;else{a=y({rel:"stylesheet",href:a,"data-precedence":o},f),(f=wr.get(C))&&S_(a,f);var oe=F=m.createElement("link");Ne(oe),Hs(oe,"link",a),oe._p=new Promise(function(we,Ke){oe.onload=we,oe.onerror=Ke}),oe.addEventListener("load",function(){q.loading|=1}),oe.addEventListener("error",function(){q.loading|=2}),q.loading|=4,wv(F,o,m)}F={type:"stylesheet",instance:F,count:1,state:q},A.set(C,F)}}}function _B(a,o){Vl.X(a,o);var f=ud;if(f&&a){var m=Re(f).hoistableScripts,A=fd(a),C=m.get(A);C||(C=f.querySelector(Rm(A)),C||(a=y({src:a,async:!0},o),(o=wr.get(A))&&M_(a,o),C=f.createElement("script"),Ne(C),Hs(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(A,C))}}function AB(a,o){Vl.M(a,o);var f=ud;if(f&&a){var m=Re(f).hoistableScripts,A=fd(a),C=m.get(A);C||(C=f.querySelector(Rm(A)),C||(a=y({src:a,async:!0,type:"module"},o),(o=wr.get(A))&&M_(a,o),C=f.createElement("script"),Ne(C),Hs(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(A,C))}}function qM(a,o,f,m){var A=(A=me.current)?Cv(A):null;if(!A)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(o=hd(f.href),f=Re(A).hoistableStyles,m=f.get(o),m||(m={type:"style",instance:null,count:0,state:null},f.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=hd(f.href);var C=Re(A).hoistableStyles,F=C.get(a);if(F||(A=A.ownerDocument||A,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,F),(C=A.querySelector(wm(a)))&&!C._p&&(F.instance=C,F.state.loading=5),wr.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},wr.set(a,f),C||SB(A,a,f,F.state))),o&&m===null)throw Error(n(528,""));return F}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=f.async,f=f.src,typeof f=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=fd(f),f=Re(A).hoistableScripts,m=f.get(o),m||(m={type:"script",instance:null,count:0,state:null},f.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function hd(a){return'href="'+on(a)+'"'}function wm(a){return'link[rel="stylesheet"]['+a+"]"}function WM(a){return y({},a,{"data-precedence":a.precedence,precedence:null})}function SB(a,o,f,m){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=a.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Hs(o,"link",f),Ne(o),a.head.appendChild(o))}function fd(a){return'[src="'+on(a)+'"]'}function Rm(a){return"script[async]"+a}function JM(a,o,f){if(o.count++,o.instance===null)switch(o.type){case"style":var m=a.querySelector('style[data-href~="'+on(f.href)+'"]');if(m)return o.instance=m,Ne(m),m;var A=y({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),Ne(m),Hs(m,"style",A),wv(m,f.precedence,a),o.instance=m;case"stylesheet":A=hd(f.href);var C=a.querySelector(wm(A));if(C)return o.state.loading|=4,o.instance=C,Ne(C),C;m=WM(f),(A=wr.get(A))&&S_(m,A),C=(a.ownerDocument||a).createElement("link"),Ne(C);var F=C;return F._p=new Promise(function(q,oe){F.onload=q,F.onerror=oe}),Hs(C,"link",m),o.state.loading|=4,wv(C,f.precedence,a),o.instance=C;case"script":return C=fd(f.src),(A=a.querySelector(Rm(C)))?(o.instance=A,Ne(A),A):(m=f,(A=wr.get(C))&&(m=y({},f),M_(m,A)),a=a.ownerDocument||a,A=a.createElement("script"),Ne(A),Hs(A,"link",m),a.head.appendChild(A),o.instance=A);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,wv(m,f.precedence,a));return o.instance}function wv(a,o,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=m.length?m[m.length-1]:null,C=A,F=0;F<m.length;F++){var q=m[F];if(q.dataset.precedence===o)C=q;else if(C!==A)break}C?C.parentNode.insertBefore(a,C.nextSibling):(o=f.nodeType===9?f.head:f,o.insertBefore(a,o.firstChild))}function S_(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function M_(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Rv=null;function KM(a,o,f){if(Rv===null){var m=new Map,A=Rv=new Map;A.set(f,m)}else A=Rv,m=A.get(f),m||(m=new Map,A.set(f,m));if(m.has(a))return m;for(m.set(a,null),f=f.getElementsByTagName(a),A=0;A<f.length;A++){var C=f[A];if(!(C[ys]||C[Si]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var F=C.getAttribute(o)||"";F=a+F;var q=m.get(F);q?q.push(C):m.set(F,[C])}}return m}function ZM(a,o,f){a=a.ownerDocument||a,a.head.insertBefore(f,o==="title"?a.querySelector("head > title"):null)}function MB(a,o,f){if(f===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function QM(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Bm=null;function EB(){}function TB(a,o,f){if(Bm===null)throw Error(n(475));var m=Bm;if(o.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var A=hd(f.href),C=a.querySelector(wm(A));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=Bv.bind(m),a.then(m,m)),o.state.loading|=4,o.instance=C,Ne(C);return}C=a.ownerDocument||a,f=WM(f),(A=wr.get(A))&&S_(f,A),C=C.createElement("link"),Ne(C);var F=C;F._p=new Promise(function(q,oe){F.onload=q,F.onerror=oe}),Hs(C,"link",f),o.instance=C}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=Bv.bind(m),a.addEventListener("load",o),a.addEventListener("error",o))}}function CB(){if(Bm===null)throw Error(n(475));var a=Bm;return a.stylesheets&&a.count===0&&E_(a,a.stylesheets),0<a.count?function(o){var f=setTimeout(function(){if(a.stylesheets&&E_(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(f)}}:null}function Bv(){if(this.count--,this.count===0){if(this.stylesheets)E_(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Nv=null;function E_(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Nv=new Map,o.forEach(wB,a),Nv=null,Bv.call(a))}function wB(a,o){if(!(o.state.loading&4)){var f=Nv.get(a);if(f)var m=f.get(null);else{f=new Map,Nv.set(a,f);for(var A=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<A.length;C++){var F=A[C];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(f.set(F.dataset.precedence,F),m=F)}m&&f.set(null,m)}A=o.instance,F=A.getAttribute("data-precedence"),C=f.get(F)||m,C===m&&f.set(null,A),f.set(F,A),this.count++,m=Bv.bind(this),A.addEventListener("load",m),A.addEventListener("error",m),C?C.parentNode.insertBefore(A,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(A,a.firstChild)),o.state.loading|=4}}var Nm={$$typeof:N,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function RB(a,o,f,m,A,C,F,q){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rt(0),this.hiddenUpdates=rt(null),this.identifierPrefix=m,this.onUncaughtError=A,this.onCaughtError=C,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function $M(a,o,f,m,A,C,F,q,oe,we,Ke,it){return a=new RB(a,o,f,F,q,oe,we,it),o=1,C===!0&&(o|=24),C=Ks(3,null,null,o),a.current=C,C.stateNode=a,o=Uf(),o.refCount++,a.pooledCache=o,o.refCount++,C.memoizedState={element:m,isDehydrated:f,cache:o},tm(C),a}function eE(a){return a?(a=Po,a):Po}function tE(a,o,f,m,A,C){A=eE(A),m.context===null?m.context=A:m.pendingContext=A,m=mr(o),m.payload={element:f},C=C===void 0?null:C,C!==null&&(m.callback=C),f=eo(a,m,o),f!==null&&(Fs(f,a,o),Tl(f,a,o))}function nE(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<o?f:o}}function T_(a,o){nE(a,o),(a=a.alternate)&&nE(a,o)}function iE(a){if(a.tag===13){var o=Jr(a,67108864);o!==null&&Fs(o,a,67108864),T_(a,67108864)}}var Dv=!0;function BB(a,o,f,m){var A=H.T;H.T=null;var C=Z.p;try{Z.p=2,C_(a,o,f,m)}finally{Z.p=C,H.T=A}}function NB(a,o,f,m){var A=H.T;H.T=null;var C=Z.p;try{Z.p=8,C_(a,o,f,m)}finally{Z.p=C,H.T=A}}function C_(a,o,f,m){if(Dv){var A=w_(m);if(A===null)p_(a,o,m,Uv,f),aE(a,m);else if(UB(A,a,o,f,m))m.stopPropagation();else if(aE(a,m),o&4&&-1<DB.indexOf(a)){for(;A!==null;){var C=J(A);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var F=Ut(C.pendingLanes);if(F!==0){var q=C;for(q.pendingLanes|=2,q.entangledLanes|=2;F;){var oe=1<<31-xt(F);q.entanglements[1]|=oe,F&=~oe}ol(C),(Xn&6)===0&&(_s=Le()+500,Mm(0))}}break;case 13:q=Jr(C,2),q!==null&&Fs(q,C,2),Tr(),T_(C,2)}if(C=w_(m),C===null&&p_(a,o,m,Uv,f),C===A)break;A=C}A!==null&&m.stopPropagation()}else p_(a,o,m,null,f)}}function w_(a){return a=pf(a),R_(a)}var Uv=null;function R_(a){if(Uv=null,a=G(a),a!==null){var o=r(a);if(o===null)a=null;else{var f=o.tag;if(f===13){if(a=c(o),a!==null)return a;a=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Uv=a,null}function sE(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dt()){case st:return 2;case lt:return 8;case Ft:case kt:return 32;case Q:return 268435456;default:return 32}default:return 32}}var B_=!1,Kc=null,Zc=null,Qc=null,Dm=new Map,Um=new Map,$c=[],DB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aE(a,o){switch(a){case"focusin":case"focusout":Kc=null;break;case"dragenter":case"dragleave":Zc=null;break;case"mouseover":case"mouseout":Qc=null;break;case"pointerover":case"pointerout":Dm.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Um.delete(o.pointerId)}}function Om(a,o,f,m,A,C){return a===null||a.nativeEvent!==C?(a={blockedOn:o,domEventName:f,eventSystemFlags:m,nativeEvent:C,targetContainers:[A]},o!==null&&(o=J(o),o!==null&&iE(o)),a):(a.eventSystemFlags|=m,o=a.targetContainers,A!==null&&o.indexOf(A)===-1&&o.push(A),a)}function UB(a,o,f,m,A){switch(o){case"focusin":return Kc=Om(Kc,a,o,f,m,A),!0;case"dragenter":return Zc=Om(Zc,a,o,f,m,A),!0;case"mouseover":return Qc=Om(Qc,a,o,f,m,A),!0;case"pointerover":var C=A.pointerId;return Dm.set(C,Om(Dm.get(C)||null,a,o,f,m,A)),!0;case"gotpointercapture":return C=A.pointerId,Um.set(C,Om(Um.get(C)||null,a,o,f,m,A)),!0}return!1}function rE(a){var o=G(a.target);if(o!==null){var f=r(o);if(f!==null){if(o=f.tag,o===13){if(o=c(f),o!==null){a.blockedOn=o,Fi(a.priority,function(){if(f.tag===13){var m=Ci();m=Ot(m);var A=Jr(f,m);A!==null&&Fs(A,f,m),T_(f,m)}});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ov(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var f=w_(a.nativeEvent);if(f===null){f=a.nativeEvent;var m=new f.constructor(f.type,f);df=m,f.target.dispatchEvent(m),df=null}else return o=J(f),o!==null&&iE(o),a.blockedOn=f,!1;o.shift()}return!0}function oE(a,o,f){Ov(a)&&f.delete(o)}function OB(){B_=!1,Kc!==null&&Ov(Kc)&&(Kc=null),Zc!==null&&Ov(Zc)&&(Zc=null),Qc!==null&&Ov(Qc)&&(Qc=null),Dm.forEach(oE),Um.forEach(oE)}function Lv(a,o){a.blockedOn===o&&(a.blockedOn=null,B_||(B_=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,OB)))}var Iv=null;function lE(a){Iv!==a&&(Iv=a,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Iv===a&&(Iv=null);for(var o=0;o<a.length;o+=3){var f=a[o],m=a[o+1],A=a[o+2];if(typeof m!="function"){if(R_(m||f)===null)continue;break}var C=J(f);C!==null&&(a.splice(o,3),o-=3,vm(C,{pending:!0,data:A,method:f.method,action:m},m,A))}}))}function Lm(a){function o(oe){return Lv(oe,a)}Kc!==null&&Lv(Kc,a),Zc!==null&&Lv(Zc,a),Qc!==null&&Lv(Qc,a),Dm.forEach(o),Um.forEach(o);for(var f=0;f<$c.length;f++){var m=$c[f];m.blockedOn===a&&(m.blockedOn=null)}for(;0<$c.length&&(f=$c[0],f.blockedOn===null);)rE(f),f.blockedOn===null&&$c.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var A=f[m],C=f[m+1],F=A[li]||null;if(typeof C=="function")F||lE(f);else if(F){var q=null;if(C&&C.hasAttribute("formAction")){if(A=C,F=C[li]||null)q=F.formAction;else if(R_(A)!==null)continue}else q=F.action;typeof q=="function"?f[m+1]=q:(f.splice(m,3),m-=3),lE(f)}}}function N_(a){this._internalRoot=a}Pv.prototype.render=N_.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var f=o.current,m=Ci();tE(f,m,a,o,null,null)},Pv.prototype.unmount=N_.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;tE(a.current,2,null,a,null,null),Tr(),o[as]=null}};function Pv(a){this._internalRoot=a}Pv.prototype.unstable_scheduleHydration=function(a){if(a){var o=an();a={blockedOn:null,target:a,priority:o};for(var f=0;f<$c.length&&o!==0&&o<$c[f].priority;f++);$c.splice(f,0,a),f===0&&rE(a)}};var cE=e.version;if(cE!=="19.1.1")throw Error(n(527,cE,"19.1.1"));Z.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=d(o),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var LB={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fv.isDisabled&&Fv.supportsFiber)try{Ie=Fv.inject(LB),je=Fv}catch{}}return Pm.createRoot=function(a,o){if(!s(a))throw Error(n(299));var f=!1,m="",A=uh,C=Kf,F=yv,q=null;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(A=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(F=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(q=o.unstable_transitionCallbacks)),o=$M(a,1,!1,null,null,f,m,A,C,F,q,null),a[as]=o.current,d_(a),new N_(o)},Pm.hydrateRoot=function(a,o,f){if(!s(a))throw Error(n(299));var m=!1,A="",C=uh,F=Kf,q=yv,oe=null,we=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(A=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(F=f.onCaughtError),f.onRecoverableError!==void 0&&(q=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(oe=f.unstable_transitionCallbacks),f.formState!==void 0&&(we=f.formState)),o=$M(a,1,!0,o,f??null,m,A,C,F,q,oe,we),o.context=eE(null),f=o.current,m=Ci(),m=Ot(m),A=mr(m),A.callback=null,eo(f,A,m),f=m,o.current.lanes=f,bt(o,f),ol(o),a[as]=o.current,d_(a),new Pv(o)},Pm.version="19.1.1",Pm}var xE;function XB(){if(xE)return O_.exports;xE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),O_.exports=VB(),O_.exports}var fw=XB(),ja=function(){return ja=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ja.apply(this,arguments)};function Zy(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))}var _i="-ms-",lg="-moz-",$n="-webkit-",dw="comm",tb="rule",$1="decl",YB="@import",pw="@keyframes",qB="@layer",mw=Math.abs,eS=String.fromCharCode,l1=Object.assign;function WB(i,e){return Es(i,0)^45?(((e<<2^Es(i,0))<<2^Es(i,1))<<2^Es(i,2))<<2^Es(i,3):0}function gw(i){return i.trim()}function Ql(i,e){return(i=e.exec(i))?i[0]:i}function Mn(i,e,t){return i.replace(e,t)}function zy(i,e,t){return i.indexOf(e,t)}function Es(i,e){return i.charCodeAt(e)|0}function Jd(i,e,t){return i.slice(e,t)}function hl(i){return i.length}function vw(i){return i.length}function ig(i,e){return e.push(i),i}function JB(i,e){return i.map(e).join("")}function bE(i,e){return i.filter(function(t){return!Ql(t,e)})}var nb=1,Kd=1,yw=0,Pr=0,ss=0,vp="";function ib(i,e,t,n,s,r,c,h){return{value:i,root:e,parent:t,type:n,props:s,children:r,line:nb,column:Kd,length:c,return:"",siblings:h}}function hu(i,e){return l1(ib("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},e)}function dd(i){for(;i.root;)i=hu(i.root,{children:[i]});ig(i,i.siblings)}function KB(){return ss}function ZB(){return ss=Pr>0?Es(vp,--Pr):0,Kd--,ss===10&&(Kd=1,nb--),ss}function Ao(){return ss=Pr<yw?Es(vp,Pr++):0,Kd++,ss===10&&(Kd=1,nb++),ss}function qh(){return Es(vp,Pr)}function Gy(){return Pr}function sb(i,e){return Jd(vp,i,e)}function c1(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function QB(i){return nb=Kd=1,yw=hl(vp=i),Pr=0,[]}function $B(i){return vp="",i}function F_(i){return gw(sb(Pr-1,u1(i===91?i+2:i===40?i+1:i)))}function eN(i){for(;(ss=qh())&&ss<33;)Ao();return c1(i)>2||c1(ss)>3?"":" "}function tN(i,e){for(;--e&&Ao()&&!(ss<48||ss>102||ss>57&&ss<65||ss>70&&ss<97););return sb(i,Gy()+(e<6&&qh()==32&&Ao()==32))}function u1(i){for(;Ao();)switch(ss){case i:return Pr;case 34:case 39:i!==34&&i!==39&&u1(ss);break;case 40:i===41&&u1(i);break;case 92:Ao();break}return Pr}function nN(i,e){for(;Ao()&&i+ss!==57;)if(i+ss===84&&qh()===47)break;return"/*"+sb(e,Pr-1)+"*"+eS(i===47?i:Ao())}function iN(i){for(;!c1(qh());)Ao();return sb(i,Pr)}function sN(i){return $B(jy("",null,null,null,[""],i=QB(i),0,[0],i))}function jy(i,e,t,n,s,r,c,h,d){for(var p=0,y=0,x=c,b=0,_=0,E=0,R=1,T=1,M=1,B=0,N="",D=s,L=r,I=n,j=N;T;)switch(E=B,B=Ao()){case 40:if(E!=108&&Es(j,x-1)==58){zy(j+=Mn(F_(B),"&","&\f"),"&\f",mw(p?h[p-1]:0))!=-1&&(M=-1);break}case 34:case 39:case 91:j+=F_(B);break;case 9:case 10:case 13:case 32:j+=eN(E);break;case 92:j+=tN(Gy()-1,7);continue;case 47:switch(qh()){case 42:case 47:ig(aN(nN(Ao(),Gy()),e,t,d),d);break;default:j+="/"}break;case 123*R:h[p++]=hl(j)*M;case 125*R:case 59:case 0:switch(B){case 0:case 125:T=0;case 59+y:M==-1&&(j=Mn(j,/\f/g,"")),_>0&&hl(j)-x&&ig(_>32?AE(j+";",n,t,x-1,d):AE(Mn(j," ","")+";",n,t,x-2,d),d);break;case 59:j+=";";default:if(ig(I=_E(j,e,t,p,y,s,h,N,D=[],L=[],x,r),r),B===123)if(y===0)jy(j,e,I,I,D,r,x,h,L);else switch(b===99&&Es(j,3)===110?100:b){case 100:case 108:case 109:case 115:jy(i,I,I,n&&ig(_E(i,I,I,0,0,s,h,N,s,D=[],x,L),L),s,L,x,h,n?D:L);break;default:jy(j,I,I,I,[""],L,0,h,L)}}p=y=_=0,R=M=1,N=j="",x=c;break;case 58:x=1+hl(j),_=E;default:if(R<1){if(B==123)--R;else if(B==125&&R++==0&&ZB()==125)continue}switch(j+=eS(B),B*R){case 38:M=y>0?1:(j+="\f",-1);break;case 44:h[p++]=(hl(j)-1)*M,M=1;break;case 64:qh()===45&&(j+=F_(Ao())),b=qh(),y=x=hl(N=j+=iN(Gy())),B++;break;case 45:E===45&&hl(j)==2&&(R=0)}}return r}function _E(i,e,t,n,s,r,c,h,d,p,y,x){for(var b=s-1,_=s===0?r:[""],E=vw(_),R=0,T=0,M=0;R<n;++R)for(var B=0,N=Jd(i,b+1,b=mw(T=c[R])),D=i;B<E;++B)(D=gw(T>0?_[B]+" "+N:Mn(N,/&\f/g,_[B])))&&(d[M++]=D);return ib(i,e,t,s===0?tb:h,d,p,y,x)}function aN(i,e,t,n){return ib(i,e,t,dw,eS(KB()),Jd(i,2,-2),0,n)}function AE(i,e,t,n,s){return ib(i,e,t,$1,Jd(i,0,n),Jd(i,n+1,-1),n,s)}function xw(i,e,t){switch(WB(i,e)){case 5103:return $n+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $n+i+i;case 4789:return lg+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return $n+i+lg+i+_i+i+i;case 5936:switch(Es(i,e+11)){case 114:return $n+i+_i+Mn(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return $n+i+_i+Mn(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return $n+i+_i+Mn(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return $n+i+_i+i+i;case 6165:return $n+i+_i+"flex-"+i+i;case 5187:return $n+i+Mn(i,/(\w+).+(:[^]+)/,$n+"box-$1$2"+_i+"flex-$1$2")+i;case 5443:return $n+i+_i+"flex-item-"+Mn(i,/flex-|-self/g,"")+(Ql(i,/flex-|baseline/)?"":_i+"grid-row-"+Mn(i,/flex-|-self/g,""))+i;case 4675:return $n+i+_i+"flex-line-pack"+Mn(i,/align-content|flex-|-self/g,"")+i;case 5548:return $n+i+_i+Mn(i,"shrink","negative")+i;case 5292:return $n+i+_i+Mn(i,"basis","preferred-size")+i;case 6060:return $n+"box-"+Mn(i,"-grow","")+$n+i+_i+Mn(i,"grow","positive")+i;case 4554:return $n+Mn(i,/([^-])(transform)/g,"$1"+$n+"$2")+i;case 6187:return Mn(Mn(Mn(i,/(zoom-|grab)/,$n+"$1"),/(image-set)/,$n+"$1"),i,"")+i;case 5495:case 3959:return Mn(i,/(image-set\([^]*)/,$n+"$1$`$1");case 4968:return Mn(Mn(i,/(.+:)(flex-)?(.*)/,$n+"box-pack:$3"+_i+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$n+i+i;case 4200:if(!Ql(i,/flex-|baseline/))return _i+"grid-column-align"+Jd(i,e)+i;break;case 2592:case 3360:return _i+Mn(i,"template-","")+i;case 4384:case 3616:return t&&t.some(function(n,s){return e=s,Ql(n.props,/grid-\w+-end/)})?~zy(i+(t=t[e].value),"span",0)?i:_i+Mn(i,"-start","")+i+_i+"grid-row-span:"+(~zy(t,"span",0)?Ql(t,/\d+/):+Ql(t,/\d+/)-+Ql(i,/\d+/))+";":_i+Mn(i,"-start","")+i;case 4896:case 4128:return t&&t.some(function(n){return Ql(n.props,/grid-\w+-start/)})?i:_i+Mn(Mn(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return Mn(i,/(.+)-inline(.+)/,$n+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(hl(i)-1-e>6)switch(Es(i,e+1)){case 109:if(Es(i,e+4)!==45)break;case 102:return Mn(i,/(.+:)(.+)-([^]+)/,"$1"+$n+"$2-$3$1"+lg+(Es(i,e+3)==108?"$3":"$2-$3"))+i;case 115:return~zy(i,"stretch",0)?xw(Mn(i,"stretch","fill-available"),e,t)+i:i}break;case 5152:case 5920:return Mn(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,s,r,c,h,d,p){return _i+s+":"+r+p+(c?_i+s+"-span:"+(h?d:+d-+r)+p:"")+i});case 4949:if(Es(i,e+6)===121)return Mn(i,":",":"+$n)+i;break;case 6444:switch(Es(i,Es(i,14)===45?18:11)){case 120:return Mn(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+$n+(Es(i,14)===45?"inline-":"")+"box$3$1"+$n+"$2$3$1"+_i+"$2box$3")+i;case 100:return Mn(i,":",":"+_i)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Mn(i,"scroll-","scroll-snap-")+i}return i}function Qy(i,e){for(var t="",n=0;n<i.length;n++)t+=e(i[n],n,i,e)||"";return t}function rN(i,e,t,n){switch(i.type){case qB:if(i.children.length)break;case YB:case $1:return i.return=i.return||i.value;case dw:return"";case pw:return i.return=i.value+"{"+Qy(i.children,n)+"}";case tb:if(!hl(i.value=i.props.join(",")))return""}return hl(t=Qy(i.children,n))?i.return=i.value+"{"+t+"}":""}function oN(i){var e=vw(i);return function(t,n,s,r){for(var c="",h=0;h<e;h++)c+=i[h](t,n,s,r)||"";return c}}function lN(i){return function(e){e.root||(e=e.return)&&i(e)}}function cN(i,e,t,n){if(i.length>-1&&!i.return)switch(i.type){case $1:i.return=xw(i.value,i.length,t);return;case pw:return Qy([hu(i,{value:Mn(i.value,"@","@"+$n)})],n);case tb:if(i.length)return JB(t=i.props,function(s){switch(Ql(s,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":dd(hu(i,{props:[Mn(s,/:(read-\w+)/,":"+lg+"$1")]})),dd(hu(i,{props:[s]})),l1(i,{props:bE(t,n)});break;case"::placeholder":dd(hu(i,{props:[Mn(s,/:(plac\w+)/,":"+$n+"input-$1")]})),dd(hu(i,{props:[Mn(s,/:(plac\w+)/,":"+lg+"$1")]})),dd(hu(i,{props:[Mn(s,/:(plac\w+)/,_i+"input-$1")]})),dd(hu(i,{props:[s]})),l1(i,{props:bE(t,n)});break}return""})}}var uN={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},rr={},Zd=typeof process<"u"&&rr!==void 0&&(rr.REACT_APP_SC_ATTR||rr.SC_ATTR)||"data-styled",bw="active",_w="data-styled-version",ab="6.1.19",tS=`/*!sc*/
`,$y=typeof window<"u"&&typeof document<"u",hN=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&rr!==void 0&&rr.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&rr.REACT_APP_SC_DISABLE_SPEEDY!==""?rr.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&rr.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&rr!==void 0&&rr.SC_DISABLE_SPEEDY!==void 0&&rr.SC_DISABLE_SPEEDY!==""&&rr.SC_DISABLE_SPEEDY!=="false"&&rr.SC_DISABLE_SPEEDY),rb=Object.freeze([]),Qd=Object.freeze({});function fN(i,e,t){return t===void 0&&(t=Qd),i.theme!==t.theme&&i.theme||e||t.theme}var Aw=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),dN=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,pN=/(^-|-$)/g;function SE(i){return i.replace(dN,"-").replace(pN,"")}var mN=/(a)(d)/gi,Hv=52,ME=function(i){return String.fromCharCode(i+(i>25?39:97))};function h1(i){var e,t="";for(e=Math.abs(i);e>Hv;e=e/Hv|0)t=ME(e%Hv)+t;return(ME(e%Hv)+t).replace(mN,"$1-$2")}var H_,Sw=5381,Hd=function(i,e){for(var t=e.length;t;)i=33*i^e.charCodeAt(--t);return i},Mw=function(i){return Hd(Sw,i)};function gN(i){return h1(Mw(i)>>>0)}function vN(i){return i.displayName||i.name||"Component"}function z_(i){return typeof i=="string"&&!0}var Ew=typeof Symbol=="function"&&Symbol.for,Tw=Ew?Symbol.for("react.memo"):60115,yN=Ew?Symbol.for("react.forward_ref"):60112,xN={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},bN={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Cw={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_N=((H_={})[yN]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},H_[Tw]=Cw,H_);function EE(i){return("type"in(e=i)&&e.type.$$typeof)===Tw?Cw:"$$typeof"in i?_N[i.$$typeof]:xN;var e}var AN=Object.defineProperty,SN=Object.getOwnPropertyNames,TE=Object.getOwnPropertySymbols,MN=Object.getOwnPropertyDescriptor,EN=Object.getPrototypeOf,CE=Object.prototype;function ww(i,e,t){if(typeof e!="string"){if(CE){var n=EN(e);n&&n!==CE&&ww(i,n,t)}var s=SN(e);TE&&(s=s.concat(TE(e)));for(var r=EE(i),c=EE(e),h=0;h<s.length;++h){var d=s[h];if(!(d in bN||t&&t[d]||c&&d in c||r&&d in r)){var p=MN(e,d);try{AN(i,d,p)}catch{}}}}return i}function $d(i){return typeof i=="function"}function nS(i){return typeof i=="object"&&"styledComponentId"in i}function Hh(i,e){return i&&e?"".concat(i," ").concat(e):i||e||""}function wE(i,e){if(i.length===0)return"";for(var t=i[0],n=1;n<i.length;n++)t+=i[n];return t}function Ag(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function f1(i,e,t){if(t===void 0&&(t=!1),!t&&!Ag(i)&&!Array.isArray(i))return e;if(Array.isArray(e))for(var n=0;n<e.length;n++)i[n]=f1(i[n],e[n]);else if(Ag(e))for(var n in e)i[n]=f1(i[n],e[n]);return i}function iS(i,e){Object.defineProperty(i,"toString",{value:e})}function jg(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var TN=(function(){function i(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return i.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},i.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,r=s;e>=r;)if((r<<=1)<0)throw jg(16,"".concat(e));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var c=s;c<r;c++)this.groupSizes[c]=0}for(var h=this.indexOfGroup(e+1),d=(c=0,t.length);c<d;c++)this.tag.insertRule(h,t[c])&&(this.groupSizes[e]++,h++)},i.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),s=n+t;this.groupSizes[e]=0;for(var r=n;r<s;r++)this.tag.deleteRule(n)}},i.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var n=this.groupSizes[e],s=this.indexOfGroup(e),r=s+n,c=s;c<r;c++)t+="".concat(this.tag.getRule(c)).concat(tS);return t},i})(),ky=new Map,ex=new Map,Vy=1,zv=function(i){if(ky.has(i))return ky.get(i);for(;ex.has(Vy);)Vy++;var e=Vy++;return ky.set(i,e),ex.set(e,i),e},CN=function(i,e){Vy=e+1,ky.set(i,e),ex.set(e,i)},wN="style[".concat(Zd,"][").concat(_w,'="').concat(ab,'"]'),RN=new RegExp("^".concat(Zd,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),BN=function(i,e,t){for(var n,s=t.split(","),r=0,c=s.length;r<c;r++)(n=s[r])&&i.registerName(e,n)},NN=function(i,e){for(var t,n=((t=e.textContent)!==null&&t!==void 0?t:"").split(tS),s=[],r=0,c=n.length;r<c;r++){var h=n[r].trim();if(h){var d=h.match(RN);if(d){var p=0|parseInt(d[1],10),y=d[2];p!==0&&(CN(y,p),BN(i,y,d[3]),i.getTag().insertRules(p,s)),s.length=0}else s.push(h)}}},RE=function(i){for(var e=document.querySelectorAll(wN),t=0,n=e.length;t<n;t++){var s=e[t];s&&s.getAttribute(Zd)!==bw&&(NN(i,s),s.parentNode&&s.parentNode.removeChild(s))}};function DN(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Rw=function(i){var e=document.head,t=i||e,n=document.createElement("style"),s=(function(h){var d=Array.from(h.querySelectorAll("style[".concat(Zd,"]")));return d[d.length-1]})(t),r=s!==void 0?s.nextSibling:null;n.setAttribute(Zd,bw),n.setAttribute(_w,ab);var c=DN();return c&&n.setAttribute("nonce",c),t.insertBefore(n,r),n},UN=(function(){function i(e){this.element=Rw(e),this.element.appendChild(document.createTextNode("")),this.sheet=(function(t){if(t.sheet)return t.sheet;for(var n=document.styleSheets,s=0,r=n.length;s<r;s++){var c=n[s];if(c.ownerNode===t)return c}throw jg(17)})(this.element),this.length=0}return i.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},i.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},i})(),ON=(function(){function i(e){this.element=Rw(e),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},i.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},i})(),LN=(function(){function i(e){this.rules=[],this.length=0}return i.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},i.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},i.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},i})(),BE=$y,IN={isServer:!$y,useCSSOMInjection:!hN},Bw=(function(){function i(e,t,n){e===void 0&&(e=Qd),t===void 0&&(t={});var s=this;this.options=ja(ja({},IN),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&$y&&BE&&(BE=!1,RE(this)),iS(this,function(){return(function(r){for(var c=r.getTag(),h=c.length,d="",p=function(x){var b=(function(M){return ex.get(M)})(x);if(b===void 0)return"continue";var _=r.names.get(b),E=c.getGroup(x);if(_===void 0||!_.size||E.length===0)return"continue";var R="".concat(Zd,".g").concat(x,'[id="').concat(b,'"]'),T="";_!==void 0&&_.forEach(function(M){M.length>0&&(T+="".concat(M,","))}),d+="".concat(E).concat(R,'{content:"').concat(T,'"}').concat(tS)},y=0;y<h;y++)p(y);return d})(s)})}return i.registerId=function(e){return zv(e)},i.prototype.rehydrate=function(){!this.server&&$y&&RE(this)},i.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new i(ja(ja({},this.options),e),this.gs,t&&this.names||void 0)},i.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(e=(function(t){var n=t.useCSSOMInjection,s=t.target;return t.isServer?new LN(s):n?new UN(s):new ON(s)})(this.options),new TN(e)));var e},i.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},i.prototype.registerName=function(e,t){if(zv(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},i.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(zv(e),n)},i.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},i.prototype.clearRules=function(e){this.getTag().clearGroup(zv(e)),this.clearNames(e)},i.prototype.clearTag=function(){this.tag=void 0},i})(),PN=/&/g,FN=/^\s*\/\/.*$/gm;function Nw(i,e){return i.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(n){return"".concat(e," ").concat(n)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=Nw(t.children,e)),t})}function HN(i){var e,t,n,s=Qd,r=s.options,c=r===void 0?Qd:r,h=s.plugins,d=h===void 0?rb:h,p=function(b,_,E){return E.startsWith(t)&&E.endsWith(t)&&E.replaceAll(t,"").length>0?".".concat(e):b},y=d.slice();y.push(function(b){b.type===tb&&b.value.includes("&")&&(b.props[0]=b.props[0].replace(PN,t).replace(n,p))}),c.prefix&&y.push(cN),y.push(rN);var x=function(b,_,E,R){_===void 0&&(_=""),E===void 0&&(E=""),R===void 0&&(R="&"),e=R,t=_,n=new RegExp("\\".concat(t,"\\b"),"g");var T=b.replace(FN,""),M=sN(E||_?"".concat(E," ").concat(_," { ").concat(T," }"):T);c.namespace&&(M=Nw(M,c.namespace));var B=[];return Qy(M,oN(y.concat(lN(function(N){return B.push(N)})))),B};return x.hash=d.length?d.reduce(function(b,_){return _.name||jg(15),Hd(b,_.name)},Sw).toString():"",x}var zN=new Bw,d1=HN(),Dw=dl.createContext({shouldForwardProp:void 0,styleSheet:zN,stylis:d1});Dw.Consumer;dl.createContext(void 0);function NE(){return Ae.useContext(Dw)}var GN=(function(){function i(e,t){var n=this;this.inject=function(s,r){r===void 0&&(r=d1);var c=n.name+r.hash;s.hasNameForId(n.id,c)||s.insertRules(n.id,c,r(n.rules,c,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,iS(this,function(){throw jg(12,String(n.name))})}return i.prototype.getName=function(e){return e===void 0&&(e=d1),this.name+e.hash},i})(),jN=function(i){return i>="A"&&i<="Z"};function DE(i){for(var e="",t=0;t<i.length;t++){var n=i[t];if(t===1&&n==="-"&&i[0]==="-")return i;jN(n)?e+="-"+n.toLowerCase():e+=n}return e.startsWith("ms-")?"-"+e:e}var Uw=function(i){return i==null||i===!1||i===""},Ow=function(i){var e,t,n=[];for(var s in i){var r=i[s];i.hasOwnProperty(s)&&!Uw(r)&&(Array.isArray(r)&&r.isCss||$d(r)?n.push("".concat(DE(s),":"),r,";"):Ag(r)?n.push.apply(n,Zy(Zy(["".concat(s," {")],Ow(r),!1),["}"],!1)):n.push("".concat(DE(s),": ").concat((e=s,(t=r)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in uN||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return n};function Wh(i,e,t,n){if(Uw(i))return[];if(nS(i))return[".".concat(i.styledComponentId)];if($d(i)){if(!$d(r=i)||r.prototype&&r.prototype.isReactComponent||!e)return[i];var s=i(e);return Wh(s,e,t,n)}var r;return i instanceof GN?t?(i.inject(t,n),[i.getName(n)]):[i]:Ag(i)?Ow(i):Array.isArray(i)?Array.prototype.concat.apply(rb,i.map(function(c){return Wh(c,e,t,n)})):[i.toString()]}function kN(i){for(var e=0;e<i.length;e+=1){var t=i[e];if($d(t)&&!nS(t))return!1}return!0}var VN=Mw(ab),XN=(function(){function i(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&kN(e),this.componentId=t,this.baseHash=Hd(VN,t),this.baseStyle=n,Bw.registerId(t)}return i.prototype.generateAndInjectStyles=function(e,t,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))s=Hh(s,this.staticRulesId);else{var r=wE(Wh(this.rules,e,t,n)),c=h1(Hd(this.baseHash,r)>>>0);if(!t.hasNameForId(this.componentId,c)){var h=n(r,".".concat(c),void 0,this.componentId);t.insertRules(this.componentId,c,h)}s=Hh(s,c),this.staticRulesId=c}else{for(var d=Hd(this.baseHash,n.hash),p="",y=0;y<this.rules.length;y++){var x=this.rules[y];if(typeof x=="string")p+=x;else if(x){var b=wE(Wh(x,e,t,n));d=Hd(d,b+y),p+=b}}if(p){var _=h1(d>>>0);t.hasNameForId(this.componentId,_)||t.insertRules(this.componentId,_,n(p,".".concat(_),void 0,this.componentId)),s=Hh(s,_)}}return s},i})(),Lw=dl.createContext(void 0);Lw.Consumer;var G_={};function YN(i,e,t){var n=nS(i),s=i,r=!z_(i),c=e.attrs,h=c===void 0?rb:c,d=e.componentId,p=d===void 0?(function(D,L){var I=typeof D!="string"?"sc":SE(D);G_[I]=(G_[I]||0)+1;var j="".concat(I,"-").concat(gN(ab+I+G_[I]));return L?"".concat(L,"-").concat(j):j})(e.displayName,e.parentComponentId):d,y=e.displayName,x=y===void 0?(function(D){return z_(D)?"styled.".concat(D):"Styled(".concat(vN(D),")")})(i):y,b=e.displayName&&e.componentId?"".concat(SE(e.displayName),"-").concat(e.componentId):e.componentId||p,_=n&&s.attrs?s.attrs.concat(h).filter(Boolean):h,E=e.shouldForwardProp;if(n&&s.shouldForwardProp){var R=s.shouldForwardProp;if(e.shouldForwardProp){var T=e.shouldForwardProp;E=function(D,L){return R(D,L)&&T(D,L)}}else E=R}var M=new XN(t,b,n?s.componentStyle:void 0);function B(D,L){return(function(I,j,k){var O=I.attrs,P=I.componentStyle,Y=I.defaultProps,ie=I.foldedComponentIds,re=I.styledComponentId,de=I.target,pe=dl.useContext(Lw),H=NE(),Z=I.shouldForwardProp||H.shouldForwardProp,$=fN(j,pe,Y)||Qd,ge=(function(at,me,Ge){for(var qe,_t=ja(ja({},me),{className:void 0,theme:Ge}),vt=0;vt<at.length;vt+=1){var yt=$d(qe=at[vt])?qe(_t):qe;for(var zt in yt)_t[zt]=zt==="className"?Hh(_t[zt],yt[zt]):zt==="style"?ja(ja({},_t[zt]),yt[zt]):yt[zt]}return me.className&&(_t.className=Hh(_t.className,me.className)),_t})(O,j,$),X=ge.as||de,ce={};for(var xe in ge)ge[xe]===void 0||xe[0]==="$"||xe==="as"||xe==="theme"&&ge.theme===$||(xe==="forwardedAs"?ce.as=ge.forwardedAs:Z&&!Z(xe,X)||(ce[xe]=ge[xe]));var Te=(function(at,me){var Ge=NE(),qe=at.generateAndInjectStyles(me,Ge.styleSheet,Ge.stylis);return qe})(P,ge),He=Hh(ie,re);return Te&&(He+=" "+Te),ge.className&&(He+=" "+ge.className),ce[z_(X)&&!Aw.has(X)?"class":"className"]=He,k&&(ce.ref=k),Ae.createElement(X,ce)})(N,D,L)}B.displayName=x;var N=dl.forwardRef(B);return N.attrs=_,N.componentStyle=M,N.displayName=x,N.shouldForwardProp=E,N.foldedComponentIds=n?Hh(s.foldedComponentIds,s.styledComponentId):"",N.styledComponentId=b,N.target=n?s.target:i,Object.defineProperty(N,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(D){this._foldedDefaultProps=n?(function(L){for(var I=[],j=1;j<arguments.length;j++)I[j-1]=arguments[j];for(var k=0,O=I;k<O.length;k++)f1(L,O[k],!0);return L})({},s.defaultProps,D):D}}),iS(N,function(){return".".concat(N.styledComponentId)}),r&&ww(N,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),N}function UE(i,e){for(var t=[i[0]],n=0,s=e.length;n<s;n+=1)t.push(e[n],i[n+1]);return t}var OE=function(i){return Object.assign(i,{isCss:!0})};function qN(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if($d(i)||Ag(i))return OE(Wh(UE(rb,Zy([i],e,!0))));var n=i;return e.length===0&&n.length===1&&typeof n[0]=="string"?Wh(n):OE(Wh(UE(n,e)))}function p1(i,e,t){if(t===void 0&&(t=Qd),!e)throw jg(1,e);var n=function(s){for(var r=[],c=1;c<arguments.length;c++)r[c-1]=arguments[c];return i(e,t,qN.apply(void 0,Zy([s],r,!1)))};return n.attrs=function(s){return p1(i,e,ja(ja({},t),{attrs:Array.prototype.concat(t.attrs,s).filter(Boolean)}))},n.withConfig=function(s){return p1(i,e,ja(ja({},t),s))},n}var Iw=function(i){return p1(YN,i)},of=Iw;Aw.forEach(function(i){of[i]=Iw(i)});const WN=({audioRef:i})=>g.jsx(JN,{children:g.jsxs("div",{children:[g.jsx("input",{type:"checkbox",id:"checkboxInput",onChange:e=>{if(!i.current){console.log("audioRef.current is null!");return}i.current.muted=e.target.checked,console.log("muted:",i.current.muted),i.current.paused&&i.current.play().catch(t=>console.log(t))}}),g.jsxs("label",{htmlFor:"checkboxInput",className:"toggleSwitch",children:[g.jsx("div",{className:"speaker",children:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",version:1,viewBox:"0 0 75 75",children:[g.jsx("path",{d:"M39.389,13.769 L22.235,28.606 L6,28.606 L6,47.699 L21.989,47.699 L39.389,62.75 L39.389,13.769z",style:{stroke:"#fff",strokeWidth:5,strokeLinejoin:"round",fill:"#fff"}}),g.jsx("path",{d:"M48,27.6a19.5,19.5 0 0 1 0,21.4M55.1,20.5a30,30 0 0 1 0,35.6M61.6,14a38.8,38.8 0 0 1 0,48.6",style:{fill:"none",stroke:"#fff",strokeWidth:5,strokeLinecap:"round"}})]})}),g.jsx("div",{className:"mute-speaker",children:g.jsxs("svg",{version:1,viewBox:"0 0 75 75",stroke:"#fff",strokeWidth:5,children:[g.jsx("path",{d:"m39,14-17,15H6V48H22l17,15z",fill:"#fff",strokeLinejoin:"round"}),g.jsx("path",{d:"m49,26 20,24m0-24-20,24",fill:"#fff",strokeLinecap:"round"})]})})]})]})}),JN=of.div`
  /* The switch - the box around the speaker*/
  .toggleSwitch {
    width: 35px;
    height: 35px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgb(39, 39, 39);
    border-radius: 40%;
    cursor: pointer;
    transition-duration: .2s;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.13);
    overflow: hidden;
  }

  /* Hide default HTML checkbox */
  #checkboxInput {
    display: none;
  }

  .bell {
    width: 18px;
  }

  .bell path {
    fill: white;
  }

  .speaker {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
    transition-duration: .3s;
  }

  .speaker svg {
    width: 18px;
  }

  .mute-speaker {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    z-index: 3;
    transition-duration: .3s;
  }

  .mute-speaker svg {
    width: 18px;
  }

  #checkboxInput:checked +.toggleSwitch .speaker {
    opacity: 0;
    transition-duration: .3s;
  }

  #checkboxInput:checked +.toggleSwitch .mute-speaker {
    opacity: 1;
    transition-duration: .3s;
  }

  #checkboxInput:active + .toggleSwitch {
    transform: scale(1.4);
  }

  #checkboxInput:hover + .toggleSwitch {
    background-color: rgba(104, 105, 105, 1);
  }`;function js(i){return"/AWheelGoodFit/"+i}function KN({activePage:i,handlePageSwitch:e,audioRef:t}){const n=["page1","page2","page3","page4","page5"],s=["Home","Overview","The Person","Seating and Positioning","The Wheelchair"],r=Ae.useRef([]),[c,h]=Ae.useState(0),[d,p]=Ae.useState(0);return Ae.useEffect(()=>{const y=n.indexOf(i),x=r.current[y];x&&(h(x.offsetLeft),p(x.offsetWidth))},[i]),g.jsxs("header",{className:"w-screen h-20 tracking-widest bg-white shadow flex items-center px-10 justify-between border-b-3 border-gray-300 relative",children:[g.jsx("div",{className:"z-10",children:g.jsx("div",{className:"text-4xl text-blue-800 pixel-bold tracking-ti font-Pixelmono",children:"AWheelGoodFit"})}),g.jsxs("div",{className:"flex items-center space-x-6",children:[g.jsxs("nav",{className:"relative flex space-x-4",children:[g.jsx("div",{className:"absolute top-0 h-full border-2 border-black bg-black/5  transition-all duration-300 ease-out",style:{width:d,transform:`translateX(${c}px)`}}),s.map((y,x)=>g.jsx("div",{ref:b=>r.current[x]=b,className:"relative group px-4 py-2 cursor-pointer select-none z-10",onClick:()=>e(n[x]),children:g.jsx("div",{className:`text-black tracking-wide bg-transparent font-YakuHanJP font-bold cursor-pointer 
                            bg-left-bottom bg-gradient-to-r from-black to-black 
                            bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] 
                            transition-all duration-300 ease-out
                            ${i===n[x]?"bg-[length:0%_2px]":"bg-[length:0%_2px] group-hover:bg-[length:100%_2px]"} 
                        `,children:y})},y))]}),g.jsx("div",{className:"ml-6 z-10",children:g.jsx(WN,{audioRef:t})})]})]})}function ZN({isOpen:i,activeHotspot:e,onSubtabClick:t,onCloseSidebar:n}){return g.jsxs("div",{className:`fixed top-20 left-0 h-full w-120 bg-white/55 border-r-3 border-gray-300/80 
                  backdrop-brightness-lg transform transition-transform duration-500 
                  ${i?"translate-x-0":"-translate-x-full"} z-30`,children:[g.jsxs("div",{className:"flex items-center gap-4 m-4",children:[g.jsx("div",{className:"text-black flex-3 text-center tracking-wide text-3xl font-NSansJP tracking-wider font-bold p-4 bg-white border-3 rounded-sm border-black ",children:e?.label||"None selected"}),g.jsx("div",{onClick:n,className:"justify-right flex-1 p-4 text-center bg-black border-2 border-rounded font-Pixelmono text-white text-3xl hover:bg-gray-700",children:"Close"})]}),e?g.jsx("div",{className:"text-black text-[22px] tracking-tight font-Rob px-8 mb-4",children:e?.overview||"No overview available"}):g.jsx("p",{className:"text-black font-Rob tracking-wider text-xl px-8 mb-4",children:"No hotspot is currently selected."}),e?.links?.length>0&&g.jsx("div",{className:"flex flex-col px-4 space-y-2",children:e.links.map(s=>g.jsxs("div",{onClick:()=>t(s.id,s.page,!0),className:"ml-4 px-4 py-2 text-xl w-fit font-Pixelmono text-center text-white bg-blue-400 rounded hover:bg-blue-300 transition-colors cursor-pointer",children:[s.label," >"]},s.id))})]})}var j_={exports:{}},Xl={};var LE;function QN(){return LE||(LE=1,Xl.ConcurrentRoot=1,Xl.ContinuousEventPriority=8,Xl.DefaultEventPriority=32,Xl.DiscreteEventPriority=2,Xl.IdleEventPriority=268435456,Xl.LegacyRoot=0,Xl.NoEventPriority=0),Xl}var IE;function $N(){return IE||(IE=1,j_.exports=QN()),j_.exports}var Xy=$N();const kg="180",Uh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Oh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Pw=0,m1=1,Fw=2,eD=3,Hw=0,ob=1,cg=2,go=3,vl=0,Ma=1,or=2,ml=0,Jh=1,g1=2,v1=3,y1=4,zw=5,fu=100,Gw=101,jw=102,kw=103,Vw=104,Xw=200,Yw=201,qw=202,Ww=203,tx=204,nx=205,Jw=206,Kw=207,Zw=208,Qw=209,$w=210,e2=211,t2=212,n2=213,i2=214,ix=0,sx=1,ax=2,Qh=3,rx=4,ox=5,lx=6,cx=7,Vg=0,s2=1,a2=2,gl=0,r2=1,o2=2,l2=3,sS=4,c2=5,u2=6,h2=7,x1="attached",f2="detached",xu=300,yl=301,bu=302,ep=303,Sg=304,yp=306,_u=1e3,Ki=1001,tp=1002,Cs=1003,lb=1004,tD=1004,zh=1005,nD=1005,Kn=1006,kd=1007,iD=1007,Or=1008,b1=1008,Ea=1009,cb=1010,ub=1011,np=1012,Xg=1013,xl=1014,Pi=1015,Ts=1016,hb=1017,fb=1018,ip=1020,aS=35902,rS=35899,oS=1021,lS=1022,Zi=1023,sp=1026,ap=1027,Yg=1028,qg=1029,cS=1030,db=1031,sD=1032,pb=1033,ug=33776,hg=33777,fg=33778,dg=33779,ux=35840,hx=35841,fx=35842,dx=35843,px=36196,mx=37492,gx=37496,vx=37808,yx=37809,xx=37810,bx=37811,_x=37812,Ax=37813,Sx=37814,Mx=37815,Ex=37816,Tx=37817,Cx=37818,wx=37819,Rx=37820,Bx=37821,Nx=36492,Dx=36494,Ux=36495,Ox=36283,Lx=36284,Ix=36285,Px=36286,d2=2200,p2=2201,m2=2202,rp=2300,op=2301,Yy=2302,Gh=2400,jh=2401,Mg=2402,mb=2500,uS=2501,g2=0,hS=1,Fx=2,v2=3200,y2=3201,aD=3202,rD=3203,Su=0,x2=1,nc="",Gs="srgb",Mo="srgb-linear",Eg="linear",oi="srgb",oD=0,Lh=7680,lD=7681,cD=7682,uD=7683,hD=34055,fD=34056,dD=5386,pD=512,mD=513,gD=514,vD=515,yD=516,xD=517,bD=518,_1=519,b2=512,_2=513,A2=514,fS=515,S2=516,M2=517,E2=518,T2=519,Tg=35044,_D=35048,AD=35040,SD=35045,MD=35049,ED=35041,TD=35046,CD=35050,wD=35042,RD="100",A1="300 es",lr=2e3,lp=2001,BD={COMPUTE:"compute",RENDER:"render"},ND={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},DD={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let bl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const s=n[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,c=s.length;r<c;r++)s[r].call(this,e);e.target=null}}};const ta=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let PE=1234567;const Kh=Math.PI/180,cp=180/Math.PI;function cr(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ta[i&255]+ta[i>>8&255]+ta[i>>16&255]+ta[i>>24&255]+"-"+ta[e&255]+ta[e>>8&255]+"-"+ta[e>>16&15|64]+ta[e>>24&255]+"-"+ta[t&63|128]+ta[t>>8&255]+"-"+ta[t>>16&255]+ta[t>>24&255]+ta[n&255]+ta[n>>8&255]+ta[n>>16&255]+ta[n>>24&255]).toLowerCase()}function nn(i,e,t){return Math.max(e,Math.min(t,i))}function dS(i,e){return(i%e+e)%e}function UD(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function OD(i,e,t){return i!==e?(t-i)/(e-i):0}function pg(i,e,t){return(1-t)*i+t*e}function LD(i,e,t,n){return pg(i,e,1-Math.exp(-t*n))}function ID(i,e=1){return e-Math.abs(dS(i,e*2)-e)}function PD(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function FD(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function HD(i,e){return i+Math.floor(Math.random()*(e-i+1))}function zD(i,e){return i+Math.random()*(e-i)}function GD(i){return i*(.5-Math.random())}function jD(i){i!==void 0&&(PE=i);let e=PE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function kD(i){return i*Kh}function VD(i){return i*cp}function XD(i){return(i&i-1)===0&&i!==0}function YD(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function qD(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function WD(i,e,t,n,s){const r=Math.cos,c=Math.sin,h=r(t/2),d=c(t/2),p=r((e+n)/2),y=c((e+n)/2),x=r((e-n)/2),b=c((e-n)/2),_=r((n-e)/2),E=c((n-e)/2);switch(s){case"XYX":i.set(h*y,d*x,d*b,h*p);break;case"YZY":i.set(d*b,h*y,d*x,h*p);break;case"ZXZ":i.set(d*x,d*b,h*y,h*p);break;case"XZX":i.set(h*y,d*E,d*_,h*p);break;case"YXY":i.set(d*_,h*y,d*E,h*p);break;case"ZYZ":i.set(d*E,d*_,h*y,h*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Sa(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function bn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const C2={DEG2RAD:Kh,RAD2DEG:cp,generateUUID:cr,clamp:nn,euclideanModulo:dS,mapLinear:UD,inverseLerp:OD,lerp:pg,damp:LD,pingpong:ID,smoothstep:PD,smootherstep:FD,randInt:HD,randFloat:zD,randFloatSpread:GD,seededRandom:jD,degToRad:kD,radToDeg:VD,isPowerOfTwo:XD,ceilPowerOfTwo:YD,floorPowerOfTwo:qD,setQuaternionFromProperEuler:WD,normalize:bn,denormalize:Sa};class Ye{constructor(e=0,t=0){Ye.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=nn(this.x,e.x,t.x),this.y=nn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=nn(this.x,e,t),this.y=nn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(nn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),r=this.x-e.x,c=this.y-e.y;return this.x=r*n-c*s+e.x,this.y=r*s+c*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ws{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,r,c,h){let d=n[s+0],p=n[s+1],y=n[s+2],x=n[s+3];const b=r[c+0],_=r[c+1],E=r[c+2],R=r[c+3];if(h===0){e[t+0]=d,e[t+1]=p,e[t+2]=y,e[t+3]=x;return}if(h===1){e[t+0]=b,e[t+1]=_,e[t+2]=E,e[t+3]=R;return}if(x!==R||d!==b||p!==_||y!==E){let T=1-h;const M=d*b+p*_+y*E+x*R,B=M>=0?1:-1,N=1-M*M;if(N>Number.EPSILON){const L=Math.sqrt(N),I=Math.atan2(L,M*B);T=Math.sin(T*I)/L,h=Math.sin(h*I)/L}const D=h*B;if(d=d*T+b*D,p=p*T+_*D,y=y*T+E*D,x=x*T+R*D,T===1-h){const L=1/Math.sqrt(d*d+p*p+y*y+x*x);d*=L,p*=L,y*=L,x*=L}}e[t]=d,e[t+1]=p,e[t+2]=y,e[t+3]=x}static multiplyQuaternionsFlat(e,t,n,s,r,c){const h=n[s],d=n[s+1],p=n[s+2],y=n[s+3],x=r[c],b=r[c+1],_=r[c+2],E=r[c+3];return e[t]=h*E+y*x+d*_-p*b,e[t+1]=d*E+y*b+p*x-h*_,e[t+2]=p*E+y*_+h*b-d*x,e[t+3]=y*E-h*x-d*b-p*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,r=e._z,c=e._order,h=Math.cos,d=Math.sin,p=h(n/2),y=h(s/2),x=h(r/2),b=d(n/2),_=d(s/2),E=d(r/2);switch(c){case"XYZ":this._x=b*y*x+p*_*E,this._y=p*_*x-b*y*E,this._z=p*y*E+b*_*x,this._w=p*y*x-b*_*E;break;case"YXZ":this._x=b*y*x+p*_*E,this._y=p*_*x-b*y*E,this._z=p*y*E-b*_*x,this._w=p*y*x+b*_*E;break;case"ZXY":this._x=b*y*x-p*_*E,this._y=p*_*x+b*y*E,this._z=p*y*E+b*_*x,this._w=p*y*x-b*_*E;break;case"ZYX":this._x=b*y*x-p*_*E,this._y=p*_*x+b*y*E,this._z=p*y*E-b*_*x,this._w=p*y*x+b*_*E;break;case"YZX":this._x=b*y*x+p*_*E,this._y=p*_*x+b*y*E,this._z=p*y*E-b*_*x,this._w=p*y*x-b*_*E;break;case"XZY":this._x=b*y*x-p*_*E,this._y=p*_*x-b*y*E,this._z=p*y*E+b*_*x,this._w=p*y*x+b*_*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],r=t[8],c=t[1],h=t[5],d=t[9],p=t[2],y=t[6],x=t[10],b=n+h+x;if(b>0){const _=.5/Math.sqrt(b+1);this._w=.25/_,this._x=(y-d)*_,this._y=(r-p)*_,this._z=(c-s)*_}else if(n>h&&n>x){const _=2*Math.sqrt(1+n-h-x);this._w=(y-d)/_,this._x=.25*_,this._y=(s+c)/_,this._z=(r+p)/_}else if(h>x){const _=2*Math.sqrt(1+h-n-x);this._w=(r-p)/_,this._x=(s+c)/_,this._y=.25*_,this._z=(d+y)/_}else{const _=2*Math.sqrt(1+x-n-h);this._w=(c-s)/_,this._x=(r+p)/_,this._y=(d+y)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(nn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,r=e._z,c=e._w,h=t._x,d=t._y,p=t._z,y=t._w;return this._x=n*y+c*h+s*p-r*d,this._y=s*y+c*d+r*h-n*p,this._z=r*y+c*p+n*d-s*h,this._w=c*y-n*h-s*d-r*p,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,r=this._z,c=this._w;let h=c*e._w+n*e._x+s*e._y+r*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=c,this._x=n,this._y=s,this._z=r,this;const d=1-h*h;if(d<=Number.EPSILON){const _=1-t;return this._w=_*c+t*this._w,this._x=_*n+t*this._x,this._y=_*s+t*this._y,this._z=_*r+t*this._z,this.normalize(),this}const p=Math.sqrt(d),y=Math.atan2(p,h),x=Math.sin((1-t)*y)/p,b=Math.sin(t*y)/p;return this._w=c*x+this._w*b,this._x=n*x+this._x*b,this._y=s*x+this._y*b,this._z=r*x+this._z*b,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,t=0,n=0){K.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(FE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(FE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*s,this.y=r[1]*t+r[4]*n+r[7]*s,this.z=r[2]*t+r[5]*n+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=e.elements,c=1/(r[3]*t+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*s+r[12])*c,this.y=(r[1]*t+r[5]*n+r[9]*s+r[13])*c,this.z=(r[2]*t+r[6]*n+r[10]*s+r[14])*c,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,r=e.x,c=e.y,h=e.z,d=e.w,p=2*(c*s-h*n),y=2*(h*t-r*s),x=2*(r*n-c*t);return this.x=t+d*p+c*x-h*y,this.y=n+d*y+h*p-r*x,this.z=s+d*x+r*y-c*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s,this.y=r[1]*t+r[5]*n+r[9]*s,this.z=r[2]*t+r[6]*n+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=nn(this.x,e.x,t.x),this.y=nn(this.y,e.y,t.y),this.z=nn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=nn(this.x,e,t),this.y=nn(this.y,e,t),this.z=nn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,r=e.z,c=t.x,h=t.y,d=t.z;return this.x=s*d-r*h,this.y=r*c-n*d,this.z=n*h-s*c,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return k_.copy(this).projectOnVector(e),this.sub(k_)}reflect(e){return this.sub(k_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(nn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const k_=new K,FE=new ws;class gn{constructor(e,t,n,s,r,c,h,d,p){gn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,c,h,d,p)}set(e,t,n,s,r,c,h,d,p){const y=this.elements;return y[0]=e,y[1]=s,y[2]=h,y[3]=t,y[4]=r,y[5]=d,y[6]=n,y[7]=c,y[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,c=n[0],h=n[3],d=n[6],p=n[1],y=n[4],x=n[7],b=n[2],_=n[5],E=n[8],R=s[0],T=s[3],M=s[6],B=s[1],N=s[4],D=s[7],L=s[2],I=s[5],j=s[8];return r[0]=c*R+h*B+d*L,r[3]=c*T+h*N+d*I,r[6]=c*M+h*D+d*j,r[1]=p*R+y*B+x*L,r[4]=p*T+y*N+x*I,r[7]=p*M+y*D+x*j,r[2]=b*R+_*B+E*L,r[5]=b*T+_*N+E*I,r[8]=b*M+_*D+E*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],c=e[4],h=e[5],d=e[6],p=e[7],y=e[8];return t*c*y-t*h*p-n*r*y+n*h*d+s*r*p-s*c*d}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],c=e[4],h=e[5],d=e[6],p=e[7],y=e[8],x=y*c-h*p,b=h*d-y*r,_=p*r-c*d,E=t*x+n*b+s*_;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const R=1/E;return e[0]=x*R,e[1]=(s*p-y*n)*R,e[2]=(h*n-s*c)*R,e[3]=b*R,e[4]=(y*t-s*d)*R,e[5]=(s*r-h*t)*R,e[6]=_*R,e[7]=(n*d-p*t)*R,e[8]=(c*t-n*r)*R,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,r,c,h){const d=Math.cos(r),p=Math.sin(r);return this.set(n*d,n*p,-n*(d*c+p*h)+c+e,-s*p,s*d,-s*(-p*c+d*h)+h+t,0,0,1),this}scale(e,t){return this.premultiply(V_.makeScale(e,t)),this}rotate(e){return this.premultiply(V_.makeRotation(-e)),this}translate(e,t){return this.premultiply(V_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const V_=new gn;function w2(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const JD={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function zd(i,e){return new JD[i](e)}function Cg(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function R2(){const i=Cg("canvas");return i.style.display="block",i}const HE={};function wg(i){i in HE||(HE[i]=!0,console.warn(i))}function KD(i,e,t){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:n()}}setTimeout(r,t)})}const zE=new gn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),GE=new gn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function ZD(){const i={enabled:!0,workingColorSpace:Mo,spaces:{},convert:function(s,r,c){return this.enabled===!1||r===c||!r||!c||(this.spaces[r].transfer===oi&&(s.r=ac(s.r),s.g=ac(s.g),s.b=ac(s.b)),this.spaces[r].primaries!==this.spaces[c].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[c].fromXYZ)),this.spaces[c].transfer===oi&&(s.r=Vd(s.r),s.g=Vd(s.g),s.b=Vd(s.b))),s},workingToColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},colorSpaceToWorking:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===nc?Eg:this.spaces[s].transfer},getToneMappingMode:function(s){return this.spaces[s].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,c){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[c].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,r){return wg("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(s,r)},toWorkingColorSpace:function(s,r){return wg("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(s,r)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Mo]:{primaries:e,whitePoint:n,transfer:Eg,toXYZ:zE,fromXYZ:GE,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Gs},outputColorSpaceConfig:{drawingBufferColorSpace:Gs}},[Gs]:{primaries:e,whitePoint:n,transfer:oi,toXYZ:zE,fromXYZ:GE,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Gs}}}),i}const In=ZD();function ac(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Vd(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let pd;class B2{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{pd===void 0&&(pd=Cg("canvas")),pd.width=e.width,pd.height=e.height;const s=pd.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=pd}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Cg("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),r=s.data;for(let c=0;c<r.length;c++)r[c]=ac(r[c]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(ac(t[n]/255)*255):t[n]=ac(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let QD=0;class du{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:QD++}),this.uuid=cr(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let c=0,h=s.length;c<h;c++)s[c].isDataTexture?r.push(X_(s[c].image)):r.push(X_(s[c]))}else r=X_(s);n.url=r}return t||(e.images[this.uuid]=n),n}}function X_(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?B2.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $D=0;const Y_=new K;class ti extends bl{constructor(e=ti.DEFAULT_IMAGE,t=ti.DEFAULT_MAPPING,n=Ki,s=Ki,r=Kn,c=Or,h=Zi,d=Ea,p=ti.DEFAULT_ANISOTROPY,y=nc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$D++}),this.uuid=cr(),this.name="",this.source=new du(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=c,this.anisotropy=p,this.format=h,this.internalFormat=null,this.type=d,this.offset=new Ye(0,0),this.repeat=new Ye(1,1),this.center=new Ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=y,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Y_).x}get height(){return this.source.getSize(Y_).y}get depth(){return this.source.getSize(Y_).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}s&&n&&s.isVector2&&n.isVector2||s&&n&&s.isVector3&&n.isVector3||s&&n&&s.isMatrix3&&n.isMatrix3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==xu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case _u:e.x=e.x-Math.floor(e.x);break;case Ki:e.x=e.x<0?0:1;break;case tp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case _u:e.y=e.y-Math.floor(e.y);break;case Ki:e.y=e.y<0?0:1;break;case tp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ti.DEFAULT_IMAGE=null;ti.DEFAULT_MAPPING=xu;ti.DEFAULT_ANISOTROPY=1;class Gn{constructor(e=0,t=0,n=0,s=1){Gn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=this.w,c=e.elements;return this.x=c[0]*t+c[4]*n+c[8]*s+c[12]*r,this.y=c[1]*t+c[5]*n+c[9]*s+c[13]*r,this.z=c[2]*t+c[6]*n+c[10]*s+c[14]*r,this.w=c[3]*t+c[7]*n+c[11]*s+c[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,r;const d=e.elements,p=d[0],y=d[4],x=d[8],b=d[1],_=d[5],E=d[9],R=d[2],T=d[6],M=d[10];if(Math.abs(y-b)<.01&&Math.abs(x-R)<.01&&Math.abs(E-T)<.01){if(Math.abs(y+b)<.1&&Math.abs(x+R)<.1&&Math.abs(E+T)<.1&&Math.abs(p+_+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const N=(p+1)/2,D=(_+1)/2,L=(M+1)/2,I=(y+b)/4,j=(x+R)/4,k=(E+T)/4;return N>D&&N>L?N<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(N),s=I/n,r=j/n):D>L?D<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(D),n=I/s,r=k/s):L<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(L),n=j/r,s=k/r),this.set(n,s,r,t),this}let B=Math.sqrt((T-E)*(T-E)+(x-R)*(x-R)+(b-y)*(b-y));return Math.abs(B)<.001&&(B=1),this.x=(T-E)/B,this.y=(x-R)/B,this.z=(b-y)/B,this.w=Math.acos((p+_+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=nn(this.x,e.x,t.x),this.y=nn(this.y,e.y,t.y),this.z=nn(this.z,e.z,t.z),this.w=nn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=nn(this.x,e,t),this.y=nn(this.y,e,t),this.z=nn(this.z,e,t),this.w=nn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(nn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class pS extends bl{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Kn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new Gn(0,0,e,t),this.scissorTest=!1,this.viewport=new Gn(0,0,e,t);const s={width:e,height:t,depth:n.depth},r=new ti(s);this.textures=[];const c=n.count;for(let h=0;h<c;h++)this.textures[h]=r.clone(),this.textures[h].isRenderTargetTexture=!0,this.textures[h].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Kn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n,this.textures[s].isArrayTexture=this.textures[s].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new du(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Fr extends pS{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class gb extends ti{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Cs,this.minFilter=Cs,this.wrapR=Ki,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class eU extends Fr{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new gb(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class vb extends ti{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Cs,this.minFilter=Cs,this.wrapR=Ki,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tU extends Fr{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new vb(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class ks{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ho.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ho.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ho.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let c=0,h=r.count;c<h;c++)e.isMesh===!0?e.getVertexPosition(c,ho):ho.fromBufferAttribute(r,c),ho.applyMatrix4(e.matrixWorld),this.expandByPoint(ho);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Gv.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Gv.copy(n.boundingBox)),Gv.applyMatrix4(e.matrixWorld),this.union(Gv)}const s=e.children;for(let r=0,c=s.length;r<c;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ho),ho.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Fm),jv.subVectors(this.max,Fm),md.subVectors(e.a,Fm),gd.subVectors(e.b,Fm),vd.subVectors(e.c,Fm),tu.subVectors(gd,md),nu.subVectors(vd,gd),yh.subVectors(md,vd);let t=[0,-tu.z,tu.y,0,-nu.z,nu.y,0,-yh.z,yh.y,tu.z,0,-tu.x,nu.z,0,-nu.x,yh.z,0,-yh.x,-tu.y,tu.x,0,-nu.y,nu.x,0,-yh.y,yh.x,0];return!q_(t,md,gd,vd,jv)||(t=[1,0,0,0,1,0,0,0,1],!q_(t,md,gd,vd,jv))?!1:(kv.crossVectors(tu,nu),t=[kv.x,kv.y,kv.z],q_(t,md,gd,vd,jv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ho).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ho).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Yl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Yl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Yl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Yl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Yl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Yl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Yl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Yl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Yl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Yl=[new K,new K,new K,new K,new K,new K,new K,new K],ho=new K,Gv=new ks,md=new K,gd=new K,vd=new K,tu=new K,nu=new K,yh=new K,Fm=new K,jv=new K,kv=new K,xh=new K;function q_(i,e,t,n,s){for(let r=0,c=i.length-3;r<=c;r+=3){xh.fromArray(i,r);const h=s.x*Math.abs(xh.x)+s.y*Math.abs(xh.y)+s.z*Math.abs(xh.z),d=e.dot(xh),p=t.dot(xh),y=n.dot(xh);if(Math.max(-Math.max(d,p,y),Math.min(d,p,y))>h)return!1}return!0}const nU=new ks,Hm=new K,W_=new K;class Rs{constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):nU.setFromPoints(e).getCenter(n);let s=0;for(let r=0,c=e.length;r<c;r++)s=Math.max(s,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Hm.subVectors(e,this.center);const t=Hm.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(Hm,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(W_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Hm.copy(e.center).add(W_)),this.expandByPoint(Hm.copy(e.center).sub(W_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const ql=new K,J_=new K,Vv=new K,iu=new K,K_=new K,Xv=new K,Z_=new K;class lf{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ql)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ql.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ql.copy(this.origin).addScaledVector(this.direction,t),ql.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){J_.copy(e).add(t).multiplyScalar(.5),Vv.copy(t).sub(e).normalize(),iu.copy(this.origin).sub(J_);const r=e.distanceTo(t)*.5,c=-this.direction.dot(Vv),h=iu.dot(this.direction),d=-iu.dot(Vv),p=iu.lengthSq(),y=Math.abs(1-c*c);let x,b,_,E;if(y>0)if(x=c*d-h,b=c*h-d,E=r*y,x>=0)if(b>=-E)if(b<=E){const R=1/y;x*=R,b*=R,_=x*(x+c*b+2*h)+b*(c*x+b+2*d)+p}else b=r,x=Math.max(0,-(c*b+h)),_=-x*x+b*(b+2*d)+p;else b=-r,x=Math.max(0,-(c*b+h)),_=-x*x+b*(b+2*d)+p;else b<=-E?(x=Math.max(0,-(-c*r+h)),b=x>0?-r:Math.min(Math.max(-r,-d),r),_=-x*x+b*(b+2*d)+p):b<=E?(x=0,b=Math.min(Math.max(-r,-d),r),_=b*(b+2*d)+p):(x=Math.max(0,-(c*r+h)),b=x>0?r:Math.min(Math.max(-r,-d),r),_=-x*x+b*(b+2*d)+p);else b=c>0?-r:r,x=Math.max(0,-(c*b+h)),_=-x*x+b*(b+2*d)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,x),s&&s.copy(J_).addScaledVector(Vv,b),_}intersectSphere(e,t){ql.subVectors(e.center,this.origin);const n=ql.dot(this.direction),s=ql.dot(ql)-n*n,r=e.radius*e.radius;if(s>r)return null;const c=Math.sqrt(r-s),h=n-c,d=n+c;return d<0?null:h<0?this.at(d,t):this.at(h,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,r,c,h,d;const p=1/this.direction.x,y=1/this.direction.y,x=1/this.direction.z,b=this.origin;return p>=0?(n=(e.min.x-b.x)*p,s=(e.max.x-b.x)*p):(n=(e.max.x-b.x)*p,s=(e.min.x-b.x)*p),y>=0?(r=(e.min.y-b.y)*y,c=(e.max.y-b.y)*y):(r=(e.max.y-b.y)*y,c=(e.min.y-b.y)*y),n>c||r>s||((r>n||isNaN(n))&&(n=r),(c<s||isNaN(s))&&(s=c),x>=0?(h=(e.min.z-b.z)*x,d=(e.max.z-b.z)*x):(h=(e.max.z-b.z)*x,d=(e.min.z-b.z)*x),n>d||h>s)||((h>n||n!==n)&&(n=h),(d<s||s!==s)&&(s=d),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,ql)!==null}intersectTriangle(e,t,n,s,r){K_.subVectors(t,e),Xv.subVectors(n,e),Z_.crossVectors(K_,Xv);let c=this.direction.dot(Z_),h;if(c>0){if(s)return null;h=1}else if(c<0)h=-1,c=-c;else return null;iu.subVectors(this.origin,e);const d=h*this.direction.dot(Xv.crossVectors(iu,Xv));if(d<0)return null;const p=h*this.direction.dot(K_.cross(iu));if(p<0||d+p>c)return null;const y=-h*iu.dot(Z_);return y<0?null:this.at(y/c,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Jt{constructor(e,t,n,s,r,c,h,d,p,y,x,b,_,E,R,T){Jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,c,h,d,p,y,x,b,_,E,R,T)}set(e,t,n,s,r,c,h,d,p,y,x,b,_,E,R,T){const M=this.elements;return M[0]=e,M[4]=t,M[8]=n,M[12]=s,M[1]=r,M[5]=c,M[9]=h,M[13]=d,M[2]=p,M[6]=y,M[10]=x,M[14]=b,M[3]=_,M[7]=E,M[11]=R,M[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Jt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/yd.setFromMatrixColumn(e,0).length(),r=1/yd.setFromMatrixColumn(e,1).length(),c=1/yd.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*c,t[9]=n[9]*c,t[10]=n[10]*c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,r=e.z,c=Math.cos(n),h=Math.sin(n),d=Math.cos(s),p=Math.sin(s),y=Math.cos(r),x=Math.sin(r);if(e.order==="XYZ"){const b=c*y,_=c*x,E=h*y,R=h*x;t[0]=d*y,t[4]=-d*x,t[8]=p,t[1]=_+E*p,t[5]=b-R*p,t[9]=-h*d,t[2]=R-b*p,t[6]=E+_*p,t[10]=c*d}else if(e.order==="YXZ"){const b=d*y,_=d*x,E=p*y,R=p*x;t[0]=b+R*h,t[4]=E*h-_,t[8]=c*p,t[1]=c*x,t[5]=c*y,t[9]=-h,t[2]=_*h-E,t[6]=R+b*h,t[10]=c*d}else if(e.order==="ZXY"){const b=d*y,_=d*x,E=p*y,R=p*x;t[0]=b-R*h,t[4]=-c*x,t[8]=E+_*h,t[1]=_+E*h,t[5]=c*y,t[9]=R-b*h,t[2]=-c*p,t[6]=h,t[10]=c*d}else if(e.order==="ZYX"){const b=c*y,_=c*x,E=h*y,R=h*x;t[0]=d*y,t[4]=E*p-_,t[8]=b*p+R,t[1]=d*x,t[5]=R*p+b,t[9]=_*p-E,t[2]=-p,t[6]=h*d,t[10]=c*d}else if(e.order==="YZX"){const b=c*d,_=c*p,E=h*d,R=h*p;t[0]=d*y,t[4]=R-b*x,t[8]=E*x+_,t[1]=x,t[5]=c*y,t[9]=-h*y,t[2]=-p*y,t[6]=_*x+E,t[10]=b-R*x}else if(e.order==="XZY"){const b=c*d,_=c*p,E=h*d,R=h*p;t[0]=d*y,t[4]=-x,t[8]=p*y,t[1]=b*x+R,t[5]=c*y,t[9]=_*x-E,t[2]=E*x-_,t[6]=h*y,t[10]=R*x+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(iU,e,sU)}lookAt(e,t,n){const s=this.elements;return sr.subVectors(e,t),sr.lengthSq()===0&&(sr.z=1),sr.normalize(),su.crossVectors(n,sr),su.lengthSq()===0&&(Math.abs(n.z)===1?sr.x+=1e-4:sr.z+=1e-4,sr.normalize(),su.crossVectors(n,sr)),su.normalize(),Yv.crossVectors(sr,su),s[0]=su.x,s[4]=Yv.x,s[8]=sr.x,s[1]=su.y,s[5]=Yv.y,s[9]=sr.y,s[2]=su.z,s[6]=Yv.z,s[10]=sr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,c=n[0],h=n[4],d=n[8],p=n[12],y=n[1],x=n[5],b=n[9],_=n[13],E=n[2],R=n[6],T=n[10],M=n[14],B=n[3],N=n[7],D=n[11],L=n[15],I=s[0],j=s[4],k=s[8],O=s[12],P=s[1],Y=s[5],ie=s[9],re=s[13],de=s[2],pe=s[6],H=s[10],Z=s[14],$=s[3],ge=s[7],X=s[11],ce=s[15];return r[0]=c*I+h*P+d*de+p*$,r[4]=c*j+h*Y+d*pe+p*ge,r[8]=c*k+h*ie+d*H+p*X,r[12]=c*O+h*re+d*Z+p*ce,r[1]=y*I+x*P+b*de+_*$,r[5]=y*j+x*Y+b*pe+_*ge,r[9]=y*k+x*ie+b*H+_*X,r[13]=y*O+x*re+b*Z+_*ce,r[2]=E*I+R*P+T*de+M*$,r[6]=E*j+R*Y+T*pe+M*ge,r[10]=E*k+R*ie+T*H+M*X,r[14]=E*O+R*re+T*Z+M*ce,r[3]=B*I+N*P+D*de+L*$,r[7]=B*j+N*Y+D*pe+L*ge,r[11]=B*k+N*ie+D*H+L*X,r[15]=B*O+N*re+D*Z+L*ce,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],r=e[12],c=e[1],h=e[5],d=e[9],p=e[13],y=e[2],x=e[6],b=e[10],_=e[14],E=e[3],R=e[7],T=e[11],M=e[15];return E*(+r*d*x-s*p*x-r*h*b+n*p*b+s*h*_-n*d*_)+R*(+t*d*_-t*p*b+r*c*b-s*c*_+s*p*y-r*d*y)+T*(+t*p*x-t*h*_-r*c*x+n*c*_+r*h*y-n*p*y)+M*(-s*h*y-t*d*x+t*h*b+s*c*x-n*c*b+n*d*y)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],c=e[4],h=e[5],d=e[6],p=e[7],y=e[8],x=e[9],b=e[10],_=e[11],E=e[12],R=e[13],T=e[14],M=e[15],B=x*T*p-R*b*p+R*d*_-h*T*_-x*d*M+h*b*M,N=E*b*p-y*T*p-E*d*_+c*T*_+y*d*M-c*b*M,D=y*R*p-E*x*p+E*h*_-c*R*_-y*h*M+c*x*M,L=E*x*d-y*R*d-E*h*b+c*R*b+y*h*T-c*x*T,I=t*B+n*N+s*D+r*L;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const j=1/I;return e[0]=B*j,e[1]=(R*b*r-x*T*r-R*s*_+n*T*_+x*s*M-n*b*M)*j,e[2]=(h*T*r-R*d*r+R*s*p-n*T*p-h*s*M+n*d*M)*j,e[3]=(x*d*r-h*b*r-x*s*p+n*b*p+h*s*_-n*d*_)*j,e[4]=N*j,e[5]=(y*T*r-E*b*r+E*s*_-t*T*_-y*s*M+t*b*M)*j,e[6]=(E*d*r-c*T*r-E*s*p+t*T*p+c*s*M-t*d*M)*j,e[7]=(c*b*r-y*d*r+y*s*p-t*b*p-c*s*_+t*d*_)*j,e[8]=D*j,e[9]=(E*x*r-y*R*r-E*n*_+t*R*_+y*n*M-t*x*M)*j,e[10]=(c*R*r-E*h*r+E*n*p-t*R*p-c*n*M+t*h*M)*j,e[11]=(y*h*r-c*x*r-y*n*p+t*x*p+c*n*_-t*h*_)*j,e[12]=L*j,e[13]=(y*R*s-E*x*s+E*n*b-t*R*b-y*n*T+t*x*T)*j,e[14]=(E*h*s-c*R*s-E*n*d+t*R*d+c*n*T-t*h*T)*j,e[15]=(c*x*s-y*h*s+y*n*d-t*x*d-c*n*b+t*h*b)*j,this}scale(e){const t=this.elements,n=e.x,s=e.y,r=e.z;return t[0]*=n,t[4]*=s,t[8]*=r,t[1]*=n,t[5]*=s,t[9]*=r,t[2]*=n,t[6]*=s,t[10]*=r,t[3]*=n,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n,c=e.x,h=e.y,d=e.z,p=r*c,y=r*h;return this.set(p*c+n,p*h-s*d,p*d+s*h,0,p*h+s*d,y*h+n,y*d-s*c,0,p*d-s*h,y*d+s*c,r*d*d+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,r,c){return this.set(1,n,r,0,e,1,c,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,r=t._x,c=t._y,h=t._z,d=t._w,p=r+r,y=c+c,x=h+h,b=r*p,_=r*y,E=r*x,R=c*y,T=c*x,M=h*x,B=d*p,N=d*y,D=d*x,L=n.x,I=n.y,j=n.z;return s[0]=(1-(R+M))*L,s[1]=(_+D)*L,s[2]=(E-N)*L,s[3]=0,s[4]=(_-D)*I,s[5]=(1-(b+M))*I,s[6]=(T+B)*I,s[7]=0,s[8]=(E+N)*j,s[9]=(T-B)*j,s[10]=(1-(b+R))*j,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let r=yd.set(s[0],s[1],s[2]).length();const c=yd.set(s[4],s[5],s[6]).length(),h=yd.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],fo.copy(this);const p=1/r,y=1/c,x=1/h;return fo.elements[0]*=p,fo.elements[1]*=p,fo.elements[2]*=p,fo.elements[4]*=y,fo.elements[5]*=y,fo.elements[6]*=y,fo.elements[8]*=x,fo.elements[9]*=x,fo.elements[10]*=x,t.setFromRotationMatrix(fo),n.x=r,n.y=c,n.z=h,this}makePerspective(e,t,n,s,r,c,h=lr,d=!1){const p=this.elements,y=2*r/(t-e),x=2*r/(n-s),b=(t+e)/(t-e),_=(n+s)/(n-s);let E,R;if(d)E=r/(c-r),R=c*r/(c-r);else if(h===lr)E=-(c+r)/(c-r),R=-2*c*r/(c-r);else if(h===lp)E=-c/(c-r),R=-c*r/(c-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return p[0]=y,p[4]=0,p[8]=b,p[12]=0,p[1]=0,p[5]=x,p[9]=_,p[13]=0,p[2]=0,p[6]=0,p[10]=E,p[14]=R,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(e,t,n,s,r,c,h=lr,d=!1){const p=this.elements,y=2/(t-e),x=2/(n-s),b=-(t+e)/(t-e),_=-(n+s)/(n-s);let E,R;if(d)E=1/(c-r),R=c/(c-r);else if(h===lr)E=-2/(c-r),R=-(c+r)/(c-r);else if(h===lp)E=-1/(c-r),R=-r/(c-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return p[0]=y,p[4]=0,p[8]=0,p[12]=b,p[1]=0,p[5]=x,p[9]=0,p[13]=_,p[2]=0,p[6]=0,p[10]=E,p[14]=R,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const yd=new K,fo=new Jt,iU=new K(0,0,0),sU=new K(1,1,1),su=new K,Yv=new K,sr=new K,jE=new Jt,kE=new ws;class ur{constructor(e=0,t=0,n=0,s=ur.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,r=s[0],c=s[4],h=s[8],d=s[1],p=s[5],y=s[9],x=s[2],b=s[6],_=s[10];switch(t){case"XYZ":this._y=Math.asin(nn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-y,_),this._z=Math.atan2(-c,r)):(this._x=Math.atan2(b,p),this._z=0);break;case"YXZ":this._x=Math.asin(-nn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(h,_),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-x,r),this._z=0);break;case"ZXY":this._x=Math.asin(nn(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-x,_),this._z=Math.atan2(-c,p)):(this._y=0,this._z=Math.atan2(d,r));break;case"ZYX":this._y=Math.asin(-nn(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(b,_),this._z=Math.atan2(d,r)):(this._x=0,this._z=Math.atan2(-c,p));break;case"YZX":this._z=Math.asin(nn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-y,p),this._y=Math.atan2(-x,r)):(this._x=0,this._y=Math.atan2(h,_));break;case"XZY":this._z=Math.asin(-nn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(b,p),this._y=Math.atan2(h,r)):(this._x=Math.atan2(-y,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return jE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jE,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return kE.setFromEuler(this),this.setFromQuaternion(kE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ur.DEFAULT_ORDER="XYZ";class up{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let aU=0;const VE=new K,xd=new ws,Wl=new Jt,qv=new K,zm=new K,rU=new K,oU=new ws,XE=new K(1,0,0),YE=new K(0,1,0),qE=new K(0,0,1),WE={type:"added"},lU={type:"removed"},bd={type:"childadded",child:null},Q_={type:"childremoved",child:null};class Pn extends bl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:aU++}),this.uuid=cr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Pn.DEFAULT_UP.clone();const e=new K,t=new ur,n=new ws,s=new K(1,1,1);function r(){n.setFromEuler(t,!1)}function c(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Jt},normalMatrix:{value:new gn}}),this.matrix=new Jt,this.matrixWorld=new Jt,this.matrixAutoUpdate=Pn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new up,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return xd.setFromAxisAngle(e,t),this.quaternion.multiply(xd),this}rotateOnWorldAxis(e,t){return xd.setFromAxisAngle(e,t),this.quaternion.premultiply(xd),this}rotateX(e){return this.rotateOnAxis(XE,e)}rotateY(e){return this.rotateOnAxis(YE,e)}rotateZ(e){return this.rotateOnAxis(qE,e)}translateOnAxis(e,t){return VE.copy(e).applyQuaternion(this.quaternion),this.position.add(VE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(XE,e)}translateY(e){return this.translateOnAxis(YE,e)}translateZ(e){return this.translateOnAxis(qE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Wl.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?qv.copy(e):qv.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),zm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wl.lookAt(zm,qv,this.up):Wl.lookAt(qv,zm,this.up),this.quaternion.setFromRotationMatrix(Wl),s&&(Wl.extractRotation(s.matrixWorld),xd.setFromRotationMatrix(Wl),this.quaternion.premultiply(xd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(WE),bd.child=e,this.dispatchEvent(bd),bd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(lU),Q_.child=e,this.dispatchEvent(Q_),Q_.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Wl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Wl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Wl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(WE),bd.child=e,this.dispatchEvent(bd),bd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const c=this.children[n].getObjectByProperty(e,t);if(c!==void 0)return c}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let r=0,c=s.length;r<c;r++)s[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zm,e,rU),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zm,oU,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,c=s.length;r<c;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(h=>({...h,boundingBox:h.boundingBox?h.boundingBox.toJSON():void 0,boundingSphere:h.boundingSphere?h.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(h=>({...h})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function r(h,d){return h[d.uuid]===void 0&&(h[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const d=h.shapes;if(Array.isArray(d))for(let p=0,y=d.length;p<y;p++){const x=d[p];r(e.shapes,x)}else r(e.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let d=0,p=this.material.length;d<p;d++)h.push(r(e.materials,this.material[d]));s.material=h}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let h=0;h<this.children.length;h++)s.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let h=0;h<this.animations.length;h++){const d=this.animations[h];s.animations.push(r(e.animations,d))}}if(t){const h=c(e.geometries),d=c(e.materials),p=c(e.textures),y=c(e.images),x=c(e.shapes),b=c(e.skeletons),_=c(e.animations),E=c(e.nodes);h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),y.length>0&&(n.images=y),x.length>0&&(n.shapes=x),b.length>0&&(n.skeletons=b),_.length>0&&(n.animations=_),E.length>0&&(n.nodes=E)}return n.object=s,n;function c(h){const d=[];for(const p in h){const y=h[p];delete y.metadata,d.push(y)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}Pn.DEFAULT_UP=new K(0,1,0);Pn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Pn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const po=new K,Jl=new K,$_=new K,Kl=new K,_d=new K,Ad=new K,JE=new K,eA=new K,tA=new K,nA=new K,iA=new Gn,sA=new Gn,aA=new Gn;class Ga{constructor(e=new K,t=new K,n=new K){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),po.subVectors(e,t),s.cross(po);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,n,s,r){po.subVectors(s,t),Jl.subVectors(n,t),$_.subVectors(e,t);const c=po.dot(po),h=po.dot(Jl),d=po.dot($_),p=Jl.dot(Jl),y=Jl.dot($_),x=c*p-h*h;if(x===0)return r.set(0,0,0),null;const b=1/x,_=(p*d-h*y)*b,E=(c*y-h*d)*b;return r.set(1-_-E,E,_)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,Kl)===null?!1:Kl.x>=0&&Kl.y>=0&&Kl.x+Kl.y<=1}static getInterpolation(e,t,n,s,r,c,h,d){return this.getBarycoord(e,t,n,s,Kl)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(r,Kl.x),d.addScaledVector(c,Kl.y),d.addScaledVector(h,Kl.z),d)}static getInterpolatedAttribute(e,t,n,s,r,c){return iA.setScalar(0),sA.setScalar(0),aA.setScalar(0),iA.fromBufferAttribute(e,t),sA.fromBufferAttribute(e,n),aA.fromBufferAttribute(e,s),c.setScalar(0),c.addScaledVector(iA,r.x),c.addScaledVector(sA,r.y),c.addScaledVector(aA,r.z),c}static isFrontFacing(e,t,n,s){return po.subVectors(n,t),Jl.subVectors(e,t),po.cross(Jl).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return po.subVectors(this.c,this.b),Jl.subVectors(this.a,this.b),po.cross(Jl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ga.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ga.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,r){return Ga.getInterpolation(e,this.a,this.b,this.c,t,n,s,r)}containsPoint(e){return Ga.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ga.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,r=this.c;let c,h;_d.subVectors(s,n),Ad.subVectors(r,n),eA.subVectors(e,n);const d=_d.dot(eA),p=Ad.dot(eA);if(d<=0&&p<=0)return t.copy(n);tA.subVectors(e,s);const y=_d.dot(tA),x=Ad.dot(tA);if(y>=0&&x<=y)return t.copy(s);const b=d*x-y*p;if(b<=0&&d>=0&&y<=0)return c=d/(d-y),t.copy(n).addScaledVector(_d,c);nA.subVectors(e,r);const _=_d.dot(nA),E=Ad.dot(nA);if(E>=0&&_<=E)return t.copy(r);const R=_*p-d*E;if(R<=0&&p>=0&&E<=0)return h=p/(p-E),t.copy(n).addScaledVector(Ad,h);const T=y*E-_*x;if(T<=0&&x-y>=0&&_-E>=0)return JE.subVectors(r,s),h=(x-y)/(x-y+(_-E)),t.copy(s).addScaledVector(JE,h);const M=1/(T+R+b);return c=R*M,h=b*M,t.copy(n).addScaledVector(_d,c).addScaledVector(Ad,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const N2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},au={h:0,s:0,l:0},Wv={h:0,s:0,l:0};function rA(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Et{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Gs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,In.colorSpaceToWorking(this,t),this}setRGB(e,t,n,s=In.workingColorSpace){return this.r=e,this.g=t,this.b=n,In.colorSpaceToWorking(this,s),this}setHSL(e,t,n,s=In.workingColorSpace){if(e=dS(e,1),t=nn(t,0,1),n=nn(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,c=2*n-r;this.r=rA(c,r,e+1/3),this.g=rA(c,r,e),this.b=rA(c,r,e-1/3)}return In.colorSpaceToWorking(this,s),this}setStyle(e,t=Gs){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const c=s[1],h=s[2];switch(c){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],c=r.length;if(c===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(c===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Gs){const n=N2[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ac(e.r),this.g=ac(e.g),this.b=ac(e.b),this}copyLinearToSRGB(e){return this.r=Vd(e.r),this.g=Vd(e.g),this.b=Vd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Gs){return In.workingToColorSpace(na.copy(this),e),Math.round(nn(na.r*255,0,255))*65536+Math.round(nn(na.g*255,0,255))*256+Math.round(nn(na.b*255,0,255))}getHexString(e=Gs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=In.workingColorSpace){In.workingToColorSpace(na.copy(this),t);const n=na.r,s=na.g,r=na.b,c=Math.max(n,s,r),h=Math.min(n,s,r);let d,p;const y=(h+c)/2;if(h===c)d=0,p=0;else{const x=c-h;switch(p=y<=.5?x/(c+h):x/(2-c-h),c){case n:d=(s-r)/x+(s<r?6:0);break;case s:d=(r-n)/x+2;break;case r:d=(n-s)/x+4;break}d/=6}return e.h=d,e.s=p,e.l=y,e}getRGB(e,t=In.workingColorSpace){return In.workingToColorSpace(na.copy(this),t),e.r=na.r,e.g=na.g,e.b=na.b,e}getStyle(e=Gs){In.workingToColorSpace(na.copy(this),e);const t=na.r,n=na.g,s=na.b;return e!==Gs?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(au),this.setHSL(au.h+e,au.s+t,au.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(au),e.getHSL(Wv);const n=pg(au.h,Wv.h,t),s=pg(au.s,Wv.s,t),r=pg(au.l,Wv.l,t);return this.setHSL(n,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*s,this.g=r[1]*t+r[4]*n+r[7]*s,this.b=r[2]*t+r[5]*n+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const na=new Et;Et.NAMES=N2;let cU=0;class ms extends bl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:cU++}),this.uuid=cr(),this.name="",this.type="Material",this.blending=Jh,this.side=vl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=tx,this.blendDst=nx,this.blendEquation=fu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Et(0,0,0),this.blendAlpha=0,this.depthFunc=Qh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Lh,this.stencilZFail=Lh,this.stencilZPass=Lh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Jh&&(n.blending=this.blending),this.side!==vl&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==tx&&(n.blendSrc=this.blendSrc),this.blendDst!==nx&&(n.blendDst=this.blendDst),this.blendEquation!==fu&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Qh&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==_1&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Lh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Lh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Lh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const c=[];for(const h in r){const d=r[h];delete d.metadata,c.push(d)}return c}if(t){const r=s(e.textures),c=s(e.images);r.length>0&&(n.textures=r),c.length>0&&(n.images=c)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ka extends ms{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=Vg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ic=uU();function uU(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(n[d]=0,n[d|256]=32768,s[d]=24,s[d|256]=24):p<-14?(n[d]=1024>>-p-14,n[d|256]=1024>>-p-14|32768,s[d]=-p-1,s[d|256]=-p-1):p<=15?(n[d]=p+15<<10,n[d|256]=p+15<<10|32768,s[d]=13,s[d|256]=13):p<128?(n[d]=31744,n[d|256]=64512,s[d]=24,s[d|256]=24):(n[d]=31744,n[d|256]=64512,s[d]=13,s[d|256]=13)}const r=new Uint32Array(2048),c=new Uint32Array(64),h=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,y=0;for(;(p&8388608)===0;)p<<=1,y-=8388608;p&=-8388609,y+=947912704,r[d]=p|y}for(let d=1024;d<2048;++d)r[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)c[d]=d<<23;c[31]=1199570944,c[32]=2147483648;for(let d=33;d<63;++d)c[d]=2147483648+(d-32<<23);c[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(h[d]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:c,offsetTable:h}}function za(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=nn(i,-65504,65504),ic.floatView[0]=i;const e=ic.uint32View[0],t=e>>23&511;return ic.baseTable[t]+((e&8388607)>>ic.shiftTable[t])}function sg(i){const e=i>>10;return ic.uint32View[0]=ic.mantissaTable[ic.offsetTable[e]+(i&1023)]+ic.exponentTable[e],ic.floatView[0]}class kh{static toHalfFloat(e){return za(e)}static fromHalfFloat(e){return sg(e)}}const is=new K,Jv=new Ye;let hU=0;class jn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:hU++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Tg,this.updateRanges=[],this.gpuType=Pi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Jv.fromBufferAttribute(this,t),Jv.applyMatrix3(e),this.setXY(t,Jv.x,Jv.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.applyMatrix3(e),this.setXYZ(t,is.x,is.y,is.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.applyMatrix4(e),this.setXYZ(t,is.x,is.y,is.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.applyNormalMatrix(e),this.setXYZ(t,is.x,is.y,is.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)is.fromBufferAttribute(this,t),is.transformDirection(e),this.setXYZ(t,is.x,is.y,is.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Sa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=bn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Sa(t,this.array)),t}setX(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Sa(t,this.array)),t}setY(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Sa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Sa(t,this.array)),t}setW(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),n=bn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),n=bn(n,this.array),s=bn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),n=bn(n,this.array),s=bn(s,this.array),r=bn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Tg&&(e.usage=this.usage),e}}class fU extends jn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class dU extends jn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class pU extends jn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class mU extends jn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class mS extends jn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class gU extends jn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class gS extends jn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class vU extends jn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=sg(this.array[e*this.itemSize]);return this.normalized&&(t=Sa(t,this.array)),t}setX(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize]=za(t),this}getY(e){let t=sg(this.array[e*this.itemSize+1]);return this.normalized&&(t=Sa(t,this.array)),t}setY(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+1]=za(t),this}getZ(e){let t=sg(this.array[e*this.itemSize+2]);return this.normalized&&(t=Sa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+2]=za(t),this}getW(e){let t=sg(this.array[e*this.itemSize+3]);return this.normalized&&(t=Sa(t,this.array)),t}setW(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+3]=za(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),n=bn(n,this.array)),this.array[e+0]=za(t),this.array[e+1]=za(n),this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),n=bn(n,this.array),s=bn(s,this.array)),this.array[e+0]=za(t),this.array[e+1]=za(n),this.array[e+2]=za(s),this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),n=bn(n,this.array),s=bn(s,this.array),r=bn(r,this.array)),this.array[e+0]=za(t),this.array[e+1]=za(n),this.array[e+2]=za(s),this.array[e+3]=za(r),this}}class It extends jn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let yU=0;const Rr=new Jt,oA=new Pn,Sd=new K,ar=new ks,Gm=new ks,Ms=new K;class pn extends bl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yU++}),this.uuid=cr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(w2(e)?gS:mS)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new gn().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Rr.makeRotationFromQuaternion(e),this.applyMatrix4(Rr),this}rotateX(e){return Rr.makeRotationX(e),this.applyMatrix4(Rr),this}rotateY(e){return Rr.makeRotationY(e),this.applyMatrix4(Rr),this}rotateZ(e){return Rr.makeRotationZ(e),this.applyMatrix4(Rr),this}translate(e,t,n){return Rr.makeTranslation(e,t,n),this.applyMatrix4(Rr),this}scale(e,t,n){return Rr.makeScale(e,t,n),this.applyMatrix4(Rr),this}lookAt(e){return oA.lookAt(e),oA.updateMatrix(),this.applyMatrix4(oA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sd).negate(),this.translate(Sd.x,Sd.y,Sd.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let s=0,r=e.length;s<r;s++){const c=e[s];n.push(c.x,c.y,c.z||0)}this.setAttribute("position",new It(n,3))}else{const n=Math.min(e.length,t.count);for(let s=0;s<n;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ks);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const r=t[n];ar.setFromBufferAttribute(r),this.morphTargetsRelative?(Ms.addVectors(this.boundingBox.min,ar.min),this.boundingBox.expandByPoint(Ms),Ms.addVectors(this.boundingBox.max,ar.max),this.boundingBox.expandByPoint(Ms)):(this.boundingBox.expandByPoint(ar.min),this.boundingBox.expandByPoint(ar.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Rs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){const n=this.boundingSphere.center;if(ar.setFromBufferAttribute(e),t)for(let r=0,c=t.length;r<c;r++){const h=t[r];Gm.setFromBufferAttribute(h),this.morphTargetsRelative?(Ms.addVectors(ar.min,Gm.min),ar.expandByPoint(Ms),Ms.addVectors(ar.max,Gm.max),ar.expandByPoint(Ms)):(ar.expandByPoint(Gm.min),ar.expandByPoint(Gm.max))}ar.getCenter(n);let s=0;for(let r=0,c=e.count;r<c;r++)Ms.fromBufferAttribute(e,r),s=Math.max(s,n.distanceToSquared(Ms));if(t)for(let r=0,c=t.length;r<c;r++){const h=t[r],d=this.morphTargetsRelative;for(let p=0,y=h.count;p<y;p++)Ms.fromBufferAttribute(h,p),d&&(Sd.fromBufferAttribute(e,p),Ms.add(Sd)),s=Math.max(s,n.distanceToSquared(Ms))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new jn(new Float32Array(4*n.count),4));const c=this.getAttribute("tangent"),h=[],d=[];for(let k=0;k<n.count;k++)h[k]=new K,d[k]=new K;const p=new K,y=new K,x=new K,b=new Ye,_=new Ye,E=new Ye,R=new K,T=new K;function M(k,O,P){p.fromBufferAttribute(n,k),y.fromBufferAttribute(n,O),x.fromBufferAttribute(n,P),b.fromBufferAttribute(r,k),_.fromBufferAttribute(r,O),E.fromBufferAttribute(r,P),y.sub(p),x.sub(p),_.sub(b),E.sub(b);const Y=1/(_.x*E.y-E.x*_.y);isFinite(Y)&&(R.copy(y).multiplyScalar(E.y).addScaledVector(x,-_.y).multiplyScalar(Y),T.copy(x).multiplyScalar(_.x).addScaledVector(y,-E.x).multiplyScalar(Y),h[k].add(R),h[O].add(R),h[P].add(R),d[k].add(T),d[O].add(T),d[P].add(T))}let B=this.groups;B.length===0&&(B=[{start:0,count:e.count}]);for(let k=0,O=B.length;k<O;++k){const P=B[k],Y=P.start,ie=P.count;for(let re=Y,de=Y+ie;re<de;re+=3)M(e.getX(re+0),e.getX(re+1),e.getX(re+2))}const N=new K,D=new K,L=new K,I=new K;function j(k){L.fromBufferAttribute(s,k),I.copy(L);const O=h[k];N.copy(O),N.sub(L.multiplyScalar(L.dot(O))).normalize(),D.crossVectors(I,O);const Y=D.dot(d[k])<0?-1:1;c.setXYZW(k,N.x,N.y,N.z,Y)}for(let k=0,O=B.length;k<O;++k){const P=B[k],Y=P.start,ie=P.count;for(let re=Y,de=Y+ie;re<de;re+=3)j(e.getX(re+0)),j(e.getX(re+1)),j(e.getX(re+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new jn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let b=0,_=n.count;b<_;b++)n.setXYZ(b,0,0,0);const s=new K,r=new K,c=new K,h=new K,d=new K,p=new K,y=new K,x=new K;if(e)for(let b=0,_=e.count;b<_;b+=3){const E=e.getX(b+0),R=e.getX(b+1),T=e.getX(b+2);s.fromBufferAttribute(t,E),r.fromBufferAttribute(t,R),c.fromBufferAttribute(t,T),y.subVectors(c,r),x.subVectors(s,r),y.cross(x),h.fromBufferAttribute(n,E),d.fromBufferAttribute(n,R),p.fromBufferAttribute(n,T),h.add(y),d.add(y),p.add(y),n.setXYZ(E,h.x,h.y,h.z),n.setXYZ(R,d.x,d.y,d.z),n.setXYZ(T,p.x,p.y,p.z)}else for(let b=0,_=t.count;b<_;b+=3)s.fromBufferAttribute(t,b+0),r.fromBufferAttribute(t,b+1),c.fromBufferAttribute(t,b+2),y.subVectors(c,r),x.subVectors(s,r),y.cross(x),n.setXYZ(b+0,y.x,y.y,y.z),n.setXYZ(b+1,y.x,y.y,y.z),n.setXYZ(b+2,y.x,y.y,y.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ms.fromBufferAttribute(e,t),Ms.normalize(),e.setXYZ(t,Ms.x,Ms.y,Ms.z)}toNonIndexed(){function e(h,d){const p=h.array,y=h.itemSize,x=h.normalized,b=new p.constructor(d.length*y);let _=0,E=0;for(let R=0,T=d.length;R<T;R++){h.isInterleavedBufferAttribute?_=d[R]*h.data.stride+h.offset:_=d[R]*y;for(let M=0;M<y;M++)b[E++]=p[_++]}return new jn(b,y,x)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new pn,n=this.index.array,s=this.attributes;for(const h in s){const d=s[h],p=e(d,n);t.setAttribute(h,p)}const r=this.morphAttributes;for(const h in r){const d=[],p=r[h];for(let y=0,x=p.length;y<x;y++){const b=p[y],_=e(b,n);d.push(_)}t.morphAttributes[h]=d}t.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let h=0,d=c.length;h<d;h++){const p=c[h];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const d in n){const p=n[d];e.data.attributes[d]=p.toJSON(e.data)}const s={};let r=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],y=[];for(let x=0,b=p.length;x<b;x++){const _=p[x];y.push(_.toJSON(e.data))}y.length>0&&(s[d]=y,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere=h.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const s=e.attributes;for(const p in s){const y=s[p];this.setAttribute(p,y.clone(t))}const r=e.morphAttributes;for(const p in r){const y=[],x=r[p];for(let b=0,_=x.length;b<_;b++)y.push(x[b].clone(t));this.morphAttributes[p]=y}this.morphTargetsRelative=e.morphTargetsRelative;const c=e.groups;for(let p=0,y=c.length;p<y;p++){const x=c[p];this.addGroup(x.start,x.count,x.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const KE=new Jt,bh=new lf,Kv=new Rs,ZE=new K,Zv=new K,Qv=new K,$v=new K,lA=new K,ey=new K,QE=new K,ty=new K;class Bi extends Pn{constructor(e=new pn,t=new ka){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,c=s.length;r<c;r++){const h=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=r}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,c=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const h=this.morphTargetInfluences;if(r&&h){ey.set(0,0,0);for(let d=0,p=r.length;d<p;d++){const y=h[d],x=r[d];y!==0&&(lA.fromBufferAttribute(x,e),c?ey.addScaledVector(lA,y):ey.addScaledVector(lA.sub(t),y))}t.add(ey)}return t}raycast(e,t){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Kv.copy(n.boundingSphere),Kv.applyMatrix4(r),bh.copy(e.ray).recast(e.near),!(Kv.containsPoint(bh.origin)===!1&&(bh.intersectSphere(Kv,ZE)===null||bh.origin.distanceToSquared(ZE)>(e.far-e.near)**2))&&(KE.copy(r).invert(),bh.copy(e.ray).applyMatrix4(KE),!(n.boundingBox!==null&&bh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,bh)))}_computeIntersections(e,t,n){let s;const r=this.geometry,c=this.material,h=r.index,d=r.attributes.position,p=r.attributes.uv,y=r.attributes.uv1,x=r.attributes.normal,b=r.groups,_=r.drawRange;if(h!==null)if(Array.isArray(c))for(let E=0,R=b.length;E<R;E++){const T=b[E],M=c[T.materialIndex],B=Math.max(T.start,_.start),N=Math.min(h.count,Math.min(T.start+T.count,_.start+_.count));for(let D=B,L=N;D<L;D+=3){const I=h.getX(D),j=h.getX(D+1),k=h.getX(D+2);s=ny(this,M,e,n,p,y,x,I,j,k),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=T.materialIndex,t.push(s))}}else{const E=Math.max(0,_.start),R=Math.min(h.count,_.start+_.count);for(let T=E,M=R;T<M;T+=3){const B=h.getX(T),N=h.getX(T+1),D=h.getX(T+2);s=ny(this,c,e,n,p,y,x,B,N,D),s&&(s.faceIndex=Math.floor(T/3),t.push(s))}}else if(d!==void 0)if(Array.isArray(c))for(let E=0,R=b.length;E<R;E++){const T=b[E],M=c[T.materialIndex],B=Math.max(T.start,_.start),N=Math.min(d.count,Math.min(T.start+T.count,_.start+_.count));for(let D=B,L=N;D<L;D+=3){const I=D,j=D+1,k=D+2;s=ny(this,M,e,n,p,y,x,I,j,k),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=T.materialIndex,t.push(s))}}else{const E=Math.max(0,_.start),R=Math.min(d.count,_.start+_.count);for(let T=E,M=R;T<M;T+=3){const B=T,N=T+1,D=T+2;s=ny(this,c,e,n,p,y,x,B,N,D),s&&(s.faceIndex=Math.floor(T/3),t.push(s))}}}}function xU(i,e,t,n,s,r,c,h){let d;if(e.side===Ma?d=n.intersectTriangle(c,r,s,!0,h):d=n.intersectTriangle(s,r,c,e.side===vl,h),d===null)return null;ty.copy(h),ty.applyMatrix4(i.matrixWorld);const p=t.ray.origin.distanceTo(ty);return p<t.near||p>t.far?null:{distance:p,point:ty.clone(),object:i}}function ny(i,e,t,n,s,r,c,h,d,p){i.getVertexPosition(h,Zv),i.getVertexPosition(d,Qv),i.getVertexPosition(p,$v);const y=xU(i,e,t,n,Zv,Qv,$v,QE);if(y){const x=new K;Ga.getBarycoord(QE,Zv,Qv,$v,x),s&&(y.uv=Ga.getInterpolatedAttribute(s,h,d,p,x,new Ye)),r&&(y.uv1=Ga.getInterpolatedAttribute(r,h,d,p,x,new Ye)),c&&(y.normal=Ga.getInterpolatedAttribute(c,h,d,p,x,new K),y.normal.dot(n.direction)>0&&y.normal.multiplyScalar(-1));const b={a:h,b:d,c:p,normal:new K,materialIndex:0};Ga.getNormal(Zv,Qv,$v,b.normal),y.face=b,y.barycoord=x}return y}class cf extends pn{constructor(e=1,t=1,n=1,s=1,r=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:r,depthSegments:c};const h=this;s=Math.floor(s),r=Math.floor(r),c=Math.floor(c);const d=[],p=[],y=[],x=[];let b=0,_=0;E("z","y","x",-1,-1,n,t,e,c,r,0),E("z","y","x",1,-1,n,t,-e,c,r,1),E("x","z","y",1,1,e,n,t,s,c,2),E("x","z","y",1,-1,e,n,-t,s,c,3),E("x","y","z",1,-1,e,t,n,s,r,4),E("x","y","z",-1,-1,e,t,-n,s,r,5),this.setIndex(d),this.setAttribute("position",new It(p,3)),this.setAttribute("normal",new It(y,3)),this.setAttribute("uv",new It(x,2));function E(R,T,M,B,N,D,L,I,j,k,O){const P=D/j,Y=L/k,ie=D/2,re=L/2,de=I/2,pe=j+1,H=k+1;let Z=0,$=0;const ge=new K;for(let X=0;X<H;X++){const ce=X*Y-re;for(let xe=0;xe<pe;xe++){const Te=xe*P-ie;ge[R]=Te*B,ge[T]=ce*N,ge[M]=de,p.push(ge.x,ge.y,ge.z),ge[R]=0,ge[T]=0,ge[M]=I>0?1:-1,y.push(ge.x,ge.y,ge.z),x.push(xe/j),x.push(1-X/k),Z+=1}}for(let X=0;X<k;X++)for(let ce=0;ce<j;ce++){const xe=b+ce+pe*X,Te=b+ce+pe*(X+1),He=b+(ce+1)+pe*(X+1),at=b+(ce+1)+pe*X;d.push(xe,Te,at),d.push(Te,He,at),$+=6}h.addGroup(_,$,O),_+=$,b+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hp(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function _a(i){const e={};for(let t=0;t<i.length;t++){const n=hp(i[t]);for(const s in n)e[s]=n[s]}return e}function bU(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function D2(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:In.workingColorSpace}const U2={clone:hp,merge:_a};var _U=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,AU=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Va extends ms{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_U,this.fragmentShader=AU,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hp(e.uniforms),this.uniformsGroups=bU(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const c=this.uniforms[s].value;c&&c.isTexture?t.uniforms[s]={type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?t.uniforms[s]={type:"c",value:c.getHex()}:c&&c.isVector2?t.uniforms[s]={type:"v2",value:c.toArray()}:c&&c.isVector3?t.uniforms[s]={type:"v3",value:c.toArray()}:c&&c.isVector4?t.uniforms[s]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?t.uniforms[s]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?t.uniforms[s]={type:"m4",value:c.toArray()}:t.uniforms[s]={value:c}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class yb extends Pn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jt,this.projectionMatrix=new Jt,this.projectionMatrixInverse=new Jt,this.coordinateSystem=lr,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ru=new K,$E=new Ye,eT=new Ye;class Ri extends yb{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=cp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Kh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return cp*2*Math.atan(Math.tan(Kh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){ru.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ru.x,ru.y).multiplyScalar(-e/ru.z),ru.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ru.x,ru.y).multiplyScalar(-e/ru.z)}getViewSize(e,t){return this.getViewBounds(e,$E,eT),t.subVectors(eT,$E)}setViewOffset(e,t,n,s,r,c){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Kh*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,r=-.5*s;const c=this.view;if(this.view!==null&&this.view.enabled){const d=c.fullWidth,p=c.fullHeight;r+=c.offsetX*s/d,t-=c.offsetY*n/p,s*=c.width/d,n*=c.height/p}const h=this.filmOffset;h!==0&&(r+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Md=-90,Ed=1;class O2 extends Pn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Ri(Md,Ed,e,t);s.layers=this.layers,this.add(s);const r=new Ri(Md,Ed,e,t);r.layers=this.layers,this.add(r);const c=new Ri(Md,Ed,e,t);c.layers=this.layers,this.add(c);const h=new Ri(Md,Ed,e,t);h.layers=this.layers,this.add(h);const d=new Ri(Md,Ed,e,t);d.layers=this.layers,this.add(d);const p=new Ri(Md,Ed,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,r,c,h,d]=t;for(const p of t)this.remove(p);if(e===lr)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),c.up.set(0,0,1),c.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===lp)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),c.up.set(0,0,-1),c.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,c,h,d,p,y]=this.children,x=e.getRenderTarget(),b=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),E=e.xr.enabled;e.xr.enabled=!1;const R=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,r),e.setRenderTarget(n,1,s),e.render(t,c),e.setRenderTarget(n,2,s),e.render(t,h),e.setRenderTarget(n,3,s),e.render(t,d),e.setRenderTarget(n,4,s),e.render(t,p),n.texture.generateMipmaps=R,e.setRenderTarget(n,5,s),e.render(t,y),e.setRenderTarget(x,b,_),e.xr.enabled=E,n.texture.needsPMREMUpdate=!0}}class Wg extends ti{constructor(e=[],t=yl,n,s,r,c,h,d,p,y){super(e,t,n,s,r,c,h,d,p,y),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class vS extends Fr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new Wg(s),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new cf(5,5,5),r=new Va({name:"CubemapFromEquirect",uniforms:hp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ma,blending:ml});r.uniforms.tEquirect.value=t;const c=new Bi(s,r),h=t.minFilter;return t.minFilter===Or&&(t.minFilter=Kn),new O2(1,10,this).update(e,c),t.minFilter=h,c.geometry.dispose(),c.material.dispose(),this}clear(e,t=!0,n=!0,s=!0){const r=e.getRenderTarget();for(let c=0;c<6;c++)e.setRenderTarget(this,c),e.clear(t,n,s);e.setRenderTarget(r)}}class sc extends Pn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const SU={type:"move"};class qy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new sc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new sc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new sc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,r=null,c=null;const h=this._targetRay,d=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){c=!0;for(const R of e.hand.values()){const T=t.getJointPose(R,n),M=this._getHandJoint(p,R);T!==null&&(M.matrix.fromArray(T.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=T.radius),M.visible=T!==null}const y=p.joints["index-finger-tip"],x=p.joints["thumb-tip"],b=y.position.distanceTo(x.position),_=.02,E=.005;p.inputState.pinching&&b>_+E?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&b<=_-E&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(d.matrix.fromArray(r.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,r.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(r.linearVelocity)):d.hasLinearVelocity=!1,r.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(r.angularVelocity)):d.hasAngularVelocity=!1));h!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(SU)))}return h!==null&&(h.visible=s!==null),d!==null&&(d.visible=r!==null),p!==null&&(p.visible=c!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new sc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class xb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Et(e),this.density=t}clone(){return new xb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class bb{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Et(e),this.near=t,this.far=n}clone(){return new bb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Jg extends Pn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ur,this.environmentIntensity=1,this.environmentRotation=new ur,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Kg{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Tg,this.updateRanges=[],this.version=0,this.uuid=cr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ba=new K;class Au{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ba.fromBufferAttribute(this,t),ba.applyMatrix4(e),this.setXYZ(t,ba.x,ba.y,ba.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ba.fromBufferAttribute(this,t),ba.applyNormalMatrix(e),this.setXYZ(t,ba.x,ba.y,ba.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ba.fromBufferAttribute(this,t),ba.transformDirection(e),this.setXYZ(t,ba.x,ba.y,ba.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Sa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=bn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Sa(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Sa(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Sa(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Sa(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=bn(t,this.array),n=bn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=bn(t,this.array),n=bn(n,this.array),s=bn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=bn(t,this.array),n=bn(n,this.array),s=bn(s,this.array),r=bn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new jn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Au(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class yS extends ms{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Td;const jm=new K,Cd=new K,wd=new K,Rd=new Ye,km=new Ye,L2=new Jt,iy=new K,Vm=new K,sy=new K,tT=new Ye,cA=new Ye,nT=new Ye;class I2 extends Pn{constructor(e=new yS){if(super(),this.isSprite=!0,this.type="Sprite",Td===void 0){Td=new pn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Kg(t,5);Td.setIndex([0,1,2,0,2,3]),Td.setAttribute("position",new Au(n,3,0,!1)),Td.setAttribute("uv",new Au(n,2,3,!1))}this.geometry=Td,this.material=e,this.center=new Ye(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Cd.setFromMatrixScale(this.matrixWorld),L2.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),wd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Cd.multiplyScalar(-wd.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const c=this.center;ay(iy.set(-.5,-.5,0),wd,c,Cd,s,r),ay(Vm.set(.5,-.5,0),wd,c,Cd,s,r),ay(sy.set(.5,.5,0),wd,c,Cd,s,r),tT.set(0,0),cA.set(1,0),nT.set(1,1);let h=e.ray.intersectTriangle(iy,Vm,sy,!1,jm);if(h===null&&(ay(Vm.set(-.5,.5,0),wd,c,Cd,s,r),cA.set(0,1),h=e.ray.intersectTriangle(iy,sy,Vm,!1,jm),h===null))return;const d=e.ray.origin.distanceTo(jm);d<e.near||d>e.far||t.push({distance:d,point:jm.clone(),uv:Ga.getInterpolation(jm,iy,Vm,sy,tT,cA,nT,new Ye),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function ay(i,e,t,n,s,r){Rd.subVectors(i,t).addScalar(.5).multiply(n),s!==void 0?(km.x=r*Rd.x-s*Rd.y,km.y=s*Rd.x+r*Rd.y):km.copy(Rd),i.copy(e),i.x+=km.x,i.y+=km.y,i.applyMatrix4(L2)}const ry=new K,iT=new K;class P2 extends Pn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,s=t.length;n<s;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const s=t.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,s;for(n=1,s=t.length;n<s;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){ry.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(ry);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){ry.setFromMatrixPosition(e.matrixWorld),iT.setFromMatrixPosition(this.matrixWorld);const n=ry.distanceTo(iT)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let c=t[s].distance;if(t[s].object.visible&&(c-=c*t[s].hysteresis),n>=c)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const c=n[s];t.object.levels.push({object:c.object.uuid,distance:c.distance,hysteresis:c.hysteresis})}return t}}const sT=new K,aT=new Gn,rT=new Gn,MU=new K,oT=new Jt,oy=new K,uA=new Rs,lT=new Jt,hA=new lf;class xS extends Bi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=x1,this.bindMatrix=new Jt,this.bindMatrixInverse=new Jt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ks),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,oy),this.boundingBox.expandByPoint(oy)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Rs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,oy),this.boundingSphere.expandByPoint(oy)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),uA.copy(this.boundingSphere),uA.applyMatrix4(s),e.ray.intersectsSphere(uA)!==!1&&(lT.copy(s).invert(),hA.copy(e.ray).applyMatrix4(lT),!(this.boundingBox!==null&&hA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,hA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Gn,t=this.geometry.attributes.skinWeight;for(let n=0,s=t.count;n<s;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===x1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===f2?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,s=this.geometry;aT.fromBufferAttribute(s.attributes.skinIndex,e),rT.fromBufferAttribute(s.attributes.skinWeight,e),sT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const c=rT.getComponent(r);if(c!==0){const h=aT.getComponent(r);oT.multiplyMatrices(n.bones[h].matrixWorld,n.boneInverses[h]),t.addScaledVector(MU.copy(sT).applyMatrix4(oT),c)}}return t.applyMatrix4(this.bindMatrixInverse)}}class _b extends Pn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class So extends ti{constructor(e=null,t=1,n=1,s,r,c,h,d,p=Cs,y=Cs,x,b){super(null,c,h,d,p,y,s,r,x,b),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const cT=new Jt,EU=new Jt;class Zg{constructor(e=[],t=[]){this.uuid=cr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new Jt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Jt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,c=e.length;r<c;r++){const h=e[r]?e[r].matrixWorld:EU;cT.multiplyMatrices(h,t[r]),cT.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Zg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new So(t,e,e,Zi,Pi);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const r=e.bones[n];let c=t[r];c===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),c=new _b),this.bones.push(c),this.boneInverses.push(new Jt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const c=t[s];e.bones.push(c.uuid);const h=n[s];e.boneInverses.push(h.toArray())}return e}}class $h extends jn{constructor(e,t,n,s=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Bd=new Jt,uT=new Jt,ly=[],hT=new ks,TU=new Jt,Xm=new Bi,Ym=new Rs;class bS extends Bi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new $h(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,TU)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ks),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Bd),hT.copy(e.boundingBox).applyMatrix4(Bd),this.boundingBox.union(hT)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Rs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Bd),Ym.copy(e.boundingSphere).applyMatrix4(Bd),this.boundingSphere.union(Ym)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,c=e*r+1;for(let h=0;h<n.length;h++)n[h]=s[c+h]}raycast(e,t){const n=this.matrixWorld,s=this.count;if(Xm.geometry=this.geometry,Xm.material=this.material,Xm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ym.copy(this.boundingSphere),Ym.applyMatrix4(n),e.ray.intersectsSphere(Ym)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Bd),uT.multiplyMatrices(n,Bd),Xm.matrixWorld=uT,Xm.raycast(e,ly);for(let c=0,h=ly.length;c<h;c++){const d=ly[c];d.instanceId=r,d.object=this,t.push(d)}ly.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new $h(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new So(new Float32Array(s*this.count),s,this.count,Yg,Pi));const r=this.morphTexture.source.data.data;let c=0;for(let p=0;p<n.length;p++)c+=n[p];const h=this.geometry.morphTargetsRelative?1:1-c,d=s*e;r[d]=h,r.set(n,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const fA=new K,CU=new K,wU=new gn;class tc{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=fA.subVectors(n,t).cross(CU.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(fA),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||wU.getNormalMatrix(e),s=this.coplanarPoint(fA).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _h=new Rs,RU=new Ye(.5,.5),cy=new K;class xp{constructor(e=new tc,t=new tc,n=new tc,s=new tc,r=new tc,c=new tc){this.planes=[e,t,n,s,r,c]}set(e,t,n,s,r,c){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(n),h[3].copy(s),h[4].copy(r),h[5].copy(c),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=lr,n=!1){const s=this.planes,r=e.elements,c=r[0],h=r[1],d=r[2],p=r[3],y=r[4],x=r[5],b=r[6],_=r[7],E=r[8],R=r[9],T=r[10],M=r[11],B=r[12],N=r[13],D=r[14],L=r[15];if(s[0].setComponents(p-c,_-y,M-E,L-B).normalize(),s[1].setComponents(p+c,_+y,M+E,L+B).normalize(),s[2].setComponents(p+h,_+x,M+R,L+N).normalize(),s[3].setComponents(p-h,_-x,M-R,L-N).normalize(),n)s[4].setComponents(d,b,T,D).normalize(),s[5].setComponents(p-d,_-b,M-T,L-D).normalize();else if(s[4].setComponents(p-d,_-b,M-T,L-D).normalize(),t===lr)s[5].setComponents(p+d,_+b,M+T,L+D).normalize();else if(t===lp)s[5].setComponents(d,b,T,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_h.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),_h.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_h)}intersectsSprite(e){_h.center.set(0,0,0);const t=RU.distanceTo(e.center);return _h.radius=.7071067811865476+t,_h.applyMatrix4(e.matrixWorld),this.intersectsSphere(_h)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(cy.x=s.normal.x>0?e.max.x:e.min.x,cy.y=s.normal.y>0?e.max.y:e.min.y,cy.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(cy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const ll=new Jt,cl=new xp;class Ab{constructor(){this.coordinateSystem=lr}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(ll.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),cl.setFromProjectionMatrix(ll,s.coordinateSystem,s.reversedDepth),cl.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(ll.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),cl.setFromProjectionMatrix(ll,s.coordinateSystem,s.reversedDepth),cl.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(ll.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),cl.setFromProjectionMatrix(ll,s.coordinateSystem,s.reversedDepth),cl.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(ll.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),cl.setFromProjectionMatrix(ll,s.coordinateSystem,s.reversedDepth),cl.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(ll.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),cl.setFromProjectionMatrix(ll,s.coordinateSystem,s.reversedDepth),cl.containsPoint(e))return!0}return!1}clone(){return new Ab}}function dA(i,e){return i-e}function BU(i,e){return i.z-e.z}function NU(i,e){return e.z-i.z}class DU{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,s){const r=this.pool,c=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const h=r[this.index];c.push(h),this.index++,h.start=e,h.count=t,h.z=n,h.index=s}reset(){this.list.length=0,this.index=0}}const Ha=new Jt,UU=new Et(1,1,1),fT=new xp,OU=new Ab,uy=new ks,Ah=new Rs,qm=new K,dT=new K,LU=new K,pA=new DU,ia=new Bi,hy=[];function IU(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let c=0;c<n;c++)e.setComponent(r+t,c,i.getComponent(r,c))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function Sh(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class F2 extends Bi{constructor(e,t,n=t*2,s){super(new pn,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new So(t,e,e,Zi,Pi);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new So(t,e,e,qg,xl);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new So(t,e,e,Zi,Pi);n.colorSpace=In.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const c=e.getAttribute(r),{array:h,itemSize:d,normalized:p}=c,y=new h.constructor(n*d),x=new jn(y,d,p);t.setAttribute(r,x)}if(e.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new jn(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=e.getAttribute(n),r=t.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ks);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Ha),this.getBoundingBoxAt(r,uy).applyMatrix4(Ha),e.union(uy)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Rs);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Ha),this.getBoundingSphereAt(r,Ah).applyMatrix4(Ha),e.union(Ah)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(dA),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;Ha.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const c=this._colorsTexture;return c&&(UU.toArray(c.image.data,s*4),c.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const c=e.getIndex();if(c!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?c.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(dA),d=this._availableGeometryIds.shift(),r[d]=s):(d=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(d,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),c=t.getIndex(),h=this._geometryInfo[e];if(s&&c.count>h.reservedIndexCount||t.attributes.position.count>h.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=h.vertexStart,p=h.reservedVertexCount;h.vertexCount=t.getAttribute("position").count;for(const y in n.attributes){const x=t.getAttribute(y),b=n.getAttribute(y);IU(x,b,d);const _=x.itemSize;for(let E=x.count,R=p;E<R;E++){const T=d+E;for(let M=0;M<_;M++)b.setComponent(T,M,0)}b.needsUpdate=!0,b.addUpdateRange(d*_,p*_)}if(s){const y=h.indexStart,x=h.reservedIndexCount;h.indexCount=t.getIndex().count;for(let b=0;b<c.count;b++)r.setX(y+b,d+c.getX(b));for(let b=c.count,_=x;b<_;b++)r.setX(y+b,d);r.needsUpdate=!0,r.addUpdateRange(y,h.reservedIndexCount)}return h.start=s?h.indexStart:h.vertexStart,h.count=s?h.indexCount:h.vertexCount,h.boundingBox=null,t.boundingBox!==null&&(h.boundingBox=t.boundingBox.clone()),h.boundingSphere=null,t.boundingSphere!==null&&(h.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,s=n.map((c,h)=>h).sort((c,h)=>n[c].vertexStart-n[h].vertexStart),r=this.geometry;for(let c=0,h=n.length;c<h;c++){const d=s[c],p=n[d];if(p.active!==!1){if(r.index!==null){if(p.indexStart!==t){const{indexStart:y,vertexStart:x,reservedIndexCount:b}=p,_=r.index,E=_.array,R=e-x;for(let T=y;T<y+b;T++)E[T]=E[T]+R;_.array.copyWithin(t,y,y+b),_.addUpdateRange(t,b),p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:y,reservedVertexCount:x}=p,b=r.attributes;for(const _ in b){const E=b[_],{array:R,itemSize:T}=E;R.copyWithin(e*T,y*T,(y+x)*T),E.addUpdateRange(e*T,x*T)}p.vertexStart=e}e+=p.reservedVertexCount,p.start=r.index?p.indexStart:p.vertexStart,this._nextIndexStart=r.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const r=new ks,c=n.index,h=n.attributes.position;for(let d=s.start,p=s.start+s.count;d<p;d++){let y=d;c&&(y=c.getX(y)),r.expandByPoint(qm.fromBufferAttribute(h,y))}s.boundingBox=r}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const r=new Rs;this.getBoundingBoxAt(e,uy),uy.getCenter(r.center);const c=n.index,h=n.attributes.position;let d=0;for(let p=s.start,y=s.start+s.count;p<y;p++){let x=p;c&&(x=c.getX(x)),qm.fromBufferAttribute(h,x),d=Math.max(d,r.center.distanceToSquared(qm))}r.radius=Math.sqrt(d),s.boundingSphere=r}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(dA);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),r=new Int32Array(e);Sh(this._multiDrawCounts,s),Sh(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=e;const c=this._indirectTexture,h=this._matricesTexture,d=this._colorsTexture;c.dispose(),this._initIndirectTexture(),Sh(c.image.data,this._indirectTexture.image.data),h.dispose(),this._initMatricesTexture(),Sh(h.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),Sh(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(h=>h.active);if(Math.max(...n.map(h=>h.vertexStart+h.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new pn,this._initializeGeometry(r));const c=this.geometry;r.index&&Sh(r.index.array,c.index.array);for(const h in r.attributes)Sh(r.attributes[h].array,c.attributes[h].array)}raycast(e,t){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,c=this.geometry;ia.material=this.material,ia.geometry.index=c.index,ia.geometry.attributes=c.attributes,ia.geometry.boundingBox===null&&(ia.geometry.boundingBox=new ks),ia.geometry.boundingSphere===null&&(ia.geometry.boundingSphere=new Rs);for(let h=0,d=n.length;h<d;h++){if(!n[h].visible||!n[h].active)continue;const p=n[h].geometryIndex,y=s[p];ia.geometry.setDrawRange(y.start,y.count),this.getMatrixAt(h,ia.matrixWorld).premultiply(r),this.getBoundingBoxAt(p,ia.geometry.boundingBox),this.getBoundingSphereAt(p,ia.geometry.boundingSphere),ia.raycast(e,hy);for(let x=0,b=hy.length;x<b;x++){const _=hy[x];_.object=this,_.batchId=h,t.push(_)}hy.length=0}ia.material=null,ia.geometry.index=null,ia.geometry.attributes={},ia.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const c=s.getIndex(),h=c===null?1:c.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,y=this._multiDrawCounts,x=this._geometryInfo,b=this.perObjectFrustumCulled,_=this._indirectTexture,E=_.image.data,R=n.isArrayCamera?OU:fT;b&&!n.isArrayCamera&&(Ha.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),fT.setFromProjectionMatrix(Ha,n.coordinateSystem,n.reversedDepth));let T=0;if(this.sortObjects){Ha.copy(this.matrixWorld).invert(),qm.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ha),dT.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ha);for(let N=0,D=d.length;N<D;N++)if(d[N].visible&&d[N].active){const L=d[N].geometryIndex;this.getMatrixAt(N,Ha),this.getBoundingSphereAt(L,Ah).applyMatrix4(Ha);let I=!1;if(b&&(I=!R.intersectsSphere(Ah,n)),!I){const j=x[L],k=LU.subVectors(Ah.center,qm).dot(dT);pA.push(j.start,j.count,k,N)}}const M=pA.list,B=this.customSort;B===null?M.sort(r.transparent?NU:BU):B.call(this,M,n);for(let N=0,D=M.length;N<D;N++){const L=M[N];p[T]=L.start*h,y[T]=L.count,E[T]=L.index,T++}pA.reset()}else for(let M=0,B=d.length;M<B;M++)if(d[M].visible&&d[M].active){const N=d[M].geometryIndex;let D=!1;if(b&&(this.getMatrixAt(M,Ha),this.getBoundingSphereAt(N,Ah).applyMatrix4(Ha),D=!R.intersectsSphere(Ah,n)),!D){const L=x[N];p[T]=L.start*h,y[T]=L.count,E[T]=M,T++}}_.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,n,s,r,c){this.onBeforeRender(e,null,s,r,c)}}class sa extends ms{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Hx=new K,zx=new K,pT=new Jt,Wm=new lf,fy=new Rs,mA=new K,mT=new K;class oc extends Pn{constructor(e=new pn,t=new sa){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let s=1,r=t.count;s<r;s++)Hx.fromBufferAttribute(t,s-1),zx.fromBufferAttribute(t,s),n[s]=n[s-1],n[s]+=Hx.distanceTo(zx);e.setAttribute("lineDistance",new It(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,c=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),fy.copy(n.boundingSphere),fy.applyMatrix4(s),fy.radius+=r,e.ray.intersectsSphere(fy)===!1)return;pT.copy(s).invert(),Wm.copy(e.ray).applyMatrix4(pT);const h=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,p=this.isLineSegments?2:1,y=n.index,b=n.attributes.position;if(y!==null){const _=Math.max(0,c.start),E=Math.min(y.count,c.start+c.count);for(let R=_,T=E-1;R<T;R+=p){const M=y.getX(R),B=y.getX(R+1),N=dy(this,e,Wm,d,M,B,R);N&&t.push(N)}if(this.isLineLoop){const R=y.getX(E-1),T=y.getX(_),M=dy(this,e,Wm,d,R,T,E-1);M&&t.push(M)}}else{const _=Math.max(0,c.start),E=Math.min(b.count,c.start+c.count);for(let R=_,T=E-1;R<T;R+=p){const M=dy(this,e,Wm,d,R,R+1,R);M&&t.push(M)}if(this.isLineLoop){const R=dy(this,e,Wm,d,E-1,_,E-1);R&&t.push(R)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,c=s.length;r<c;r++){const h=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=r}}}}}function dy(i,e,t,n,s,r,c){const h=i.geometry.attributes.position;if(Hx.fromBufferAttribute(h,s),zx.fromBufferAttribute(h,r),t.distanceSqToSegment(Hx,zx,mA,mT)>n)return;mA.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(mA);if(!(p<e.near||p>e.far))return{distance:p,point:mT.clone().applyMatrix4(i.matrixWorld),index:c,face:null,faceIndex:null,barycoord:null,object:i}}const gT=new K,vT=new K;class To extends oc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let s=0,r=t.count;s<r;s+=2)gT.fromBufferAttribute(t,s),vT.fromBufferAttribute(t,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+gT.distanceTo(vT);e.setAttribute("lineDistance",new It(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class _S extends oc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Sb extends ms{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const yT=new Jt,S1=new lf,py=new Rs,my=new K;class AS extends Pn{constructor(e=new pn,t=new Sb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,c=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),py.copy(n.boundingSphere),py.applyMatrix4(s),py.radius+=r,e.ray.intersectsSphere(py)===!1)return;yT.copy(s).invert(),S1.copy(e.ray).applyMatrix4(yT);const h=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,p=n.index,x=n.attributes.position;if(p!==null){const b=Math.max(0,c.start),_=Math.min(p.count,c.start+c.count);for(let E=b,R=_;E<R;E++){const T=p.getX(E);my.fromBufferAttribute(x,T),xT(my,T,d,s,e,t,this)}}else{const b=Math.max(0,c.start),_=Math.min(x.count,c.start+c.count);for(let E=b,R=_;E<R;E++)my.fromBufferAttribute(x,E),xT(my,E,d,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,c=s.length;r<c;r++){const h=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=r}}}}}function xT(i,e,t,n,s,r,c){const h=S1.distanceSqToPoint(i);if(h<t){const d=new K;S1.closestPointToPoint(i,d),d.applyMatrix4(n);const p=s.ray.origin.distanceTo(d);if(p<s.near||p>s.far)return;r.push({distance:p,distanceToRay:Math.sqrt(h),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:c})}}class H2 extends ti{constructor(e,t,n,s,r=Kn,c=Kn,h,d,p){super(e,t,n,s,r,c,h,d,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const y=this;function x(){y.needsUpdate=!0,y._requestVideoFrameCallbackId=e.requestVideoFrameCallback(x)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(x))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class PU extends H2{constructor(e,t,n,s,r,c,h,d){super({},e,t,n,s,r,c,h,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class FU extends ti{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Cs,this.minFilter=Cs,this.generateMipmaps=!1,this.needsUpdate=!0}}class Mb extends ti{constructor(e,t,n,s,r,c,h,d,p,y,x,b){super(null,c,h,d,p,y,s,r,x,b),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class HU extends Mb{constructor(e,t,n,s,r,c){super(e,t,n,r,c),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Ki,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class zU extends Mb{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,yl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class GU extends ti{constructor(e,t,n,s,r,c,h,d,p){super(e,t,n,s,r,c,h,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class SS extends ti{constructor(e,t,n=xl,s,r,c,h=Cs,d=Cs,p,y=sp,x=1){if(y!==sp&&y!==ap)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const b={width:e,height:t,depth:x};super(b,s,r,c,h,d,y,n,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new du(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class MS extends ti{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Eb extends pn{constructor(e=1,t=1,n=4,s=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:s,heightSegments:r},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),r=Math.max(1,Math.floor(r));const c=[],h=[],d=[],p=[],y=t/2,x=Math.PI/2*e,b=t,_=2*x+b,E=n*2+r,R=s+1,T=new K,M=new K;for(let B=0;B<=E;B++){let N=0,D=0,L=0,I=0;if(B<=n){const O=B/n,P=O*Math.PI/2;D=-y-e*Math.cos(P),L=e*Math.sin(P),I=-e*Math.cos(P),N=O*x}else if(B<=n+r){const O=(B-n)/r;D=-y+O*t,L=e,I=0,N=x+O*b}else{const O=(B-n-r)/n,P=O*Math.PI/2;D=y+e*Math.sin(P),L=e*Math.cos(P),I=e*Math.sin(P),N=x+b+O*x}const j=Math.max(0,Math.min(1,N/_));let k=0;B===0?k=.5/s:B===E&&(k=-.5/s);for(let O=0;O<=s;O++){const P=O/s,Y=P*Math.PI*2,ie=Math.sin(Y),re=Math.cos(Y);M.x=-L*re,M.y=D,M.z=L*ie,h.push(M.x,M.y,M.z),T.set(-L*re,I,L*ie),T.normalize(),d.push(T.x,T.y,T.z),p.push(P+k,j)}if(B>0){const O=(B-1)*R;for(let P=0;P<s;P++){const Y=O+P,ie=O+P+1,re=B*R+P,de=B*R+P+1;c.push(Y,ie,re),c.push(ie,de,re)}}}this.setIndex(c),this.setAttribute("position",new It(h,3)),this.setAttribute("normal",new It(d,3)),this.setAttribute("uv",new It(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eb(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Tb extends pn{constructor(e=1,t=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:s},t=Math.max(3,t);const r=[],c=[],h=[],d=[],p=new K,y=new Ye;c.push(0,0,0),h.push(0,0,1),d.push(.5,.5);for(let x=0,b=3;x<=t;x++,b+=3){const _=n+x/t*s;p.x=e*Math.cos(_),p.y=e*Math.sin(_),c.push(p.x,p.y,p.z),h.push(0,0,1),y.x=(c[b]/e+1)/2,y.y=(c[b+1]/e+1)/2,d.push(y.x,y.y)}for(let x=1;x<=t;x++)r.push(x,x+1,0);this.setIndex(r),this.setAttribute("position",new It(c,3)),this.setAttribute("normal",new It(h,3)),this.setAttribute("uv",new It(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Qg extends pn{constructor(e=1,t=1,n=1,s=32,r=1,c=!1,h=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:s,heightSegments:r,openEnded:c,thetaStart:h,thetaLength:d};const p=this;s=Math.floor(s),r=Math.floor(r);const y=[],x=[],b=[],_=[];let E=0;const R=[],T=n/2;let M=0;B(),c===!1&&(e>0&&N(!0),t>0&&N(!1)),this.setIndex(y),this.setAttribute("position",new It(x,3)),this.setAttribute("normal",new It(b,3)),this.setAttribute("uv",new It(_,2));function B(){const D=new K,L=new K;let I=0;const j=(t-e)/n;for(let k=0;k<=r;k++){const O=[],P=k/r,Y=P*(t-e)+e;for(let ie=0;ie<=s;ie++){const re=ie/s,de=re*d+h,pe=Math.sin(de),H=Math.cos(de);L.x=Y*pe,L.y=-P*n+T,L.z=Y*H,x.push(L.x,L.y,L.z),D.set(pe,j,H).normalize(),b.push(D.x,D.y,D.z),_.push(re,1-P),O.push(E++)}R.push(O)}for(let k=0;k<s;k++)for(let O=0;O<r;O++){const P=R[O][k],Y=R[O+1][k],ie=R[O+1][k+1],re=R[O][k+1];(e>0||O!==0)&&(y.push(P,Y,re),I+=3),(t>0||O!==r-1)&&(y.push(Y,ie,re),I+=3)}p.addGroup(M,I,0),M+=I}function N(D){const L=E,I=new Ye,j=new K;let k=0;const O=D===!0?e:t,P=D===!0?1:-1;for(let ie=1;ie<=s;ie++)x.push(0,T*P,0),b.push(0,P,0),_.push(.5,.5),E++;const Y=E;for(let ie=0;ie<=s;ie++){const de=ie/s*d+h,pe=Math.cos(de),H=Math.sin(de);j.x=O*H,j.y=T*P,j.z=O*pe,x.push(j.x,j.y,j.z),b.push(0,P,0),I.x=pe*.5+.5,I.y=H*.5*P+.5,_.push(I.x,I.y),E++}for(let ie=0;ie<s;ie++){const re=L+ie,de=Y+ie;D===!0?y.push(de,de+1,re):y.push(de+1,de,re),k+=3}p.addGroup(M,k,D===!0?1:2),M+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $g extends Qg{constructor(e=1,t=1,n=32,s=1,r=!1,c=0,h=Math.PI*2){super(0,e,t,n,s,r,c,h),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:c,thetaLength:h}}static fromJSON(e){return new $g(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Mu extends pn{constructor(e=[],t=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:s};const r=[],c=[];h(s),p(n),y(),this.setAttribute("position",new It(r,3)),this.setAttribute("normal",new It(r.slice(),3)),this.setAttribute("uv",new It(c,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function h(B){const N=new K,D=new K,L=new K;for(let I=0;I<t.length;I+=3)_(t[I+0],N),_(t[I+1],D),_(t[I+2],L),d(N,D,L,B)}function d(B,N,D,L){const I=L+1,j=[];for(let k=0;k<=I;k++){j[k]=[];const O=B.clone().lerp(D,k/I),P=N.clone().lerp(D,k/I),Y=I-k;for(let ie=0;ie<=Y;ie++)ie===0&&k===I?j[k][ie]=O:j[k][ie]=O.clone().lerp(P,ie/Y)}for(let k=0;k<I;k++)for(let O=0;O<2*(I-k)-1;O++){const P=Math.floor(O/2);O%2===0?(b(j[k][P+1]),b(j[k+1][P]),b(j[k][P])):(b(j[k][P+1]),b(j[k+1][P+1]),b(j[k+1][P]))}}function p(B){const N=new K;for(let D=0;D<r.length;D+=3)N.x=r[D+0],N.y=r[D+1],N.z=r[D+2],N.normalize().multiplyScalar(B),r[D+0]=N.x,r[D+1]=N.y,r[D+2]=N.z}function y(){const B=new K;for(let N=0;N<r.length;N+=3){B.x=r[N+0],B.y=r[N+1],B.z=r[N+2];const D=T(B)/2/Math.PI+.5,L=M(B)/Math.PI+.5;c.push(D,1-L)}E(),x()}function x(){for(let B=0;B<c.length;B+=6){const N=c[B+0],D=c[B+2],L=c[B+4],I=Math.max(N,D,L),j=Math.min(N,D,L);I>.9&&j<.1&&(N<.2&&(c[B+0]+=1),D<.2&&(c[B+2]+=1),L<.2&&(c[B+4]+=1))}}function b(B){r.push(B.x,B.y,B.z)}function _(B,N){const D=B*3;N.x=e[D+0],N.y=e[D+1],N.z=e[D+2]}function E(){const B=new K,N=new K,D=new K,L=new K,I=new Ye,j=new Ye,k=new Ye;for(let O=0,P=0;O<r.length;O+=9,P+=6){B.set(r[O+0],r[O+1],r[O+2]),N.set(r[O+3],r[O+4],r[O+5]),D.set(r[O+6],r[O+7],r[O+8]),I.set(c[P+0],c[P+1]),j.set(c[P+2],c[P+3]),k.set(c[P+4],c[P+5]),L.copy(B).add(N).add(D).divideScalar(3);const Y=T(L);R(I,P+0,B,Y),R(j,P+2,N,Y),R(k,P+4,D,Y)}}function R(B,N,D,L){L<0&&B.x===1&&(c[N]=B.x-1),D.x===0&&D.z===0&&(c[N]=L/2/Math.PI+.5)}function T(B){return Math.atan2(B.z,-B.x)}function M(B){return Math.atan2(-B.y,Math.sqrt(B.x*B.x+B.z*B.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mu(e.vertices,e.indices,e.radius,e.details)}}class Cb extends Mu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],c=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,c,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Cb(e.radius,e.detail)}}const gy=new K,vy=new K,gA=new K,yy=new Ga;class z2 extends pn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(Kh*t),c=e.getIndex(),h=e.getAttribute("position"),d=c?c.count:h.count,p=[0,0,0],y=["a","b","c"],x=new Array(3),b={},_=[];for(let E=0;E<d;E+=3){c?(p[0]=c.getX(E),p[1]=c.getX(E+1),p[2]=c.getX(E+2)):(p[0]=E,p[1]=E+1,p[2]=E+2);const{a:R,b:T,c:M}=yy;if(R.fromBufferAttribute(h,p[0]),T.fromBufferAttribute(h,p[1]),M.fromBufferAttribute(h,p[2]),yy.getNormal(gA),x[0]=`${Math.round(R.x*s)},${Math.round(R.y*s)},${Math.round(R.z*s)}`,x[1]=`${Math.round(T.x*s)},${Math.round(T.y*s)},${Math.round(T.z*s)}`,x[2]=`${Math.round(M.x*s)},${Math.round(M.y*s)},${Math.round(M.z*s)}`,!(x[0]===x[1]||x[1]===x[2]||x[2]===x[0]))for(let B=0;B<3;B++){const N=(B+1)%3,D=x[B],L=x[N],I=yy[y[B]],j=yy[y[N]],k=`${D}_${L}`,O=`${L}_${D}`;O in b&&b[O]?(gA.dot(b[O].normal)<=r&&(_.push(I.x,I.y,I.z),_.push(j.x,j.y,j.z)),b[O]=null):k in b||(b[k]={index0:p[B],index1:p[N],normal:gA.clone()})}}for(const E in b)if(b[E]){const{index0:R,index1:T}=b[E];gy.fromBufferAttribute(h,R),vy.fromBufferAttribute(h,T),_.push(gy.x,gy.y,gy.z),_.push(vy.x,vy.y,vy.z)}this.setAttribute("position",new It(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Co{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),r=0;t.push(0);for(let c=1;c<=e;c++)n=this.getPoint(c/e),r+=n.distanceTo(s),t.push(r),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let s=0;const r=n.length;let c;t?c=t:c=e*n[r-1];let h=0,d=r-1,p;for(;h<=d;)if(s=Math.floor(h+(d-h)/2),p=n[s]-c,p<0)h=s+1;else if(p>0)d=s-1;else{d=s;break}if(s=d,n[s]===c)return s/(r-1);const y=n[s],b=n[s+1]-y,_=(c-y)/b;return(s+_)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const c=this.getPoint(s),h=this.getPoint(r),d=t||(c.isVector2?new Ye:new K);return d.copy(h).sub(c).normalize(),d}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new K,s=[],r=[],c=[],h=new K,d=new Jt;for(let _=0;_<=e;_++){const E=_/e;s[_]=this.getTangentAt(E,new K)}r[0]=new K,c[0]=new K;let p=Number.MAX_VALUE;const y=Math.abs(s[0].x),x=Math.abs(s[0].y),b=Math.abs(s[0].z);y<=p&&(p=y,n.set(1,0,0)),x<=p&&(p=x,n.set(0,1,0)),b<=p&&n.set(0,0,1),h.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],h),c[0].crossVectors(s[0],r[0]);for(let _=1;_<=e;_++){if(r[_]=r[_-1].clone(),c[_]=c[_-1].clone(),h.crossVectors(s[_-1],s[_]),h.length()>Number.EPSILON){h.normalize();const E=Math.acos(nn(s[_-1].dot(s[_]),-1,1));r[_].applyMatrix4(d.makeRotationAxis(h,E))}c[_].crossVectors(s[_],r[_])}if(t===!0){let _=Math.acos(nn(r[0].dot(r[e]),-1,1));_/=e,s[0].dot(h.crossVectors(r[0],r[e]))>0&&(_=-_);for(let E=1;E<=e;E++)r[E].applyMatrix4(d.makeRotationAxis(s[E],_*E)),c[E].crossVectors(s[E],r[E])}return{tangents:s,normals:r,binormals:c}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class wb extends Co{constructor(e=0,t=0,n=1,s=1,r=0,c=Math.PI*2,h=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=c,this.aClockwise=h,this.aRotation=d}getPoint(e,t=new Ye){const n=t,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const c=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(c?r=0:r=s),this.aClockwise===!0&&!c&&(r===s?r=-s:r=r-s);const h=this.aStartAngle+e*r;let d=this.aX+this.xRadius*Math.cos(h),p=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const y=Math.cos(this.aRotation),x=Math.sin(this.aRotation),b=d-this.aX,_=p-this.aY;d=b*y-_*x+this.aX,p=b*x+_*y+this.aY}return n.set(d,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class G2 extends wb{constructor(e,t,n,s,r,c){super(e,t,n,n,s,r,c),this.isArcCurve=!0,this.type="ArcCurve"}}function ES(){let i=0,e=0,t=0,n=0;function s(r,c,h,d){i=r,e=h,t=-3*r+3*c-2*h-d,n=2*r-2*c+h+d}return{initCatmullRom:function(r,c,h,d,p){s(c,h,p*(h-r),p*(d-c))},initNonuniformCatmullRom:function(r,c,h,d,p,y,x){let b=(c-r)/p-(h-r)/(p+y)+(h-c)/y,_=(h-c)/y-(d-c)/(y+x)+(d-h)/x;b*=y,_*=y,s(c,h,b,_)},calc:function(r){const c=r*r,h=c*r;return i+e*r+t*c+n*h}}}const xy=new K,vA=new ES,yA=new ES,xA=new ES;class j2 extends Co{constructor(e=[],t=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=s}getPoint(e,t=new K){const n=t,s=this.points,r=s.length,c=(r-(this.closed?0:1))*e;let h=Math.floor(c),d=c-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/r)+1)*r:d===0&&h===r-1&&(h=r-2,d=1);let p,y;this.closed||h>0?p=s[(h-1)%r]:(xy.subVectors(s[0],s[1]).add(s[0]),p=xy);const x=s[h%r],b=s[(h+1)%r];if(this.closed||h+2<r?y=s[(h+2)%r]:(xy.subVectors(s[r-1],s[r-2]).add(s[r-1]),y=xy),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let E=Math.pow(p.distanceToSquared(x),_),R=Math.pow(x.distanceToSquared(b),_),T=Math.pow(b.distanceToSquared(y),_);R<1e-4&&(R=1),E<1e-4&&(E=R),T<1e-4&&(T=R),vA.initNonuniformCatmullRom(p.x,x.x,b.x,y.x,E,R,T),yA.initNonuniformCatmullRom(p.y,x.y,b.y,y.y,E,R,T),xA.initNonuniformCatmullRom(p.z,x.z,b.z,y.z,E,R,T)}else this.curveType==="catmullrom"&&(vA.initCatmullRom(p.x,x.x,b.x,y.x,this.tension),yA.initCatmullRom(p.y,x.y,b.y,y.y,this.tension),xA.initCatmullRom(p.z,x.z,b.z,y.z,this.tension));return n.set(vA.calc(d),yA.calc(d),xA.calc(d)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new K().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function bT(i,e,t,n,s){const r=(n-e)*.5,c=(s-t)*.5,h=i*i,d=i*h;return(2*t-2*n+r+c)*d+(-3*t+3*n-2*r-c)*h+r*i+t}function jU(i,e){const t=1-i;return t*t*e}function kU(i,e){return 2*(1-i)*i*e}function VU(i,e){return i*i*e}function mg(i,e,t,n){return jU(i,e)+kU(i,t)+VU(i,n)}function XU(i,e){const t=1-i;return t*t*t*e}function YU(i,e){const t=1-i;return 3*t*t*i*e}function qU(i,e){return 3*(1-i)*i*i*e}function WU(i,e){return i*i*i*e}function gg(i,e,t,n,s){return XU(i,e)+YU(i,t)+qU(i,n)+WU(i,s)}class TS extends Co{constructor(e=new Ye,t=new Ye,n=new Ye,s=new Ye){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new Ye){const n=t,s=this.v0,r=this.v1,c=this.v2,h=this.v3;return n.set(gg(e,s.x,r.x,c.x,h.x),gg(e,s.y,r.y,c.y,h.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class k2 extends Co{constructor(e=new K,t=new K,n=new K,s=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new K){const n=t,s=this.v0,r=this.v1,c=this.v2,h=this.v3;return n.set(gg(e,s.x,r.x,c.x,h.x),gg(e,s.y,r.y,c.y,h.y),gg(e,s.z,r.z,c.z,h.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class CS extends Co{constructor(e=new Ye,t=new Ye){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ye){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ye){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class V2 extends Co{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new K){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wS extends Co{constructor(e=new Ye,t=new Ye,n=new Ye){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ye){const n=t,s=this.v0,r=this.v1,c=this.v2;return n.set(mg(e,s.x,r.x,c.x),mg(e,s.y,r.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RS extends Co{constructor(e=new K,t=new K,n=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new K){const n=t,s=this.v0,r=this.v1,c=this.v2;return n.set(mg(e,s.x,r.x,c.x),mg(e,s.y,r.y,c.y),mg(e,s.z,r.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BS extends Co{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ye){const n=t,s=this.points,r=(s.length-1)*e,c=Math.floor(r),h=r-c,d=s[c===0?c:c-1],p=s[c],y=s[c>s.length-2?s.length-1:c+1],x=s[c>s.length-3?s.length-1:c+2];return n.set(bT(h,d.x,p.x,y.x,x.x),bT(h,d.y,p.y,y.y,x.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new Ye().fromArray(s))}return this}}var Gx=Object.freeze({__proto__:null,ArcCurve:G2,CatmullRomCurve3:j2,CubicBezierCurve:TS,CubicBezierCurve3:k2,EllipseCurve:wb,LineCurve:CS,LineCurve3:V2,QuadraticBezierCurve:wS,QuadraticBezierCurve3:RS,SplineCurve:BS});class X2 extends Co{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Gx[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const c=s[r]-n,h=this.curves[r],d=h.getLength(),p=d===0?0:1-c/d;return h.getPointAt(p,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,s=this.curves.length;n<s;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const c=r[s],h=c.isEllipseCurve?e*2:c.isLineCurve||c.isLineCurve3?1:c.isSplineCurve?e*c.points.length:e,d=c.getPoints(h);for(let p=0;p<d.length;p++){const y=d[p];n&&n.equals(y)||(t.push(y),n=y)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(new Gx[s.type]().fromJSON(s))}return this}}class jx extends X2{constructor(e){super(),this.type="Path",this.currentPoint=new Ye,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new CS(this.currentPoint.clone(),new Ye(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,s){const r=new wS(this.currentPoint.clone(),new Ye(e,t),new Ye(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(e,t,n,s,r,c){const h=new TS(this.currentPoint.clone(),new Ye(e,t),new Ye(n,s),new Ye(r,c));return this.curves.push(h),this.currentPoint.set(r,c),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new BS(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,s,r,c){const h=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+h,t+d,n,s,r,c),this}absarc(e,t,n,s,r,c){return this.absellipse(e,t,n,n,s,r,c),this}ellipse(e,t,n,s,r,c,h,d){const p=this.currentPoint.x,y=this.currentPoint.y;return this.absellipse(e+p,t+y,n,s,r,c,h,d),this}absellipse(e,t,n,s,r,c,h,d){const p=new wb(e,t,n,s,r,c,h,d);if(this.curves.length>0){const x=p.getPoint(0);x.equals(this.currentPoint)||this.lineTo(x.x,x.y)}this.curves.push(p);const y=p.getPoint(1);return this.currentPoint.copy(y),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Zh extends jx{constructor(e){super(e),this.uuid=cr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,s=this.holes.length;n<s;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(new jx().fromJSON(s))}return this}}function JU(i,e,t=2){const n=e&&e.length,s=n?e[0]*t:i.length;let r=Y2(i,0,s,t,!0);const c=[];if(!r||r.next===r.prev)return c;let h,d,p;if(n&&(r=eO(i,e,r,t)),i.length>80*t){h=1/0,d=1/0;let y=-1/0,x=-1/0;for(let b=t;b<s;b+=t){const _=i[b],E=i[b+1];_<h&&(h=_),E<d&&(d=E),_>y&&(y=_),E>x&&(x=E)}p=Math.max(y-h,x-d),p=p!==0?32767/p:0}return Rg(r,c,t,h,d,p,0),c}function Y2(i,e,t,n,s){let r;if(s===hO(i,e,t,n)>0)for(let c=e;c<t;c+=n)r=_T(c/n|0,i[c],i[c+1],r);else for(let c=t-n;c>=e;c-=n)r=_T(c/n|0,i[c],i[c+1],r);return r&&fp(r,r.next)&&(Ng(r),r=r.next),r}function ef(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(fp(t,t.next)||Ii(t.prev,t,t.next)===0)){if(Ng(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Rg(i,e,t,n,s,r,c){if(!i)return;!c&&r&&aO(i,n,s,r);let h=i;for(;i.prev!==i.next;){const d=i.prev,p=i.next;if(r?ZU(i,n,s,r):KU(i)){e.push(d.i,i.i,p.i),Ng(i),i=p.next,h=p.next;continue}if(i=p,i===h){c?c===1?(i=QU(ef(i),e),Rg(i,e,t,n,s,r,2)):c===2&&$U(i,e,t,n,s,r):Rg(ef(i),e,t,n,s,r,1);break}}}function KU(i){const e=i.prev,t=i,n=i.next;if(Ii(e,t,n)>=0)return!1;const s=e.x,r=t.x,c=n.x,h=e.y,d=t.y,p=n.y,y=Math.min(s,r,c),x=Math.min(h,d,p),b=Math.max(s,r,c),_=Math.max(h,d,p);let E=n.next;for(;E!==e;){if(E.x>=y&&E.x<=b&&E.y>=x&&E.y<=_&&ag(s,h,r,d,c,p,E.x,E.y)&&Ii(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function ZU(i,e,t,n){const s=i.prev,r=i,c=i.next;if(Ii(s,r,c)>=0)return!1;const h=s.x,d=r.x,p=c.x,y=s.y,x=r.y,b=c.y,_=Math.min(h,d,p),E=Math.min(y,x,b),R=Math.max(h,d,p),T=Math.max(y,x,b),M=M1(_,E,e,t,n),B=M1(R,T,e,t,n);let N=i.prevZ,D=i.nextZ;for(;N&&N.z>=M&&D&&D.z<=B;){if(N.x>=_&&N.x<=R&&N.y>=E&&N.y<=T&&N!==s&&N!==c&&ag(h,y,d,x,p,b,N.x,N.y)&&Ii(N.prev,N,N.next)>=0||(N=N.prevZ,D.x>=_&&D.x<=R&&D.y>=E&&D.y<=T&&D!==s&&D!==c&&ag(h,y,d,x,p,b,D.x,D.y)&&Ii(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;N&&N.z>=M;){if(N.x>=_&&N.x<=R&&N.y>=E&&N.y<=T&&N!==s&&N!==c&&ag(h,y,d,x,p,b,N.x,N.y)&&Ii(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;D&&D.z<=B;){if(D.x>=_&&D.x<=R&&D.y>=E&&D.y<=T&&D!==s&&D!==c&&ag(h,y,d,x,p,b,D.x,D.y)&&Ii(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function QU(i,e){let t=i;do{const n=t.prev,s=t.next.next;!fp(n,s)&&W2(n,t,t.next,s)&&Bg(n,s)&&Bg(s,n)&&(e.push(n.i,t.i,s.i),Ng(t),Ng(t.next),t=i=s),t=t.next}while(t!==i);return ef(t)}function $U(i,e,t,n,s,r){let c=i;do{let h=c.next.next;for(;h!==c.prev;){if(c.i!==h.i&&lO(c,h)){let d=J2(c,h);c=ef(c,c.next),d=ef(d,d.next),Rg(c,e,t,n,s,r,0),Rg(d,e,t,n,s,r,0);return}h=h.next}c=c.next}while(c!==i)}function eO(i,e,t,n){const s=[];for(let r=0,c=e.length;r<c;r++){const h=e[r]*n,d=r<c-1?e[r+1]*n:i.length,p=Y2(i,h,d,n,!1);p===p.next&&(p.steiner=!0),s.push(oO(p))}s.sort(tO);for(let r=0;r<s.length;r++)t=nO(s[r],t);return t}function tO(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=n-s}return t}function nO(i,e){const t=iO(i,e);if(!t)return e;const n=J2(t,i);return ef(n,n.next),ef(t,t.next)}function iO(i,e){let t=e;const n=i.x,s=i.y;let r=-1/0,c;if(fp(i,t))return t;do{if(fp(i,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const x=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(x<=n&&x>r&&(r=x,c=t.x<t.next.x?t:t.next,x===n))return c}t=t.next}while(t!==e);if(!c)return null;const h=c,d=c.x,p=c.y;let y=1/0;t=c;do{if(n>=t.x&&t.x>=d&&n!==t.x&&q2(s<p?n:r,s,d,p,s<p?r:n,s,t.x,t.y)){const x=Math.abs(s-t.y)/(n-t.x);Bg(t,i)&&(x<y||x===y&&(t.x>c.x||t.x===c.x&&sO(c,t)))&&(c=t,y=x)}t=t.next}while(t!==h);return c}function sO(i,e){return Ii(i.prev,i,e.prev)<0&&Ii(e.next,i,i.next)<0}function aO(i,e,t,n){let s=i;do s.z===0&&(s.z=M1(s.x,s.y,e,t,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,rO(s)}function rO(i){let e,t=1;do{let n=i,s;i=null;let r=null;for(e=0;n;){e++;let c=n,h=0;for(let p=0;p<t&&(h++,c=c.nextZ,!!c);p++);let d=t;for(;h>0||d>0&&c;)h!==0&&(d===0||!c||n.z<=c.z)?(s=n,n=n.nextZ,h--):(s=c,c=c.nextZ,d--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=c}r.nextZ=null,t*=2}while(e>1);return i}function M1(i,e,t,n,s){return i=(i-t)*s|0,e=(e-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function oO(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function q2(i,e,t,n,s,r,c,h){return(s-c)*(e-h)>=(i-c)*(r-h)&&(i-c)*(n-h)>=(t-c)*(e-h)&&(t-c)*(r-h)>=(s-c)*(n-h)}function ag(i,e,t,n,s,r,c,h){return!(i===c&&e===h)&&q2(i,e,t,n,s,r,c,h)}function lO(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!cO(i,e)&&(Bg(i,e)&&Bg(e,i)&&uO(i,e)&&(Ii(i.prev,i,e.prev)||Ii(i,e.prev,e))||fp(i,e)&&Ii(i.prev,i,i.next)>0&&Ii(e.prev,e,e.next)>0)}function Ii(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function fp(i,e){return i.x===e.x&&i.y===e.y}function W2(i,e,t,n){const s=_y(Ii(i,e,t)),r=_y(Ii(i,e,n)),c=_y(Ii(t,n,i)),h=_y(Ii(t,n,e));return!!(s!==r&&c!==h||s===0&&by(i,t,e)||r===0&&by(i,n,e)||c===0&&by(t,i,n)||h===0&&by(t,e,n))}function by(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function _y(i){return i>0?1:i<0?-1:0}function cO(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&W2(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Bg(i,e){return Ii(i.prev,i,i.next)<0?Ii(i,e,i.next)>=0&&Ii(i,i.prev,e)>=0:Ii(i,e,i.prev)<0||Ii(i,i.next,e)<0}function uO(i,e){let t=i,n=!1;const s=(i.x+e.x)/2,r=(i.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function J2(i,e){const t=E1(i.i,i.x,i.y),n=E1(e.i,e.x,e.y),s=i.next,r=e.prev;return i.next=e,e.prev=i,t.next=s,s.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function _T(i,e,t,n){const s=E1(i,e,t);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Ng(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function E1(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function hO(i,e,t,n){let s=0;for(let r=e,c=t-n;r<t;r+=n)s+=(i[c]-i[r])*(i[r+1]+i[c+1]),c=r;return s}class fO{static triangulate(e,t,n=2){return JU(e,t,n)}}class bo{static area(e){const t=e.length;let n=0;for(let s=t-1,r=0;r<t;s=r++)n+=e[s].x*e[r].y-e[r].x*e[s].y;return n*.5}static isClockWise(e){return bo.area(e)<0}static triangulateShape(e,t){const n=[],s=[],r=[];AT(e),ST(n,e);let c=e.length;t.forEach(AT);for(let d=0;d<t.length;d++)s.push(c),c+=t[d].length,ST(n,t[d]);const h=fO.triangulate(n,s);for(let d=0;d<h.length;d+=3)r.push(h.slice(d,d+3));return r}}function AT(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function ST(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class Rb extends pn{constructor(e=new Zh([new Ye(.5,.5),new Ye(-.5,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,s=[],r=[];for(let h=0,d=e.length;h<d;h++){const p=e[h];c(p)}this.setAttribute("position",new It(s,3)),this.setAttribute("uv",new It(r,2)),this.computeVertexNormals();function c(h){const d=[],p=t.curveSegments!==void 0?t.curveSegments:12,y=t.steps!==void 0?t.steps:1,x=t.depth!==void 0?t.depth:1;let b=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,E=t.bevelSize!==void 0?t.bevelSize:_-.1,R=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,B=t.UVGenerator!==void 0?t.UVGenerator:dO;let N,D=!1,L,I,j,k;M&&(N=M.getSpacedPoints(y),D=!0,b=!1,L=M.computeFrenetFrames(y,!1),I=new K,j=new K,k=new K),b||(T=0,_=0,E=0,R=0);const O=h.extractPoints(p);let P=O.shape;const Y=O.holes;if(!bo.isClockWise(P)){P=P.reverse();for(let Ze=0,ke=Y.length;Ze<ke;Ze++){const Xe=Y[Ze];bo.isClockWise(Xe)&&(Y[Ze]=Xe.reverse())}}function re(Ze){const Xe=10000000000000001e-36;let Le=Ze[0];for(let dt=1;dt<=Ze.length;dt++){const st=dt%Ze.length,lt=Ze[st],Ft=lt.x-Le.x,kt=lt.y-Le.y,Q=Ft*Ft+kt*kt,V=Math.max(Math.abs(lt.x),Math.abs(lt.y),Math.abs(Le.x),Math.abs(Le.y)),Me=Xe*V*V;if(Q<=Me){Ze.splice(st,1),dt--;continue}Le=lt}}re(P),Y.forEach(re);const de=Y.length,pe=P;for(let Ze=0;Ze<de;Ze++){const ke=Y[Ze];P=P.concat(ke)}function H(Ze,ke,Xe){return ke||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ze.clone().addScaledVector(ke,Xe)}const Z=P.length;function $(Ze,ke,Xe){let Le,dt,st;const lt=Ze.x-ke.x,Ft=Ze.y-ke.y,kt=Xe.x-Ze.x,Q=Xe.y-Ze.y,V=lt*lt+Ft*Ft,Me=lt*Q-Ft*kt;if(Math.abs(Me)>Number.EPSILON){const Ie=Math.sqrt(V),je=Math.sqrt(kt*kt+Q*Q),Pe=ke.x-Ft/Ie,xt=ke.y+lt/Ie,pt=Xe.x-Q/je,Bt=Xe.y+kt/je,Nt=((pt-Pe)*Q-(Bt-xt)*kt)/(lt*Q-Ft*kt);Le=Pe+lt*Nt-Ze.x,dt=xt+Ft*Nt-Ze.y;const tt=Le*Le+dt*dt;if(tt<=2)return new Ye(Le,dt);st=Math.sqrt(tt/2)}else{let Ie=!1;lt>Number.EPSILON?kt>Number.EPSILON&&(Ie=!0):lt<-Number.EPSILON?kt<-Number.EPSILON&&(Ie=!0):Math.sign(Ft)===Math.sign(Q)&&(Ie=!0),Ie?(Le=-Ft,dt=lt,st=Math.sqrt(V)):(Le=lt,dt=Ft,st=Math.sqrt(V/2))}return new Ye(Le/st,dt/st)}const ge=[];for(let Ze=0,ke=pe.length,Xe=ke-1,Le=Ze+1;Ze<ke;Ze++,Xe++,Le++)Xe===ke&&(Xe=0),Le===ke&&(Le=0),ge[Ze]=$(pe[Ze],pe[Xe],pe[Le]);const X=[];let ce,xe=ge.concat();for(let Ze=0,ke=de;Ze<ke;Ze++){const Xe=Y[Ze];ce=[];for(let Le=0,dt=Xe.length,st=dt-1,lt=Le+1;Le<dt;Le++,st++,lt++)st===dt&&(st=0),lt===dt&&(lt=0),ce[Le]=$(Xe[Le],Xe[st],Xe[lt]);X.push(ce),xe=xe.concat(ce)}let Te;if(T===0)Te=bo.triangulateShape(pe,Y);else{const Ze=[],ke=[];for(let Xe=0;Xe<T;Xe++){const Le=Xe/T,dt=_*Math.cos(Le*Math.PI/2),st=E*Math.sin(Le*Math.PI/2)+R;for(let lt=0,Ft=pe.length;lt<Ft;lt++){const kt=H(pe[lt],ge[lt],st);_t(kt.x,kt.y,-dt),Le===0&&Ze.push(kt)}for(let lt=0,Ft=de;lt<Ft;lt++){const kt=Y[lt];ce=X[lt];const Q=[];for(let V=0,Me=kt.length;V<Me;V++){const Ie=H(kt[V],ce[V],st);_t(Ie.x,Ie.y,-dt),Le===0&&Q.push(Ie)}Le===0&&ke.push(Q)}}Te=bo.triangulateShape(Ze,ke)}const He=Te.length,at=E+R;for(let Ze=0;Ze<Z;Ze++){const ke=b?H(P[Ze],xe[Ze],at):P[Ze];D?(j.copy(L.normals[0]).multiplyScalar(ke.x),I.copy(L.binormals[0]).multiplyScalar(ke.y),k.copy(N[0]).add(j).add(I),_t(k.x,k.y,k.z)):_t(ke.x,ke.y,0)}for(let Ze=1;Ze<=y;Ze++)for(let ke=0;ke<Z;ke++){const Xe=b?H(P[ke],xe[ke],at):P[ke];D?(j.copy(L.normals[Ze]).multiplyScalar(Xe.x),I.copy(L.binormals[Ze]).multiplyScalar(Xe.y),k.copy(N[Ze]).add(j).add(I),_t(k.x,k.y,k.z)):_t(Xe.x,Xe.y,x/y*Ze)}for(let Ze=T-1;Ze>=0;Ze--){const ke=Ze/T,Xe=_*Math.cos(ke*Math.PI/2),Le=E*Math.sin(ke*Math.PI/2)+R;for(let dt=0,st=pe.length;dt<st;dt++){const lt=H(pe[dt],ge[dt],Le);_t(lt.x,lt.y,x+Xe)}for(let dt=0,st=Y.length;dt<st;dt++){const lt=Y[dt];ce=X[dt];for(let Ft=0,kt=lt.length;Ft<kt;Ft++){const Q=H(lt[Ft],ce[Ft],Le);D?_t(Q.x,Q.y+N[y-1].y,N[y-1].x+Xe):_t(Q.x,Q.y,x+Xe)}}}me(),Ge();function me(){const Ze=s.length/3;if(b){let ke=0,Xe=Z*ke;for(let Le=0;Le<He;Le++){const dt=Te[Le];vt(dt[2]+Xe,dt[1]+Xe,dt[0]+Xe)}ke=y+T*2,Xe=Z*ke;for(let Le=0;Le<He;Le++){const dt=Te[Le];vt(dt[0]+Xe,dt[1]+Xe,dt[2]+Xe)}}else{for(let ke=0;ke<He;ke++){const Xe=Te[ke];vt(Xe[2],Xe[1],Xe[0])}for(let ke=0;ke<He;ke++){const Xe=Te[ke];vt(Xe[0]+Z*y,Xe[1]+Z*y,Xe[2]+Z*y)}}n.addGroup(Ze,s.length/3-Ze,0)}function Ge(){const Ze=s.length/3;let ke=0;qe(pe,ke),ke+=pe.length;for(let Xe=0,Le=Y.length;Xe<Le;Xe++){const dt=Y[Xe];qe(dt,ke),ke+=dt.length}n.addGroup(Ze,s.length/3-Ze,1)}function qe(Ze,ke){let Xe=Ze.length;for(;--Xe>=0;){const Le=Xe;let dt=Xe-1;dt<0&&(dt=Ze.length-1);for(let st=0,lt=y+T*2;st<lt;st++){const Ft=Z*st,kt=Z*(st+1),Q=ke+Le+Ft,V=ke+dt+Ft,Me=ke+dt+kt,Ie=ke+Le+kt;yt(Q,V,Me,Ie)}}}function _t(Ze,ke,Xe){d.push(Ze),d.push(ke),d.push(Xe)}function vt(Ze,ke,Xe){zt(Ze),zt(ke),zt(Xe);const Le=s.length/3,dt=B.generateTopUV(n,s,Le-3,Le-2,Le-1);ne(dt[0]),ne(dt[1]),ne(dt[2])}function yt(Ze,ke,Xe,Le){zt(Ze),zt(ke),zt(Le),zt(ke),zt(Xe),zt(Le);const dt=s.length/3,st=B.generateSideWallUV(n,s,dt-6,dt-3,dt-2,dt-1);ne(st[0]),ne(st[1]),ne(st[3]),ne(st[1]),ne(st[2]),ne(st[3])}function zt(Ze){s.push(d[Ze*3+0]),s.push(d[Ze*3+1]),s.push(d[Ze*3+2])}function ne(Ze){r.push(Ze.x),r.push(Ze.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return pO(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,c=e.shapes.length;r<c;r++){const h=t[e.shapes[r]];n.push(h)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new Gx[s.type]().fromJSON(s)),new Rb(n,e.options)}}const dO={generateTopUV:function(i,e,t,n,s){const r=e[t*3],c=e[t*3+1],h=e[n*3],d=e[n*3+1],p=e[s*3],y=e[s*3+1];return[new Ye(r,c),new Ye(h,d),new Ye(p,y)]},generateSideWallUV:function(i,e,t,n,s,r){const c=e[t*3],h=e[t*3+1],d=e[t*3+2],p=e[n*3],y=e[n*3+1],x=e[n*3+2],b=e[s*3],_=e[s*3+1],E=e[s*3+2],R=e[r*3],T=e[r*3+1],M=e[r*3+2];return Math.abs(h-y)<Math.abs(c-p)?[new Ye(c,1-d),new Ye(p,1-x),new Ye(b,1-E),new Ye(R,1-M)]:[new Ye(h,1-d),new Ye(y,1-x),new Ye(_,1-E),new Ye(T,1-M)]}};function pO(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];t.shapes.push(r.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class e0 extends Mu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new e0(e.radius,e.detail)}}class Bb extends pn{constructor(e=[new Ye(0,-.5),new Ye(.5,0),new Ye(0,.5)],t=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:s},t=Math.floor(t),s=nn(s,0,Math.PI*2);const r=[],c=[],h=[],d=[],p=[],y=1/t,x=new K,b=new Ye,_=new K,E=new K,R=new K;let T=0,M=0;for(let B=0;B<=e.length-1;B++)switch(B){case 0:T=e[B+1].x-e[B].x,M=e[B+1].y-e[B].y,_.x=M*1,_.y=-T,_.z=M*0,R.copy(_),_.normalize(),d.push(_.x,_.y,_.z);break;case e.length-1:d.push(R.x,R.y,R.z);break;default:T=e[B+1].x-e[B].x,M=e[B+1].y-e[B].y,_.x=M*1,_.y=-T,_.z=M*0,E.copy(_),_.x+=R.x,_.y+=R.y,_.z+=R.z,_.normalize(),d.push(_.x,_.y,_.z),R.copy(E)}for(let B=0;B<=t;B++){const N=n+B*y*s,D=Math.sin(N),L=Math.cos(N);for(let I=0;I<=e.length-1;I++){x.x=e[I].x*D,x.y=e[I].y,x.z=e[I].x*L,c.push(x.x,x.y,x.z),b.x=B/t,b.y=I/(e.length-1),h.push(b.x,b.y);const j=d[3*I+0]*D,k=d[3*I+1],O=d[3*I+0]*L;p.push(j,k,O)}}for(let B=0;B<t;B++)for(let N=0;N<e.length-1;N++){const D=N+B*e.length,L=D,I=D+e.length,j=D+e.length+1,k=D+1;r.push(L,I,k),r.push(j,k,I)}this.setIndex(r),this.setAttribute("position",new It(c,3)),this.setAttribute("uv",new It(h,2)),this.setAttribute("normal",new It(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bb(e.points,e.segments,e.phiStart,e.phiLength)}}class t0 extends Mu{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new t0(e.radius,e.detail)}}class Eu extends pn{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const r=e/2,c=t/2,h=Math.floor(n),d=Math.floor(s),p=h+1,y=d+1,x=e/h,b=t/d,_=[],E=[],R=[],T=[];for(let M=0;M<y;M++){const B=M*b-c;for(let N=0;N<p;N++){const D=N*x-r;E.push(D,-B,0),R.push(0,0,1),T.push(N/h),T.push(1-M/d)}}for(let M=0;M<d;M++)for(let B=0;B<h;B++){const N=B+p*M,D=B+p*(M+1),L=B+1+p*(M+1),I=B+1+p*M;_.push(N,D,I),_.push(D,L,I)}this.setIndex(_),this.setAttribute("position",new It(E,3)),this.setAttribute("normal",new It(R,3)),this.setAttribute("uv",new It(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eu(e.width,e.height,e.widthSegments,e.heightSegments)}}class Nb extends pn{constructor(e=.5,t=1,n=32,s=1,r=0,c=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:c},n=Math.max(3,n),s=Math.max(1,s);const h=[],d=[],p=[],y=[];let x=e;const b=(t-e)/s,_=new K,E=new Ye;for(let R=0;R<=s;R++){for(let T=0;T<=n;T++){const M=r+T/n*c;_.x=x*Math.cos(M),_.y=x*Math.sin(M),d.push(_.x,_.y,_.z),p.push(0,0,1),E.x=(_.x/t+1)/2,E.y=(_.y/t+1)/2,y.push(E.x,E.y)}x+=b}for(let R=0;R<s;R++){const T=R*(n+1);for(let M=0;M<n;M++){const B=M+T,N=B,D=B+n+1,L=B+n+2,I=B+1;h.push(N,D,I),h.push(D,L,I)}}this.setIndex(h),this.setAttribute("position",new It(d,3)),this.setAttribute("normal",new It(p,3)),this.setAttribute("uv",new It(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Db extends pn{constructor(e=new Zh([new Ye(0,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],s=[],r=[],c=[];let h=0,d=0;if(Array.isArray(e)===!1)p(e);else for(let y=0;y<e.length;y++)p(e[y]),this.addGroup(h,d,y),h+=d,d=0;this.setIndex(n),this.setAttribute("position",new It(s,3)),this.setAttribute("normal",new It(r,3)),this.setAttribute("uv",new It(c,2));function p(y){const x=s.length/3,b=y.extractPoints(t);let _=b.shape;const E=b.holes;bo.isClockWise(_)===!1&&(_=_.reverse());for(let T=0,M=E.length;T<M;T++){const B=E[T];bo.isClockWise(B)===!0&&(E[T]=B.reverse())}const R=bo.triangulateShape(_,E);for(let T=0,M=E.length;T<M;T++){const B=E[T];_=_.concat(B)}for(let T=0,M=_.length;T<M;T++){const B=_[T];s.push(B.x,B.y,0),r.push(0,0,1),c.push(B.x,B.y)}for(let T=0,M=R.length;T<M;T++){const B=R[T],N=B[0]+x,D=B[1]+x,L=B[2]+x;n.push(N,D,L),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return mO(t,e)}static fromJSON(e,t){const n=[];for(let s=0,r=e.shapes.length;s<r;s++){const c=t[e.shapes[s]];n.push(c)}return new Db(n,e.curveSegments)}}function mO(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const s=i[t];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class n0 extends pn{constructor(e=1,t=32,n=16,s=0,r=Math.PI*2,c=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:r,thetaStart:c,thetaLength:h},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const d=Math.min(c+h,Math.PI);let p=0;const y=[],x=new K,b=new K,_=[],E=[],R=[],T=[];for(let M=0;M<=n;M++){const B=[],N=M/n;let D=0;M===0&&c===0?D=.5/t:M===n&&d===Math.PI&&(D=-.5/t);for(let L=0;L<=t;L++){const I=L/t;x.x=-e*Math.cos(s+I*r)*Math.sin(c+N*h),x.y=e*Math.cos(c+N*h),x.z=e*Math.sin(s+I*r)*Math.sin(c+N*h),E.push(x.x,x.y,x.z),b.copy(x).normalize(),R.push(b.x,b.y,b.z),T.push(I+D,1-N),B.push(p++)}y.push(B)}for(let M=0;M<n;M++)for(let B=0;B<t;B++){const N=y[M][B+1],D=y[M][B],L=y[M+1][B],I=y[M+1][B+1];(M!==0||c>0)&&_.push(N,D,I),(M!==n-1||d<Math.PI)&&_.push(D,L,I)}this.setIndex(_),this.setAttribute("position",new It(E,3)),this.setAttribute("normal",new It(R,3)),this.setAttribute("uv",new It(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ub extends Mu{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ub(e.radius,e.detail)}}class Ob extends pn{constructor(e=1,t=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const c=[],h=[],d=[],p=[],y=new K,x=new K,b=new K;for(let _=0;_<=n;_++)for(let E=0;E<=s;E++){const R=E/s*r,T=_/n*Math.PI*2;x.x=(e+t*Math.cos(T))*Math.cos(R),x.y=(e+t*Math.cos(T))*Math.sin(R),x.z=t*Math.sin(T),h.push(x.x,x.y,x.z),y.x=e*Math.cos(R),y.y=e*Math.sin(R),b.subVectors(x,y).normalize(),d.push(b.x,b.y,b.z),p.push(E/s),p.push(_/n)}for(let _=1;_<=n;_++)for(let E=1;E<=s;E++){const R=(s+1)*_+E-1,T=(s+1)*(_-1)+E-1,M=(s+1)*(_-1)+E,B=(s+1)*_+E;c.push(R,T,B),c.push(T,M,B)}this.setIndex(c),this.setAttribute("position",new It(h,3)),this.setAttribute("normal",new It(d,3)),this.setAttribute("uv",new It(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ob(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Lb extends pn{constructor(e=1,t=.4,n=64,s=8,r=2,c=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:s,p:r,q:c},n=Math.floor(n),s=Math.floor(s);const h=[],d=[],p=[],y=[],x=new K,b=new K,_=new K,E=new K,R=new K,T=new K,M=new K;for(let N=0;N<=n;++N){const D=N/n*r*Math.PI*2;B(D,r,c,e,_),B(D+.01,r,c,e,E),T.subVectors(E,_),M.addVectors(E,_),R.crossVectors(T,M),M.crossVectors(R,T),R.normalize(),M.normalize();for(let L=0;L<=s;++L){const I=L/s*Math.PI*2,j=-t*Math.cos(I),k=t*Math.sin(I);x.x=_.x+(j*M.x+k*R.x),x.y=_.y+(j*M.y+k*R.y),x.z=_.z+(j*M.z+k*R.z),d.push(x.x,x.y,x.z),b.subVectors(x,_).normalize(),p.push(b.x,b.y,b.z),y.push(N/n),y.push(L/s)}}for(let N=1;N<=n;N++)for(let D=1;D<=s;D++){const L=(s+1)*(N-1)+(D-1),I=(s+1)*N+(D-1),j=(s+1)*N+D,k=(s+1)*(N-1)+D;h.push(L,I,k),h.push(I,j,k)}this.setIndex(h),this.setAttribute("position",new It(d,3)),this.setAttribute("normal",new It(p,3)),this.setAttribute("uv",new It(y,2));function B(N,D,L,I,j){const k=Math.cos(N),O=Math.sin(N),P=L/D*N,Y=Math.cos(P);j.x=I*(2+Y)*.5*k,j.y=I*(2+Y)*O*.5,j.z=I*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Ib extends pn{constructor(e=new RS(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),t=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:s,closed:r};const c=e.computeFrenetFrames(t,r);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;const h=new K,d=new K,p=new Ye;let y=new K;const x=[],b=[],_=[],E=[];R(),this.setIndex(E),this.setAttribute("position",new It(x,3)),this.setAttribute("normal",new It(b,3)),this.setAttribute("uv",new It(_,2));function R(){for(let N=0;N<t;N++)T(N);T(r===!1?t:0),B(),M()}function T(N){y=e.getPointAt(N/t,y);const D=c.normals[N],L=c.binormals[N];for(let I=0;I<=s;I++){const j=I/s*Math.PI*2,k=Math.sin(j),O=-Math.cos(j);d.x=O*D.x+k*L.x,d.y=O*D.y+k*L.y,d.z=O*D.z+k*L.z,d.normalize(),b.push(d.x,d.y,d.z),h.x=y.x+n*d.x,h.y=y.y+n*d.y,h.z=y.z+n*d.z,x.push(h.x,h.y,h.z)}}function M(){for(let N=1;N<=t;N++)for(let D=1;D<=s;D++){const L=(s+1)*(N-1)+(D-1),I=(s+1)*N+(D-1),j=(s+1)*N+D,k=(s+1)*(N-1)+D;E.push(L,I,k),E.push(I,j,k)}}function B(){for(let N=0;N<=t;N++)for(let D=0;D<=s;D++)p.x=N/t,p.y=D/s,_.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Ib(new Gx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class K2 extends pn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,s=new K,r=new K;if(e.index!==null){const c=e.attributes.position,h=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:h.count,materialIndex:0}]);for(let p=0,y=d.length;p<y;++p){const x=d[p],b=x.start,_=x.count;for(let E=b,R=b+_;E<R;E+=3)for(let T=0;T<3;T++){const M=h.getX(E+T),B=h.getX(E+(T+1)%3);s.fromBufferAttribute(c,M),r.fromBufferAttribute(c,B),MT(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const c=e.attributes.position;for(let h=0,d=c.count/3;h<d;h++)for(let p=0;p<3;p++){const y=3*h+p,x=3*h+(p+1)%3;s.fromBufferAttribute(c,y),r.fromBufferAttribute(c,x),MT(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new It(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function MT(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(s)===!0?!1:(t.add(n),t.add(s),!0)}var ET=Object.freeze({__proto__:null,BoxGeometry:cf,CapsuleGeometry:Eb,CircleGeometry:Tb,ConeGeometry:$g,CylinderGeometry:Qg,DodecahedronGeometry:Cb,EdgesGeometry:z2,ExtrudeGeometry:Rb,IcosahedronGeometry:e0,LatheGeometry:Bb,OctahedronGeometry:t0,PlaneGeometry:Eu,PolyhedronGeometry:Mu,RingGeometry:Nb,ShapeGeometry:Db,SphereGeometry:n0,TetrahedronGeometry:Ub,TorusGeometry:Ob,TorusKnotGeometry:Lb,TubeGeometry:Ib,WireframeGeometry:K2});class Z2 extends ms{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Et(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Q2 extends Va{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class i0 extends ms{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Hr extends i0{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Et(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class $2 extends ms{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Et(16777215),this.specular=new Et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=Vg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eR extends ms{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Et(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class tR extends ms{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class nR extends ms{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ur,this.combine=Vg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class NS extends ms{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=v2,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class DS extends ms{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class iR extends ms{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Et(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Su,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sR extends sa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Vh(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function aR(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function rR(i){function e(s,r){return i[s]-i[r]}const t=i.length,n=new Array(t);for(let s=0;s!==t;++s)n[s]=s;return n.sort(e),n}function T1(i,e,t){const n=i.length,s=new i.constructor(n);for(let r=0,c=0;c!==n;++r){const h=t[r]*e;for(let d=0;d!==e;++d)s[c++]=i[h+d]}return s}function US(i,e,t,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let c=r[n];if(c!==void 0)if(Array.isArray(c))do c=r[n],c!==void 0&&(e.push(r.time),t.push(...c)),r=i[s++];while(r!==void 0);else if(c.toArray!==void 0)do c=r[n],c!==void 0&&(e.push(r.time),c.toArray(t,t.length)),r=i[s++];while(r!==void 0);else do c=r[n],c!==void 0&&(e.push(r.time),t.push(c)),r=i[s++];while(r!==void 0)}function gO(i,e,t,n,s=30){const r=i.clone();r.name=e;const c=[];for(let d=0;d<r.tracks.length;++d){const p=r.tracks[d],y=p.getValueSize(),x=[],b=[];for(let _=0;_<p.times.length;++_){const E=p.times[_]*s;if(!(E<t||E>=n)){x.push(p.times[_]);for(let R=0;R<y;++R)b.push(p.values[_*y+R])}}x.length!==0&&(p.times=Vh(x,p.times.constructor),p.values=Vh(b,p.values.constructor),c.push(p))}r.tracks=c;let h=1/0;for(let d=0;d<r.tracks.length;++d)h>r.tracks[d].times[0]&&(h=r.tracks[d].times[0]);for(let d=0;d<r.tracks.length;++d)r.tracks[d].shift(-1*h);return r.resetDuration(),r}function vO(i,e=0,t=i,n=30){n<=0&&(n=30);const s=t.tracks.length,r=e/n;for(let c=0;c<s;++c){const h=t.tracks[c],d=h.ValueTypeName;if(d==="bool"||d==="string")continue;const p=i.tracks.find(function(M){return M.name===h.name&&M.ValueTypeName===d});if(p===void 0)continue;let y=0;const x=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=x/3);let b=0;const _=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=_/3);const E=h.times.length-1;let R;if(r<=h.times[0]){const M=y,B=x-y;R=h.values.slice(M,B)}else if(r>=h.times[E]){const M=E*x+y,B=M+x-y;R=h.values.slice(M,B)}else{const M=h.createInterpolant(),B=y,N=x-y;M.evaluate(r),R=M.resultBuffer.slice(B,N)}d==="quaternion"&&new ws().fromArray(R).normalize().conjugate().toArray(R);const T=p.times.length;for(let M=0;M<T;++M){const B=M*_+b;if(d==="quaternion")ws.multiplyQuaternionsFlat(p.values,B,R,0,p.values,B);else{const N=_-b*2;for(let D=0;D<N;++D)p.values[B+D]-=R[D]}}}return i.blendMode=uS,i}class yO{static convertArray(e,t){return Vh(e,t)}static isTypedArray(e){return aR(e)}static getKeyframeOrder(e){return rR(e)}static sortedArray(e,t,n){return T1(e,t,n)}static flattenJSON(e,t,n,s){US(e,t,n,s)}static subclip(e,t,n,s,r=30){return gO(e,t,n,s,r)}static makeClipAdditive(e,t=0,n=e,s=30){return vO(e,t,n,s)}}class bp{constructor(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,s=t[n],r=t[n-1];e:{t:{let c;n:{i:if(!(e<s)){for(let h=n+2;;){if(s===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===h)break;if(r=s,s=t[++n],e<s)break t}c=t.length;break n}if(!(e>=r)){const h=t[1];e<h&&(n=2,r=h);for(let d=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(s=r,r=t[--n-1],e>=r)break t}c=n,n=0;break n}break e}for(;n<c;){const h=n+c>>>1;e<t[h]?c=h:n=h+1}if(s=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s;for(let c=0;c!==s;++c)t[c]=n[r+c];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class oR extends bp{constructor(e,t,n,s){super(e,t,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Gh,endingEnd:Gh}}intervalChanged_(e,t,n){const s=this.parameterPositions;let r=e-2,c=e+1,h=s[r],d=s[c];if(h===void 0)switch(this.getSettings_().endingStart){case jh:r=e,h=2*t-n;break;case Mg:r=s.length-2,h=t+s[r]-s[r+1];break;default:r=e,h=n}if(d===void 0)switch(this.getSettings_().endingEnd){case jh:c=e,d=2*n-t;break;case Mg:c=1,d=n+s[1]-s[0];break;default:c=e-1,d=t}const p=(n-t)*.5,y=this.valueSize;this._weightPrev=p/(t-h),this._weightNext=p/(d-n),this._offsetPrev=r*y,this._offsetNext=c*y}interpolate_(e,t,n,s){const r=this.resultBuffer,c=this.sampleValues,h=this.valueSize,d=e*h,p=d-h,y=this._offsetPrev,x=this._offsetNext,b=this._weightPrev,_=this._weightNext,E=(n-t)/(s-t),R=E*E,T=R*E,M=-b*T+2*b*R-b*E,B=(1+b)*T+(-1.5-2*b)*R+(-.5+b)*E+1,N=(-1-_)*T+(1.5+_)*R+.5*E,D=_*T-_*R;for(let L=0;L!==h;++L)r[L]=M*c[y+L]+B*c[p+L]+N*c[d+L]+D*c[x+L];return r}}class OS extends bp{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,c=this.sampleValues,h=this.valueSize,d=e*h,p=d-h,y=(n-t)/(s-t),x=1-y;for(let b=0;b!==h;++b)r[b]=c[p+b]*x+c[d+b]*y;return r}}class lR extends bp{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class zr{constructor(e,t,n,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Vh(t,this.TimeBufferType),this.values=Vh(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Vh(e.times,Array),values:Vh(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new lR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new OS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new oR(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case rp:t=this.InterpolantFactoryMethodDiscrete;break;case op:t=this.InterpolantFactoryMethodLinear;break;case Yy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return rp;case this.InterpolantFactoryMethodLinear:return op;case this.InterpolantFactoryMethodSmooth:return Yy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]*=e}return this}trim(e,t){const n=this.times,s=n.length;let r=0,c=s-1;for(;r!==s&&n[r]<e;)++r;for(;c!==-1&&n[c]>t;)--c;if(++c,r!==0||c!==s){r>=c&&(c=Math.max(c,1),r=c-1);const h=this.getValueSize();this.times=n.slice(r,c),this.values=this.values.slice(r*h,c*h)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let c=null;for(let h=0;h!==r;h++){const d=n[h];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,d),e=!1;break}if(c!==null&&c>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,d,c),e=!1;break}c=d}if(s!==void 0&&aR(s))for(let h=0,d=s.length;h!==d;++h){const p=s[h];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===Yy,r=e.length-1;let c=1;for(let h=1;h<r;++h){let d=!1;const p=e[h],y=e[h+1];if(p!==y&&(h!==1||p!==e[0]))if(s)d=!0;else{const x=h*n,b=x-n,_=x+n;for(let E=0;E!==n;++E){const R=t[x+E];if(R!==t[b+E]||R!==t[_+E]){d=!0;break}}}if(d){if(h!==c){e[c]=e[h];const x=h*n,b=c*n;for(let _=0;_!==n;++_)t[b+_]=t[x+_]}++c}}if(r>0){e[c]=e[r];for(let h=r*n,d=c*n,p=0;p!==n;++p)t[d+p]=t[h+p];++c}return c!==e.length?(this.times=e.slice(0,c),this.values=t.slice(0,c*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,s=new n(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}zr.prototype.ValueTypeName="";zr.prototype.TimeBufferType=Float32Array;zr.prototype.ValueBufferType=Float32Array;zr.prototype.DefaultInterpolation=op;class uf extends zr{constructor(e,t,n){super(e,t,n)}}uf.prototype.ValueTypeName="bool";uf.prototype.ValueBufferType=Array;uf.prototype.DefaultInterpolation=rp;uf.prototype.InterpolantFactoryMethodLinear=void 0;uf.prototype.InterpolantFactoryMethodSmooth=void 0;class LS extends zr{constructor(e,t,n,s){super(e,t,n,s)}}LS.prototype.ValueTypeName="color";class tf extends zr{constructor(e,t,n,s){super(e,t,n,s)}}tf.prototype.ValueTypeName="number";class cR extends bp{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,c=this.sampleValues,h=this.valueSize,d=(n-t)/(s-t);let p=e*h;for(let y=p+h;p!==y;p+=4)ws.slerpFlat(r,0,c,p-h,c,p,d);return r}}class nf extends zr{constructor(e,t,n,s){super(e,t,n,s)}InterpolantFactoryMethodLinear(e){return new cR(this.times,this.values,this.getValueSize(),e)}}nf.prototype.ValueTypeName="quaternion";nf.prototype.InterpolantFactoryMethodSmooth=void 0;class hf extends zr{constructor(e,t,n){super(e,t,n)}}hf.prototype.ValueTypeName="string";hf.prototype.ValueBufferType=Array;hf.prototype.DefaultInterpolation=rp;hf.prototype.InterpolantFactoryMethodLinear=void 0;hf.prototype.InterpolantFactoryMethodSmooth=void 0;class sf extends zr{constructor(e,t,n,s){super(e,t,n,s)}}sf.prototype.ValueTypeName="vector";class dp{constructor(e="",t=-1,n=[],s=mb){this.name=e,this.tracks=n,this.duration=t,this.blendMode=s,this.uuid=cr(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,s=1/(e.fps||1);for(let c=0,h=n.length;c!==h;++c)t.push(bO(n[c]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r.userData=JSON.parse(e.userData||"{}"),r}static toJSON(e){const t=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let r=0,c=n.length;r!==c;++r)t.push(zr.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(e,t,n,s){const r=t.length,c=[];for(let h=0;h<r;h++){let d=[],p=[];d.push((h+r-1)%r,h,(h+1)%r),p.push(0,1,0);const y=rR(d);d=T1(d,1,y),p=T1(p,1,y),!s&&d[0]===0&&(d.push(r),p.push(p[0])),c.push(new tf(".morphTargetInfluences["+t[h].name+"]",d,p).scale(1/n))}return new this(e,-1,c)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===t)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let h=0,d=e.length;h<d;h++){const p=e[h],y=p.name.match(r);if(y&&y.length>1){const x=y[1];let b=s[x];b||(s[x]=b=[]),b.push(p)}}const c=[];for(const h in s)c.push(this.CreateFromMorphTargetSequence(h,s[h],t,n));return c}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(x,b,_,E,R){if(_.length!==0){const T=[],M=[];US(_,T,M,E),T.length!==0&&R.push(new x(b,T,M))}},s=[],r=e.name||"default",c=e.fps||30,h=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let x=0;x<p.length;x++){const b=p[x].keys;if(!(!b||b.length===0))if(b[0].morphTargets){const _={};let E;for(E=0;E<b.length;E++)if(b[E].morphTargets)for(let R=0;R<b[E].morphTargets.length;R++)_[b[E].morphTargets[R]]=-1;for(const R in _){const T=[],M=[];for(let B=0;B!==b[E].morphTargets.length;++B){const N=b[E];T.push(N.time),M.push(N.morphTarget===R?1:0)}s.push(new tf(".morphTargetInfluence["+R+"]",T,M))}d=_.length*c}else{const _=".bones["+t[x].name+"]";n(sf,_+".position",b,"pos",s),n(nf,_+".quaternion",b,"rot",s),n(sf,_+".scale",b,"scl",s)}}return s.length===0?null:new this(r,d,s,h)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,s=e.length;n!==s;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function xO(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return tf;case"vector":case"vector2":case"vector3":case"vector4":return sf;case"color":return LS;case"quaternion":return nf;case"bool":case"boolean":return uf;case"string":return hf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function bO(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=xO(i.type);if(i.times===void 0){const t=[],n=[];US(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const pl={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Pb{constructor(e,t,n){const s=this;let r=!1,c=0,h=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(y){h++,r===!1&&s.onStart!==void 0&&s.onStart(y,c,h),r=!0},this.itemEnd=function(y){c++,s.onProgress!==void 0&&s.onProgress(y,c,h),c===h&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(y){s.onError!==void 0&&s.onError(y)},this.resolveURL=function(y){return d?d(y):y},this.setURLModifier=function(y){return d=y,this},this.addHandler=function(y,x){return p.push(y,x),this},this.removeHandler=function(y){const x=p.indexOf(y);return x!==-1&&p.splice(x,2),this},this.getHandler=function(y){for(let x=0,b=p.length;x<b;x+=2){const _=p[x],E=p[x+1];if(_.global&&(_.lastIndex=0),_.test(y))return E}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const Gd=new Pb;let Xs=class{constructor(e){this.manager=e!==void 0?e:Gd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,r){n.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}};Xs.DEFAULT_MATERIAL_NAME="__DEFAULT";const Zl={};class _O extends Error{constructor(e,t){super(e),this.response=t}}class Vs extends Xs{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=pl.get(`file:${e}`);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Zl[e]!==void 0){Zl[e].push({onLoad:t,onProgress:n,onError:s});return}Zl[e]=[],Zl[e].push({onLoad:t,onProgress:n,onError:s});const c=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),h=this.mimeType,d=this.responseType;fetch(c).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const y=Zl[e],x=p.body.getReader(),b=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),_=b?parseInt(b):0,E=_!==0;let R=0;const T=new ReadableStream({start(M){B();function B(){x.read().then(({done:N,value:D})=>{if(N)M.close();else{R+=D.byteLength;const L=new ProgressEvent("progress",{lengthComputable:E,loaded:R,total:_});for(let I=0,j=y.length;I<j;I++){const k=y[I];k.onProgress&&k.onProgress(L)}M.enqueue(D),B()}},N=>{M.error(N)})}}});return new Response(T)}else throw new _O(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(y=>new DOMParser().parseFromString(y,h));case"json":return p.json();default:if(h==="")return p.text();{const x=/charset="?([^;"\s]*)"?/i.exec(h),b=x&&x[1]?x[1].toLowerCase():void 0,_=new TextDecoder(b);return p.arrayBuffer().then(E=>_.decode(E))}}}).then(p=>{pl.add(`file:${e}`,p);const y=Zl[e];delete Zl[e];for(let x=0,b=y.length;x<b;x++){const _=y[x];_.onLoad&&_.onLoad(p)}}).catch(p=>{const y=Zl[e];if(y===void 0)throw this.manager.itemError(e),p;delete Zl[e];for(let x=0,b=y.length;x<b;x++){const _=y[x];_.onError&&_.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class AO extends Xs{constructor(e){super(e)}load(e,t,n,s){const r=this,c=new Vs(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{t(r.parse(JSON.parse(h)))}catch(d){s?s(d):console.error(d),r.manager.itemError(e)}},n,s)}parse(e){const t=[];for(let n=0;n<e.length;n++){const s=dp.parse(e[n]);t.push(s)}return t}}class SO extends Xs{constructor(e){super(e)}load(e,t,n,s){const r=this,c=[],h=new Mb,d=new Vs(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(r.withCredentials);let p=0;function y(x){d.load(e[x],function(b){const _=r.parse(b,!0);c[x]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},p+=1,p===6&&(_.mipmapCount===1&&(h.minFilter=Kn),h.image=c,h.format=_.format,h.needsUpdate=!0,t&&t(h))},n,s)}if(Array.isArray(e))for(let x=0,b=e.length;x<b;++x)y(x);else d.load(e,function(x){const b=r.parse(x,!0);if(b.isCubemap){const _=b.mipmaps.length/b.mipmapCount;for(let E=0;E<_;E++){c[E]={mipmaps:[]};for(let R=0;R<b.mipmapCount;R++)c[E].mipmaps.push(b.mipmaps[E*b.mipmapCount+R]),c[E].format=b.format,c[E].width=b.width,c[E].height=b.height}h.image=c}else h.image.width=b.width,h.image.height=b.height,h.mipmaps=b.mipmaps;b.mipmapCount===1&&(h.minFilter=Kn),h.format=b.format,h.needsUpdate=!0,t&&t(h)},n,s);return h}}const Nd=new WeakMap;class Dg extends Xs{constructor(e){super(e)}load(e,t,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,c=pl.get(`image:${e}`);if(c!==void 0){if(c.complete===!0)r.manager.itemStart(e),setTimeout(function(){t&&t(c),r.manager.itemEnd(e)},0);else{let x=Nd.get(c);x===void 0&&(x=[],Nd.set(c,x)),x.push({onLoad:t,onError:s})}return c}const h=Cg("img");function d(){y(),t&&t(this);const x=Nd.get(this)||[];for(let b=0;b<x.length;b++){const _=x[b];_.onLoad&&_.onLoad(this)}Nd.delete(this),r.manager.itemEnd(e)}function p(x){y(),s&&s(x),pl.remove(`image:${e}`);const b=Nd.get(this)||[];for(let _=0;_<b.length;_++){const E=b[_];E.onError&&E.onError(x)}Nd.delete(this),r.manager.itemError(e),r.manager.itemEnd(e)}function y(){h.removeEventListener("load",d,!1),h.removeEventListener("error",p,!1)}return h.addEventListener("load",d,!1),h.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),pl.add(`image:${e}`,h),r.manager.itemStart(e),h.src=e,h}}class uR extends Xs{constructor(e){super(e)}load(e,t,n,s){const r=new Wg;r.colorSpace=Gs;const c=new Dg(this.manager);c.setCrossOrigin(this.crossOrigin),c.setPath(this.path);let h=0;function d(p){c.load(e[p],function(y){r.images[p]=y,h++,h===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let p=0;p<e.length;++p)d(p);return r}}class IS extends Xs{constructor(e){super(e)}load(e,t,n,s){const r=this,c=new So,h=new Vs(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(r.withCredentials),h.load(e,function(d){let p;try{p=r.parse(d)}catch(y){if(s!==void 0)s(y);else{console.error(y);return}}p.image!==void 0?c.image=p.image:p.data!==void 0&&(c.image.width=p.width,c.image.height=p.height,c.image.data=p.data),c.wrapS=p.wrapS!==void 0?p.wrapS:Ki,c.wrapT=p.wrapT!==void 0?p.wrapT:Ki,c.magFilter=p.magFilter!==void 0?p.magFilter:Kn,c.minFilter=p.minFilter!==void 0?p.minFilter:Kn,c.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(c.colorSpace=p.colorSpace),p.flipY!==void 0&&(c.flipY=p.flipY),p.format!==void 0&&(c.format=p.format),p.type!==void 0&&(c.type=p.type),p.mipmaps!==void 0&&(c.mipmaps=p.mipmaps,c.minFilter=Or),p.mipmapCount===1&&(c.minFilter=Kn),p.generateMipmaps!==void 0&&(c.generateMipmaps=p.generateMipmaps),c.needsUpdate=!0,t&&t(c,p)},n,s),c}}class hR extends Xs{constructor(e){super(e)}load(e,t,n,s){const r=new ti,c=new Dg(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(e,function(h){r.image=h,r.needsUpdate=!0,t!==void 0&&t(r)},n,s),r}}class Tu extends Pn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Et(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class fR extends Tu{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Pn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Et(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const bA=new Jt,TT=new K,CT=new K;class PS{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ye(512,512),this.mapType=Ea,this.map=null,this.mapPass=null,this.matrix=new Jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new xp,this._frameExtents=new Ye(1,1),this._viewportCount=1,this._viewports=[new Gn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;TT.setFromMatrixPosition(e.matrixWorld),t.position.copy(TT),CT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(CT),t.updateMatrixWorld(),bA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bA,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(bA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class MO extends PS{constructor(){super(new Ri(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=cp*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height*this.aspect,r=e.distance||t.far;(n!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class FS extends Tu{constructor(e,t,n=0,s=Math.PI/3,r=0,c=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Pn.DEFAULT_UP),this.updateMatrix(),this.target=new Pn,this.distance=n,this.angle=s,this.penumbra=r,this.decay=c,this.map=null,this.shadow=new MO}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const wT=new Jt,Jm=new K,_A=new K;class EO extends PS{constructor(){super(new Ri(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ye(4,2),this._viewportCount=6,this._viewports=[new Gn(2,1,1,1),new Gn(0,1,1,1),new Gn(3,1,1,1),new Gn(1,1,1,1),new Gn(3,0,1,1),new Gn(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,s=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Jm.setFromMatrixPosition(e.matrixWorld),n.position.copy(Jm),_A.copy(n.position),_A.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(_A),n.updateMatrixWorld(),s.makeTranslation(-Jm.x,-Jm.y,-Jm.z),wT.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wT,n.coordinateSystem,n.reversedDepth)}}class HS extends Tu{constructor(e,t,n=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new EO}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ir extends yb{constructor(e=-1,t=1,n=1,s=-1,r=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=r,this.far=c,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,r,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-e,c=n+e,h=s+t,d=s-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=p*this.view.offsetX,c=r+p*this.view.width,h-=y*this.view.offsetY,d=h-y*this.view.height}this.projectionMatrix.makeOrthographic(r,c,h,d,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class TO extends PS{constructor(){super(new Ir(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class zS extends Tu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Pn.DEFAULT_UP),this.updateMatrix(),this.target=new Pn,this.shadow=new TO}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class dR extends Tu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class pR extends Tu{constructor(e,t,n=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class mR{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new K)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,s=e.y,r=e.z,c=this.coefficients;return t.copy(c[0]).multiplyScalar(.282095),t.addScaledVector(c[1],.488603*s),t.addScaledVector(c[2],.488603*r),t.addScaledVector(c[3],.488603*n),t.addScaledVector(c[4],1.092548*(n*s)),t.addScaledVector(c[5],1.092548*(s*r)),t.addScaledVector(c[6],.315392*(3*r*r-1)),t.addScaledVector(c[7],1.092548*(n*r)),t.addScaledVector(c[8],.546274*(n*n-s*s)),t}getIrradianceAt(e,t){const n=e.x,s=e.y,r=e.z,c=this.coefficients;return t.copy(c[0]).multiplyScalar(.886227),t.addScaledVector(c[1],2*.511664*s),t.addScaledVector(c[2],2*.511664*r),t.addScaledVector(c[3],2*.511664*n),t.addScaledVector(c[4],2*.429043*n*s),t.addScaledVector(c[5],2*.429043*s*r),t.addScaledVector(c[6],.743125*r*r-.247708),t.addScaledVector(c[7],2*.429043*n*r),t.addScaledVector(c[8],.429043*(n*n-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const n=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-s*s)}}class gR extends Tu{constructor(e=new mR,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Fb extends Xs{constructor(e){super(e),this.textures={}}load(e,t,n,s){const r=this,c=new Vs(r.manager);c.setPath(r.path),c.setRequestHeader(r.requestHeader),c.setWithCredentials(r.withCredentials),c.load(e,function(h){try{t(r.parse(JSON.parse(h)))}catch(d){s?s(d):console.error(d),r.manager.itemError(e)}},n,s)}parse(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Et().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const c=e.uniforms[r];switch(s.uniforms[r]={},c.type){case"t":s.uniforms[r].value=n(c.value);break;case"c":s.uniforms[r].value=new Et().setHex(c.value);break;case"v2":s.uniforms[r].value=new Ye().fromArray(c.value);break;case"v3":s.uniforms[r].value=new K().fromArray(c.value);break;case"v4":s.uniforms[r].value=new Gn().fromArray(c.value);break;case"m3":s.uniforms[r].value=new gn().fromArray(c.value);break;case"m4":s.uniforms[r].value=new Jt().fromArray(c.value);break;default:s.uniforms[r].value=c.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=n(e.map)),e.matcap!==void 0&&(s.matcap=n(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new Ye().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=n(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Ye().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Fb.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:Z2,SpriteMaterial:yS,RawShaderMaterial:Q2,ShaderMaterial:Va,PointsMaterial:Sb,MeshPhysicalMaterial:Hr,MeshStandardMaterial:i0,MeshPhongMaterial:$2,MeshToonMaterial:eR,MeshNormalMaterial:tR,MeshLambertMaterial:nR,MeshDepthMaterial:NS,MeshDistanceMaterial:DS,MeshBasicMaterial:ka,MeshMatcapMaterial:iR,LineDashedMaterial:sR,LineBasicMaterial:sa,Material:ms};return new t[e]}}class vu{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class vR extends pn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class yR extends Xs{constructor(e){super(e)}load(e,t,n,s){const r=this,c=new Vs(r.manager);c.setPath(r.path),c.setRequestHeader(r.requestHeader),c.setWithCredentials(r.withCredentials),c.load(e,function(h){try{t(r.parse(JSON.parse(h)))}catch(d){s?s(d):console.error(d),r.manager.itemError(e)}},n,s)}parse(e){const t={},n={};function s(_,E){if(t[E]!==void 0)return t[E];const T=_.interleavedBuffers[E],M=r(_,T.buffer),B=zd(T.type,M),N=new Kg(B,T.stride);return N.uuid=T.uuid,t[E]=N,N}function r(_,E){if(n[E]!==void 0)return n[E];const T=_.arrayBuffers[E],M=new Uint32Array(T).buffer;return n[E]=M,M}const c=e.isInstancedBufferGeometry?new vR:new pn,h=e.data.index;if(h!==void 0){const _=zd(h.type,h.array);c.setIndex(new jn(_,1))}const d=e.data.attributes;for(const _ in d){const E=d[_];let R;if(E.isInterleavedBufferAttribute){const T=s(e.data,E.data);R=new Au(T,E.itemSize,E.offset,E.normalized)}else{const T=zd(E.type,E.array),M=E.isInstancedBufferAttribute?$h:jn;R=new M(T,E.itemSize,E.normalized)}E.name!==void 0&&(R.name=E.name),E.usage!==void 0&&R.setUsage(E.usage),c.setAttribute(_,R)}const p=e.data.morphAttributes;if(p)for(const _ in p){const E=p[_],R=[];for(let T=0,M=E.length;T<M;T++){const B=E[T];let N;if(B.isInterleavedBufferAttribute){const D=s(e.data,B.data);N=new Au(D,B.itemSize,B.offset,B.normalized)}else{const D=zd(B.type,B.array);N=new jn(D,B.itemSize,B.normalized)}B.name!==void 0&&(N.name=B.name),R.push(N)}c.morphAttributes[_]=R}e.data.morphTargetsRelative&&(c.morphTargetsRelative=!0);const x=e.data.groups||e.data.drawcalls||e.data.offsets;if(x!==void 0)for(let _=0,E=x.length;_!==E;++_){const R=x[_];c.addGroup(R.start,R.count,R.materialIndex)}const b=e.data.boundingSphere;return b!==void 0&&(c.boundingSphere=new Rs().fromJSON(b)),e.name&&(c.name=e.name),e.userData&&(c.userData=e.userData),c}}class CO extends Xs{constructor(e){super(e)}load(e,t,n,s){const r=this,c=this.path===""?vu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||c;const h=new Vs(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(d){let p=null;try{p=JSON.parse(d)}catch(x){s!==void 0&&s(x),console.error("THREE:ObjectLoader: Can't parse "+e+".",x.message);return}const y=p.metadata;if(y===void 0||y.type===void 0||y.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(p,t)},n,s)}async loadAsync(e,t){const n=this,s=this.path===""?vu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new Vs(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const c=await r.loadAsync(e,t),h=JSON.parse(c),d=h.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(h)}parse(e,t){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),c=this.parseImages(e.images,function(){t!==void 0&&t(p)}),h=this.parseTextures(e.textures,c),d=this.parseMaterials(e.materials,h),p=this.parseObject(e.object,r,d,h,n),y=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,y),this.bindLightTargets(p),t!==void 0){let x=!1;for(const b in c)if(c[b].data instanceof HTMLImageElement){x=!0;break}x===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),c=this.parseTextures(e.textures,r),h=this.parseMaterials(e.materials,c),d=this.parseObject(e.object,s,h,c,t),p=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const r=new Zh().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,c=e.length;r<c;r++){const h=new Zg().fromJSON(e[r],s);n[h.uuid]=h}return n}parseGeometries(e,t){const n={};if(e!==void 0){const s=new yR;for(let r=0,c=e.length;r<c;r++){let h;const d=e[r];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":h=s.parse(d);break;default:d.type in ET?h=ET[d.type].fromJSON(d,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}h.uuid=d.uuid,d.name!==void 0&&(h.name=d.name),d.userData!==void 0&&(h.userData=d.userData),n[d.uuid]=h}}return n}parseMaterials(e,t){const n={},s={};if(e!==void 0){const r=new Fb;r.setTextures(t);for(let c=0,h=e.length;c<h;c++){const d=e[c];n[d.uuid]===void 0&&(n[d.uuid]=r.parse(d)),s[d.uuid]=n[d.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const s=e[n],r=dp.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const n=this,s={};let r;function c(d){return n.manager.itemStart(d),r.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function h(d){if(typeof d=="string"){const p=d,y=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return c(y)}else return d.data?{data:zd(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new Pb(t);r=new Dg(d),r.setCrossOrigin(this.crossOrigin);for(let p=0,y=e.length;p<y;p++){const x=e[p],b=x.url;if(Array.isArray(b)){const _=[];for(let E=0,R=b.length;E<R;E++){const T=b[E],M=h(T);M!==null&&(M instanceof HTMLImageElement?_.push(M):_.push(new So(M.data,M.width,M.height)))}s[x.uuid]=new du(_)}else{const _=h(x.url);s[x.uuid]=new du(_)}}}return s}async parseImagesAsync(e){const t=this,n={};let s;async function r(c){if(typeof c=="string"){const h=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:t.resourcePath+h;return await s.loadAsync(d)}else return c.data?{data:zd(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){s=new Dg(this.manager),s.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const d=e[c],p=d.url;if(Array.isArray(p)){const y=[];for(let x=0,b=p.length;x<b;x++){const _=p[x],E=await r(_);E!==null&&(E instanceof HTMLImageElement?y.push(E):y.push(new So(E.data,E.width,E.height)))}n[d.uuid]=new du(y)}else{const y=await r(d.url);n[d.uuid]=new du(y)}}}return n}parseTextures(e,t){function n(r,c){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),c[r])}const s={};if(e!==void 0)for(let r=0,c=e.length;r<c;r++){const h=e[r];h.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid),t[h.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",h.image);const d=t[h.image],p=d.data;let y;Array.isArray(p)?(y=new Wg,p.length===6&&(y.needsUpdate=!0)):(p&&p.data?y=new So:y=new ti,p&&(y.needsUpdate=!0)),y.source=d,y.uuid=h.uuid,h.name!==void 0&&(y.name=h.name),h.mapping!==void 0&&(y.mapping=n(h.mapping,wO)),h.channel!==void 0&&(y.channel=h.channel),h.offset!==void 0&&y.offset.fromArray(h.offset),h.repeat!==void 0&&y.repeat.fromArray(h.repeat),h.center!==void 0&&y.center.fromArray(h.center),h.rotation!==void 0&&(y.rotation=h.rotation),h.wrap!==void 0&&(y.wrapS=n(h.wrap[0],RT),y.wrapT=n(h.wrap[1],RT)),h.format!==void 0&&(y.format=h.format),h.internalFormat!==void 0&&(y.internalFormat=h.internalFormat),h.type!==void 0&&(y.type=h.type),h.colorSpace!==void 0&&(y.colorSpace=h.colorSpace),h.minFilter!==void 0&&(y.minFilter=n(h.minFilter,BT)),h.magFilter!==void 0&&(y.magFilter=n(h.magFilter,BT)),h.anisotropy!==void 0&&(y.anisotropy=h.anisotropy),h.flipY!==void 0&&(y.flipY=h.flipY),h.generateMipmaps!==void 0&&(y.generateMipmaps=h.generateMipmaps),h.premultiplyAlpha!==void 0&&(y.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(y.unpackAlignment=h.unpackAlignment),h.compareFunction!==void 0&&(y.compareFunction=h.compareFunction),h.userData!==void 0&&(y.userData=h.userData),s[h.uuid]=y}return s}parseObject(e,t,n,s,r){let c;function h(b){return t[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",b),t[b]}function d(b){if(b!==void 0){if(Array.isArray(b)){const _=[];for(let E=0,R=b.length;E<R;E++){const T=b[E];n[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),_.push(n[T])}return _}return n[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),n[b]}}function p(b){return s[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",b),s[b]}let y,x;switch(e.type){case"Scene":c=new Jg,e.background!==void 0&&(Number.isInteger(e.background)?c.background=new Et(e.background):c.background=p(e.background)),e.environment!==void 0&&(c.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?c.fog=new bb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(c.fog=new xb(e.fog.color,e.fog.density)),e.fog.name!==""&&(c.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(c.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(c.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&c.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(c.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&c.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":c=new Ri(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(c.focus=e.focus),e.zoom!==void 0&&(c.zoom=e.zoom),e.filmGauge!==void 0&&(c.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(c.filmOffset=e.filmOffset),e.view!==void 0&&(c.view=Object.assign({},e.view));break;case"OrthographicCamera":c=new Ir(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(c.zoom=e.zoom),e.view!==void 0&&(c.view=Object.assign({},e.view));break;case"AmbientLight":c=new dR(e.color,e.intensity);break;case"DirectionalLight":c=new zS(e.color,e.intensity),c.target=e.target||"";break;case"PointLight":c=new HS(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":c=new pR(e.color,e.intensity,e.width,e.height);break;case"SpotLight":c=new FS(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),c.target=e.target||"";break;case"HemisphereLight":c=new fR(e.color,e.groundColor,e.intensity);break;case"LightProbe":c=new gR().fromJSON(e);break;case"SkinnedMesh":y=h(e.geometry),x=d(e.material),c=new xS(y,x),e.bindMode!==void 0&&(c.bindMode=e.bindMode),e.bindMatrix!==void 0&&c.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(c.skeleton=e.skeleton);break;case"Mesh":y=h(e.geometry),x=d(e.material),c=new Bi(y,x);break;case"InstancedMesh":y=h(e.geometry),x=d(e.material);const b=e.count,_=e.instanceMatrix,E=e.instanceColor;c=new bS(y,x,b),c.instanceMatrix=new $h(new Float32Array(_.array),16),E!==void 0&&(c.instanceColor=new $h(new Float32Array(E.array),E.itemSize));break;case"BatchedMesh":y=h(e.geometry),x=d(e.material),c=new F2(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,x),c.geometry=y,c.perObjectFrustumCulled=e.perObjectFrustumCulled,c.sortObjects=e.sortObjects,c._drawRanges=e.drawRanges,c._reservedRanges=e.reservedRanges,c._geometryInfo=e.geometryInfo.map(R=>{let T=null,M=null;return R.boundingBox!==void 0&&(T=new ks().fromJSON(R.boundingBox)),R.boundingSphere!==void 0&&(M=new Rs().fromJSON(R.boundingSphere)),{...R,boundingBox:T,boundingSphere:M}}),c._instanceInfo=e.instanceInfo,c._availableInstanceIds=e._availableInstanceIds,c._availableGeometryIds=e._availableGeometryIds,c._nextIndexStart=e.nextIndexStart,c._nextVertexStart=e.nextVertexStart,c._geometryCount=e.geometryCount,c._maxInstanceCount=e.maxInstanceCount,c._maxVertexCount=e.maxVertexCount,c._maxIndexCount=e.maxIndexCount,c._geometryInitialized=e.geometryInitialized,c._matricesTexture=p(e.matricesTexture.uuid),c._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(c._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(c.boundingSphere=new Rs().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(c.boundingBox=new ks().fromJSON(e.boundingBox));break;case"LOD":c=new P2;break;case"Line":c=new oc(h(e.geometry),d(e.material));break;case"LineLoop":c=new _S(h(e.geometry),d(e.material));break;case"LineSegments":c=new To(h(e.geometry),d(e.material));break;case"PointCloud":case"Points":c=new AS(h(e.geometry),d(e.material));break;case"Sprite":c=new I2(d(e.material));break;case"Group":c=new sc;break;case"Bone":c=new _b;break;default:c=new Pn}if(c.uuid=e.uuid,e.name!==void 0&&(c.name=e.name),e.matrix!==void 0?(c.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(c.matrixAutoUpdate=e.matrixAutoUpdate),c.matrixAutoUpdate&&c.matrix.decompose(c.position,c.quaternion,c.scale)):(e.position!==void 0&&c.position.fromArray(e.position),e.rotation!==void 0&&c.rotation.fromArray(e.rotation),e.quaternion!==void 0&&c.quaternion.fromArray(e.quaternion),e.scale!==void 0&&c.scale.fromArray(e.scale)),e.up!==void 0&&c.up.fromArray(e.up),e.castShadow!==void 0&&(c.castShadow=e.castShadow),e.receiveShadow!==void 0&&(c.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(c.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(c.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(c.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(c.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&c.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(c.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(c.visible=e.visible),e.frustumCulled!==void 0&&(c.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(c.renderOrder=e.renderOrder),e.userData!==void 0&&(c.userData=e.userData),e.layers!==void 0&&(c.layers.mask=e.layers),e.children!==void 0){const b=e.children;for(let _=0;_<b.length;_++)c.add(this.parseObject(b[_],t,n,s,r))}if(e.animations!==void 0){const b=e.animations;for(let _=0;_<b.length;_++){const E=b[_];c.animations.push(r[E])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(c.autoUpdate=e.autoUpdate);const b=e.levels;for(let _=0;_<b.length;_++){const E=b[_],R=c.getObjectByProperty("uuid",E.object);R!==void 0&&c.addLevel(R,E.distance,E.hysteresis)}}return c}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=t[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,s=e.getObjectByProperty("uuid",n);s!==void 0?t.target=s:t.target=new Pn}})}}const wO={UVMapping:xu,CubeReflectionMapping:yl,CubeRefractionMapping:bu,EquirectangularReflectionMapping:ep,EquirectangularRefractionMapping:Sg,CubeUVReflectionMapping:yp},RT={RepeatWrapping:_u,ClampToEdgeWrapping:Ki,MirroredRepeatWrapping:tp},BT={NearestFilter:Cs,NearestMipmapNearestFilter:lb,NearestMipmapLinearFilter:zh,LinearFilter:Kn,LinearMipmapNearestFilter:kd,LinearMipmapLinearFilter:Or},AA=new WeakMap;class xR extends Xs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,c=pl.get(`image-bitmap:${e}`);if(c!==void 0){if(r.manager.itemStart(e),c.then){c.then(p=>{if(AA.has(c)===!0)s&&s(AA.get(c)),r.manager.itemError(e),r.manager.itemEnd(e);else return t&&t(p),r.manager.itemEnd(e),p});return}return setTimeout(function(){t&&t(c),r.manager.itemEnd(e)},0),c}const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader,h.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const d=fetch(e,h).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(p){return pl.add(`image-bitmap:${e}`,p),t&&t(p),r.manager.itemEnd(e),p}).catch(function(p){s&&s(p),AA.set(d,p),pl.remove(`image-bitmap:${e}`),r.manager.itemError(e),r.manager.itemEnd(e)});pl.add(`image-bitmap:${e}`,d),r.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let Ay;class GS{static getContext(){return Ay===void 0&&(Ay=new(window.AudioContext||window.webkitAudioContext)),Ay}static setContext(e){Ay=e}}class RO extends Xs{constructor(e){super(e)}load(e,t,n,s){const r=this,c=new Vs(this.manager);c.setResponseType("arraybuffer"),c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(d){try{const p=d.slice(0);GS.getContext().decodeAudioData(p,function(x){t(x)}).catch(h)}catch(p){h(p)}},n,s);function h(d){s?s(d):console.error(d),r.manager.itemError(e)}}}const NT=new Jt,DT=new Jt,Mh=new Jt;class BO{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ri,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ri,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Mh.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,c=t.near*Math.tan(Kh*t.fov*.5)/t.zoom;let h,d;DT.elements[12]=-s,NT.elements[12]=s,h=-c*t.aspect+r,d=c*t.aspect+r,Mh.elements[0]=2*t.near/(d-h),Mh.elements[8]=(d+h)/(d-h),this.cameraL.projectionMatrix.copy(Mh),h=-c*t.aspect-r,d=c*t.aspect-r,Mh.elements[0]=2*t.near/(d-h),Mh.elements[8]=(d+h)/(d-h),this.cameraR.projectionMatrix.copy(Mh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(DT),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(NT)}}class bR extends Ri{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class jS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Eh=new K,SA=new ws,NO=new K,Th=new K,Ch=new K;class DO extends Pn{constructor(){super(),this.type="AudioListener",this.context=GS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new jS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Eh,SA,NO),Th.set(0,0,-1).applyQuaternion(SA),Ch.set(0,1,0).applyQuaternion(SA),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Eh.x,n),t.positionY.linearRampToValueAtTime(Eh.y,n),t.positionZ.linearRampToValueAtTime(Eh.z,n),t.forwardX.linearRampToValueAtTime(Th.x,n),t.forwardY.linearRampToValueAtTime(Th.y,n),t.forwardZ.linearRampToValueAtTime(Th.z,n),t.upX.linearRampToValueAtTime(Ch.x,n),t.upY.linearRampToValueAtTime(Ch.y,n),t.upZ.linearRampToValueAtTime(Ch.z,n)}else t.setPosition(Eh.x,Eh.y,Eh.z),t.setOrientation(Th.x,Th.y,Th.z,Ch.x,Ch.y,Ch.z)}}class _R extends Pn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const wh=new K,UT=new ws,UO=new K,Rh=new K;class OO extends _R{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(wh,UT,UO),Rh.set(0,0,1).applyQuaternion(UT);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(wh.x,n),t.positionY.linearRampToValueAtTime(wh.y,n),t.positionZ.linearRampToValueAtTime(wh.z,n),t.orientationX.linearRampToValueAtTime(Rh.x,n),t.orientationY.linearRampToValueAtTime(Rh.y,n),t.orientationZ.linearRampToValueAtTime(Rh.z,n)}else t.setPosition(wh.x,wh.y,wh.z),t.setOrientation(Rh.x,Rh.y,Rh.z)}}class LO{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class AR{constructor(e,t,n){this.binding=e,this.valueSize=n;let s,r,c;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,s=this.valueSize,r=e*s+s;let c=this.cumulativeWeight;if(c===0){for(let h=0;h!==s;++h)n[r+h]=n[h];c=t}else{c+=t;const h=t/c;this._mixBufferRegion(n,r,0,h,s)}this.cumulativeWeight=c}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,s=e*t+t,r=this.cumulativeWeight,c=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const d=t*this._origIndex;this._mixBufferRegion(n,s,d,1-r,t)}c>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*t,1,t);for(let d=t,p=t+t;d!==p;++d)if(n[d]!==n[d+t]){h.setValue(n,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,s=n*this._origIndex;e.getValue(t,s);for(let r=n,c=s;r!==c;++r)t[r]=t[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,s,r){if(s>=.5)for(let c=0;c!==r;++c)e[t+c]=e[n+c]}_slerp(e,t,n,s){ws.slerpFlat(e,t,e,t,e,n,s)}_slerpAdditive(e,t,n,s,r){const c=this._workIndex*r;ws.multiplyQuaternionsFlat(e,c,e,t,e,n),ws.slerpFlat(e,t,e,t,e,c,s)}_lerp(e,t,n,s,r){const c=1-s;for(let h=0;h!==r;++h){const d=t+h;e[d]=e[d]*c+e[n+h]*s}}_lerpAdditive(e,t,n,s,r){for(let c=0;c!==r;++c){const h=t+c;e[h]=e[h]+e[n+c]*s}}}const kS="\\[\\]\\.:\\/",IO=new RegExp("["+kS+"]","g"),VS="[^"+kS+"]",PO="[^"+kS.replace("\\.","")+"]",FO=/((?:WC+[\/:])*)/.source.replace("WC",VS),HO=/(WCOD+)?/.source.replace("WCOD",PO),zO=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",VS),GO=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",VS),jO=new RegExp("^"+FO+HO+zO+GO+"$"),kO=["material","materials","bones","map"];class VO{constructor(e,t,n){const s=n||zn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class zn{constructor(e,t,n){this.path=t,this.parsedPath=n||zn.parseTrackName(t),this.node=zn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new zn.Composite(e,t,n):new zn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(IO,"")}static parseTrackName(e){const t=jO.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);kO.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let c=0;c<r.length;c++){const h=r[c];if(h.name===t||h.uuid===t)return h;const d=n(h.children);if(d)return d}return null},s=n(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)e[t++]=n[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=zn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let p=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let y=0;y<e.length;y++)if(e[y].name===p){p=y;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(p!==void 0){if(e[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const c=e[s];if(c===void 0){const p=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+s+" but it wasn't found.",e);return}let h=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?h=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}d=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=r}else c.fromArray!==void 0&&c.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(d=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}zn.Composite=VO;zn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};zn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};zn.prototype.GetterByBindingType=[zn.prototype._getValue_direct,zn.prototype._getValue_array,zn.prototype._getValue_arrayElement,zn.prototype._getValue_toArray];zn.prototype.SetterByBindingTypeAndVersioning=[[zn.prototype._setValue_direct,zn.prototype._setValue_direct_setNeedsUpdate,zn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[zn.prototype._setValue_array,zn.prototype._setValue_array_setNeedsUpdate,zn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[zn.prototype._setValue_arrayElement,zn.prototype._setValue_arrayElement_setNeedsUpdate,zn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[zn.prototype._setValue_fromArray,zn.prototype._setValue_fromArray_setNeedsUpdate,zn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class XO{constructor(){this.isAnimationObjectGroup=!0,this.uuid=cr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,s=arguments.length;n!==s;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,c=r.length;let h,d=e.length,p=this.nCachedObjects_;for(let y=0,x=arguments.length;y!==x;++y){const b=arguments[y],_=b.uuid;let E=t[_];if(E===void 0){E=d++,t[_]=E,e.push(b);for(let R=0,T=c;R!==T;++R)r[R].push(new zn(b,n[R],s[R]))}else if(E<p){h=e[E];const R=--p,T=e[R];t[T.uuid]=E,e[E]=T,t[_]=R,e[R]=b;for(let M=0,B=c;M!==B;++M){const N=r[M],D=N[R];let L=N[E];N[E]=D,L===void 0&&(L=new zn(b,n[M],s[M])),N[R]=L}}else e[E]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const d=arguments[c],p=d.uuid,y=t[p];if(y!==void 0&&y>=r){const x=r++,b=e[x];t[b.uuid]=y,e[y]=b,t[p]=x,e[x]=d;for(let _=0,E=s;_!==E;++_){const R=n[_],T=R[x],M=R[y];R[y]=T,R[x]=M}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,c=e.length;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],y=p.uuid,x=t[y];if(x!==void 0)if(delete t[y],x<r){const b=--r,_=e[b],E=--c,R=e[E];t[_.uuid]=x,e[x]=_,t[R.uuid]=b,e[b]=R,e.pop();for(let T=0,M=s;T!==M;++T){const B=n[T],N=B[b],D=B[E];B[x]=N,B[b]=D,B.pop()}}else{const b=--c,_=e[b];b>0&&(t[_.uuid]=x),e[x]=_,e.pop();for(let E=0,R=s;E!==R;++E){const T=n[E];T[x]=T[b],T.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let s=n[e];const r=this._bindings;if(s!==void 0)return r[s];const c=this._paths,h=this._parsedPaths,d=this._objects,p=d.length,y=this.nCachedObjects_,x=new Array(p);s=r.length,n[e]=s,c.push(e),h.push(t),r.push(x);for(let b=y,_=d.length;b!==_;++b){const E=d[b];x[b]=new zn(E,e,t)}return x}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const s=this._paths,r=this._parsedPaths,c=this._bindings,h=c.length-1,d=c[h],p=e[h];t[p]=n,c[n]=d,c.pop(),r[n]=r[h],r.pop(),s[n]=s[h],s.pop()}}}class SR{constructor(e,t,n=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=s;const r=t.tracks,c=r.length,h=new Array(c),d={endingStart:Gh,endingEnd:Gh};for(let p=0;p!==c;++p){const y=r[p].createInterpolant(null);h[p]=y,y.settings=d}this._interpolantSettings=d,this._interpolants=h,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=p2,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const s=this._clip.duration,r=e._clip.duration,c=r/s,h=s/r;e.warp(1,c,t),this.warp(h,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const s=this._mixer,r=s.time,c=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=s._lendControlInterpolant(),this._timeScaleInterpolant=h);const d=h.parameterPositions,p=h.sampleValues;return d[0]=r,d[1]=r+n,p[0]=e/c,p[1]=t/c,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const d=(e-r)*n;d<0||n===0?t=0:(this._startTime=null,t=n*d)}t*=this._updateTimeScale(e);const c=this._updateTime(t),h=this._updateWeight(e);if(h>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case uS:for(let y=0,x=d.length;y!==x;++y)d[y].evaluate(c),p[y].accumulateAdditive(h);break;case mb:default:for(let y=0,x=d.length;y!==x;++y)d[y].evaluate(c),p[y].accumulate(s,h)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let s=this.time+e,r=this._loopCount;const c=n===m2;if(e===0)return r===-1?s:c&&(r&1)===1?t-s:s;if(n===d2){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,c)):this._setEndings(this.repetitions===0,!0,c)),s>=t||s<0){const h=Math.floor(s/t);s-=t*h,r+=Math.abs(h);const d=this.repetitions-r;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const p=e<0;this._setEndings(p,!p,c)}else this._setEndings(!1,!1,c);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=s;if(c&&(r&1)===1)return t-s}return s}_setEndings(e,t,n){const s=this._interpolantSettings;n?(s.endingStart=jh,s.endingEnd=jh):(e?s.endingStart=this.zeroSlopeAtStart?jh:Gh:s.endingStart=Mg,t?s.endingEnd=this.zeroSlopeAtEnd?jh:Gh:s.endingEnd=Mg)}_scheduleFading(e,t,n){const s=this._mixer,r=s.time;let c=this._weightInterpolant;c===null&&(c=s._lendControlInterpolant(),this._weightInterpolant=c);const h=c.parameterPositions,d=c.sampleValues;return h[0]=r,d[0]=t,h[1]=r+e,d[1]=n,this}}const YO=new Float32Array(1);class qO extends bl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,s=e._clip.tracks,r=s.length,c=e._propertyBindings,h=e._interpolants,d=n.uuid,p=this._bindingsByRootAndName;let y=p[d];y===void 0&&(y={},p[d]=y);for(let x=0;x!==r;++x){const b=s[x],_=b.name;let E=y[_];if(E!==void 0)++E.referenceCount,c[x]=E;else{if(E=c[x],E!==void 0){E._cacheIndex===null&&(++E.referenceCount,this._addInactiveBinding(E,d,_));continue}const R=t&&t._propertyBindings[x].binding.parsedPath;E=new AR(zn.create(n,_,R),b.ValueTypeName,b.getValueSize()),++E.referenceCount,this._addInactiveBinding(E,d,_),c[x]=E}h[x].resultBuffer=E.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,n)}const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const s=this._actions,r=this._actionsByClip;let c=r[t];if(c===void 0)c={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=c;else{const h=c.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=s.length,s.push(e),c.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],s=e._cacheIndex;n._cacheIndex=s,t[s]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,c=this._actionsByClip,h=c[r],d=h.knownActions,p=d[d.length-1],y=e._byClipCacheIndex;p._byClipCacheIndex=y,d[y]=p,d.pop(),e._byClipCacheIndex=null;const x=h.actionByRoot,b=(e._localRoot||this._root).uuid;delete x[b],d.length===0&&delete c[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const s=this._bindingsByRootAndName,r=this._bindings;let c=s[t];c===void 0&&(c={},s[t]=c),c[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,s=n.rootNode.uuid,r=n.path,c=this._bindingsByRootAndName,h=c[s],d=t[t.length-1],p=e._cacheIndex;d._cacheIndex=p,t[p]=d,t.pop(),delete h[r],Object.keys(h).length===0&&delete c[s]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new OS(new Float32Array(2),new Float32Array(2),1,YO),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const s=t||this._root,r=s.uuid;let c=typeof e=="string"?dp.findByName(s,e):e;const h=c!==null?c.uuid:e,d=this._actionsByClip[h];let p=null;if(n===void 0&&(c!==null?n=c.blendMode:n=mb),d!==void 0){const x=d.actionByRoot[r];if(x!==void 0&&x.blendMode===n)return x;p=d.knownActions[0],c===null&&(c=p._clip)}if(c===null)return null;const y=new SR(this,c,t,n);return this._bindAction(y,p),this._addInactiveAction(y,h,r),y}existingAction(e,t){const n=t||this._root,s=n.uuid,r=typeof e=="string"?dp.findByName(n,e):e,c=r?r.uuid:e,h=this._actionsByClip[c];return h!==void 0&&h.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,s=this.time+=e,r=Math.sign(e),c=this._accuIndex^=1;for(let p=0;p!==n;++p)t[p]._update(s,e,r,c);const h=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)h[p].apply(c);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const c=r.knownActions;for(let h=0,d=c.length;h!==d;++h){const p=c[h];this._deactivateAction(p);const y=p._cacheIndex,x=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,x._cacheIndex=y,t[y]=x,t.pop(),this._removeInactiveBindingsForAction(p)}delete s[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const c in n){const h=n[c].actionByRoot,d=h[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const c in r){const h=r[c];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class WO extends pS{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new vb(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class XS{constructor(e){this.value=e}clone(){return new XS(this.value.clone===void 0?this.value:this.value.clone())}}let JO=0;class KO extends bl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:JO++}),this.name="",this.usage=Tg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,s=t.length;n<s;n++){const r=Array.isArray(t[n])?t[n]:[t[n]];for(let c=0;c<r.length;c++)this.uniforms.push(r[c].clone())}return this}clone(){return new this.constructor().copy(this)}}class ZO extends Kg{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class QO{constructor(e,t,n,s,r,c=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=s,this.count=r,this.normalized=c,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const OT=new Jt;class YS{constructor(e,t,n=0,s=1/0){this.ray=new lf(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new up,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return OT.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(OT),this}intersectObject(e,t=!0,n=[]){return C1(e,this,n,t),n.sort(LT),n}intersectObjects(e,t=!0,n=[]){for(let s=0,r=e.length;s<r;s++)C1(e[s],this,n,t);return n.sort(LT),n}}function LT(i,e){return i.distance-e.distance}function C1(i,e,t,n){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let c=0,h=r.length;c<h;c++)C1(r[c],e,t,!0)}}class $O{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=eL.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function eL(){this._document.hidden===!1&&this.reset()}class w1{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=nn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(nn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class tL{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class qS{constructor(e,t,n,s){qS.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,s){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=s,this}}const IT=new Ye;class nL{constructor(e=new Ye(1/0,1/0),t=new Ye(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=IT.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,IT).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const PT=new K,Sy=new K,Dd=new K,Ud=new K,MA=new K,iL=new K,sL=new K;class aL{constructor(e=new K,t=new K){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){PT.subVectors(e,this.start),Sy.subVectors(this.end,this.start);const n=Sy.dot(Sy);let r=Sy.dot(PT)/n;return t&&(r=nn(r,0,1)),r}closestPointToPoint(e,t,n){const s=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(s).add(this.start)}distanceSqToLine3(e,t=iL,n=sL){const s=10000000000000001e-32;let r,c;const h=this.start,d=e.start,p=this.end,y=e.end;Dd.subVectors(p,h),Ud.subVectors(y,d),MA.subVectors(h,d);const x=Dd.dot(Dd),b=Ud.dot(Ud),_=Ud.dot(MA);if(x<=s&&b<=s)return t.copy(h),n.copy(d),t.sub(n),t.dot(t);if(x<=s)r=0,c=_/b,c=nn(c,0,1);else{const E=Dd.dot(MA);if(b<=s)c=0,r=nn(-E/x,0,1);else{const R=Dd.dot(Ud),T=x*b-R*R;T!==0?r=nn((R*_-E*b)/T,0,1):r=0,c=(R*r+_)/b,c<0?(c=0,r=nn(-E/x,0,1)):c>1&&(c=1,r=nn((R-E)/x,0,1))}}return t.copy(h).add(Dd.multiplyScalar(r)),n.copy(d).add(Ud.multiplyScalar(c)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const FT=new K;class rL extends Pn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new pn,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let c=0,h=1,d=32;c<d;c++,h++){const p=c/d*Math.PI*2,y=h/d*Math.PI*2;s.push(Math.cos(p),Math.sin(p),1,Math.cos(y),Math.sin(y),1)}n.setAttribute("position",new It(s,3));const r=new sa({fog:!1,toneMapped:!1});this.cone=new To(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),FT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(FT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ou=new K,My=new Jt,EA=new Jt;class oL extends To{constructor(e){const t=MR(e),n=new pn,s=[],r=[];for(let p=0;p<t.length;p++){const y=t[p];y.parent&&y.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(0,0,0),r.push(0,0,0))}n.setAttribute("position",new It(s,3)),n.setAttribute("color",new It(r,3));const c=new sa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const h=new Et(255),d=new Et(65280);this.setColors(h,d)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,s=n.getAttribute("position");EA.copy(this.root.matrixWorld).invert();for(let r=0,c=0;r<t.length;r++){const h=t[r];h.parent&&h.parent.isBone&&(My.multiplyMatrices(EA,h.matrixWorld),ou.setFromMatrixPosition(My),s.setXYZ(c,ou.x,ou.y,ou.z),My.multiplyMatrices(EA,h.parent.matrixWorld),ou.setFromMatrixPosition(My),s.setXYZ(c+1,ou.x,ou.y,ou.z),c+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const s=this.geometry.getAttribute("color");for(let r=0;r<s.count;r+=2)s.setXYZ(r,e.r,e.g,e.b),s.setXYZ(r+1,t.r,t.g,t.b);return s.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function MR(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...MR(i.children[t]));return e}class lL extends Bi{constructor(e,t,n){const s=new n0(t,4,2),r=new ka({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const cL=new K,HT=new Et,zT=new Et;class uL extends Pn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new t0(t);s.rotateY(Math.PI*.5),this.material=new ka({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),c=new Float32Array(r.count*3);s.setAttribute("color",new jn(c,3)),this.add(new Bi(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");HT.copy(this.light.color),zT.copy(this.light.groundColor);for(let n=0,s=t.count;n<s;n++){const r=n<s/2?HT:zT;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(cL.setFromMatrixPosition(this.light.matrixWorld).negate())}}class hL extends To{constructor(e=10,t=10,n=4473924,s=8947848){n=new Et(n),s=new Et(s);const r=t/2,c=e/t,h=e/2,d=[],p=[];for(let b=0,_=0,E=-h;b<=t;b++,E+=c){d.push(-h,0,E,h,0,E),d.push(E,0,-h,E,0,h);const R=b===r?n:s;R.toArray(p,_),_+=3,R.toArray(p,_),_+=3,R.toArray(p,_),_+=3,R.toArray(p,_),_+=3}const y=new pn;y.setAttribute("position",new It(d,3)),y.setAttribute("color",new It(p,3));const x=new sa({vertexColors:!0,toneMapped:!1});super(y,x),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class fL extends To{constructor(e=10,t=16,n=8,s=64,r=4473924,c=8947848){r=new Et(r),c=new Et(c);const h=[],d=[];if(t>1)for(let x=0;x<t;x++){const b=x/t*(Math.PI*2),_=Math.sin(b)*e,E=Math.cos(b)*e;h.push(0,0,0),h.push(_,0,E);const R=x&1?r:c;d.push(R.r,R.g,R.b),d.push(R.r,R.g,R.b)}for(let x=0;x<n;x++){const b=x&1?r:c,_=e-e/n*x;for(let E=0;E<s;E++){let R=E/s*(Math.PI*2),T=Math.sin(R)*_,M=Math.cos(R)*_;h.push(T,0,M),d.push(b.r,b.g,b.b),R=(E+1)/s*(Math.PI*2),T=Math.sin(R)*_,M=Math.cos(R)*_,h.push(T,0,M),d.push(b.r,b.g,b.b)}}const p=new pn;p.setAttribute("position",new It(h,3)),p.setAttribute("color",new It(d,3));const y=new sa({vertexColors:!0,toneMapped:!1});super(p,y),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const GT=new K,Ey=new K,jT=new K;class dL extends Pn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new pn;s.setAttribute("position",new It([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new sa({fog:!1,toneMapped:!1});this.lightPlane=new oc(s,r),this.add(this.lightPlane),s=new pn,s.setAttribute("position",new It([0,0,0,0,0,1],3)),this.targetLine=new oc(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),GT.setFromMatrixPosition(this.light.matrixWorld),Ey.setFromMatrixPosition(this.light.target.matrixWorld),jT.subVectors(Ey,GT),this.lightPlane.lookAt(Ey),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ey),this.targetLine.scale.z=jT.length()}}const Ty=new K,ji=new yb;class pL extends To{constructor(e){const t=new pn,n=new sa({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],c={};h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4");function h(E,R){d(E),d(R)}function d(E){s.push(0,0,0),r.push(0,0,0),c[E]===void 0&&(c[E]=[]),c[E].push(s.length/3-1)}t.setAttribute("position",new It(s,3)),t.setAttribute("color",new It(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=c,this.update();const p=new Et(16755200),y=new Et(16711680),x=new Et(43775),b=new Et(16777215),_=new Et(3355443);this.setColors(p,y,x,b,_)}setColors(e,t,n,s,r){const h=this.geometry.getAttribute("color");return h.setXYZ(0,e.r,e.g,e.b),h.setXYZ(1,e.r,e.g,e.b),h.setXYZ(2,e.r,e.g,e.b),h.setXYZ(3,e.r,e.g,e.b),h.setXYZ(4,e.r,e.g,e.b),h.setXYZ(5,e.r,e.g,e.b),h.setXYZ(6,e.r,e.g,e.b),h.setXYZ(7,e.r,e.g,e.b),h.setXYZ(8,e.r,e.g,e.b),h.setXYZ(9,e.r,e.g,e.b),h.setXYZ(10,e.r,e.g,e.b),h.setXYZ(11,e.r,e.g,e.b),h.setXYZ(12,e.r,e.g,e.b),h.setXYZ(13,e.r,e.g,e.b),h.setXYZ(14,e.r,e.g,e.b),h.setXYZ(15,e.r,e.g,e.b),h.setXYZ(16,e.r,e.g,e.b),h.setXYZ(17,e.r,e.g,e.b),h.setXYZ(18,e.r,e.g,e.b),h.setXYZ(19,e.r,e.g,e.b),h.setXYZ(20,e.r,e.g,e.b),h.setXYZ(21,e.r,e.g,e.b),h.setXYZ(22,e.r,e.g,e.b),h.setXYZ(23,e.r,e.g,e.b),h.setXYZ(24,t.r,t.g,t.b),h.setXYZ(25,t.r,t.g,t.b),h.setXYZ(26,t.r,t.g,t.b),h.setXYZ(27,t.r,t.g,t.b),h.setXYZ(28,t.r,t.g,t.b),h.setXYZ(29,t.r,t.g,t.b),h.setXYZ(30,t.r,t.g,t.b),h.setXYZ(31,t.r,t.g,t.b),h.setXYZ(32,n.r,n.g,n.b),h.setXYZ(33,n.r,n.g,n.b),h.setXYZ(34,n.r,n.g,n.b),h.setXYZ(35,n.r,n.g,n.b),h.setXYZ(36,n.r,n.g,n.b),h.setXYZ(37,n.r,n.g,n.b),h.setXYZ(38,s.r,s.g,s.b),h.setXYZ(39,s.r,s.g,s.b),h.setXYZ(40,r.r,r.g,r.b),h.setXYZ(41,r.r,r.g,r.b),h.setXYZ(42,r.r,r.g,r.b),h.setXYZ(43,r.r,r.g,r.b),h.setXYZ(44,r.r,r.g,r.b),h.setXYZ(45,r.r,r.g,r.b),h.setXYZ(46,r.r,r.g,r.b),h.setXYZ(47,r.r,r.g,r.b),h.setXYZ(48,r.r,r.g,r.b),h.setXYZ(49,r.r,r.g,r.b),h.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,s=1;let r,c;if(ji.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)r=1,c=0;else if(this.camera.coordinateSystem===lr)r=-1,c=1;else if(this.camera.coordinateSystem===lp)r=0,c=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Ji("c",t,e,ji,0,0,r),Ji("t",t,e,ji,0,0,c),Ji("n1",t,e,ji,-n,-s,r),Ji("n2",t,e,ji,n,-s,r),Ji("n3",t,e,ji,-n,s,r),Ji("n4",t,e,ji,n,s,r),Ji("f1",t,e,ji,-n,-s,c),Ji("f2",t,e,ji,n,-s,c),Ji("f3",t,e,ji,-n,s,c),Ji("f4",t,e,ji,n,s,c),Ji("u1",t,e,ji,n*.7,s*1.1,r),Ji("u2",t,e,ji,-n*.7,s*1.1,r),Ji("u3",t,e,ji,0,s*2,r),Ji("cf1",t,e,ji,-n,0,c),Ji("cf2",t,e,ji,n,0,c),Ji("cf3",t,e,ji,0,-s,c),Ji("cf4",t,e,ji,0,s,c),Ji("cn1",t,e,ji,-n,0,r),Ji("cn2",t,e,ji,n,0,r),Ji("cn3",t,e,ji,0,-s,r),Ji("cn4",t,e,ji,0,s,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ji(i,e,t,n,s,r,c){Ty.set(s,r,c).unproject(n);const h=e[i];if(h!==void 0){const d=t.getAttribute("position");for(let p=0,y=h.length;p<y;p++)d.setXYZ(h[p],Ty.x,Ty.y,Ty.z)}}const Cy=new ks;class mL extends To{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),r=new pn;r.setIndex(new jn(n,1)),r.setAttribute("position",new jn(s,3)),super(r,new sa({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Cy.setFromObject(this.object),Cy.isEmpty())return;const e=Cy.min,t=Cy.max,n=this.geometry.attributes.position,s=n.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class gL extends To{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new pn;r.setIndex(new jn(n,1)),r.setAttribute("position",new It(s,3)),super(r,new sa({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class vL extends oc{constructor(e,t=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],c=new pn;c.setAttribute("position",new It(r,3)),c.computeBoundingSphere(),super(c,new sa({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const h=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new pn;d.setAttribute("position",new It(h,3)),d.computeBoundingSphere(),this.add(new Bi(d,new ka({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const kT=new K;let wy,TA;class yL extends Pn{constructor(e=new K(0,0,1),t=new K(0,0,0),n=1,s=16776960,r=n*.2,c=r*.2){super(),this.type="ArrowHelper",wy===void 0&&(wy=new pn,wy.setAttribute("position",new It([0,0,0,0,1,0],3)),TA=new $g(.5,1,5,1),TA.translate(0,-.5,0)),this.position.copy(t),this.line=new oc(wy,new sa({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bi(TA,new ka({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,c)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{kT.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(kT,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class xL extends To{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new pn;s.setAttribute("position",new It(t,3)),s.setAttribute("color",new It(n,3));const r=new sa({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,n){const s=new Et,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class bL{constructor(){this.type="ShapePath",this.color=new Et,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new jx,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,s){return this.currentPath.quadraticCurveTo(e,t,n,s),this}bezierCurveTo(e,t,n,s,r,c){return this.currentPath.bezierCurveTo(e,t,n,s,r,c),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const B=[];for(let N=0,D=M.length;N<D;N++){const L=M[N],I=new Zh;I.curves=L.curves,B.push(I)}return B}function n(M,B){const N=B.length;let D=!1;for(let L=N-1,I=0;I<N;L=I++){let j=B[L],k=B[I],O=k.x-j.x,P=k.y-j.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(j=B[I],O=-O,k=B[L],P=-P),M.y<j.y||M.y>k.y)continue;if(M.y===j.y){if(M.x===j.x)return!0}else{const Y=P*(M.x-j.x)-O*(M.y-j.y);if(Y===0)return!0;if(Y<0)continue;D=!D}}else{if(M.y!==j.y)continue;if(k.x<=M.x&&M.x<=j.x||j.x<=M.x&&M.x<=k.x)return!0}}return D}const s=bo.isClockWise,r=this.subPaths;if(r.length===0)return[];let c,h,d;const p=[];if(r.length===1)return h=r[0],d=new Zh,d.curves=h.curves,p.push(d),p;let y=!s(r[0].getPoints());y=e?!y:y;const x=[],b=[];let _=[],E=0,R;b[E]=void 0,_[E]=[];for(let M=0,B=r.length;M<B;M++)h=r[M],R=h.getPoints(),c=s(R),c=e?!c:c,c?(!y&&b[E]&&E++,b[E]={s:new Zh,p:R},b[E].s.curves=h.curves,y&&E++,_[E]=[]):_[E].push({h,p:R[0]});if(!b[0])return t(r);if(b.length>1){let M=!1,B=0;for(let N=0,D=b.length;N<D;N++)x[N]=[];for(let N=0,D=b.length;N<D;N++){const L=_[N];for(let I=0;I<L.length;I++){const j=L[I];let k=!0;for(let O=0;O<b.length;O++)n(j.p,b[O].p)&&(N!==O&&B++,k?(k=!1,x[O].push(j)):M=!0);k&&x[N].push(j)}}B>0&&M===!1&&(_=x)}let T;for(let M=0,B=b.length;M<B;M++){d=b[M].s,p.push(d),T=_[M];for(let N=0,D=T.length;N<D;N++)d.holes.push(T[N].h)}return p}}class _L extends bl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function AL(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function SL(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function ML(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function R1(i,e,t,n){const s=EL(n);switch(t){case oS:return i*e;case Yg:return i*e/s.components*s.byteLength;case qg:return i*e/s.components*s.byteLength;case cS:return i*e*2/s.components*s.byteLength;case db:return i*e*2/s.components*s.byteLength;case lS:return i*e*3/s.components*s.byteLength;case Zi:return i*e*4/s.components*s.byteLength;case pb:return i*e*4/s.components*s.byteLength;case ug:case hg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case fg:case dg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case hx:case dx:return Math.max(i,16)*Math.max(e,8)/4;case ux:case fx:return Math.max(i,8)*Math.max(e,8)/2;case px:case mx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case gx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case vx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case yx:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case xx:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case bx:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case _x:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case Ax:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case Sx:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case Mx:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case Ex:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case Tx:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case Cx:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case wx:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Rx:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Bx:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case Nx:case Dx:case Ux:return Math.ceil(i/4)*Math.ceil(e/4)*16;case Ox:case Lx:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Ix:case Px:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function EL(i){switch(i){case Ea:case cb:return{byteLength:1,components:1};case np:case ub:case Ts:return{byteLength:2,components:1};case hb:case fb:return{byteLength:2,components:4};case xl:case Xg:case Pi:return{byteLength:4,components:1};case aS:case rS:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class TL{static contain(e,t){return AL(e,t)}static cover(e,t){return SL(e,t)}static fill(e){return ML(e)}static getByteLength(e,t,n,s){return R1(e,t,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:kg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=kg);function ER(){let i=null,e=!1,t=null,n=null;function s(r,c){t(r,c),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){i=r}}}function CL(i){const e=new WeakMap;function t(h,d){const p=h.array,y=h.usage,x=p.byteLength,b=i.createBuffer();i.bindBuffer(d,b),i.bufferData(d,p,y),h.onUploadCallback();let _;if(p instanceof Float32Array)_=i.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)_=i.HALF_FLOAT;else if(p instanceof Uint16Array)h.isFloat16BufferAttribute?_=i.HALF_FLOAT:_=i.UNSIGNED_SHORT;else if(p instanceof Int16Array)_=i.SHORT;else if(p instanceof Uint32Array)_=i.UNSIGNED_INT;else if(p instanceof Int32Array)_=i.INT;else if(p instanceof Int8Array)_=i.BYTE;else if(p instanceof Uint8Array)_=i.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)_=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:b,type:_,bytesPerElement:p.BYTES_PER_ELEMENT,version:h.version,size:x}}function n(h,d,p){const y=d.array,x=d.updateRanges;if(i.bindBuffer(p,h),x.length===0)i.bufferSubData(p,0,y);else{x.sort((_,E)=>_.start-E.start);let b=0;for(let _=1;_<x.length;_++){const E=x[b],R=x[_];R.start<=E.start+E.count+1?E.count=Math.max(E.count,R.start+R.count-E.start):(++b,x[b]=R)}x.length=b+1;for(let _=0,E=x.length;_<E;_++){const R=x[_];i.bufferSubData(p,R.start*y.BYTES_PER_ELEMENT,y,R.start,R.count)}d.clearUpdateRanges()}d.onUploadCallback()}function s(h){return h.isInterleavedBufferAttribute&&(h=h.data),e.get(h)}function r(h){h.isInterleavedBufferAttribute&&(h=h.data);const d=e.get(h);d&&(i.deleteBuffer(d.buffer),e.delete(h))}function c(h,d){if(h.isInterleavedBufferAttribute&&(h=h.data),h.isGLBufferAttribute){const y=e.get(h);(!y||y.version<h.version)&&e.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}const p=e.get(h);if(p===void 0)e.set(h,t(h,d));else if(p.version<h.version){if(p.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(p.buffer,h,d),p.version=h.version}}return{get:s,remove:r,update:c}}var wL=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,RL=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,BL=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,NL=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,DL=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,UL=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,OL=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,LL=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,IL=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,PL=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,FL=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,HL=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,zL=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,GL=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,jL=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,kL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,VL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,XL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,YL=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,qL=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,WL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,JL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,KL=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,ZL=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,QL=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$L=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,eI=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,tI=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,nI=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,iI=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,sI="gl_FragColor = linearToOutputTexel( gl_FragColor );",aI=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,rI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,oI=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,lI=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,cI=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,uI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,hI=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fI=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,dI=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,pI=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,mI=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,gI=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,vI=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,yI=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xI=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,bI=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,_I=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,AI=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,SI=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,MI=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,EI=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,TI=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,CI=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,wI=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,RI=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,BI=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,NI=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,DI=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,UI=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,OI=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,LI=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,II=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,PI=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,FI=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,HI=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zI=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,GI=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,jI=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,kI=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,VI=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,XI=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,YI=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,qI=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,WI=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,JI=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,KI=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ZI=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,QI=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,$I=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,e4=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,t4=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,n4=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,i4=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,s4=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,a4=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,r4=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,o4=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,l4=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,c4=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,u4=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,h4=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,f4=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,d4=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,p4=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,m4=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,g4=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,v4=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,y4=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,x4=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,b4=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,_4=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,A4=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,S4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,M4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,E4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,T4=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const C4=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,w4=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,R4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,B4=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,N4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,D4=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,U4=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,O4=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,L4=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,I4=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,P4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,F4=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,H4=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,z4=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,G4=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,j4=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,k4=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,V4=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,X4=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Y4=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q4=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,W4=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,J4=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,K4=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Z4=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Q4=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eP=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tP=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,nP=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iP=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sP=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,aP=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rP=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,An={alphahash_fragment:wL,alphahash_pars_fragment:RL,alphamap_fragment:BL,alphamap_pars_fragment:NL,alphatest_fragment:DL,alphatest_pars_fragment:UL,aomap_fragment:OL,aomap_pars_fragment:LL,batching_pars_vertex:IL,batching_vertex:PL,begin_vertex:FL,beginnormal_vertex:HL,bsdfs:zL,iridescence_fragment:GL,bumpmap_pars_fragment:jL,clipping_planes_fragment:kL,clipping_planes_pars_fragment:VL,clipping_planes_pars_vertex:XL,clipping_planes_vertex:YL,color_fragment:qL,color_pars_fragment:WL,color_pars_vertex:JL,color_vertex:KL,common:ZL,cube_uv_reflection_fragment:QL,defaultnormal_vertex:$L,displacementmap_pars_vertex:eI,displacementmap_vertex:tI,emissivemap_fragment:nI,emissivemap_pars_fragment:iI,colorspace_fragment:sI,colorspace_pars_fragment:aI,envmap_fragment:rI,envmap_common_pars_fragment:oI,envmap_pars_fragment:lI,envmap_pars_vertex:cI,envmap_physical_pars_fragment:bI,envmap_vertex:uI,fog_vertex:hI,fog_pars_vertex:fI,fog_fragment:dI,fog_pars_fragment:pI,gradientmap_pars_fragment:mI,lightmap_pars_fragment:gI,lights_lambert_fragment:vI,lights_lambert_pars_fragment:yI,lights_pars_begin:xI,lights_toon_fragment:_I,lights_toon_pars_fragment:AI,lights_phong_fragment:SI,lights_phong_pars_fragment:MI,lights_physical_fragment:EI,lights_physical_pars_fragment:TI,lights_fragment_begin:CI,lights_fragment_maps:wI,lights_fragment_end:RI,logdepthbuf_fragment:BI,logdepthbuf_pars_fragment:NI,logdepthbuf_pars_vertex:DI,logdepthbuf_vertex:UI,map_fragment:OI,map_pars_fragment:LI,map_particle_fragment:II,map_particle_pars_fragment:PI,metalnessmap_fragment:FI,metalnessmap_pars_fragment:HI,morphinstance_vertex:zI,morphcolor_vertex:GI,morphnormal_vertex:jI,morphtarget_pars_vertex:kI,morphtarget_vertex:VI,normal_fragment_begin:XI,normal_fragment_maps:YI,normal_pars_fragment:qI,normal_pars_vertex:WI,normal_vertex:JI,normalmap_pars_fragment:KI,clearcoat_normal_fragment_begin:ZI,clearcoat_normal_fragment_maps:QI,clearcoat_pars_fragment:$I,iridescence_pars_fragment:e4,opaque_fragment:t4,packing:n4,premultiplied_alpha_fragment:i4,project_vertex:s4,dithering_fragment:a4,dithering_pars_fragment:r4,roughnessmap_fragment:o4,roughnessmap_pars_fragment:l4,shadowmap_pars_fragment:c4,shadowmap_pars_vertex:u4,shadowmap_vertex:h4,shadowmask_pars_fragment:f4,skinbase_vertex:d4,skinning_pars_vertex:p4,skinning_vertex:m4,skinnormal_vertex:g4,specularmap_fragment:v4,specularmap_pars_fragment:y4,tonemapping_fragment:x4,tonemapping_pars_fragment:b4,transmission_fragment:_4,transmission_pars_fragment:A4,uv_pars_fragment:S4,uv_pars_vertex:M4,uv_vertex:E4,worldpos_vertex:T4,background_vert:C4,background_frag:w4,backgroundCube_vert:R4,backgroundCube_frag:B4,cube_vert:N4,cube_frag:D4,depth_vert:U4,depth_frag:O4,distanceRGBA_vert:L4,distanceRGBA_frag:I4,equirect_vert:P4,equirect_frag:F4,linedashed_vert:H4,linedashed_frag:z4,meshbasic_vert:G4,meshbasic_frag:j4,meshlambert_vert:k4,meshlambert_frag:V4,meshmatcap_vert:X4,meshmatcap_frag:Y4,meshnormal_vert:q4,meshnormal_frag:W4,meshphong_vert:J4,meshphong_frag:K4,meshphysical_vert:Z4,meshphysical_frag:Q4,meshtoon_vert:$4,meshtoon_frag:eP,points_vert:tP,points_frag:nP,shadow_vert:iP,shadow_frag:sP,sprite_vert:aP,sprite_frag:rP},wt={common:{diffuse:{value:new Et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gn},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gn}},envmap:{envMap:{value:null},envMapRotation:{value:new gn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gn},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0},uvTransform:{value:new gn}},sprite:{diffuse:{value:new Et(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gn},alphaMap:{value:null},alphaMapTransform:{value:new gn},alphaTest:{value:0}}},vo={basic:{uniforms:_a([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.fog]),vertexShader:An.meshbasic_vert,fragmentShader:An.meshbasic_frag},lambert:{uniforms:_a([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new Et(0)}}]),vertexShader:An.meshlambert_vert,fragmentShader:An.meshlambert_frag},phong:{uniforms:_a([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new Et(0)},specular:{value:new Et(1118481)},shininess:{value:30}}]),vertexShader:An.meshphong_vert,fragmentShader:An.meshphong_frag},standard:{uniforms:_a([wt.common,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.roughnessmap,wt.metalnessmap,wt.fog,wt.lights,{emissive:{value:new Et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag},toon:{uniforms:_a([wt.common,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.gradientmap,wt.fog,wt.lights,{emissive:{value:new Et(0)}}]),vertexShader:An.meshtoon_vert,fragmentShader:An.meshtoon_frag},matcap:{uniforms:_a([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,{matcap:{value:null}}]),vertexShader:An.meshmatcap_vert,fragmentShader:An.meshmatcap_frag},points:{uniforms:_a([wt.points,wt.fog]),vertexShader:An.points_vert,fragmentShader:An.points_frag},dashed:{uniforms:_a([wt.common,wt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:An.linedashed_vert,fragmentShader:An.linedashed_frag},depth:{uniforms:_a([wt.common,wt.displacementmap]),vertexShader:An.depth_vert,fragmentShader:An.depth_frag},normal:{uniforms:_a([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,{opacity:{value:1}}]),vertexShader:An.meshnormal_vert,fragmentShader:An.meshnormal_frag},sprite:{uniforms:_a([wt.sprite,wt.fog]),vertexShader:An.sprite_vert,fragmentShader:An.sprite_frag},background:{uniforms:{uvTransform:{value:new gn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:An.background_vert,fragmentShader:An.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new gn}},vertexShader:An.backgroundCube_vert,fragmentShader:An.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:An.cube_vert,fragmentShader:An.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:An.equirect_vert,fragmentShader:An.equirect_frag},distanceRGBA:{uniforms:_a([wt.common,wt.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:An.distanceRGBA_vert,fragmentShader:An.distanceRGBA_frag},shadow:{uniforms:_a([wt.lights,wt.fog,{color:{value:new Et(0)},opacity:{value:1}}]),vertexShader:An.shadow_vert,fragmentShader:An.shadow_frag}};vo.physical={uniforms:_a([vo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gn},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gn},sheen:{value:0},sheenColor:{value:new Et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gn},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gn},attenuationDistance:{value:0},attenuationColor:{value:new Et(0)},specularColor:{value:new Et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gn},anisotropyVector:{value:new Ye},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gn}}]),vertexShader:An.meshphysical_vert,fragmentShader:An.meshphysical_frag};const Ry={r:0,b:0,g:0},Bh=new ur,oP=new Jt;function lP(i,e,t,n,s,r,c){const h=new Et(0);let d=r===!0?0:1,p,y,x=null,b=0,_=null;function E(N){let D=N.isScene===!0?N.background:null;return D&&D.isTexture&&(D=(N.backgroundBlurriness>0?t:e).get(D)),D}function R(N){let D=!1;const L=E(N);L===null?M(h,d):L&&L.isColor&&(M(L,1),D=!0);const I=i.xr.getEnvironmentBlendMode();I==="additive"?n.buffers.color.setClear(0,0,0,1,c):I==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,c),(i.autoClear||D)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function T(N,D){const L=E(D);L&&(L.isCubeTexture||L.mapping===yp)?(y===void 0&&(y=new Bi(new cf(1,1,1),new Va({name:"BackgroundCubeMaterial",uniforms:hp(vo.backgroundCube.uniforms),vertexShader:vo.backgroundCube.vertexShader,fragmentShader:vo.backgroundCube.fragmentShader,side:Ma,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),y.geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(I,j,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(y)),Bh.copy(D.backgroundRotation),Bh.x*=-1,Bh.y*=-1,Bh.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(Bh.y*=-1,Bh.z*=-1),y.material.uniforms.envMap.value=L,y.material.uniforms.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,y.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,y.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,y.material.uniforms.backgroundRotation.value.setFromMatrix4(oP.makeRotationFromEuler(Bh)),y.material.toneMapped=In.getTransfer(L.colorSpace)!==oi,(x!==L||b!==L.version||_!==i.toneMapping)&&(y.material.needsUpdate=!0,x=L,b=L.version,_=i.toneMapping),y.layers.enableAll(),N.unshift(y,y.geometry,y.material,0,0,null)):L&&L.isTexture&&(p===void 0&&(p=new Bi(new Eu(2,2),new Va({name:"BackgroundMaterial",uniforms:hp(vo.background.uniforms),vertexShader:vo.background.vertexShader,fragmentShader:vo.background.fragmentShader,side:vl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(p)),p.material.uniforms.t2D.value=L,p.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,p.material.toneMapped=In.getTransfer(L.colorSpace)!==oi,L.matrixAutoUpdate===!0&&L.updateMatrix(),p.material.uniforms.uvTransform.value.copy(L.matrix),(x!==L||b!==L.version||_!==i.toneMapping)&&(p.material.needsUpdate=!0,x=L,b=L.version,_=i.toneMapping),p.layers.enableAll(),N.unshift(p,p.geometry,p.material,0,0,null))}function M(N,D){N.getRGB(Ry,D2(i)),n.buffers.color.setClear(Ry.r,Ry.g,Ry.b,D,c)}function B(){y!==void 0&&(y.geometry.dispose(),y.material.dispose(),y=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return h},setClearColor:function(N,D=1){h.set(N),d=D,M(h,d)},getClearAlpha:function(){return d},setClearAlpha:function(N){d=N,M(h,d)},render:R,addToRenderList:T,dispose:B}}function cP(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=b(null);let r=s,c=!1;function h(P,Y,ie,re,de){let pe=!1;const H=x(re,ie,Y);r!==H&&(r=H,p(r.object)),pe=_(P,re,ie,de),pe&&E(P,re,ie,de),de!==null&&e.update(de,i.ELEMENT_ARRAY_BUFFER),(pe||c)&&(c=!1,D(P,Y,ie,re),de!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(de).buffer))}function d(){return i.createVertexArray()}function p(P){return i.bindVertexArray(P)}function y(P){return i.deleteVertexArray(P)}function x(P,Y,ie){const re=ie.wireframe===!0;let de=n[P.id];de===void 0&&(de={},n[P.id]=de);let pe=de[Y.id];pe===void 0&&(pe={},de[Y.id]=pe);let H=pe[re];return H===void 0&&(H=b(d()),pe[re]=H),H}function b(P){const Y=[],ie=[],re=[];for(let de=0;de<t;de++)Y[de]=0,ie[de]=0,re[de]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:ie,attributeDivisors:re,object:P,attributes:{},index:null}}function _(P,Y,ie,re){const de=r.attributes,pe=Y.attributes;let H=0;const Z=ie.getAttributes();for(const $ in Z)if(Z[$].location>=0){const X=de[$];let ce=pe[$];if(ce===void 0&&($==="instanceMatrix"&&P.instanceMatrix&&(ce=P.instanceMatrix),$==="instanceColor"&&P.instanceColor&&(ce=P.instanceColor)),X===void 0||X.attribute!==ce||ce&&X.data!==ce.data)return!0;H++}return r.attributesNum!==H||r.index!==re}function E(P,Y,ie,re){const de={},pe=Y.attributes;let H=0;const Z=ie.getAttributes();for(const $ in Z)if(Z[$].location>=0){let X=pe[$];X===void 0&&($==="instanceMatrix"&&P.instanceMatrix&&(X=P.instanceMatrix),$==="instanceColor"&&P.instanceColor&&(X=P.instanceColor));const ce={};ce.attribute=X,X&&X.data&&(ce.data=X.data),de[$]=ce,H++}r.attributes=de,r.attributesNum=H,r.index=re}function R(){const P=r.newAttributes;for(let Y=0,ie=P.length;Y<ie;Y++)P[Y]=0}function T(P){M(P,0)}function M(P,Y){const ie=r.newAttributes,re=r.enabledAttributes,de=r.attributeDivisors;ie[P]=1,re[P]===0&&(i.enableVertexAttribArray(P),re[P]=1),de[P]!==Y&&(i.vertexAttribDivisor(P,Y),de[P]=Y)}function B(){const P=r.newAttributes,Y=r.enabledAttributes;for(let ie=0,re=Y.length;ie<re;ie++)Y[ie]!==P[ie]&&(i.disableVertexAttribArray(ie),Y[ie]=0)}function N(P,Y,ie,re,de,pe,H){H===!0?i.vertexAttribIPointer(P,Y,ie,de,pe):i.vertexAttribPointer(P,Y,ie,re,de,pe)}function D(P,Y,ie,re){R();const de=re.attributes,pe=ie.getAttributes(),H=Y.defaultAttributeValues;for(const Z in pe){const $=pe[Z];if($.location>=0){let ge=de[Z];if(ge===void 0&&(Z==="instanceMatrix"&&P.instanceMatrix&&(ge=P.instanceMatrix),Z==="instanceColor"&&P.instanceColor&&(ge=P.instanceColor)),ge!==void 0){const X=ge.normalized,ce=ge.itemSize,xe=e.get(ge);if(xe===void 0)continue;const Te=xe.buffer,He=xe.type,at=xe.bytesPerElement,me=He===i.INT||He===i.UNSIGNED_INT||ge.gpuType===Xg;if(ge.isInterleavedBufferAttribute){const Ge=ge.data,qe=Ge.stride,_t=ge.offset;if(Ge.isInstancedInterleavedBuffer){for(let vt=0;vt<$.locationSize;vt++)M($.location+vt,Ge.meshPerAttribute);P.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(let vt=0;vt<$.locationSize;vt++)T($.location+vt);i.bindBuffer(i.ARRAY_BUFFER,Te);for(let vt=0;vt<$.locationSize;vt++)N($.location+vt,ce/$.locationSize,He,X,qe*at,(_t+ce/$.locationSize*vt)*at,me)}else{if(ge.isInstancedBufferAttribute){for(let Ge=0;Ge<$.locationSize;Ge++)M($.location+Ge,ge.meshPerAttribute);P.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let Ge=0;Ge<$.locationSize;Ge++)T($.location+Ge);i.bindBuffer(i.ARRAY_BUFFER,Te);for(let Ge=0;Ge<$.locationSize;Ge++)N($.location+Ge,ce/$.locationSize,He,X,ce*at,ce/$.locationSize*Ge*at,me)}}else if(H!==void 0){const X=H[Z];if(X!==void 0)switch(X.length){case 2:i.vertexAttrib2fv($.location,X);break;case 3:i.vertexAttrib3fv($.location,X);break;case 4:i.vertexAttrib4fv($.location,X);break;default:i.vertexAttrib1fv($.location,X)}}}}B()}function L(){k();for(const P in n){const Y=n[P];for(const ie in Y){const re=Y[ie];for(const de in re)y(re[de].object),delete re[de];delete Y[ie]}delete n[P]}}function I(P){if(n[P.id]===void 0)return;const Y=n[P.id];for(const ie in Y){const re=Y[ie];for(const de in re)y(re[de].object),delete re[de];delete Y[ie]}delete n[P.id]}function j(P){for(const Y in n){const ie=n[Y];if(ie[P.id]===void 0)continue;const re=ie[P.id];for(const de in re)y(re[de].object),delete re[de];delete ie[P.id]}}function k(){O(),c=!0,r!==s&&(r=s,p(r.object))}function O(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:h,reset:k,resetDefaultState:O,dispose:L,releaseStatesOfGeometry:I,releaseStatesOfProgram:j,initAttributes:R,enableAttribute:T,disableUnusedAttributes:B}}function uP(i,e,t){let n;function s(p){n=p}function r(p,y){i.drawArrays(n,p,y),t.update(y,n,1)}function c(p,y,x){x!==0&&(i.drawArraysInstanced(n,p,y,x),t.update(y,n,x))}function h(p,y,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,y,0,x);let _=0;for(let E=0;E<x;E++)_+=y[E];t.update(_,n,1)}function d(p,y,x,b){if(x===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let E=0;E<p.length;E++)c(p[E],y[E],b[E]);else{_.multiDrawArraysInstancedWEBGL(n,p,0,y,0,b,0,x);let E=0;for(let R=0;R<x;R++)E+=y[R]*b[R];t.update(E,n,1)}}this.setMode=s,this.render=r,this.renderInstances=c,this.renderMultiDraw=h,this.renderMultiDrawInstances=d}function hP(i,e,t,n){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const j=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(j.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function c(j){return!(j!==Zi&&n.convert(j)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function h(j){const k=j===Ts&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(j!==Ea&&n.convert(j)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&j!==Pi&&!k)}function d(j){if(j==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";j="mediump"}return j==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const y=d(p);y!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",y,"instead."),p=y);const x=t.logarithmicDepthBuffer===!0,b=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),_=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),E=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),R=i.getParameter(i.MAX_TEXTURE_SIZE),T=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),M=i.getParameter(i.MAX_VERTEX_ATTRIBS),B=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),N=i.getParameter(i.MAX_VARYING_VECTORS),D=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),L=E>0,I=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:d,textureFormatReadable:c,textureTypeReadable:h,precision:p,logarithmicDepthBuffer:x,reversedDepthBuffer:b,maxTextures:_,maxVertexTextures:E,maxTextureSize:R,maxCubemapSize:T,maxAttributes:M,maxVertexUniforms:B,maxVaryings:N,maxFragmentUniforms:D,vertexTextures:L,maxSamples:I}}function fP(i){const e=this;let t=null,n=0,s=!1,r=!1;const c=new tc,h=new gn,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(x,b){const _=x.length!==0||b||n!==0||s;return s=b,n=x.length,_},this.beginShadows=function(){r=!0,y(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(x,b){t=y(x,b,0)},this.setState=function(x,b,_){const E=x.clippingPlanes,R=x.clipIntersection,T=x.clipShadows,M=i.get(x);if(!s||E===null||E.length===0||r&&!T)r?y(null):p();else{const B=r?0:n,N=B*4;let D=M.clippingState||null;d.value=D,D=y(E,b,N,_);for(let L=0;L!==N;++L)D[L]=t[L];M.clippingState=D,this.numIntersection=R?this.numPlanes:0,this.numPlanes+=B}};function p(){d.value!==t&&(d.value=t,d.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function y(x,b,_,E){const R=x!==null?x.length:0;let T=null;if(R!==0){if(T=d.value,E!==!0||T===null){const M=_+R*4,B=b.matrixWorldInverse;h.getNormalMatrix(B),(T===null||T.length<M)&&(T=new Float32Array(M));for(let N=0,D=_;N!==R;++N,D+=4)c.copy(x[N]).applyMatrix4(B,h),c.normal.toArray(T,D),T[D+3]=c.constant}d.value=T,d.needsUpdate=!0}return e.numPlanes=R,e.numIntersection=0,T}}function dP(i){let e=new WeakMap;function t(c,h){return h===ep?c.mapping=yl:h===Sg&&(c.mapping=bu),c}function n(c){if(c&&c.isTexture){const h=c.mapping;if(h===ep||h===Sg)if(e.has(c)){const d=e.get(c).texture;return t(d,c.mapping)}else{const d=c.image;if(d&&d.height>0){const p=new vS(d.height);return p.fromEquirectangularTexture(i,c),e.set(c,p),c.addEventListener("dispose",s),t(p.texture,c.mapping)}else return null}}return c}function s(c){const h=c.target;h.removeEventListener("dispose",s);const d=e.get(h);d!==void 0&&(e.delete(h),d.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}const jd=4,VT=[.125,.215,.35,.446,.526,.582],Ph=20,CA=new Ir,XT=new Et;let wA=null,RA=0,BA=0,NA=!1;const Ih=(1+Math.sqrt(5))/2,Od=1/Ih,YT=[new K(-Ih,Od,0),new K(Ih,Od,0),new K(-Od,0,Ih),new K(Od,0,Ih),new K(0,Ih,-Od),new K(0,Ih,Od),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)],pP=new K;class B1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100,r={}){const{size:c=256,position:h=pP}=r;wA=this._renderer.getRenderTarget(),RA=this._renderer.getActiveCubeFace(),BA=this._renderer.getActiveMipmapLevel(),NA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(c);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,n,s,d,h),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=JT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=WT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(wA,RA,BA),this._renderer.xr.enabled=NA,e.scissorTest=!1,By(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===yl||e.mapping===bu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),wA=this._renderer.getRenderTarget(),RA=this._renderer.getActiveCubeFace(),BA=this._renderer.getActiveMipmapLevel(),NA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Kn,minFilter:Kn,generateMipmaps:!1,type:Ts,format:Zi,colorSpace:Mo,depthBuffer:!1},s=qT(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qT(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=mP(r)),this._blurMaterial=gP(r,e,t)}return s}_compileMaterial(e){const t=new Bi(this._lodPlanes[0],e);this._renderer.compile(t,CA)}_sceneToCubeUV(e,t,n,s,r){const d=new Ri(90,1,t,n),p=[1,-1,1,1,1,1],y=[1,1,1,-1,-1,-1],x=this._renderer,b=x.autoClear,_=x.toneMapping;x.getClearColor(XT),x.toneMapping=gl,x.autoClear=!1,x.state.buffers.depth.getReversed()&&(x.setRenderTarget(s),x.clearDepth(),x.setRenderTarget(null));const R=new ka({name:"PMREM.Background",side:Ma,depthWrite:!1,depthTest:!1}),T=new Bi(new cf,R);let M=!1;const B=e.background;B?B.isColor&&(R.color.copy(B),e.background=null,M=!0):(R.color.copy(XT),M=!0);for(let N=0;N<6;N++){const D=N%3;D===0?(d.up.set(0,p[N],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x+y[N],r.y,r.z)):D===1?(d.up.set(0,0,p[N]),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y+y[N],r.z)):(d.up.set(0,p[N],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y,r.z+y[N]));const L=this._cubeSize;By(s,D*L,N>2?L:0,L,L),x.setRenderTarget(s),M&&x.render(T,d),x.render(e,d)}T.geometry.dispose(),T.material.dispose(),x.toneMapping=_,x.autoClear=b,e.background=B}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===yl||e.mapping===bu;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=JT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=WT());const r=s?this._cubemapMaterial:this._equirectMaterial,c=new Bi(this._lodPlanes[0],r),h=r.uniforms;h.envMap.value=e;const d=this._cubeSize;By(t,0,0,3*d,2*d),n.setRenderTarget(t),n.render(c,CA)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const c=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),h=YT[(s-r-1)%YT.length];this._blur(e,r-1,r,c,h)}t.autoClear=n}_blur(e,t,n,s,r){const c=this._pingPongRenderTarget;this._halfBlur(e,c,t,n,s,"latitudinal",r),this._halfBlur(c,e,n,n,s,"longitudinal",r)}_halfBlur(e,t,n,s,r,c,h){const d=this._renderer,p=this._blurMaterial;c!=="latitudinal"&&c!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const y=3,x=new Bi(this._lodPlanes[s],p),b=p.uniforms,_=this._sizeLods[n]-1,E=isFinite(r)?Math.PI/(2*_):2*Math.PI/(2*Ph-1),R=r/E,T=isFinite(r)?1+Math.floor(y*R):Ph;T>Ph&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${Ph}`);const M=[];let B=0;for(let j=0;j<Ph;++j){const k=j/R,O=Math.exp(-k*k/2);M.push(O),j===0?B+=O:j<T&&(B+=2*O)}for(let j=0;j<M.length;j++)M[j]=M[j]/B;b.envMap.value=e.texture,b.samples.value=T,b.weights.value=M,b.latitudinal.value=c==="latitudinal",h&&(b.poleAxis.value=h);const{_lodMax:N}=this;b.dTheta.value=E,b.mipInt.value=N-n;const D=this._sizeLods[s],L=3*D*(s>N-jd?s-N+jd:0),I=4*(this._cubeSize-D);By(t,L,I,3*D,2*D),d.setRenderTarget(t),d.render(x,CA)}}function mP(i){const e=[],t=[],n=[];let s=i;const r=i-jd+1+VT.length;for(let c=0;c<r;c++){const h=Math.pow(2,s);t.push(h);let d=1/h;c>i-jd?d=VT[c-i+jd-1]:c===0&&(d=0),n.push(d);const p=1/(h-2),y=-p,x=1+p,b=[y,y,x,y,x,x,y,y,x,x,y,x],_=6,E=6,R=3,T=2,M=1,B=new Float32Array(R*E*_),N=new Float32Array(T*E*_),D=new Float32Array(M*E*_);for(let I=0;I<_;I++){const j=I%3*2/3-1,k=I>2?0:-1,O=[j,k,0,j+2/3,k,0,j+2/3,k+1,0,j,k,0,j+2/3,k+1,0,j,k+1,0];B.set(O,R*E*I),N.set(b,T*E*I);const P=[I,I,I,I,I,I];D.set(P,M*E*I)}const L=new pn;L.setAttribute("position",new jn(B,R)),L.setAttribute("uv",new jn(N,T)),L.setAttribute("faceIndex",new jn(D,M)),e.push(L),s>jd&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function qT(i,e,t){const n=new Fr(i,e,t);return n.texture.mapping=yp,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function By(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function gP(i,e,t){const n=new Float32Array(Ph),s=new K(0,1,0);return new Va({name:"SphericalGaussianBlur",defines:{n:Ph,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:WS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ml,depthTest:!1,depthWrite:!1})}function WT(){return new Va({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:WS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ml,depthTest:!1,depthWrite:!1})}function JT(){return new Va({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:WS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ml,depthTest:!1,depthWrite:!1})}function WS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function vP(i){let e=new WeakMap,t=null;function n(h){if(h&&h.isTexture){const d=h.mapping,p=d===ep||d===Sg,y=d===yl||d===bu;if(p||y){let x=e.get(h);const b=x!==void 0?x.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==b)return t===null&&(t=new B1(i)),x=p?t.fromEquirectangular(h,x):t.fromCubemap(h,x),x.texture.pmremVersion=h.pmremVersion,e.set(h,x),x.texture;if(x!==void 0)return x.texture;{const _=h.image;return p&&_&&_.height>0||y&&_&&s(_)?(t===null&&(t=new B1(i)),x=p?t.fromEquirectangular(h):t.fromCubemap(h),x.texture.pmremVersion=h.pmremVersion,e.set(h,x),h.addEventListener("dispose",r),x.texture):null}}}return h}function s(h){let d=0;const p=6;for(let y=0;y<p;y++)h[y]!==void 0&&d++;return d===p}function r(h){const d=h.target;d.removeEventListener("dispose",r);const p=e.get(d);p!==void 0&&(e.delete(d),p.dispose())}function c(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:c}}function yP(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&wg("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function xP(i,e,t,n){const s={},r=new WeakMap;function c(x){const b=x.target;b.index!==null&&e.remove(b.index);for(const E in b.attributes)e.remove(b.attributes[E]);b.removeEventListener("dispose",c),delete s[b.id];const _=r.get(b);_&&(e.remove(_),r.delete(b)),n.releaseStatesOfGeometry(b),b.isInstancedBufferGeometry===!0&&delete b._maxInstanceCount,t.memory.geometries--}function h(x,b){return s[b.id]===!0||(b.addEventListener("dispose",c),s[b.id]=!0,t.memory.geometries++),b}function d(x){const b=x.attributes;for(const _ in b)e.update(b[_],i.ARRAY_BUFFER)}function p(x){const b=[],_=x.index,E=x.attributes.position;let R=0;if(_!==null){const B=_.array;R=_.version;for(let N=0,D=B.length;N<D;N+=3){const L=B[N+0],I=B[N+1],j=B[N+2];b.push(L,I,I,j,j,L)}}else if(E!==void 0){const B=E.array;R=E.version;for(let N=0,D=B.length/3-1;N<D;N+=3){const L=N+0,I=N+1,j=N+2;b.push(L,I,I,j,j,L)}}else return;const T=new(w2(b)?gS:mS)(b,1);T.version=R;const M=r.get(x);M&&e.remove(M),r.set(x,T)}function y(x){const b=r.get(x);if(b){const _=x.index;_!==null&&b.version<_.version&&p(x)}else p(x);return r.get(x)}return{get:h,update:d,getWireframeAttribute:y}}function bP(i,e,t){let n;function s(b){n=b}let r,c;function h(b){r=b.type,c=b.bytesPerElement}function d(b,_){i.drawElements(n,_,r,b*c),t.update(_,n,1)}function p(b,_,E){E!==0&&(i.drawElementsInstanced(n,_,r,b*c,E),t.update(_,n,E))}function y(b,_,E){if(E===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,r,b,0,E);let T=0;for(let M=0;M<E;M++)T+=_[M];t.update(T,n,1)}function x(b,_,E,R){if(E===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let M=0;M<b.length;M++)p(b[M]/c,_[M],R[M]);else{T.multiDrawElementsInstancedWEBGL(n,_,0,r,b,0,R,0,E);let M=0;for(let B=0;B<E;B++)M+=_[B]*R[B];t.update(M,n,1)}}this.setMode=s,this.setIndex=h,this.render=d,this.renderInstances=p,this.renderMultiDraw=y,this.renderMultiDrawInstances=x}function _P(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,c,h){switch(t.calls++,c){case i.TRIANGLES:t.triangles+=h*(r/3);break;case i.LINES:t.lines+=h*(r/2);break;case i.LINE_STRIP:t.lines+=h*(r-1);break;case i.LINE_LOOP:t.lines+=h*r;break;case i.POINTS:t.points+=h*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function AP(i,e,t){const n=new WeakMap,s=new Gn;function r(c,h,d){const p=c.morphTargetInfluences,y=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,x=y!==void 0?y.length:0;let b=n.get(h);if(b===void 0||b.count!==x){let P=function(){k.dispose(),n.delete(h),h.removeEventListener("dispose",P)};var _=P;b!==void 0&&b.texture.dispose();const E=h.morphAttributes.position!==void 0,R=h.morphAttributes.normal!==void 0,T=h.morphAttributes.color!==void 0,M=h.morphAttributes.position||[],B=h.morphAttributes.normal||[],N=h.morphAttributes.color||[];let D=0;E===!0&&(D=1),R===!0&&(D=2),T===!0&&(D=3);let L=h.attributes.position.count*D,I=1;L>e.maxTextureSize&&(I=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const j=new Float32Array(L*I*4*x),k=new gb(j,L,I,x);k.type=Pi,k.needsUpdate=!0;const O=D*4;for(let Y=0;Y<x;Y++){const ie=M[Y],re=B[Y],de=N[Y],pe=L*I*4*Y;for(let H=0;H<ie.count;H++){const Z=H*O;E===!0&&(s.fromBufferAttribute(ie,H),j[pe+Z+0]=s.x,j[pe+Z+1]=s.y,j[pe+Z+2]=s.z,j[pe+Z+3]=0),R===!0&&(s.fromBufferAttribute(re,H),j[pe+Z+4]=s.x,j[pe+Z+5]=s.y,j[pe+Z+6]=s.z,j[pe+Z+7]=0),T===!0&&(s.fromBufferAttribute(de,H),j[pe+Z+8]=s.x,j[pe+Z+9]=s.y,j[pe+Z+10]=s.z,j[pe+Z+11]=de.itemSize===4?s.w:1)}}b={count:x,texture:k,size:new Ye(L,I)},n.set(h,b),h.addEventListener("dispose",P)}if(c.isInstancedMesh===!0&&c.morphTexture!==null)d.getUniforms().setValue(i,"morphTexture",c.morphTexture,t);else{let E=0;for(let T=0;T<p.length;T++)E+=p[T];const R=h.morphTargetsRelative?1:1-E;d.getUniforms().setValue(i,"morphTargetBaseInfluence",R),d.getUniforms().setValue(i,"morphTargetInfluences",p)}d.getUniforms().setValue(i,"morphTargetsTexture",b.texture,t),d.getUniforms().setValue(i,"morphTargetsTextureSize",b.size)}return{update:r}}function SP(i,e,t,n){let s=new WeakMap;function r(d){const p=n.render.frame,y=d.geometry,x=e.get(d,y);if(s.get(x)!==p&&(e.update(x),s.set(x,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",h)===!1&&d.addEventListener("dispose",h),s.get(d)!==p&&(t.update(d.instanceMatrix,i.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,i.ARRAY_BUFFER),s.set(d,p))),d.isSkinnedMesh){const b=d.skeleton;s.get(b)!==p&&(b.update(),s.set(b,p))}return x}function c(){s=new WeakMap}function h(d){const p=d.target;p.removeEventListener("dispose",h),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:r,dispose:c}}const TR=new ti,KT=new SS(1,1),CR=new gb,wR=new vb,RR=new Wg,ZT=[],QT=[],$T=new Float32Array(16),eC=new Float32Array(9),tC=new Float32Array(4);function _p(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let r=ZT[s];if(r===void 0&&(r=new Float32Array(s),ZT[s]=r),e!==0){n.toArray(r,0);for(let c=1,h=0;c!==e;++c)h+=t,i[c].toArray(r,h)}return r}function gs(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function vs(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Hb(i,e){let t=QT[e];t===void 0&&(t=new Int32Array(e),QT[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function MP(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function EP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gs(t,e))return;i.uniform2fv(this.addr,e),vs(t,e)}}function TP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(gs(t,e))return;i.uniform3fv(this.addr,e),vs(t,e)}}function CP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gs(t,e))return;i.uniform4fv(this.addr,e),vs(t,e)}}function wP(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(gs(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),vs(t,e)}else{if(gs(t,n))return;tC.set(n),i.uniformMatrix2fv(this.addr,!1,tC),vs(t,n)}}function RP(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(gs(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),vs(t,e)}else{if(gs(t,n))return;eC.set(n),i.uniformMatrix3fv(this.addr,!1,eC),vs(t,n)}}function BP(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(gs(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),vs(t,e)}else{if(gs(t,n))return;$T.set(n),i.uniformMatrix4fv(this.addr,!1,$T),vs(t,n)}}function NP(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function DP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gs(t,e))return;i.uniform2iv(this.addr,e),vs(t,e)}}function UP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gs(t,e))return;i.uniform3iv(this.addr,e),vs(t,e)}}function OP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gs(t,e))return;i.uniform4iv(this.addr,e),vs(t,e)}}function LP(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function IP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gs(t,e))return;i.uniform2uiv(this.addr,e),vs(t,e)}}function PP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gs(t,e))return;i.uniform3uiv(this.addr,e),vs(t,e)}}function FP(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gs(t,e))return;i.uniform4uiv(this.addr,e),vs(t,e)}}function HP(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(KT.compareFunction=fS,r=KT):r=TR,t.setTexture2D(e||r,s)}function zP(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||wR,s)}function GP(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||RR,s)}function jP(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||CR,s)}function kP(i){switch(i){case 5126:return MP;case 35664:return EP;case 35665:return TP;case 35666:return CP;case 35674:return wP;case 35675:return RP;case 35676:return BP;case 5124:case 35670:return NP;case 35667:case 35671:return DP;case 35668:case 35672:return UP;case 35669:case 35673:return OP;case 5125:return LP;case 36294:return IP;case 36295:return PP;case 36296:return FP;case 35678:case 36198:case 36298:case 36306:case 35682:return HP;case 35679:case 36299:case 36307:return zP;case 35680:case 36300:case 36308:case 36293:return GP;case 36289:case 36303:case 36311:case 36292:return jP}}function VP(i,e){i.uniform1fv(this.addr,e)}function XP(i,e){const t=_p(e,this.size,2);i.uniform2fv(this.addr,t)}function YP(i,e){const t=_p(e,this.size,3);i.uniform3fv(this.addr,t)}function qP(i,e){const t=_p(e,this.size,4);i.uniform4fv(this.addr,t)}function WP(i,e){const t=_p(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function JP(i,e){const t=_p(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function KP(i,e){const t=_p(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function ZP(i,e){i.uniform1iv(this.addr,e)}function QP(i,e){i.uniform2iv(this.addr,e)}function $P(i,e){i.uniform3iv(this.addr,e)}function eF(i,e){i.uniform4iv(this.addr,e)}function tF(i,e){i.uniform1uiv(this.addr,e)}function nF(i,e){i.uniform2uiv(this.addr,e)}function iF(i,e){i.uniform3uiv(this.addr,e)}function sF(i,e){i.uniform4uiv(this.addr,e)}function aF(i,e,t){const n=this.cache,s=e.length,r=Hb(t,s);gs(n,r)||(i.uniform1iv(this.addr,r),vs(n,r));for(let c=0;c!==s;++c)t.setTexture2D(e[c]||TR,r[c])}function rF(i,e,t){const n=this.cache,s=e.length,r=Hb(t,s);gs(n,r)||(i.uniform1iv(this.addr,r),vs(n,r));for(let c=0;c!==s;++c)t.setTexture3D(e[c]||wR,r[c])}function oF(i,e,t){const n=this.cache,s=e.length,r=Hb(t,s);gs(n,r)||(i.uniform1iv(this.addr,r),vs(n,r));for(let c=0;c!==s;++c)t.setTextureCube(e[c]||RR,r[c])}function lF(i,e,t){const n=this.cache,s=e.length,r=Hb(t,s);gs(n,r)||(i.uniform1iv(this.addr,r),vs(n,r));for(let c=0;c!==s;++c)t.setTexture2DArray(e[c]||CR,r[c])}function cF(i){switch(i){case 5126:return VP;case 35664:return XP;case 35665:return YP;case 35666:return qP;case 35674:return WP;case 35675:return JP;case 35676:return KP;case 5124:case 35670:return ZP;case 35667:case 35671:return QP;case 35668:case 35672:return $P;case 35669:case 35673:return eF;case 5125:return tF;case 36294:return nF;case 36295:return iF;case 36296:return sF;case 35678:case 36198:case 36298:case 36306:case 35682:return aF;case 35679:case 36299:case 36307:return rF;case 35680:case 36300:case 36308:case 36293:return oF;case 36289:case 36303:case 36311:case 36292:return lF}}class uF{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=kP(t.type)}}class hF{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=cF(t.type)}}class fF{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let r=0,c=s.length;r!==c;++r){const h=s[r];h.setValue(e,t[h.id],n)}}}const DA=/(\w+)(\])?(\[|\.)?/g;function nC(i,e){i.seq.push(e),i.map[e.id]=e}function dF(i,e,t){const n=i.name,s=n.length;for(DA.lastIndex=0;;){const r=DA.exec(n),c=DA.lastIndex;let h=r[1];const d=r[2]==="]",p=r[3];if(d&&(h=h|0),p===void 0||p==="["&&c+2===s){nC(t,p===void 0?new uF(h,i,e):new hF(h,i,e));break}else{let x=t.map[h];x===void 0&&(x=new fF(h),nC(t,x)),t=x}}}class Wy{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=e.getActiveUniform(t,s),c=e.getUniformLocation(t,r.name);dF(r,c,this)}}setValue(e,t,n,s){const r=this.map[t];r!==void 0&&r.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let r=0,c=t.length;r!==c;++r){const h=t[r],d=n[h.id];d.needsUpdate!==!1&&h.setValue(e,d.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,r=e.length;s!==r;++s){const c=e[s];c.id in t&&n.push(c)}return n}}function iC(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const pF=37297;let mF=0;function gF(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let c=s;c<r;c++){const h=c+1;n.push(`${h===e?">":" "} ${h}: ${t[c]}`)}return n.join(`
`)}const sC=new gn;function vF(i){In._getMatrix(sC,In.workingColorSpace,i);const e=`mat3( ${sC.elements.map(t=>t.toFixed(4))} )`;switch(In.getTransfer(i)){case Eg:return[e,"LinearTransferOETF"];case oi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function aC(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=(i.getShaderInfoLog(e)||"").trim();if(n&&r==="")return"";const c=/ERROR: 0:(\d+)/.exec(r);if(c){const h=parseInt(c[1]);return t.toUpperCase()+`

`+r+`

`+gF(i.getShaderSource(e),h)}else return r}function yF(i,e){const t=vF(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function xF(i,e){let t;switch(e){case r2:t="Linear";break;case o2:t="Reinhard";break;case l2:t="Cineon";break;case sS:t="ACESFilmic";break;case u2:t="AgX";break;case h2:t="Neutral";break;case c2:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Ny=new K;function bF(){In.getLuminanceCoefficients(Ny);const i=Ny.x.toFixed(4),e=Ny.y.toFixed(4),t=Ny.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function _F(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(rg).join(`
`)}function AF(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function SF(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(e,s),c=r.name;let h=1;r.type===i.FLOAT_MAT2&&(h=2),r.type===i.FLOAT_MAT3&&(h=3),r.type===i.FLOAT_MAT4&&(h=4),t[c]={type:r.type,location:i.getAttribLocation(e,c),locationSize:h}}return t}function rg(i){return i!==""}function rC(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function oC(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const MF=/^[ \t]*#include +<([\w\d./]+)>/gm;function N1(i){return i.replace(MF,TF)}const EF=new Map;function TF(i,e){let t=An[e];if(t===void 0){const n=EF.get(e);if(n!==void 0)t=An[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return N1(t)}const CF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lC(i){return i.replace(CF,wF)}function wF(i,e,t,n){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function cC(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function RF(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===ob?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===cg?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===go&&(e="SHADOWMAP_TYPE_VSM"),e}function BF(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case yl:case bu:e="ENVMAP_TYPE_CUBE";break;case yp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function NF(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case bu:e="ENVMAP_MODE_REFRACTION";break}return e}function DF(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Vg:e="ENVMAP_BLENDING_MULTIPLY";break;case s2:e="ENVMAP_BLENDING_MIX";break;case a2:e="ENVMAP_BLENDING_ADD";break}return e}function UF(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function OF(i,e,t,n){const s=i.getContext(),r=t.defines;let c=t.vertexShader,h=t.fragmentShader;const d=RF(t),p=BF(t),y=NF(t),x=DF(t),b=UF(t),_=_F(t),E=AF(r),R=s.createProgram();let T,M,B=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(rg).join(`
`),T.length>0&&(T+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(rg).join(`
`),M.length>0&&(M+=`
`)):(T=[cC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+y:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(rg).join(`
`),M=[cC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+y:"",t.envMap?"#define "+x:"",b?"#define CUBEUV_TEXEL_WIDTH "+b.texelWidth:"",b?"#define CUBEUV_TEXEL_HEIGHT "+b.texelHeight:"",b?"#define CUBEUV_MAX_MIP "+b.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==gl?"#define TONE_MAPPING":"",t.toneMapping!==gl?An.tonemapping_pars_fragment:"",t.toneMapping!==gl?xF("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",An.colorspace_pars_fragment,yF("linearToOutputTexel",t.outputColorSpace),bF(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(rg).join(`
`)),c=N1(c),c=rC(c,t),c=oC(c,t),h=N1(h),h=rC(h,t),h=oC(h,t),c=lC(c),h=lC(h),t.isRawShaderMaterial!==!0&&(B=`#version 300 es
`,T=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,M=["#define varying in",t.glslVersion===A1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===A1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const N=B+T+c,D=B+M+h,L=iC(s,s.VERTEX_SHADER,N),I=iC(s,s.FRAGMENT_SHADER,D);s.attachShader(R,L),s.attachShader(R,I),t.index0AttributeName!==void 0?s.bindAttribLocation(R,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(R,0,"position"),s.linkProgram(R);function j(Y){if(i.debug.checkShaderErrors){const ie=s.getProgramInfoLog(R)||"",re=s.getShaderInfoLog(L)||"",de=s.getShaderInfoLog(I)||"",pe=ie.trim(),H=re.trim(),Z=de.trim();let $=!0,ge=!0;if(s.getProgramParameter(R,s.LINK_STATUS)===!1)if($=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,R,L,I);else{const X=aC(s,L,"vertex"),ce=aC(s,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(R,s.VALIDATE_STATUS)+`

Material Name: `+Y.name+`
Material Type: `+Y.type+`

Program Info Log: `+pe+`
`+X+`
`+ce)}else pe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",pe):(H===""||Z==="")&&(ge=!1);ge&&(Y.diagnostics={runnable:$,programLog:pe,vertexShader:{log:H,prefix:T},fragmentShader:{log:Z,prefix:M}})}s.deleteShader(L),s.deleteShader(I),k=new Wy(s,R),O=SF(s,R)}let k;this.getUniforms=function(){return k===void 0&&j(this),k};let O;this.getAttributes=function(){return O===void 0&&j(this),O};let P=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=s.getProgramParameter(R,pF)),P},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(R),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=mF++,this.cacheKey=e,this.usedTimes=1,this.program=R,this.vertexShader=L,this.fragmentShader=I,this}let LF=0;class IF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(n),c=this._getShaderCacheForMaterial(e);return c.has(s)===!1&&(c.add(s),s.usedTimes++),c.has(r)===!1&&(c.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new PF(e),t.set(e,n)),n}}class PF{constructor(e){this.id=LF++,this.code=e,this.usedTimes=0}}function FF(i,e,t,n,s,r,c){const h=new up,d=new IF,p=new Set,y=[],x=s.logarithmicDepthBuffer,b=s.vertexTextures;let _=s.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function R(O){return p.add(O),O===0?"uv":`uv${O}`}function T(O,P,Y,ie,re){const de=ie.fog,pe=re.geometry,H=O.isMeshStandardMaterial?ie.environment:null,Z=(O.isMeshStandardMaterial?t:e).get(O.envMap||H),$=Z&&Z.mapping===yp?Z.image.height:null,ge=E[O.type];O.precision!==null&&(_=s.getMaxPrecision(O.precision),_!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",_,"instead."));const X=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,ce=X!==void 0?X.length:0;let xe=0;pe.morphAttributes.position!==void 0&&(xe=1),pe.morphAttributes.normal!==void 0&&(xe=2),pe.morphAttributes.color!==void 0&&(xe=3);let Te,He,at,me;if(ge){const an=vo[ge];Te=an.vertexShader,He=an.fragmentShader}else Te=O.vertexShader,He=O.fragmentShader,d.update(O),at=d.getVertexShaderID(O),me=d.getFragmentShaderID(O);const Ge=i.getRenderTarget(),qe=i.state.buffers.depth.getReversed(),_t=re.isInstancedMesh===!0,vt=re.isBatchedMesh===!0,yt=!!O.map,zt=!!O.matcap,ne=!!Z,Ze=!!O.aoMap,ke=!!O.lightMap,Xe=!!O.bumpMap,Le=!!O.normalMap,dt=!!O.displacementMap,st=!!O.emissiveMap,lt=!!O.metalnessMap,Ft=!!O.roughnessMap,kt=O.anisotropy>0,Q=O.clearcoat>0,V=O.dispersion>0,Me=O.iridescence>0,Ie=O.sheen>0,je=O.transmission>0,Pe=kt&&!!O.anisotropyMap,xt=Q&&!!O.clearcoatMap,pt=Q&&!!O.clearcoatNormalMap,Bt=Q&&!!O.clearcoatRoughnessMap,Nt=Me&&!!O.iridescenceMap,tt=Me&&!!O.iridescenceThicknessMap,ot=Ie&&!!O.sheenColorMap,Ut=Ie&&!!O.sheenRoughnessMap,ae=!!O.specularMap,Se=!!O.specularColorMap,nt=!!O.specularIntensityMap,le=je&&!!O.transmissionMap,be=je&&!!O.thicknessMap,rt=!!O.gradientMap,bt=!!O.alphaMap,ct=O.alphaTest>0,$e=!!O.alphaHash,Mt=!!O.extensions;let Ot=gl;O.toneMapped&&(Ge===null||Ge.isXRRenderTarget===!0)&&(Ot=i.toneMapping);const un={shaderID:ge,shaderType:O.type,shaderName:O.name,vertexShader:Te,fragmentShader:He,defines:O.defines,customVertexShaderID:at,customFragmentShaderID:me,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:_,batching:vt,batchingColor:vt&&re._colorsTexture!==null,instancing:_t,instancingColor:_t&&re.instanceColor!==null,instancingMorph:_t&&re.morphTexture!==null,supportsVertexTextures:b,outputColorSpace:Ge===null?i.outputColorSpace:Ge.isXRRenderTarget===!0?Ge.texture.colorSpace:Mo,alphaToCoverage:!!O.alphaToCoverage,map:yt,matcap:zt,envMap:ne,envMapMode:ne&&Z.mapping,envMapCubeUVHeight:$,aoMap:Ze,lightMap:ke,bumpMap:Xe,normalMap:Le,displacementMap:b&&dt,emissiveMap:st,normalMapObjectSpace:Le&&O.normalMapType===x2,normalMapTangentSpace:Le&&O.normalMapType===Su,metalnessMap:lt,roughnessMap:Ft,anisotropy:kt,anisotropyMap:Pe,clearcoat:Q,clearcoatMap:xt,clearcoatNormalMap:pt,clearcoatRoughnessMap:Bt,dispersion:V,iridescence:Me,iridescenceMap:Nt,iridescenceThicknessMap:tt,sheen:Ie,sheenColorMap:ot,sheenRoughnessMap:Ut,specularMap:ae,specularColorMap:Se,specularIntensityMap:nt,transmission:je,transmissionMap:le,thicknessMap:be,gradientMap:rt,opaque:O.transparent===!1&&O.blending===Jh&&O.alphaToCoverage===!1,alphaMap:bt,alphaTest:ct,alphaHash:$e,combine:O.combine,mapUv:yt&&R(O.map.channel),aoMapUv:Ze&&R(O.aoMap.channel),lightMapUv:ke&&R(O.lightMap.channel),bumpMapUv:Xe&&R(O.bumpMap.channel),normalMapUv:Le&&R(O.normalMap.channel),displacementMapUv:dt&&R(O.displacementMap.channel),emissiveMapUv:st&&R(O.emissiveMap.channel),metalnessMapUv:lt&&R(O.metalnessMap.channel),roughnessMapUv:Ft&&R(O.roughnessMap.channel),anisotropyMapUv:Pe&&R(O.anisotropyMap.channel),clearcoatMapUv:xt&&R(O.clearcoatMap.channel),clearcoatNormalMapUv:pt&&R(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Bt&&R(O.clearcoatRoughnessMap.channel),iridescenceMapUv:Nt&&R(O.iridescenceMap.channel),iridescenceThicknessMapUv:tt&&R(O.iridescenceThicknessMap.channel),sheenColorMapUv:ot&&R(O.sheenColorMap.channel),sheenRoughnessMapUv:Ut&&R(O.sheenRoughnessMap.channel),specularMapUv:ae&&R(O.specularMap.channel),specularColorMapUv:Se&&R(O.specularColorMap.channel),specularIntensityMapUv:nt&&R(O.specularIntensityMap.channel),transmissionMapUv:le&&R(O.transmissionMap.channel),thicknessMapUv:be&&R(O.thicknessMap.channel),alphaMapUv:bt&&R(O.alphaMap.channel),vertexTangents:!!pe.attributes.tangent&&(Le||kt),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!pe.attributes.color&&pe.attributes.color.itemSize===4,pointsUvs:re.isPoints===!0&&!!pe.attributes.uv&&(yt||bt),fog:!!de,useFog:O.fog===!0,fogExp2:!!de&&de.isFogExp2,flatShading:O.flatShading===!0&&O.wireframe===!1,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:x,reversedDepthBuffer:qe,skinning:re.isSkinnedMesh===!0,morphTargets:pe.morphAttributes.position!==void 0,morphNormals:pe.morphAttributes.normal!==void 0,morphColors:pe.morphAttributes.color!==void 0,morphTargetsCount:ce,morphTextureStride:xe,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:O.dithering,shadowMapEnabled:i.shadowMap.enabled&&Y.length>0,shadowMapType:i.shadowMap.type,toneMapping:Ot,decodeVideoTexture:yt&&O.map.isVideoTexture===!0&&In.getTransfer(O.map.colorSpace)===oi,decodeVideoTextureEmissive:st&&O.emissiveMap.isVideoTexture===!0&&In.getTransfer(O.emissiveMap.colorSpace)===oi,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===or,flipSided:O.side===Ma,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:Mt&&O.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Mt&&O.extensions.multiDraw===!0||vt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return un.vertexUv1s=p.has(1),un.vertexUv2s=p.has(2),un.vertexUv3s=p.has(3),p.clear(),un}function M(O){const P=[];if(O.shaderID?P.push(O.shaderID):(P.push(O.customVertexShaderID),P.push(O.customFragmentShaderID)),O.defines!==void 0)for(const Y in O.defines)P.push(Y),P.push(O.defines[Y]);return O.isRawShaderMaterial===!1&&(B(P,O),N(P,O),P.push(i.outputColorSpace)),P.push(O.customProgramCacheKey),P.join()}function B(O,P){O.push(P.precision),O.push(P.outputColorSpace),O.push(P.envMapMode),O.push(P.envMapCubeUVHeight),O.push(P.mapUv),O.push(P.alphaMapUv),O.push(P.lightMapUv),O.push(P.aoMapUv),O.push(P.bumpMapUv),O.push(P.normalMapUv),O.push(P.displacementMapUv),O.push(P.emissiveMapUv),O.push(P.metalnessMapUv),O.push(P.roughnessMapUv),O.push(P.anisotropyMapUv),O.push(P.clearcoatMapUv),O.push(P.clearcoatNormalMapUv),O.push(P.clearcoatRoughnessMapUv),O.push(P.iridescenceMapUv),O.push(P.iridescenceThicknessMapUv),O.push(P.sheenColorMapUv),O.push(P.sheenRoughnessMapUv),O.push(P.specularMapUv),O.push(P.specularColorMapUv),O.push(P.specularIntensityMapUv),O.push(P.transmissionMapUv),O.push(P.thicknessMapUv),O.push(P.combine),O.push(P.fogExp2),O.push(P.sizeAttenuation),O.push(P.morphTargetsCount),O.push(P.morphAttributeCount),O.push(P.numDirLights),O.push(P.numPointLights),O.push(P.numSpotLights),O.push(P.numSpotLightMaps),O.push(P.numHemiLights),O.push(P.numRectAreaLights),O.push(P.numDirLightShadows),O.push(P.numPointLightShadows),O.push(P.numSpotLightShadows),O.push(P.numSpotLightShadowsWithMaps),O.push(P.numLightProbes),O.push(P.shadowMapType),O.push(P.toneMapping),O.push(P.numClippingPlanes),O.push(P.numClipIntersection),O.push(P.depthPacking)}function N(O,P){h.disableAll(),P.supportsVertexTextures&&h.enable(0),P.instancing&&h.enable(1),P.instancingColor&&h.enable(2),P.instancingMorph&&h.enable(3),P.matcap&&h.enable(4),P.envMap&&h.enable(5),P.normalMapObjectSpace&&h.enable(6),P.normalMapTangentSpace&&h.enable(7),P.clearcoat&&h.enable(8),P.iridescence&&h.enable(9),P.alphaTest&&h.enable(10),P.vertexColors&&h.enable(11),P.vertexAlphas&&h.enable(12),P.vertexUv1s&&h.enable(13),P.vertexUv2s&&h.enable(14),P.vertexUv3s&&h.enable(15),P.vertexTangents&&h.enable(16),P.anisotropy&&h.enable(17),P.alphaHash&&h.enable(18),P.batching&&h.enable(19),P.dispersion&&h.enable(20),P.batchingColor&&h.enable(21),P.gradientMap&&h.enable(22),O.push(h.mask),h.disableAll(),P.fog&&h.enable(0),P.useFog&&h.enable(1),P.flatShading&&h.enable(2),P.logarithmicDepthBuffer&&h.enable(3),P.reversedDepthBuffer&&h.enable(4),P.skinning&&h.enable(5),P.morphTargets&&h.enable(6),P.morphNormals&&h.enable(7),P.morphColors&&h.enable(8),P.premultipliedAlpha&&h.enable(9),P.shadowMapEnabled&&h.enable(10),P.doubleSided&&h.enable(11),P.flipSided&&h.enable(12),P.useDepthPacking&&h.enable(13),P.dithering&&h.enable(14),P.transmission&&h.enable(15),P.sheen&&h.enable(16),P.opaque&&h.enable(17),P.pointsUvs&&h.enable(18),P.decodeVideoTexture&&h.enable(19),P.decodeVideoTextureEmissive&&h.enable(20),P.alphaToCoverage&&h.enable(21),O.push(h.mask)}function D(O){const P=E[O.type];let Y;if(P){const ie=vo[P];Y=U2.clone(ie.uniforms)}else Y=O.uniforms;return Y}function L(O,P){let Y;for(let ie=0,re=y.length;ie<re;ie++){const de=y[ie];if(de.cacheKey===P){Y=de,++Y.usedTimes;break}}return Y===void 0&&(Y=new OF(i,P,O,r),y.push(Y)),Y}function I(O){if(--O.usedTimes===0){const P=y.indexOf(O);y[P]=y[y.length-1],y.pop(),O.destroy()}}function j(O){d.remove(O)}function k(){d.dispose()}return{getParameters:T,getProgramCacheKey:M,getUniforms:D,acquireProgram:L,releaseProgram:I,releaseShaderCache:j,programs:y,dispose:k}}function HF(){let i=new WeakMap;function e(c){return i.has(c)}function t(c){let h=i.get(c);return h===void 0&&(h={},i.set(c,h)),h}function n(c){i.delete(c)}function s(c,h,d){i.get(c)[h]=d}function r(){i=new WeakMap}return{has:e,get:t,remove:n,update:s,dispose:r}}function zF(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function uC(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function hC(){const i=[];let e=0;const t=[],n=[],s=[];function r(){e=0,t.length=0,n.length=0,s.length=0}function c(x,b,_,E,R,T){let M=i[e];return M===void 0?(M={id:x.id,object:x,geometry:b,material:_,groupOrder:E,renderOrder:x.renderOrder,z:R,group:T},i[e]=M):(M.id=x.id,M.object=x,M.geometry=b,M.material=_,M.groupOrder=E,M.renderOrder=x.renderOrder,M.z=R,M.group=T),e++,M}function h(x,b,_,E,R,T){const M=c(x,b,_,E,R,T);_.transmission>0?n.push(M):_.transparent===!0?s.push(M):t.push(M)}function d(x,b,_,E,R,T){const M=c(x,b,_,E,R,T);_.transmission>0?n.unshift(M):_.transparent===!0?s.unshift(M):t.unshift(M)}function p(x,b){t.length>1&&t.sort(x||zF),n.length>1&&n.sort(b||uC),s.length>1&&s.sort(b||uC)}function y(){for(let x=e,b=i.length;x<b;x++){const _=i[x];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:n,transparent:s,init:r,push:h,unshift:d,finish:y,sort:p}}function GF(){let i=new WeakMap;function e(n,s){const r=i.get(n);let c;return r===void 0?(c=new hC,i.set(n,[c])):s>=r.length?(c=new hC,r.push(c)):c=r[s],c}function t(){i=new WeakMap}return{get:e,dispose:t}}function jF(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new Et};break;case"SpotLight":t={position:new K,direction:new K,color:new Et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new Et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new Et,groundColor:new Et};break;case"RectAreaLight":t={color:new Et,position:new K,halfWidth:new K,halfHeight:new K};break}return i[e.id]=t,t}}}function kF(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let VF=0;function XF(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function YF(i){const e=new jF,t=kF(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new K);const s=new K,r=new Jt,c=new Jt;function h(p){let y=0,x=0,b=0;for(let O=0;O<9;O++)n.probe[O].set(0,0,0);let _=0,E=0,R=0,T=0,M=0,B=0,N=0,D=0,L=0,I=0,j=0;p.sort(XF);for(let O=0,P=p.length;O<P;O++){const Y=p[O],ie=Y.color,re=Y.intensity,de=Y.distance,pe=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)y+=ie.r*re,x+=ie.g*re,b+=ie.b*re;else if(Y.isLightProbe){for(let H=0;H<9;H++)n.probe[H].addScaledVector(Y.sh.coefficients[H],re);j++}else if(Y.isDirectionalLight){const H=e.get(Y);if(H.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const Z=Y.shadow,$=t.get(Y);$.shadowIntensity=Z.intensity,$.shadowBias=Z.bias,$.shadowNormalBias=Z.normalBias,$.shadowRadius=Z.radius,$.shadowMapSize=Z.mapSize,n.directionalShadow[_]=$,n.directionalShadowMap[_]=pe,n.directionalShadowMatrix[_]=Y.shadow.matrix,B++}n.directional[_]=H,_++}else if(Y.isSpotLight){const H=e.get(Y);H.position.setFromMatrixPosition(Y.matrixWorld),H.color.copy(ie).multiplyScalar(re),H.distance=de,H.coneCos=Math.cos(Y.angle),H.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),H.decay=Y.decay,n.spot[R]=H;const Z=Y.shadow;if(Y.map&&(n.spotLightMap[L]=Y.map,L++,Z.updateMatrices(Y),Y.castShadow&&I++),n.spotLightMatrix[R]=Z.matrix,Y.castShadow){const $=t.get(Y);$.shadowIntensity=Z.intensity,$.shadowBias=Z.bias,$.shadowNormalBias=Z.normalBias,$.shadowRadius=Z.radius,$.shadowMapSize=Z.mapSize,n.spotShadow[R]=$,n.spotShadowMap[R]=pe,D++}R++}else if(Y.isRectAreaLight){const H=e.get(Y);H.color.copy(ie).multiplyScalar(re),H.halfWidth.set(Y.width*.5,0,0),H.halfHeight.set(0,Y.height*.5,0),n.rectArea[T]=H,T++}else if(Y.isPointLight){const H=e.get(Y);if(H.color.copy(Y.color).multiplyScalar(Y.intensity),H.distance=Y.distance,H.decay=Y.decay,Y.castShadow){const Z=Y.shadow,$=t.get(Y);$.shadowIntensity=Z.intensity,$.shadowBias=Z.bias,$.shadowNormalBias=Z.normalBias,$.shadowRadius=Z.radius,$.shadowMapSize=Z.mapSize,$.shadowCameraNear=Z.camera.near,$.shadowCameraFar=Z.camera.far,n.pointShadow[E]=$,n.pointShadowMap[E]=pe,n.pointShadowMatrix[E]=Y.shadow.matrix,N++}n.point[E]=H,E++}else if(Y.isHemisphereLight){const H=e.get(Y);H.skyColor.copy(Y.color).multiplyScalar(re),H.groundColor.copy(Y.groundColor).multiplyScalar(re),n.hemi[M]=H,M++}}T>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=wt.LTC_FLOAT_1,n.rectAreaLTC2=wt.LTC_FLOAT_2):(n.rectAreaLTC1=wt.LTC_HALF_1,n.rectAreaLTC2=wt.LTC_HALF_2)),n.ambient[0]=y,n.ambient[1]=x,n.ambient[2]=b;const k=n.hash;(k.directionalLength!==_||k.pointLength!==E||k.spotLength!==R||k.rectAreaLength!==T||k.hemiLength!==M||k.numDirectionalShadows!==B||k.numPointShadows!==N||k.numSpotShadows!==D||k.numSpotMaps!==L||k.numLightProbes!==j)&&(n.directional.length=_,n.spot.length=R,n.rectArea.length=T,n.point.length=E,n.hemi.length=M,n.directionalShadow.length=B,n.directionalShadowMap.length=B,n.pointShadow.length=N,n.pointShadowMap.length=N,n.spotShadow.length=D,n.spotShadowMap.length=D,n.directionalShadowMatrix.length=B,n.pointShadowMatrix.length=N,n.spotLightMatrix.length=D+L-I,n.spotLightMap.length=L,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=j,k.directionalLength=_,k.pointLength=E,k.spotLength=R,k.rectAreaLength=T,k.hemiLength=M,k.numDirectionalShadows=B,k.numPointShadows=N,k.numSpotShadows=D,k.numSpotMaps=L,k.numLightProbes=j,n.version=VF++)}function d(p,y){let x=0,b=0,_=0,E=0,R=0;const T=y.matrixWorldInverse;for(let M=0,B=p.length;M<B;M++){const N=p[M];if(N.isDirectionalLight){const D=n.directional[x];D.direction.setFromMatrixPosition(N.matrixWorld),s.setFromMatrixPosition(N.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(T),x++}else if(N.isSpotLight){const D=n.spot[_];D.position.setFromMatrixPosition(N.matrixWorld),D.position.applyMatrix4(T),D.direction.setFromMatrixPosition(N.matrixWorld),s.setFromMatrixPosition(N.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(T),_++}else if(N.isRectAreaLight){const D=n.rectArea[E];D.position.setFromMatrixPosition(N.matrixWorld),D.position.applyMatrix4(T),c.identity(),r.copy(N.matrixWorld),r.premultiply(T),c.extractRotation(r),D.halfWidth.set(N.width*.5,0,0),D.halfHeight.set(0,N.height*.5,0),D.halfWidth.applyMatrix4(c),D.halfHeight.applyMatrix4(c),E++}else if(N.isPointLight){const D=n.point[b];D.position.setFromMatrixPosition(N.matrixWorld),D.position.applyMatrix4(T),b++}else if(N.isHemisphereLight){const D=n.hemi[R];D.direction.setFromMatrixPosition(N.matrixWorld),D.direction.transformDirection(T),R++}}}return{setup:h,setupView:d,state:n}}function fC(i){const e=new YF(i),t=[],n=[];function s(y){p.camera=y,t.length=0,n.length=0}function r(y){t.push(y)}function c(y){n.push(y)}function h(){e.setup(t)}function d(y){e.setupView(t,y)}const p={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:p,setupLights:h,setupLightsView:d,pushLight:r,pushShadow:c}}function qF(i){let e=new WeakMap;function t(s,r=0){const c=e.get(s);let h;return c===void 0?(h=new fC(i),e.set(s,[h])):r>=c.length?(h=new fC(i),c.push(h)):h=c[r],h}function n(){e=new WeakMap}return{get:t,dispose:n}}const WF=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,JF=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function KF(i,e,t){let n=new xp;const s=new Ye,r=new Ye,c=new Gn,h=new NS({depthPacking:y2}),d=new DS,p={},y=t.maxTextureSize,x={[vl]:Ma,[Ma]:vl,[or]:or},b=new Va({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:WF,fragmentShader:JF}),_=b.clone();_.defines.HORIZONTAL_PASS=1;const E=new pn;E.setAttribute("position",new jn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const R=new Bi(E,b),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ob;let M=this.type;this.render=function(I,j,k){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||I.length===0)return;const O=i.getRenderTarget(),P=i.getActiveCubeFace(),Y=i.getActiveMipmapLevel(),ie=i.state;ie.setBlending(ml),ie.buffers.depth.getReversed()===!0?ie.buffers.color.setClear(0,0,0,0):ie.buffers.color.setClear(1,1,1,1),ie.buffers.depth.setTest(!0),ie.setScissorTest(!1);const re=M!==go&&this.type===go,de=M===go&&this.type!==go;for(let pe=0,H=I.length;pe<H;pe++){const Z=I[pe],$=Z.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",Z,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;s.copy($.mapSize);const ge=$.getFrameExtents();if(s.multiply(ge),r.copy($.mapSize),(s.x>y||s.y>y)&&(s.x>y&&(r.x=Math.floor(y/ge.x),s.x=r.x*ge.x,$.mapSize.x=r.x),s.y>y&&(r.y=Math.floor(y/ge.y),s.y=r.y*ge.y,$.mapSize.y=r.y)),$.map===null||re===!0||de===!0){const ce=this.type!==go?{minFilter:Cs,magFilter:Cs}:{};$.map!==null&&$.map.dispose(),$.map=new Fr(s.x,s.y,ce),$.map.texture.name=Z.name+".shadowMap",$.camera.updateProjectionMatrix()}i.setRenderTarget($.map),i.clear();const X=$.getViewportCount();for(let ce=0;ce<X;ce++){const xe=$.getViewport(ce);c.set(r.x*xe.x,r.y*xe.y,r.x*xe.z,r.y*xe.w),ie.viewport(c),$.updateMatrices(Z,ce),n=$.getFrustum(),D(j,k,$.camera,Z,this.type)}$.isPointLightShadow!==!0&&this.type===go&&B($,k),$.needsUpdate=!1}M=this.type,T.needsUpdate=!1,i.setRenderTarget(O,P,Y)};function B(I,j){const k=e.update(R);b.defines.VSM_SAMPLES!==I.blurSamples&&(b.defines.VSM_SAMPLES=I.blurSamples,_.defines.VSM_SAMPLES=I.blurSamples,b.needsUpdate=!0,_.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Fr(s.x,s.y)),b.uniforms.shadow_pass.value=I.map.texture,b.uniforms.resolution.value=I.mapSize,b.uniforms.radius.value=I.radius,i.setRenderTarget(I.mapPass),i.clear(),i.renderBufferDirect(j,null,k,b,R,null),_.uniforms.shadow_pass.value=I.mapPass.texture,_.uniforms.resolution.value=I.mapSize,_.uniforms.radius.value=I.radius,i.setRenderTarget(I.map),i.clear(),i.renderBufferDirect(j,null,k,_,R,null)}function N(I,j,k,O){let P=null;const Y=k.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(Y!==void 0)P=Y;else if(P=k.isPointLight===!0?d:h,i.localClippingEnabled&&j.clipShadows===!0&&Array.isArray(j.clippingPlanes)&&j.clippingPlanes.length!==0||j.displacementMap&&j.displacementScale!==0||j.alphaMap&&j.alphaTest>0||j.map&&j.alphaTest>0||j.alphaToCoverage===!0){const ie=P.uuid,re=j.uuid;let de=p[ie];de===void 0&&(de={},p[ie]=de);let pe=de[re];pe===void 0&&(pe=P.clone(),de[re]=pe,j.addEventListener("dispose",L)),P=pe}if(P.visible=j.visible,P.wireframe=j.wireframe,O===go?P.side=j.shadowSide!==null?j.shadowSide:j.side:P.side=j.shadowSide!==null?j.shadowSide:x[j.side],P.alphaMap=j.alphaMap,P.alphaTest=j.alphaToCoverage===!0?.5:j.alphaTest,P.map=j.map,P.clipShadows=j.clipShadows,P.clippingPlanes=j.clippingPlanes,P.clipIntersection=j.clipIntersection,P.displacementMap=j.displacementMap,P.displacementScale=j.displacementScale,P.displacementBias=j.displacementBias,P.wireframeLinewidth=j.wireframeLinewidth,P.linewidth=j.linewidth,k.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const ie=i.properties.get(P);ie.light=k}return P}function D(I,j,k,O,P){if(I.visible===!1)return;if(I.layers.test(j.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&P===go)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,I.matrixWorld);const re=e.update(I),de=I.material;if(Array.isArray(de)){const pe=re.groups;for(let H=0,Z=pe.length;H<Z;H++){const $=pe[H],ge=de[$.materialIndex];if(ge&&ge.visible){const X=N(I,ge,O,P);I.onBeforeShadow(i,I,j,k,re,X,$),i.renderBufferDirect(k,null,re,X,I,$),I.onAfterShadow(i,I,j,k,re,X,$)}}}else if(de.visible){const pe=N(I,de,O,P);I.onBeforeShadow(i,I,j,k,re,pe,null),i.renderBufferDirect(k,null,re,pe,I,null),I.onAfterShadow(i,I,j,k,re,pe,null)}}const ie=I.children;for(let re=0,de=ie.length;re<de;re++)D(ie[re],j,k,O,P)}function L(I){I.target.removeEventListener("dispose",L);for(const k in p){const O=p[k],P=I.target.uuid;P in O&&(O[P].dispose(),delete O[P])}}}const ZF={[ix]:sx,[ax]:lx,[rx]:cx,[Qh]:ox,[sx]:ix,[lx]:ax,[cx]:rx,[ox]:Qh};function QF(i,e){function t(){let le=!1;const be=new Gn;let rt=null;const bt=new Gn(0,0,0,0);return{setMask:function(ct){rt!==ct&&!le&&(i.colorMask(ct,ct,ct,ct),rt=ct)},setLocked:function(ct){le=ct},setClear:function(ct,$e,Mt,Ot,un){un===!0&&(ct*=Ot,$e*=Ot,Mt*=Ot),be.set(ct,$e,Mt,Ot),bt.equals(be)===!1&&(i.clearColor(ct,$e,Mt,Ot),bt.copy(be))},reset:function(){le=!1,rt=null,bt.set(-1,0,0,0)}}}function n(){let le=!1,be=!1,rt=null,bt=null,ct=null;return{setReversed:function($e){if(be!==$e){const Mt=e.get("EXT_clip_control");$e?Mt.clipControlEXT(Mt.LOWER_LEFT_EXT,Mt.ZERO_TO_ONE_EXT):Mt.clipControlEXT(Mt.LOWER_LEFT_EXT,Mt.NEGATIVE_ONE_TO_ONE_EXT),be=$e;const Ot=ct;ct=null,this.setClear(Ot)}},getReversed:function(){return be},setTest:function($e){$e?Ge(i.DEPTH_TEST):qe(i.DEPTH_TEST)},setMask:function($e){rt!==$e&&!le&&(i.depthMask($e),rt=$e)},setFunc:function($e){if(be&&($e=ZF[$e]),bt!==$e){switch($e){case ix:i.depthFunc(i.NEVER);break;case sx:i.depthFunc(i.ALWAYS);break;case ax:i.depthFunc(i.LESS);break;case Qh:i.depthFunc(i.LEQUAL);break;case rx:i.depthFunc(i.EQUAL);break;case ox:i.depthFunc(i.GEQUAL);break;case lx:i.depthFunc(i.GREATER);break;case cx:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}bt=$e}},setLocked:function($e){le=$e},setClear:function($e){ct!==$e&&(be&&($e=1-$e),i.clearDepth($e),ct=$e)},reset:function(){le=!1,rt=null,bt=null,ct=null,be=!1}}}function s(){let le=!1,be=null,rt=null,bt=null,ct=null,$e=null,Mt=null,Ot=null,un=null;return{setTest:function(an){le||(an?Ge(i.STENCIL_TEST):qe(i.STENCIL_TEST))},setMask:function(an){be!==an&&!le&&(i.stencilMask(an),be=an)},setFunc:function(an,Fi,ni){(rt!==an||bt!==Fi||ct!==ni)&&(i.stencilFunc(an,Fi,ni),rt=an,bt=Fi,ct=ni)},setOp:function(an,Fi,ni){($e!==an||Mt!==Fi||Ot!==ni)&&(i.stencilOp(an,Fi,ni),$e=an,Mt=Fi,Ot=ni)},setLocked:function(an){le=an},setClear:function(an){un!==an&&(i.clearStencil(an),un=an)},reset:function(){le=!1,be=null,rt=null,bt=null,ct=null,$e=null,Mt=null,Ot=null,un=null}}}const r=new t,c=new n,h=new s,d=new WeakMap,p=new WeakMap;let y={},x={},b=new WeakMap,_=[],E=null,R=!1,T=null,M=null,B=null,N=null,D=null,L=null,I=null,j=new Et(0,0,0),k=0,O=!1,P=null,Y=null,ie=null,re=null,de=null;const pe=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let H=!1,Z=0;const $=i.getParameter(i.VERSION);$.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec($)[1]),H=Z>=1):$.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),H=Z>=2);let ge=null,X={};const ce=i.getParameter(i.SCISSOR_BOX),xe=i.getParameter(i.VIEWPORT),Te=new Gn().fromArray(ce),He=new Gn().fromArray(xe);function at(le,be,rt,bt){const ct=new Uint8Array(4),$e=i.createTexture();i.bindTexture(le,$e),i.texParameteri(le,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(le,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Mt=0;Mt<rt;Mt++)le===i.TEXTURE_3D||le===i.TEXTURE_2D_ARRAY?i.texImage3D(be,0,i.RGBA,1,1,bt,0,i.RGBA,i.UNSIGNED_BYTE,ct):i.texImage2D(be+Mt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ct);return $e}const me={};me[i.TEXTURE_2D]=at(i.TEXTURE_2D,i.TEXTURE_2D,1),me[i.TEXTURE_CUBE_MAP]=at(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),me[i.TEXTURE_2D_ARRAY]=at(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),me[i.TEXTURE_3D]=at(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),c.setClear(1),h.setClear(0),Ge(i.DEPTH_TEST),c.setFunc(Qh),Xe(!1),Le(m1),Ge(i.CULL_FACE),Ze(ml);function Ge(le){y[le]!==!0&&(i.enable(le),y[le]=!0)}function qe(le){y[le]!==!1&&(i.disable(le),y[le]=!1)}function _t(le,be){return x[le]!==be?(i.bindFramebuffer(le,be),x[le]=be,le===i.DRAW_FRAMEBUFFER&&(x[i.FRAMEBUFFER]=be),le===i.FRAMEBUFFER&&(x[i.DRAW_FRAMEBUFFER]=be),!0):!1}function vt(le,be){let rt=_,bt=!1;if(le){rt=b.get(be),rt===void 0&&(rt=[],b.set(be,rt));const ct=le.textures;if(rt.length!==ct.length||rt[0]!==i.COLOR_ATTACHMENT0){for(let $e=0,Mt=ct.length;$e<Mt;$e++)rt[$e]=i.COLOR_ATTACHMENT0+$e;rt.length=ct.length,bt=!0}}else rt[0]!==i.BACK&&(rt[0]=i.BACK,bt=!0);bt&&i.drawBuffers(rt)}function yt(le){return E!==le?(i.useProgram(le),E=le,!0):!1}const zt={[fu]:i.FUNC_ADD,[Gw]:i.FUNC_SUBTRACT,[jw]:i.FUNC_REVERSE_SUBTRACT};zt[kw]=i.MIN,zt[Vw]=i.MAX;const ne={[Xw]:i.ZERO,[Yw]:i.ONE,[qw]:i.SRC_COLOR,[tx]:i.SRC_ALPHA,[$w]:i.SRC_ALPHA_SATURATE,[Zw]:i.DST_COLOR,[Jw]:i.DST_ALPHA,[Ww]:i.ONE_MINUS_SRC_COLOR,[nx]:i.ONE_MINUS_SRC_ALPHA,[Qw]:i.ONE_MINUS_DST_COLOR,[Kw]:i.ONE_MINUS_DST_ALPHA,[e2]:i.CONSTANT_COLOR,[t2]:i.ONE_MINUS_CONSTANT_COLOR,[n2]:i.CONSTANT_ALPHA,[i2]:i.ONE_MINUS_CONSTANT_ALPHA};function Ze(le,be,rt,bt,ct,$e,Mt,Ot,un,an){if(le===ml){R===!0&&(qe(i.BLEND),R=!1);return}if(R===!1&&(Ge(i.BLEND),R=!0),le!==zw){if(le!==T||an!==O){if((M!==fu||D!==fu)&&(i.blendEquation(i.FUNC_ADD),M=fu,D=fu),an)switch(le){case Jh:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case g1:i.blendFunc(i.ONE,i.ONE);break;case v1:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case y1:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case Jh:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case g1:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case v1:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case y1:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}B=null,N=null,L=null,I=null,j.set(0,0,0),k=0,T=le,O=an}return}ct=ct||be,$e=$e||rt,Mt=Mt||bt,(be!==M||ct!==D)&&(i.blendEquationSeparate(zt[be],zt[ct]),M=be,D=ct),(rt!==B||bt!==N||$e!==L||Mt!==I)&&(i.blendFuncSeparate(ne[rt],ne[bt],ne[$e],ne[Mt]),B=rt,N=bt,L=$e,I=Mt),(Ot.equals(j)===!1||un!==k)&&(i.blendColor(Ot.r,Ot.g,Ot.b,un),j.copy(Ot),k=un),T=le,O=!1}function ke(le,be){le.side===or?qe(i.CULL_FACE):Ge(i.CULL_FACE);let rt=le.side===Ma;be&&(rt=!rt),Xe(rt),le.blending===Jh&&le.transparent===!1?Ze(ml):Ze(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.blendColor,le.blendAlpha,le.premultipliedAlpha),c.setFunc(le.depthFunc),c.setTest(le.depthTest),c.setMask(le.depthWrite),r.setMask(le.colorWrite);const bt=le.stencilWrite;h.setTest(bt),bt&&(h.setMask(le.stencilWriteMask),h.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),h.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),st(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?Ge(i.SAMPLE_ALPHA_TO_COVERAGE):qe(i.SAMPLE_ALPHA_TO_COVERAGE)}function Xe(le){P!==le&&(le?i.frontFace(i.CW):i.frontFace(i.CCW),P=le)}function Le(le){le!==Pw?(Ge(i.CULL_FACE),le!==Y&&(le===m1?i.cullFace(i.BACK):le===Fw?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):qe(i.CULL_FACE),Y=le}function dt(le){le!==ie&&(H&&i.lineWidth(le),ie=le)}function st(le,be,rt){le?(Ge(i.POLYGON_OFFSET_FILL),(re!==be||de!==rt)&&(i.polygonOffset(be,rt),re=be,de=rt)):qe(i.POLYGON_OFFSET_FILL)}function lt(le){le?Ge(i.SCISSOR_TEST):qe(i.SCISSOR_TEST)}function Ft(le){le===void 0&&(le=i.TEXTURE0+pe-1),ge!==le&&(i.activeTexture(le),ge=le)}function kt(le,be,rt){rt===void 0&&(ge===null?rt=i.TEXTURE0+pe-1:rt=ge);let bt=X[rt];bt===void 0&&(bt={type:void 0,texture:void 0},X[rt]=bt),(bt.type!==le||bt.texture!==be)&&(ge!==rt&&(i.activeTexture(rt),ge=rt),i.bindTexture(le,be||me[le]),bt.type=le,bt.texture=be)}function Q(){const le=X[ge];le!==void 0&&le.type!==void 0&&(i.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function V(){try{i.compressedTexImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Me(){try{i.compressedTexImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ie(){try{i.texSubImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function je(){try{i.texSubImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Pe(){try{i.compressedTexSubImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function xt(){try{i.compressedTexSubImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function pt(){try{i.texStorage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Bt(){try{i.texStorage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Nt(){try{i.texImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function tt(){try{i.texImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function ot(le){Te.equals(le)===!1&&(i.scissor(le.x,le.y,le.z,le.w),Te.copy(le))}function Ut(le){He.equals(le)===!1&&(i.viewport(le.x,le.y,le.z,le.w),He.copy(le))}function ae(le,be){let rt=p.get(be);rt===void 0&&(rt=new WeakMap,p.set(be,rt));let bt=rt.get(le);bt===void 0&&(bt=i.getUniformBlockIndex(be,le.name),rt.set(le,bt))}function Se(le,be){const bt=p.get(be).get(le);d.get(be)!==bt&&(i.uniformBlockBinding(be,bt,le.__bindingPointIndex),d.set(be,bt))}function nt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),c.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),y={},ge=null,X={},x={},b=new WeakMap,_=[],E=null,R=!1,T=null,M=null,B=null,N=null,D=null,L=null,I=null,j=new Et(0,0,0),k=0,O=!1,P=null,Y=null,ie=null,re=null,de=null,Te.set(0,0,i.canvas.width,i.canvas.height),He.set(0,0,i.canvas.width,i.canvas.height),r.reset(),c.reset(),h.reset()}return{buffers:{color:r,depth:c,stencil:h},enable:Ge,disable:qe,bindFramebuffer:_t,drawBuffers:vt,useProgram:yt,setBlending:Ze,setMaterial:ke,setFlipSided:Xe,setCullFace:Le,setLineWidth:dt,setPolygonOffset:st,setScissorTest:lt,activeTexture:Ft,bindTexture:kt,unbindTexture:Q,compressedTexImage2D:V,compressedTexImage3D:Me,texImage2D:Nt,texImage3D:tt,updateUBOMapping:ae,uniformBlockBinding:Se,texStorage2D:pt,texStorage3D:Bt,texSubImage2D:Ie,texSubImage3D:je,compressedTexSubImage2D:Pe,compressedTexSubImage3D:xt,scissor:ot,viewport:Ut,reset:nt}}function $F(i,e,t,n,s,r,c){const h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Ye,y=new WeakMap;let x;const b=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(Q,V){return _?new OffscreenCanvas(Q,V):Cg("canvas")}function R(Q,V,Me){let Ie=1;const je=kt(Q);if((je.width>Me||je.height>Me)&&(Ie=Me/Math.max(je.width,je.height)),Ie<1)if(typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Q instanceof ImageBitmap||typeof VideoFrame<"u"&&Q instanceof VideoFrame){const Pe=Math.floor(Ie*je.width),xt=Math.floor(Ie*je.height);x===void 0&&(x=E(Pe,xt));const pt=V?E(Pe,xt):x;return pt.width=Pe,pt.height=xt,pt.getContext("2d").drawImage(Q,0,0,Pe,xt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+je.width+"x"+je.height+") to ("+Pe+"x"+xt+")."),pt}else return"data"in Q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+je.width+"x"+je.height+")."),Q;return Q}function T(Q){return Q.generateMipmaps}function M(Q){i.generateMipmap(Q)}function B(Q){return Q.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:Q.isWebGL3DRenderTarget?i.TEXTURE_3D:Q.isWebGLArrayRenderTarget||Q.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function N(Q,V,Me,Ie,je=!1){if(Q!==null){if(i[Q]!==void 0)return i[Q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let Pe=V;if(V===i.RED&&(Me===i.FLOAT&&(Pe=i.R32F),Me===i.HALF_FLOAT&&(Pe=i.R16F),Me===i.UNSIGNED_BYTE&&(Pe=i.R8)),V===i.RED_INTEGER&&(Me===i.UNSIGNED_BYTE&&(Pe=i.R8UI),Me===i.UNSIGNED_SHORT&&(Pe=i.R16UI),Me===i.UNSIGNED_INT&&(Pe=i.R32UI),Me===i.BYTE&&(Pe=i.R8I),Me===i.SHORT&&(Pe=i.R16I),Me===i.INT&&(Pe=i.R32I)),V===i.RG&&(Me===i.FLOAT&&(Pe=i.RG32F),Me===i.HALF_FLOAT&&(Pe=i.RG16F),Me===i.UNSIGNED_BYTE&&(Pe=i.RG8)),V===i.RG_INTEGER&&(Me===i.UNSIGNED_BYTE&&(Pe=i.RG8UI),Me===i.UNSIGNED_SHORT&&(Pe=i.RG16UI),Me===i.UNSIGNED_INT&&(Pe=i.RG32UI),Me===i.BYTE&&(Pe=i.RG8I),Me===i.SHORT&&(Pe=i.RG16I),Me===i.INT&&(Pe=i.RG32I)),V===i.RGB_INTEGER&&(Me===i.UNSIGNED_BYTE&&(Pe=i.RGB8UI),Me===i.UNSIGNED_SHORT&&(Pe=i.RGB16UI),Me===i.UNSIGNED_INT&&(Pe=i.RGB32UI),Me===i.BYTE&&(Pe=i.RGB8I),Me===i.SHORT&&(Pe=i.RGB16I),Me===i.INT&&(Pe=i.RGB32I)),V===i.RGBA_INTEGER&&(Me===i.UNSIGNED_BYTE&&(Pe=i.RGBA8UI),Me===i.UNSIGNED_SHORT&&(Pe=i.RGBA16UI),Me===i.UNSIGNED_INT&&(Pe=i.RGBA32UI),Me===i.BYTE&&(Pe=i.RGBA8I),Me===i.SHORT&&(Pe=i.RGBA16I),Me===i.INT&&(Pe=i.RGBA32I)),V===i.RGB&&(Me===i.UNSIGNED_INT_5_9_9_9_REV&&(Pe=i.RGB9_E5),Me===i.UNSIGNED_INT_10F_11F_11F_REV&&(Pe=i.R11F_G11F_B10F)),V===i.RGBA){const xt=je?Eg:In.getTransfer(Ie);Me===i.FLOAT&&(Pe=i.RGBA32F),Me===i.HALF_FLOAT&&(Pe=i.RGBA16F),Me===i.UNSIGNED_BYTE&&(Pe=xt===oi?i.SRGB8_ALPHA8:i.RGBA8),Me===i.UNSIGNED_SHORT_4_4_4_4&&(Pe=i.RGBA4),Me===i.UNSIGNED_SHORT_5_5_5_1&&(Pe=i.RGB5_A1)}return(Pe===i.R16F||Pe===i.R32F||Pe===i.RG16F||Pe===i.RG32F||Pe===i.RGBA16F||Pe===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Pe}function D(Q,V){let Me;return Q?V===null||V===xl||V===ip?Me=i.DEPTH24_STENCIL8:V===Pi?Me=i.DEPTH32F_STENCIL8:V===np&&(Me=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===xl||V===ip?Me=i.DEPTH_COMPONENT24:V===Pi?Me=i.DEPTH_COMPONENT32F:V===np&&(Me=i.DEPTH_COMPONENT16),Me}function L(Q,V){return T(Q)===!0||Q.isFramebufferTexture&&Q.minFilter!==Cs&&Q.minFilter!==Kn?Math.log2(Math.max(V.width,V.height))+1:Q.mipmaps!==void 0&&Q.mipmaps.length>0?Q.mipmaps.length:Q.isCompressedTexture&&Array.isArray(Q.image)?V.mipmaps.length:1}function I(Q){const V=Q.target;V.removeEventListener("dispose",I),k(V),V.isVideoTexture&&y.delete(V)}function j(Q){const V=Q.target;V.removeEventListener("dispose",j),P(V)}function k(Q){const V=n.get(Q);if(V.__webglInit===void 0)return;const Me=Q.source,Ie=b.get(Me);if(Ie){const je=Ie[V.__cacheKey];je.usedTimes--,je.usedTimes===0&&O(Q),Object.keys(Ie).length===0&&b.delete(Me)}n.remove(Q)}function O(Q){const V=n.get(Q);i.deleteTexture(V.__webglTexture);const Me=Q.source,Ie=b.get(Me);delete Ie[V.__cacheKey],c.memory.textures--}function P(Q){const V=n.get(Q);if(Q.depthTexture&&(Q.depthTexture.dispose(),n.remove(Q.depthTexture)),Q.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++){if(Array.isArray(V.__webglFramebuffer[Ie]))for(let je=0;je<V.__webglFramebuffer[Ie].length;je++)i.deleteFramebuffer(V.__webglFramebuffer[Ie][je]);else i.deleteFramebuffer(V.__webglFramebuffer[Ie]);V.__webglDepthbuffer&&i.deleteRenderbuffer(V.__webglDepthbuffer[Ie])}else{if(Array.isArray(V.__webglFramebuffer))for(let Ie=0;Ie<V.__webglFramebuffer.length;Ie++)i.deleteFramebuffer(V.__webglFramebuffer[Ie]);else i.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&i.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&i.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let Ie=0;Ie<V.__webglColorRenderbuffer.length;Ie++)V.__webglColorRenderbuffer[Ie]&&i.deleteRenderbuffer(V.__webglColorRenderbuffer[Ie]);V.__webglDepthRenderbuffer&&i.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const Me=Q.textures;for(let Ie=0,je=Me.length;Ie<je;Ie++){const Pe=n.get(Me[Ie]);Pe.__webglTexture&&(i.deleteTexture(Pe.__webglTexture),c.memory.textures--),n.remove(Me[Ie])}n.remove(Q)}let Y=0;function ie(){Y=0}function re(){const Q=Y;return Q>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+s.maxTextures),Y+=1,Q}function de(Q){const V=[];return V.push(Q.wrapS),V.push(Q.wrapT),V.push(Q.wrapR||0),V.push(Q.magFilter),V.push(Q.minFilter),V.push(Q.anisotropy),V.push(Q.internalFormat),V.push(Q.format),V.push(Q.type),V.push(Q.generateMipmaps),V.push(Q.premultiplyAlpha),V.push(Q.flipY),V.push(Q.unpackAlignment),V.push(Q.colorSpace),V.join()}function pe(Q,V){const Me=n.get(Q);if(Q.isVideoTexture&&lt(Q),Q.isRenderTargetTexture===!1&&Q.isExternalTexture!==!0&&Q.version>0&&Me.__version!==Q.version){const Ie=Q.image;if(Ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{me(Me,Q,V);return}}else Q.isExternalTexture&&(Me.__webglTexture=Q.sourceTexture?Q.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,Me.__webglTexture,i.TEXTURE0+V)}function H(Q,V){const Me=n.get(Q);if(Q.isRenderTargetTexture===!1&&Q.version>0&&Me.__version!==Q.version){me(Me,Q,V);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Me.__webglTexture,i.TEXTURE0+V)}function Z(Q,V){const Me=n.get(Q);if(Q.isRenderTargetTexture===!1&&Q.version>0&&Me.__version!==Q.version){me(Me,Q,V);return}t.bindTexture(i.TEXTURE_3D,Me.__webglTexture,i.TEXTURE0+V)}function $(Q,V){const Me=n.get(Q);if(Q.version>0&&Me.__version!==Q.version){Ge(Me,Q,V);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Me.__webglTexture,i.TEXTURE0+V)}const ge={[_u]:i.REPEAT,[Ki]:i.CLAMP_TO_EDGE,[tp]:i.MIRRORED_REPEAT},X={[Cs]:i.NEAREST,[lb]:i.NEAREST_MIPMAP_NEAREST,[zh]:i.NEAREST_MIPMAP_LINEAR,[Kn]:i.LINEAR,[kd]:i.LINEAR_MIPMAP_NEAREST,[Or]:i.LINEAR_MIPMAP_LINEAR},ce={[b2]:i.NEVER,[T2]:i.ALWAYS,[_2]:i.LESS,[fS]:i.LEQUAL,[A2]:i.EQUAL,[E2]:i.GEQUAL,[S2]:i.GREATER,[M2]:i.NOTEQUAL};function xe(Q,V){if(V.type===Pi&&e.has("OES_texture_float_linear")===!1&&(V.magFilter===Kn||V.magFilter===kd||V.magFilter===zh||V.magFilter===Or||V.minFilter===Kn||V.minFilter===kd||V.minFilter===zh||V.minFilter===Or)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(Q,i.TEXTURE_WRAP_S,ge[V.wrapS]),i.texParameteri(Q,i.TEXTURE_WRAP_T,ge[V.wrapT]),(Q===i.TEXTURE_3D||Q===i.TEXTURE_2D_ARRAY)&&i.texParameteri(Q,i.TEXTURE_WRAP_R,ge[V.wrapR]),i.texParameteri(Q,i.TEXTURE_MAG_FILTER,X[V.magFilter]),i.texParameteri(Q,i.TEXTURE_MIN_FILTER,X[V.minFilter]),V.compareFunction&&(i.texParameteri(Q,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(Q,i.TEXTURE_COMPARE_FUNC,ce[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===Cs||V.minFilter!==zh&&V.minFilter!==Or||V.type===Pi&&e.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||n.get(V).__currentAnisotropy){const Me=e.get("EXT_texture_filter_anisotropic");i.texParameterf(Q,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,s.getMaxAnisotropy())),n.get(V).__currentAnisotropy=V.anisotropy}}}function Te(Q,V){let Me=!1;Q.__webglInit===void 0&&(Q.__webglInit=!0,V.addEventListener("dispose",I));const Ie=V.source;let je=b.get(Ie);je===void 0&&(je={},b.set(Ie,je));const Pe=de(V);if(Pe!==Q.__cacheKey){je[Pe]===void 0&&(je[Pe]={texture:i.createTexture(),usedTimes:0},c.memory.textures++,Me=!0),je[Pe].usedTimes++;const xt=je[Q.__cacheKey];xt!==void 0&&(je[Q.__cacheKey].usedTimes--,xt.usedTimes===0&&O(V)),Q.__cacheKey=Pe,Q.__webglTexture=je[Pe].texture}return Me}function He(Q,V,Me){return Math.floor(Math.floor(Q/Me)/V)}function at(Q,V,Me,Ie){const Pe=Q.updateRanges;if(Pe.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,V.width,V.height,Me,Ie,V.data);else{Pe.sort((tt,ot)=>tt.start-ot.start);let xt=0;for(let tt=1;tt<Pe.length;tt++){const ot=Pe[xt],Ut=Pe[tt],ae=ot.start+ot.count,Se=He(Ut.start,V.width,4),nt=He(ot.start,V.width,4);Ut.start<=ae+1&&Se===nt&&He(Ut.start+Ut.count-1,V.width,4)===Se?ot.count=Math.max(ot.count,Ut.start+Ut.count-ot.start):(++xt,Pe[xt]=Ut)}Pe.length=xt+1;const pt=i.getParameter(i.UNPACK_ROW_LENGTH),Bt=i.getParameter(i.UNPACK_SKIP_PIXELS),Nt=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,V.width);for(let tt=0,ot=Pe.length;tt<ot;tt++){const Ut=Pe[tt],ae=Math.floor(Ut.start/4),Se=Math.ceil(Ut.count/4),nt=ae%V.width,le=Math.floor(ae/V.width),be=Se,rt=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,nt),i.pixelStorei(i.UNPACK_SKIP_ROWS,le),t.texSubImage2D(i.TEXTURE_2D,0,nt,le,be,rt,Me,Ie,V.data)}Q.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,pt),i.pixelStorei(i.UNPACK_SKIP_PIXELS,Bt),i.pixelStorei(i.UNPACK_SKIP_ROWS,Nt)}}function me(Q,V,Me){let Ie=i.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(Ie=i.TEXTURE_2D_ARRAY),V.isData3DTexture&&(Ie=i.TEXTURE_3D);const je=Te(Q,V),Pe=V.source;t.bindTexture(Ie,Q.__webglTexture,i.TEXTURE0+Me);const xt=n.get(Pe);if(Pe.version!==xt.__version||je===!0){t.activeTexture(i.TEXTURE0+Me);const pt=In.getPrimaries(In.workingColorSpace),Bt=V.colorSpace===nc?null:In.getPrimaries(V.colorSpace),Nt=V.colorSpace===nc||pt===Bt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,V.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,V.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Nt);let tt=R(V.image,!1,s.maxTextureSize);tt=Ft(V,tt);const ot=r.convert(V.format,V.colorSpace),Ut=r.convert(V.type);let ae=N(V.internalFormat,ot,Ut,V.colorSpace,V.isVideoTexture);xe(Ie,V);let Se;const nt=V.mipmaps,le=V.isVideoTexture!==!0,be=xt.__version===void 0||je===!0,rt=Pe.dataReady,bt=L(V,tt);if(V.isDepthTexture)ae=D(V.format===ap,V.type),be&&(le?t.texStorage2D(i.TEXTURE_2D,1,ae,tt.width,tt.height):t.texImage2D(i.TEXTURE_2D,0,ae,tt.width,tt.height,0,ot,Ut,null));else if(V.isDataTexture)if(nt.length>0){le&&be&&t.texStorage2D(i.TEXTURE_2D,bt,ae,nt[0].width,nt[0].height);for(let ct=0,$e=nt.length;ct<$e;ct++)Se=nt[ct],le?rt&&t.texSubImage2D(i.TEXTURE_2D,ct,0,0,Se.width,Se.height,ot,Ut,Se.data):t.texImage2D(i.TEXTURE_2D,ct,ae,Se.width,Se.height,0,ot,Ut,Se.data);V.generateMipmaps=!1}else le?(be&&t.texStorage2D(i.TEXTURE_2D,bt,ae,tt.width,tt.height),rt&&at(V,tt,ot,Ut)):t.texImage2D(i.TEXTURE_2D,0,ae,tt.width,tt.height,0,ot,Ut,tt.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){le&&be&&t.texStorage3D(i.TEXTURE_2D_ARRAY,bt,ae,nt[0].width,nt[0].height,tt.depth);for(let ct=0,$e=nt.length;ct<$e;ct++)if(Se=nt[ct],V.format!==Zi)if(ot!==null)if(le){if(rt)if(V.layerUpdates.size>0){const Mt=R1(Se.width,Se.height,V.format,V.type);for(const Ot of V.layerUpdates){const un=Se.data.subarray(Ot*Mt/Se.data.BYTES_PER_ELEMENT,(Ot+1)*Mt/Se.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ct,0,0,Ot,Se.width,Se.height,1,ot,un)}V.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ct,0,0,0,Se.width,Se.height,tt.depth,ot,Se.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,ct,ae,Se.width,Se.height,tt.depth,0,Se.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else le?rt&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,ct,0,0,0,Se.width,Se.height,tt.depth,ot,Ut,Se.data):t.texImage3D(i.TEXTURE_2D_ARRAY,ct,ae,Se.width,Se.height,tt.depth,0,ot,Ut,Se.data)}else{le&&be&&t.texStorage2D(i.TEXTURE_2D,bt,ae,nt[0].width,nt[0].height);for(let ct=0,$e=nt.length;ct<$e;ct++)Se=nt[ct],V.format!==Zi?ot!==null?le?rt&&t.compressedTexSubImage2D(i.TEXTURE_2D,ct,0,0,Se.width,Se.height,ot,Se.data):t.compressedTexImage2D(i.TEXTURE_2D,ct,ae,Se.width,Se.height,0,Se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):le?rt&&t.texSubImage2D(i.TEXTURE_2D,ct,0,0,Se.width,Se.height,ot,Ut,Se.data):t.texImage2D(i.TEXTURE_2D,ct,ae,Se.width,Se.height,0,ot,Ut,Se.data)}else if(V.isDataArrayTexture)if(le){if(be&&t.texStorage3D(i.TEXTURE_2D_ARRAY,bt,ae,tt.width,tt.height,tt.depth),rt)if(V.layerUpdates.size>0){const ct=R1(tt.width,tt.height,V.format,V.type);for(const $e of V.layerUpdates){const Mt=tt.data.subarray($e*ct/tt.data.BYTES_PER_ELEMENT,($e+1)*ct/tt.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,$e,tt.width,tt.height,1,ot,Ut,Mt)}V.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,tt.width,tt.height,tt.depth,ot,Ut,tt.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,ae,tt.width,tt.height,tt.depth,0,ot,Ut,tt.data);else if(V.isData3DTexture)le?(be&&t.texStorage3D(i.TEXTURE_3D,bt,ae,tt.width,tt.height,tt.depth),rt&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,tt.width,tt.height,tt.depth,ot,Ut,tt.data)):t.texImage3D(i.TEXTURE_3D,0,ae,tt.width,tt.height,tt.depth,0,ot,Ut,tt.data);else if(V.isFramebufferTexture){if(be)if(le)t.texStorage2D(i.TEXTURE_2D,bt,ae,tt.width,tt.height);else{let ct=tt.width,$e=tt.height;for(let Mt=0;Mt<bt;Mt++)t.texImage2D(i.TEXTURE_2D,Mt,ae,ct,$e,0,ot,Ut,null),ct>>=1,$e>>=1}}else if(nt.length>0){if(le&&be){const ct=kt(nt[0]);t.texStorage2D(i.TEXTURE_2D,bt,ae,ct.width,ct.height)}for(let ct=0,$e=nt.length;ct<$e;ct++)Se=nt[ct],le?rt&&t.texSubImage2D(i.TEXTURE_2D,ct,0,0,ot,Ut,Se):t.texImage2D(i.TEXTURE_2D,ct,ae,ot,Ut,Se);V.generateMipmaps=!1}else if(le){if(be){const ct=kt(tt);t.texStorage2D(i.TEXTURE_2D,bt,ae,ct.width,ct.height)}rt&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,ot,Ut,tt)}else t.texImage2D(i.TEXTURE_2D,0,ae,ot,Ut,tt);T(V)&&M(Ie),xt.__version=Pe.version,V.onUpdate&&V.onUpdate(V)}Q.__version=V.version}function Ge(Q,V,Me){if(V.image.length!==6)return;const Ie=Te(Q,V),je=V.source;t.bindTexture(i.TEXTURE_CUBE_MAP,Q.__webglTexture,i.TEXTURE0+Me);const Pe=n.get(je);if(je.version!==Pe.__version||Ie===!0){t.activeTexture(i.TEXTURE0+Me);const xt=In.getPrimaries(In.workingColorSpace),pt=V.colorSpace===nc?null:In.getPrimaries(V.colorSpace),Bt=V.colorSpace===nc||xt===pt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,V.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,V.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Bt);const Nt=V.isCompressedTexture||V.image[0].isCompressedTexture,tt=V.image[0]&&V.image[0].isDataTexture,ot=[];for(let $e=0;$e<6;$e++)!Nt&&!tt?ot[$e]=R(V.image[$e],!0,s.maxCubemapSize):ot[$e]=tt?V.image[$e].image:V.image[$e],ot[$e]=Ft(V,ot[$e]);const Ut=ot[0],ae=r.convert(V.format,V.colorSpace),Se=r.convert(V.type),nt=N(V.internalFormat,ae,Se,V.colorSpace),le=V.isVideoTexture!==!0,be=Pe.__version===void 0||Ie===!0,rt=je.dataReady;let bt=L(V,Ut);xe(i.TEXTURE_CUBE_MAP,V);let ct;if(Nt){le&&be&&t.texStorage2D(i.TEXTURE_CUBE_MAP,bt,nt,Ut.width,Ut.height);for(let $e=0;$e<6;$e++){ct=ot[$e].mipmaps;for(let Mt=0;Mt<ct.length;Mt++){const Ot=ct[Mt];V.format!==Zi?ae!==null?le?rt&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Mt,0,0,Ot.width,Ot.height,ae,Ot.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Mt,nt,Ot.width,Ot.height,0,Ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):le?rt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Mt,0,0,Ot.width,Ot.height,ae,Se,Ot.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Mt,nt,Ot.width,Ot.height,0,ae,Se,Ot.data)}}}else{if(ct=V.mipmaps,le&&be){ct.length>0&&bt++;const $e=kt(ot[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,bt,nt,$e.width,$e.height)}for(let $e=0;$e<6;$e++)if(tt){le?rt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,ot[$e].width,ot[$e].height,ae,Se,ot[$e].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,nt,ot[$e].width,ot[$e].height,0,ae,Se,ot[$e].data);for(let Mt=0;Mt<ct.length;Mt++){const un=ct[Mt].image[$e].image;le?rt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Mt+1,0,0,un.width,un.height,ae,Se,un.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Mt+1,nt,un.width,un.height,0,ae,Se,un.data)}}else{le?rt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,ae,Se,ot[$e]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,nt,ae,Se,ot[$e]);for(let Mt=0;Mt<ct.length;Mt++){const Ot=ct[Mt];le?rt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Mt+1,0,0,ae,Se,Ot.image[$e]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Mt+1,nt,ae,Se,Ot.image[$e])}}}T(V)&&M(i.TEXTURE_CUBE_MAP),Pe.__version=je.version,V.onUpdate&&V.onUpdate(V)}Q.__version=V.version}function qe(Q,V,Me,Ie,je,Pe){const xt=r.convert(Me.format,Me.colorSpace),pt=r.convert(Me.type),Bt=N(Me.internalFormat,xt,pt,Me.colorSpace),Nt=n.get(V),tt=n.get(Me);if(tt.__renderTarget=V,!Nt.__hasExternalTextures){const ot=Math.max(1,V.width>>Pe),Ut=Math.max(1,V.height>>Pe);je===i.TEXTURE_3D||je===i.TEXTURE_2D_ARRAY?t.texImage3D(je,Pe,Bt,ot,Ut,V.depth,0,xt,pt,null):t.texImage2D(je,Pe,Bt,ot,Ut,0,xt,pt,null)}t.bindFramebuffer(i.FRAMEBUFFER,Q),st(V)?h.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ie,je,tt.__webglTexture,0,dt(V)):(je===i.TEXTURE_2D||je>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&je<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ie,je,tt.__webglTexture,Pe),t.bindFramebuffer(i.FRAMEBUFFER,null)}function _t(Q,V,Me){if(i.bindRenderbuffer(i.RENDERBUFFER,Q),V.depthBuffer){const Ie=V.depthTexture,je=Ie&&Ie.isDepthTexture?Ie.type:null,Pe=D(V.stencilBuffer,je),xt=V.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,pt=dt(V);st(V)?h.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,pt,Pe,V.width,V.height):Me?i.renderbufferStorageMultisample(i.RENDERBUFFER,pt,Pe,V.width,V.height):i.renderbufferStorage(i.RENDERBUFFER,Pe,V.width,V.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,xt,i.RENDERBUFFER,Q)}else{const Ie=V.textures;for(let je=0;je<Ie.length;je++){const Pe=Ie[je],xt=r.convert(Pe.format,Pe.colorSpace),pt=r.convert(Pe.type),Bt=N(Pe.internalFormat,xt,pt,Pe.colorSpace),Nt=dt(V);Me&&st(V)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Nt,Bt,V.width,V.height):st(V)?h.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Nt,Bt,V.width,V.height):i.renderbufferStorage(i.RENDERBUFFER,Bt,V.width,V.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function vt(Q,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,Q),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ie=n.get(V.depthTexture);Ie.__renderTarget=V,(!Ie.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),pe(V.depthTexture,0);const je=Ie.__webglTexture,Pe=dt(V);if(V.depthTexture.format===sp)st(V)?h.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,je,0,Pe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,je,0);else if(V.depthTexture.format===ap)st(V)?h.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,je,0,Pe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,je,0);else throw new Error("Unknown depthTexture format")}function yt(Q){const V=n.get(Q),Me=Q.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==Q.depthTexture){const Ie=Q.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),Ie){const je=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,Ie.removeEventListener("dispose",je)};Ie.addEventListener("dispose",je),V.__depthDisposeCallback=je}V.__boundDepthTexture=Ie}if(Q.depthTexture&&!V.__autoAllocateDepthBuffer){if(Me)throw new Error("target.depthTexture not supported in Cube render targets");const Ie=Q.texture.mipmaps;Ie&&Ie.length>0?vt(V.__webglFramebuffer[0],Q):vt(V.__webglFramebuffer,Q)}else if(Me){V.__webglDepthbuffer=[];for(let Ie=0;Ie<6;Ie++)if(t.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer[Ie]),V.__webglDepthbuffer[Ie]===void 0)V.__webglDepthbuffer[Ie]=i.createRenderbuffer(),_t(V.__webglDepthbuffer[Ie],Q,!1);else{const je=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Pe=V.__webglDepthbuffer[Ie];i.bindRenderbuffer(i.RENDERBUFFER,Pe),i.framebufferRenderbuffer(i.FRAMEBUFFER,je,i.RENDERBUFFER,Pe)}}else{const Ie=Q.texture.mipmaps;if(Ie&&Ie.length>0?t.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=i.createRenderbuffer(),_t(V.__webglDepthbuffer,Q,!1);else{const je=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Pe=V.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Pe),i.framebufferRenderbuffer(i.FRAMEBUFFER,je,i.RENDERBUFFER,Pe)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function zt(Q,V,Me){const Ie=n.get(Q);V!==void 0&&qe(Ie.__webglFramebuffer,Q,Q.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),Me!==void 0&&yt(Q)}function ne(Q){const V=Q.texture,Me=n.get(Q),Ie=n.get(V);Q.addEventListener("dispose",j);const je=Q.textures,Pe=Q.isWebGLCubeRenderTarget===!0,xt=je.length>1;if(xt||(Ie.__webglTexture===void 0&&(Ie.__webglTexture=i.createTexture()),Ie.__version=V.version,c.memory.textures++),Pe){Me.__webglFramebuffer=[];for(let pt=0;pt<6;pt++)if(V.mipmaps&&V.mipmaps.length>0){Me.__webglFramebuffer[pt]=[];for(let Bt=0;Bt<V.mipmaps.length;Bt++)Me.__webglFramebuffer[pt][Bt]=i.createFramebuffer()}else Me.__webglFramebuffer[pt]=i.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){Me.__webglFramebuffer=[];for(let pt=0;pt<V.mipmaps.length;pt++)Me.__webglFramebuffer[pt]=i.createFramebuffer()}else Me.__webglFramebuffer=i.createFramebuffer();if(xt)for(let pt=0,Bt=je.length;pt<Bt;pt++){const Nt=n.get(je[pt]);Nt.__webglTexture===void 0&&(Nt.__webglTexture=i.createTexture(),c.memory.textures++)}if(Q.samples>0&&st(Q)===!1){Me.__webglMultisampledFramebuffer=i.createFramebuffer(),Me.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Me.__webglMultisampledFramebuffer);for(let pt=0;pt<je.length;pt++){const Bt=je[pt];Me.__webglColorRenderbuffer[pt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Me.__webglColorRenderbuffer[pt]);const Nt=r.convert(Bt.format,Bt.colorSpace),tt=r.convert(Bt.type),ot=N(Bt.internalFormat,Nt,tt,Bt.colorSpace,Q.isXRRenderTarget===!0),Ut=dt(Q);i.renderbufferStorageMultisample(i.RENDERBUFFER,Ut,ot,Q.width,Q.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+pt,i.RENDERBUFFER,Me.__webglColorRenderbuffer[pt])}i.bindRenderbuffer(i.RENDERBUFFER,null),Q.depthBuffer&&(Me.__webglDepthRenderbuffer=i.createRenderbuffer(),_t(Me.__webglDepthRenderbuffer,Q,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Pe){t.bindTexture(i.TEXTURE_CUBE_MAP,Ie.__webglTexture),xe(i.TEXTURE_CUBE_MAP,V);for(let pt=0;pt<6;pt++)if(V.mipmaps&&V.mipmaps.length>0)for(let Bt=0;Bt<V.mipmaps.length;Bt++)qe(Me.__webglFramebuffer[pt][Bt],Q,V,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Bt);else qe(Me.__webglFramebuffer[pt],Q,V,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,0);T(V)&&M(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(xt){for(let pt=0,Bt=je.length;pt<Bt;pt++){const Nt=je[pt],tt=n.get(Nt);let ot=i.TEXTURE_2D;(Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(ot=Q.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(ot,tt.__webglTexture),xe(ot,Nt),qe(Me.__webglFramebuffer,Q,Nt,i.COLOR_ATTACHMENT0+pt,ot,0),T(Nt)&&M(ot)}t.unbindTexture()}else{let pt=i.TEXTURE_2D;if((Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(pt=Q.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(pt,Ie.__webglTexture),xe(pt,V),V.mipmaps&&V.mipmaps.length>0)for(let Bt=0;Bt<V.mipmaps.length;Bt++)qe(Me.__webglFramebuffer[Bt],Q,V,i.COLOR_ATTACHMENT0,pt,Bt);else qe(Me.__webglFramebuffer,Q,V,i.COLOR_ATTACHMENT0,pt,0);T(V)&&M(pt),t.unbindTexture()}Q.depthBuffer&&yt(Q)}function Ze(Q){const V=Q.textures;for(let Me=0,Ie=V.length;Me<Ie;Me++){const je=V[Me];if(T(je)){const Pe=B(Q),xt=n.get(je).__webglTexture;t.bindTexture(Pe,xt),M(Pe),t.unbindTexture()}}}const ke=[],Xe=[];function Le(Q){if(Q.samples>0){if(st(Q)===!1){const V=Q.textures,Me=Q.width,Ie=Q.height;let je=i.COLOR_BUFFER_BIT;const Pe=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,xt=n.get(Q),pt=V.length>1;if(pt)for(let Nt=0;Nt<V.length;Nt++)t.bindFramebuffer(i.FRAMEBUFFER,xt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,xt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,xt.__webglMultisampledFramebuffer);const Bt=Q.texture.mipmaps;Bt&&Bt.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,xt.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,xt.__webglFramebuffer);for(let Nt=0;Nt<V.length;Nt++){if(Q.resolveDepthBuffer&&(Q.depthBuffer&&(je|=i.DEPTH_BUFFER_BIT),Q.stencilBuffer&&Q.resolveStencilBuffer&&(je|=i.STENCIL_BUFFER_BIT)),pt){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,xt.__webglColorRenderbuffer[Nt]);const tt=n.get(V[Nt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,tt,0)}i.blitFramebuffer(0,0,Me,Ie,0,0,Me,Ie,je,i.NEAREST),d===!0&&(ke.length=0,Xe.length=0,ke.push(i.COLOR_ATTACHMENT0+Nt),Q.depthBuffer&&Q.resolveDepthBuffer===!1&&(ke.push(Pe),Xe.push(Pe),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Xe)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,ke))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),pt)for(let Nt=0;Nt<V.length;Nt++){t.bindFramebuffer(i.FRAMEBUFFER,xt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.RENDERBUFFER,xt.__webglColorRenderbuffer[Nt]);const tt=n.get(V[Nt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,xt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Nt,i.TEXTURE_2D,tt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,xt.__webglMultisampledFramebuffer)}else if(Q.depthBuffer&&Q.resolveDepthBuffer===!1&&d){const V=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[V])}}}function dt(Q){return Math.min(s.maxSamples,Q.samples)}function st(Q){const V=n.get(Q);return Q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function lt(Q){const V=c.render.frame;y.get(Q)!==V&&(y.set(Q,V),Q.update())}function Ft(Q,V){const Me=Q.colorSpace,Ie=Q.format,je=Q.type;return Q.isCompressedTexture===!0||Q.isVideoTexture===!0||Me!==Mo&&Me!==nc&&(In.getTransfer(Me)===oi?(Ie!==Zi||je!==Ea)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Me)),V}function kt(Q){return typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?(p.width=Q.naturalWidth||Q.width,p.height=Q.naturalHeight||Q.height):typeof VideoFrame<"u"&&Q instanceof VideoFrame?(p.width=Q.displayWidth,p.height=Q.displayHeight):(p.width=Q.width,p.height=Q.height),p}this.allocateTextureUnit=re,this.resetTextureUnits=ie,this.setTexture2D=pe,this.setTexture2DArray=H,this.setTexture3D=Z,this.setTextureCube=$,this.rebindTextures=zt,this.setupRenderTarget=ne,this.updateRenderTargetMipmap=Ze,this.updateMultisampleRenderTarget=Le,this.setupDepthRenderbuffer=yt,this.setupFrameBufferTexture=qe,this.useMultisampledRTT=st}function BR(i,e){function t(n,s=nc){let r;const c=In.getTransfer(s);if(n===Ea)return i.UNSIGNED_BYTE;if(n===hb)return i.UNSIGNED_SHORT_4_4_4_4;if(n===fb)return i.UNSIGNED_SHORT_5_5_5_1;if(n===aS)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===rS)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===cb)return i.BYTE;if(n===ub)return i.SHORT;if(n===np)return i.UNSIGNED_SHORT;if(n===Xg)return i.INT;if(n===xl)return i.UNSIGNED_INT;if(n===Pi)return i.FLOAT;if(n===Ts)return i.HALF_FLOAT;if(n===oS)return i.ALPHA;if(n===lS)return i.RGB;if(n===Zi)return i.RGBA;if(n===sp)return i.DEPTH_COMPONENT;if(n===ap)return i.DEPTH_STENCIL;if(n===Yg)return i.RED;if(n===qg)return i.RED_INTEGER;if(n===cS)return i.RG;if(n===db)return i.RG_INTEGER;if(n===pb)return i.RGBA_INTEGER;if(n===ug||n===hg||n===fg||n===dg)if(c===oi)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===ug)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===hg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===fg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===dg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===ug)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===hg)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===fg)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===dg)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===ux||n===hx||n===fx||n===dx)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===ux)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===hx)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===fx)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===dx)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===px||n===mx||n===gx)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(n===px||n===mx)return c===oi?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===gx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===vx||n===yx||n===xx||n===bx||n===_x||n===Ax||n===Sx||n===Mx||n===Ex||n===Tx||n===Cx||n===wx||n===Rx||n===Bx)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(n===vx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===yx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===xx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===bx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===_x)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Ax)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Sx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Mx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Ex)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Tx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Cx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===wx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Rx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Bx)return c===oi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Nx||n===Dx||n===Ux)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===Nx)return c===oi?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Dx)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Ux)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Ox||n===Lx||n===Ix||n===Px)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===Ox)return r.COMPRESSED_RED_RGTC1_EXT;if(n===Lx)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Ix)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Px)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===ip?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const eH=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,tH=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class nH{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new MS(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Va({vertexShader:eH,fragmentShader:tH,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Bi(new Eu(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class iH extends bl{constructor(e,t){super();const n=this;let s=null,r=1,c=null,h="local-floor",d=1,p=null,y=null,x=null,b=null,_=null,E=null;const R=typeof XRWebGLBinding<"u",T=new nH,M={},B=t.getContextAttributes();let N=null,D=null;const L=[],I=[],j=new Ye;let k=null;const O=new Ri;O.viewport=new Gn;const P=new Ri;P.viewport=new Gn;const Y=[O,P],ie=new bR;let re=null,de=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(me){let Ge=L[me];return Ge===void 0&&(Ge=new qy,L[me]=Ge),Ge.getTargetRaySpace()},this.getControllerGrip=function(me){let Ge=L[me];return Ge===void 0&&(Ge=new qy,L[me]=Ge),Ge.getGripSpace()},this.getHand=function(me){let Ge=L[me];return Ge===void 0&&(Ge=new qy,L[me]=Ge),Ge.getHandSpace()};function pe(me){const Ge=I.indexOf(me.inputSource);if(Ge===-1)return;const qe=L[Ge];qe!==void 0&&(qe.update(me.inputSource,me.frame,p||c),qe.dispatchEvent({type:me.type,data:me.inputSource}))}function H(){s.removeEventListener("select",pe),s.removeEventListener("selectstart",pe),s.removeEventListener("selectend",pe),s.removeEventListener("squeeze",pe),s.removeEventListener("squeezestart",pe),s.removeEventListener("squeezeend",pe),s.removeEventListener("end",H),s.removeEventListener("inputsourceschange",Z);for(let me=0;me<L.length;me++){const Ge=I[me];Ge!==null&&(I[me]=null,L[me].disconnect(Ge))}re=null,de=null,T.reset();for(const me in M)delete M[me];e.setRenderTarget(N),_=null,b=null,x=null,s=null,D=null,at.stop(),n.isPresenting=!1,e.setPixelRatio(k),e.setSize(j.width,j.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(me){r=me,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(me){h=me,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||c},this.setReferenceSpace=function(me){p=me},this.getBaseLayer=function(){return b!==null?b:_},this.getBinding=function(){return x===null&&R&&(x=new XRWebGLBinding(s,t)),x},this.getFrame=function(){return E},this.getSession=function(){return s},this.setSession=async function(me){if(s=me,s!==null){if(N=e.getRenderTarget(),s.addEventListener("select",pe),s.addEventListener("selectstart",pe),s.addEventListener("selectend",pe),s.addEventListener("squeeze",pe),s.addEventListener("squeezestart",pe),s.addEventListener("squeezeend",pe),s.addEventListener("end",H),s.addEventListener("inputsourceschange",Z),B.xrCompatible!==!0&&await t.makeXRCompatible(),k=e.getPixelRatio(),e.getSize(j),R&&"createProjectionLayer"in XRWebGLBinding.prototype){let qe=null,_t=null,vt=null;B.depth&&(vt=B.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,qe=B.stencil?ap:sp,_t=B.stencil?ip:xl);const yt={colorFormat:t.RGBA8,depthFormat:vt,scaleFactor:r};x=this.getBinding(),b=x.createProjectionLayer(yt),s.updateRenderState({layers:[b]}),e.setPixelRatio(1),e.setSize(b.textureWidth,b.textureHeight,!1),D=new Fr(b.textureWidth,b.textureHeight,{format:Zi,type:Ea,depthTexture:new SS(b.textureWidth,b.textureHeight,_t,void 0,void 0,void 0,void 0,void 0,void 0,qe),stencilBuffer:B.stencil,colorSpace:e.outputColorSpace,samples:B.antialias?4:0,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}else{const qe={antialias:B.antialias,alpha:!0,depth:B.depth,stencil:B.stencil,framebufferScaleFactor:r};_=new XRWebGLLayer(s,t,qe),s.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),D=new Fr(_.framebufferWidth,_.framebufferHeight,{format:Zi,type:Ea,colorSpace:e.outputColorSpace,stencilBuffer:B.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}D.isXRRenderTarget=!0,this.setFoveation(d),p=null,c=await s.requestReferenceSpace(h),at.setContext(s),at.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function Z(me){for(let Ge=0;Ge<me.removed.length;Ge++){const qe=me.removed[Ge],_t=I.indexOf(qe);_t>=0&&(I[_t]=null,L[_t].disconnect(qe))}for(let Ge=0;Ge<me.added.length;Ge++){const qe=me.added[Ge];let _t=I.indexOf(qe);if(_t===-1){for(let yt=0;yt<L.length;yt++)if(yt>=I.length){I.push(qe),_t=yt;break}else if(I[yt]===null){I[yt]=qe,_t=yt;break}if(_t===-1)break}const vt=L[_t];vt&&vt.connect(qe)}}const $=new K,ge=new K;function X(me,Ge,qe){$.setFromMatrixPosition(Ge.matrixWorld),ge.setFromMatrixPosition(qe.matrixWorld);const _t=$.distanceTo(ge),vt=Ge.projectionMatrix.elements,yt=qe.projectionMatrix.elements,zt=vt[14]/(vt[10]-1),ne=vt[14]/(vt[10]+1),Ze=(vt[9]+1)/vt[5],ke=(vt[9]-1)/vt[5],Xe=(vt[8]-1)/vt[0],Le=(yt[8]+1)/yt[0],dt=zt*Xe,st=zt*Le,lt=_t/(-Xe+Le),Ft=lt*-Xe;if(Ge.matrixWorld.decompose(me.position,me.quaternion,me.scale),me.translateX(Ft),me.translateZ(lt),me.matrixWorld.compose(me.position,me.quaternion,me.scale),me.matrixWorldInverse.copy(me.matrixWorld).invert(),vt[10]===-1)me.projectionMatrix.copy(Ge.projectionMatrix),me.projectionMatrixInverse.copy(Ge.projectionMatrixInverse);else{const kt=zt+lt,Q=ne+lt,V=dt-Ft,Me=st+(_t-Ft),Ie=Ze*ne/Q*kt,je=ke*ne/Q*kt;me.projectionMatrix.makePerspective(V,Me,Ie,je,kt,Q),me.projectionMatrixInverse.copy(me.projectionMatrix).invert()}}function ce(me,Ge){Ge===null?me.matrixWorld.copy(me.matrix):me.matrixWorld.multiplyMatrices(Ge.matrixWorld,me.matrix),me.matrixWorldInverse.copy(me.matrixWorld).invert()}this.updateCamera=function(me){if(s===null)return;let Ge=me.near,qe=me.far;T.texture!==null&&(T.depthNear>0&&(Ge=T.depthNear),T.depthFar>0&&(qe=T.depthFar)),ie.near=P.near=O.near=Ge,ie.far=P.far=O.far=qe,(re!==ie.near||de!==ie.far)&&(s.updateRenderState({depthNear:ie.near,depthFar:ie.far}),re=ie.near,de=ie.far),ie.layers.mask=me.layers.mask|6,O.layers.mask=ie.layers.mask&3,P.layers.mask=ie.layers.mask&5;const _t=me.parent,vt=ie.cameras;ce(ie,_t);for(let yt=0;yt<vt.length;yt++)ce(vt[yt],_t);vt.length===2?X(ie,O,P):ie.projectionMatrix.copy(O.projectionMatrix),xe(me,ie,_t)};function xe(me,Ge,qe){qe===null?me.matrix.copy(Ge.matrixWorld):(me.matrix.copy(qe.matrixWorld),me.matrix.invert(),me.matrix.multiply(Ge.matrixWorld)),me.matrix.decompose(me.position,me.quaternion,me.scale),me.updateMatrixWorld(!0),me.projectionMatrix.copy(Ge.projectionMatrix),me.projectionMatrixInverse.copy(Ge.projectionMatrixInverse),me.isPerspectiveCamera&&(me.fov=cp*2*Math.atan(1/me.projectionMatrix.elements[5]),me.zoom=1)}this.getCamera=function(){return ie},this.getFoveation=function(){if(!(b===null&&_===null))return d},this.setFoveation=function(me){d=me,b!==null&&(b.fixedFoveation=me),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=me)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(ie)},this.getCameraTexture=function(me){return M[me]};let Te=null;function He(me,Ge){if(y=Ge.getViewerPose(p||c),E=Ge,y!==null){const qe=y.views;_!==null&&(e.setRenderTargetFramebuffer(D,_.framebuffer),e.setRenderTarget(D));let _t=!1;qe.length!==ie.cameras.length&&(ie.cameras.length=0,_t=!0);for(let ne=0;ne<qe.length;ne++){const Ze=qe[ne];let ke=null;if(_!==null)ke=_.getViewport(Ze);else{const Le=x.getViewSubImage(b,Ze);ke=Le.viewport,ne===0&&(e.setRenderTargetTextures(D,Le.colorTexture,Le.depthStencilTexture),e.setRenderTarget(D))}let Xe=Y[ne];Xe===void 0&&(Xe=new Ri,Xe.layers.enable(ne),Xe.viewport=new Gn,Y[ne]=Xe),Xe.matrix.fromArray(Ze.transform.matrix),Xe.matrix.decompose(Xe.position,Xe.quaternion,Xe.scale),Xe.projectionMatrix.fromArray(Ze.projectionMatrix),Xe.projectionMatrixInverse.copy(Xe.projectionMatrix).invert(),Xe.viewport.set(ke.x,ke.y,ke.width,ke.height),ne===0&&(ie.matrix.copy(Xe.matrix),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale)),_t===!0&&ie.cameras.push(Xe)}const vt=s.enabledFeatures;if(vt&&vt.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&R){x=n.getBinding();const ne=x.getDepthInformation(qe[0]);ne&&ne.isValid&&ne.texture&&T.init(ne,s.renderState)}if(vt&&vt.includes("camera-access")&&R){e.state.unbindTexture(),x=n.getBinding();for(let ne=0;ne<qe.length;ne++){const Ze=qe[ne].camera;if(Ze){let ke=M[Ze];ke||(ke=new MS,M[Ze]=ke);const Xe=x.getCameraImage(Ze);ke.sourceTexture=Xe}}}}for(let qe=0;qe<L.length;qe++){const _t=I[qe],vt=L[qe];_t!==null&&vt!==void 0&&vt.update(_t,Ge,p||c)}Te&&Te(me,Ge),Ge.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ge}),E=null}const at=new ER;at.setAnimationLoop(He),this.setAnimationLoop=function(me){Te=me},this.dispose=function(){}}}const Nh=new ur,sH=new Jt;function aH(i,e){function t(T,M){T.matrixAutoUpdate===!0&&T.updateMatrix(),M.value.copy(T.matrix)}function n(T,M){M.color.getRGB(T.fogColor.value,D2(i)),M.isFog?(T.fogNear.value=M.near,T.fogFar.value=M.far):M.isFogExp2&&(T.fogDensity.value=M.density)}function s(T,M,B,N,D){M.isMeshBasicMaterial||M.isMeshLambertMaterial?r(T,M):M.isMeshToonMaterial?(r(T,M),x(T,M)):M.isMeshPhongMaterial?(r(T,M),y(T,M)):M.isMeshStandardMaterial?(r(T,M),b(T,M),M.isMeshPhysicalMaterial&&_(T,M,D)):M.isMeshMatcapMaterial?(r(T,M),E(T,M)):M.isMeshDepthMaterial?r(T,M):M.isMeshDistanceMaterial?(r(T,M),R(T,M)):M.isMeshNormalMaterial?r(T,M):M.isLineBasicMaterial?(c(T,M),M.isLineDashedMaterial&&h(T,M)):M.isPointsMaterial?d(T,M,B,N):M.isSpriteMaterial?p(T,M):M.isShadowMaterial?(T.color.value.copy(M.color),T.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function r(T,M){T.opacity.value=M.opacity,M.color&&T.diffuse.value.copy(M.color),M.emissive&&T.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(T.map.value=M.map,t(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.bumpMap&&(T.bumpMap.value=M.bumpMap,t(M.bumpMap,T.bumpMapTransform),T.bumpScale.value=M.bumpScale,M.side===Ma&&(T.bumpScale.value*=-1)),M.normalMap&&(T.normalMap.value=M.normalMap,t(M.normalMap,T.normalMapTransform),T.normalScale.value.copy(M.normalScale),M.side===Ma&&T.normalScale.value.negate()),M.displacementMap&&(T.displacementMap.value=M.displacementMap,t(M.displacementMap,T.displacementMapTransform),T.displacementScale.value=M.displacementScale,T.displacementBias.value=M.displacementBias),M.emissiveMap&&(T.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,T.emissiveMapTransform)),M.specularMap&&(T.specularMap.value=M.specularMap,t(M.specularMap,T.specularMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest);const B=e.get(M),N=B.envMap,D=B.envMapRotation;N&&(T.envMap.value=N,Nh.copy(D),Nh.x*=-1,Nh.y*=-1,Nh.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Nh.y*=-1,Nh.z*=-1),T.envMapRotation.value.setFromMatrix4(sH.makeRotationFromEuler(Nh)),T.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=M.reflectivity,T.ior.value=M.ior,T.refractionRatio.value=M.refractionRatio),M.lightMap&&(T.lightMap.value=M.lightMap,T.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,T.lightMapTransform)),M.aoMap&&(T.aoMap.value=M.aoMap,T.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,T.aoMapTransform))}function c(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,M.map&&(T.map.value=M.map,t(M.map,T.mapTransform))}function h(T,M){T.dashSize.value=M.dashSize,T.totalSize.value=M.dashSize+M.gapSize,T.scale.value=M.scale}function d(T,M,B,N){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.size.value=M.size*B,T.scale.value=N*.5,M.map&&(T.map.value=M.map,t(M.map,T.uvTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function p(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.rotation.value=M.rotation,M.map&&(T.map.value=M.map,t(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function y(T,M){T.specular.value.copy(M.specular),T.shininess.value=Math.max(M.shininess,1e-4)}function x(T,M){M.gradientMap&&(T.gradientMap.value=M.gradientMap)}function b(T,M){T.metalness.value=M.metalness,M.metalnessMap&&(T.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,T.metalnessMapTransform)),T.roughness.value=M.roughness,M.roughnessMap&&(T.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,T.roughnessMapTransform)),M.envMap&&(T.envMapIntensity.value=M.envMapIntensity)}function _(T,M,B){T.ior.value=M.ior,M.sheen>0&&(T.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),T.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(T.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,T.sheenColorMapTransform)),M.sheenRoughnessMap&&(T.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,T.sheenRoughnessMapTransform))),M.clearcoat>0&&(T.clearcoat.value=M.clearcoat,T.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(T.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,T.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(T.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===Ma&&T.clearcoatNormalScale.value.negate())),M.dispersion>0&&(T.dispersion.value=M.dispersion),M.iridescence>0&&(T.iridescence.value=M.iridescence,T.iridescenceIOR.value=M.iridescenceIOR,T.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(T.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,T.iridescenceMapTransform)),M.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),M.transmission>0&&(T.transmission.value=M.transmission,T.transmissionSamplerMap.value=B.texture,T.transmissionSamplerSize.value.set(B.width,B.height),M.transmissionMap&&(T.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,T.transmissionMapTransform)),T.thickness.value=M.thickness,M.thicknessMap&&(T.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=M.attenuationDistance,T.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(T.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(T.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=M.specularIntensity,T.specularColor.value.copy(M.specularColor),M.specularColorMap&&(T.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,T.specularColorMapTransform)),M.specularIntensityMap&&(T.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,T.specularIntensityMapTransform))}function E(T,M){M.matcap&&(T.matcap.value=M.matcap)}function R(T,M){const B=e.get(M).light;T.referencePosition.value.setFromMatrixPosition(B.matrixWorld),T.nearDistance.value=B.shadow.camera.near,T.farDistance.value=B.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function rH(i,e,t,n){let s={},r={},c=[];const h=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function d(B,N){const D=N.program;n.uniformBlockBinding(B,D)}function p(B,N){let D=s[B.id];D===void 0&&(E(B),D=y(B),s[B.id]=D,B.addEventListener("dispose",T));const L=N.program;n.updateUBOMapping(B,L);const I=e.render.frame;r[B.id]!==I&&(b(B),r[B.id]=I)}function y(B){const N=x();B.__bindingPointIndex=N;const D=i.createBuffer(),L=B.__size,I=B.usage;return i.bindBuffer(i.UNIFORM_BUFFER,D),i.bufferData(i.UNIFORM_BUFFER,L,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,N,D),D}function x(){for(let B=0;B<h;B++)if(c.indexOf(B)===-1)return c.push(B),B;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function b(B){const N=s[B.id],D=B.uniforms,L=B.__cache;i.bindBuffer(i.UNIFORM_BUFFER,N);for(let I=0,j=D.length;I<j;I++){const k=Array.isArray(D[I])?D[I]:[D[I]];for(let O=0,P=k.length;O<P;O++){const Y=k[O];if(_(Y,I,O,L)===!0){const ie=Y.__offset,re=Array.isArray(Y.value)?Y.value:[Y.value];let de=0;for(let pe=0;pe<re.length;pe++){const H=re[pe],Z=R(H);typeof H=="number"||typeof H=="boolean"?(Y.__data[0]=H,i.bufferSubData(i.UNIFORM_BUFFER,ie+de,Y.__data)):H.isMatrix3?(Y.__data[0]=H.elements[0],Y.__data[1]=H.elements[1],Y.__data[2]=H.elements[2],Y.__data[3]=0,Y.__data[4]=H.elements[3],Y.__data[5]=H.elements[4],Y.__data[6]=H.elements[5],Y.__data[7]=0,Y.__data[8]=H.elements[6],Y.__data[9]=H.elements[7],Y.__data[10]=H.elements[8],Y.__data[11]=0):(H.toArray(Y.__data,de),de+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ie,Y.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function _(B,N,D,L){const I=B.value,j=N+"_"+D;if(L[j]===void 0)return typeof I=="number"||typeof I=="boolean"?L[j]=I:L[j]=I.clone(),!0;{const k=L[j];if(typeof I=="number"||typeof I=="boolean"){if(k!==I)return L[j]=I,!0}else if(k.equals(I)===!1)return k.copy(I),!0}return!1}function E(B){const N=B.uniforms;let D=0;const L=16;for(let j=0,k=N.length;j<k;j++){const O=Array.isArray(N[j])?N[j]:[N[j]];for(let P=0,Y=O.length;P<Y;P++){const ie=O[P],re=Array.isArray(ie.value)?ie.value:[ie.value];for(let de=0,pe=re.length;de<pe;de++){const H=re[de],Z=R(H),$=D%L,ge=$%Z.boundary,X=$+ge;D+=ge,X!==0&&L-X<Z.storage&&(D+=L-X),ie.__data=new Float32Array(Z.storage/Float32Array.BYTES_PER_ELEMENT),ie.__offset=D,D+=Z.storage}}}const I=D%L;return I>0&&(D+=L-I),B.__size=D,B.__cache={},this}function R(B){const N={boundary:0,storage:0};return typeof B=="number"||typeof B=="boolean"?(N.boundary=4,N.storage=4):B.isVector2?(N.boundary=8,N.storage=8):B.isVector3||B.isColor?(N.boundary=16,N.storage=12):B.isVector4?(N.boundary=16,N.storage=16):B.isMatrix3?(N.boundary=48,N.storage=48):B.isMatrix4?(N.boundary=64,N.storage=64):B.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",B),N}function T(B){const N=B.target;N.removeEventListener("dispose",T);const D=c.indexOf(N.__bindingPointIndex);c.splice(D,1),i.deleteBuffer(s[N.id]),delete s[N.id],delete r[N.id]}function M(){for(const B in s)i.deleteBuffer(s[B]);c=[],s={},r={}}return{bind:d,update:p,dispose:M}}class JS{constructor(e={}){const{canvas:t=R2(),context:n=null,depth:s=!0,stencil:r=!1,alpha:c=!1,antialias:h=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:y="default",failIfMajorPerformanceCaveat:x=!1,reversedDepthBuffer:b=!1}=e;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=c;const E=new Uint32Array(4),R=new Int32Array(4);let T=null,M=null;const B=[],N=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=gl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const D=this;let L=!1;this._outputColorSpace=Gs;let I=0,j=0,k=null,O=-1,P=null;const Y=new Gn,ie=new Gn;let re=null;const de=new Et(0);let pe=0,H=t.width,Z=t.height,$=1,ge=null,X=null;const ce=new Gn(0,0,H,Z),xe=new Gn(0,0,H,Z);let Te=!1;const He=new xp;let at=!1,me=!1;const Ge=new Jt,qe=new K,_t=new Gn,vt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let yt=!1;function zt(){return k===null?$:1}let ne=n;function Ze(z,ee){return t.getContext(z,ee)}try{const z={alpha:!0,depth:s,stencil:r,antialias:h,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:y,failIfMajorPerformanceCaveat:x};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${kg}`),t.addEventListener("webglcontextlost",rt,!1),t.addEventListener("webglcontextrestored",bt,!1),t.addEventListener("webglcontextcreationerror",ct,!1),ne===null){const ee="webgl2";if(ne=Ze(ee,z),ne===null)throw Ze(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let ke,Xe,Le,dt,st,lt,Ft,kt,Q,V,Me,Ie,je,Pe,xt,pt,Bt,Nt,tt,ot,Ut,ae,Se,nt;function le(){ke=new yP(ne),ke.init(),ae=new BR(ne,ke),Xe=new hP(ne,ke,e,ae),Le=new QF(ne,ke),Xe.reversedDepthBuffer&&b&&Le.buffers.depth.setReversed(!0),dt=new _P(ne),st=new HF,lt=new $F(ne,ke,Le,st,Xe,ae,dt),Ft=new dP(D),kt=new vP(D),Q=new CL(ne),Se=new cP(ne,Q),V=new xP(ne,Q,dt,Se),Me=new SP(ne,V,Q,dt),tt=new AP(ne,Xe,lt),pt=new fP(st),Ie=new FF(D,Ft,kt,ke,Xe,Se,pt),je=new aH(D,st),Pe=new GF,xt=new qF(ke),Nt=new lP(D,Ft,kt,Le,Me,_,d),Bt=new KF(D,Me,Xe),nt=new rH(ne,dt,Xe,Le),ot=new uP(ne,ke,dt),Ut=new bP(ne,ke,dt),dt.programs=Ie.programs,D.capabilities=Xe,D.extensions=ke,D.properties=st,D.renderLists=Pe,D.shadowMap=Bt,D.state=Le,D.info=dt}le();const be=new iH(D,ne);this.xr=be,this.getContext=function(){return ne},this.getContextAttributes=function(){return ne.getContextAttributes()},this.forceContextLoss=function(){const z=ke.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){const z=ke.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(z){z!==void 0&&($=z,this.setSize(H,Z,!1))},this.getSize=function(z){return z.set(H,Z)},this.setSize=function(z,ee,se=!0){if(be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=z,Z=ee,t.width=Math.floor(z*$),t.height=Math.floor(ee*$),se===!0&&(t.style.width=z+"px",t.style.height=ee+"px"),this.setViewport(0,0,z,ee)},this.getDrawingBufferSize=function(z){return z.set(H*$,Z*$).floor()},this.setDrawingBufferSize=function(z,ee,se){H=z,Z=ee,$=se,t.width=Math.floor(z*se),t.height=Math.floor(ee*se),this.setViewport(0,0,z,ee)},this.getCurrentViewport=function(z){return z.copy(Y)},this.getViewport=function(z){return z.copy(ce)},this.setViewport=function(z,ee,se,he){z.isVector4?ce.set(z.x,z.y,z.z,z.w):ce.set(z,ee,se,he),Le.viewport(Y.copy(ce).multiplyScalar($).round())},this.getScissor=function(z){return z.copy(xe)},this.setScissor=function(z,ee,se,he){z.isVector4?xe.set(z.x,z.y,z.z,z.w):xe.set(z,ee,se,he),Le.scissor(ie.copy(xe).multiplyScalar($).round())},this.getScissorTest=function(){return Te},this.setScissorTest=function(z){Le.setScissorTest(Te=z)},this.setOpaqueSort=function(z){ge=z},this.setTransparentSort=function(z){X=z},this.getClearColor=function(z){return z.copy(Nt.getClearColor())},this.setClearColor=function(){Nt.setClearColor(...arguments)},this.getClearAlpha=function(){return Nt.getClearAlpha()},this.setClearAlpha=function(){Nt.setClearAlpha(...arguments)},this.clear=function(z=!0,ee=!0,se=!0){let he=0;if(z){let te=!1;if(k!==null){const Qe=k.texture.format;te=Qe===pb||Qe===db||Qe===qg}if(te){const Qe=k.texture.type,Fe=Qe===Ea||Qe===xl||Qe===np||Qe===ip||Qe===hb||Qe===fb,Ve=Nt.getClearColor(),We=Nt.getClearAlpha(),ht=Ve.r,At=Ve.g,gt=Ve.b;Fe?(E[0]=ht,E[1]=At,E[2]=gt,E[3]=We,ne.clearBufferuiv(ne.COLOR,0,E)):(R[0]=ht,R[1]=At,R[2]=gt,R[3]=We,ne.clearBufferiv(ne.COLOR,0,R))}else he|=ne.COLOR_BUFFER_BIT}ee&&(he|=ne.DEPTH_BUFFER_BIT),se&&(he|=ne.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ne.clear(he)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",rt,!1),t.removeEventListener("webglcontextrestored",bt,!1),t.removeEventListener("webglcontextcreationerror",ct,!1),Nt.dispose(),Pe.dispose(),xt.dispose(),st.dispose(),Ft.dispose(),kt.dispose(),Me.dispose(),Se.dispose(),nt.dispose(),Ie.dispose(),be.dispose(),be.removeEventListener("sessionstart",ni),be.removeEventListener("sessionend",Si),li.stop()};function rt(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function bt(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;const z=dt.autoReset,ee=Bt.enabled,se=Bt.autoUpdate,he=Bt.needsUpdate,te=Bt.type;le(),dt.autoReset=z,Bt.enabled=ee,Bt.autoUpdate=se,Bt.needsUpdate=he,Bt.type=te}function ct(z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",z.statusMessage)}function $e(z){const ee=z.target;ee.removeEventListener("dispose",$e),Mt(ee)}function Mt(z){Ot(z),st.remove(z)}function Ot(z){const ee=st.get(z).programs;ee!==void 0&&(ee.forEach(function(se){Ie.releaseProgram(se)}),z.isShaderMaterial&&Ie.releaseShaderCache(z))}this.renderBufferDirect=function(z,ee,se,he,te,Qe){ee===null&&(ee=vt);const Fe=te.isMesh&&te.matrixWorld.determinant()<0,Ve=J(z,ee,se,he,te);Le.setMaterial(he,Fe);let We=se.index,ht=1;if(he.wireframe===!0){if(We=V.getWireframeAttribute(se),We===void 0)return;ht=2}const At=se.drawRange,gt=se.attributes.position;let Pt=At.start*ht,Zt=(At.start+At.count)*ht;Qe!==null&&(Pt=Math.max(Pt,Qe.start*ht),Zt=Math.min(Zt,(Qe.start+Qe.count)*ht)),We!==null?(Pt=Math.max(Pt,0),Zt=Math.min(Zt,We.count)):gt!=null&&(Pt=Math.max(Pt,0),Zt=Math.min(Zt,gt.count));const Xt=Zt-Pt;if(Xt<0||Xt===1/0)return;Se.setup(te,he,Ve,se,We);let vn,Dt=ot;if(We!==null&&(vn=Q.get(We),Dt=Ut,Dt.setIndex(vn)),te.isMesh)he.wireframe===!0?(Le.setLineWidth(he.wireframeLinewidth*zt()),Dt.setMode(ne.LINES)):Dt.setMode(ne.TRIANGLES);else if(te.isLine){let Tt=he.linewidth;Tt===void 0&&(Tt=1),Le.setLineWidth(Tt*zt()),te.isLineSegments?Dt.setMode(ne.LINES):te.isLineLoop?Dt.setMode(ne.LINE_LOOP):Dt.setMode(ne.LINE_STRIP)}else te.isPoints?Dt.setMode(ne.POINTS):te.isSprite&&Dt.setMode(ne.TRIANGLES);if(te.isBatchedMesh)if(te._multiDrawInstances!==null)wg("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Dt.renderMultiDrawInstances(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount,te._multiDrawInstances);else if(ke.get("WEBGL_multi_draw"))Dt.renderMultiDraw(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount);else{const Tt=te._multiDrawStarts,Rn=te._multiDrawCounts,rn=te._multiDrawCount,kn=We?Q.get(We).bytesPerElement:1,yn=st.get(he).currentProgram.getUniforms();for(let Dn=0;Dn<rn;Dn++)yn.setValue(ne,"_gl_DrawID",Dn),Dt.render(Tt[Dn]/kn,Rn[Dn])}else if(te.isInstancedMesh)Dt.renderInstances(Pt,Xt,te.count);else if(se.isInstancedBufferGeometry){const Tt=se._maxInstanceCount!==void 0?se._maxInstanceCount:1/0,Rn=Math.min(se.instanceCount,Tt);Dt.renderInstances(Pt,Xt,Rn)}else Dt.render(Pt,Xt)};function un(z,ee,se){z.transparent===!0&&z.side===or&&z.forceSinglePass===!1?(z.side=Ma,z.needsUpdate=!0,ys(z,ee,se),z.side=vl,z.needsUpdate=!0,ys(z,ee,se),z.side=or):ys(z,ee,se)}this.compile=function(z,ee,se=null){se===null&&(se=z),M=xt.get(se),M.init(ee),N.push(M),se.traverseVisible(function(te){te.isLight&&te.layers.test(ee.layers)&&(M.pushLight(te),te.castShadow&&M.pushShadow(te))}),z!==se&&z.traverseVisible(function(te){te.isLight&&te.layers.test(ee.layers)&&(M.pushLight(te),te.castShadow&&M.pushShadow(te))}),M.setupLights();const he=new Set;return z.traverse(function(te){if(!(te.isMesh||te.isPoints||te.isLine||te.isSprite))return;const Qe=te.material;if(Qe)if(Array.isArray(Qe))for(let Fe=0;Fe<Qe.length;Fe++){const Ve=Qe[Fe];un(Ve,se,te),he.add(Ve)}else un(Qe,se,te),he.add(Qe)}),M=N.pop(),he},this.compileAsync=function(z,ee,se=null){const he=this.compile(z,ee,se);return new Promise(te=>{function Qe(){if(he.forEach(function(Fe){st.get(Fe).currentProgram.isReady()&&he.delete(Fe)}),he.size===0){te(z);return}setTimeout(Qe,10)}ke.get("KHR_parallel_shader_compile")!==null?Qe():setTimeout(Qe,10)})};let an=null;function Fi(z){an&&an(z)}function ni(){li.stop()}function Si(){li.start()}const li=new ER;li.setAnimationLoop(Fi),typeof self<"u"&&li.setContext(self),this.setAnimationLoop=function(z){an=z,be.setAnimationLoop(z),z===null?li.stop():li.start()},be.addEventListener("sessionstart",ni),be.addEventListener("sessionend",Si),this.render=function(z,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;if(z.matrixWorldAutoUpdate===!0&&z.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),be.enabled===!0&&be.isPresenting===!0&&(be.cameraAutoUpdate===!0&&be.updateCamera(ee),ee=be.getCamera()),z.isScene===!0&&z.onBeforeRender(D,z,ee,k),M=xt.get(z,N.length),M.init(ee),N.push(M),Ge.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),He.setFromProjectionMatrix(Ge,lr,ee.reversedDepth),me=this.localClippingEnabled,at=pt.init(this.clippingPlanes,me),T=Pe.get(z,B.length),T.init(),B.push(T),be.enabled===!0&&be.isPresenting===!0){const Qe=D.xr.getDepthSensingMesh();Qe!==null&&as(Qe,ee,-1/0,D.sortObjects)}as(z,ee,0,D.sortObjects),T.finish(),D.sortObjects===!0&&T.sort(ge,X),yt=be.enabled===!1||be.isPresenting===!1||be.hasDepthSensing()===!1,yt&&Nt.addToRenderList(T,z),this.info.render.frame++,at===!0&&pt.beginShadows();const se=M.state.shadowsArray;Bt.render(se,z,ee),at===!0&&pt.endShadows(),this.info.autoReset===!0&&this.info.reset();const he=T.opaque,te=T.transmissive;if(M.setupLights(),ee.isArrayCamera){const Qe=ee.cameras;if(te.length>0)for(let Fe=0,Ve=Qe.length;Fe<Ve;Fe++){const We=Qe[Fe];Xa(he,te,z,We)}yt&&Nt.render(z);for(let Fe=0,Ve=Qe.length;Fe<Ve;Fe++){const We=Qe[Fe];Bs(T,z,We,We.viewport)}}else te.length>0&&Xa(he,te,z,ee),yt&&Nt.render(z),Bs(T,z,ee);k!==null&&j===0&&(lt.updateMultisampleRenderTarget(k),lt.updateRenderTargetMipmap(k)),z.isScene===!0&&z.onAfterRender(D,z,ee),Se.resetDefaultState(),O=-1,P=null,N.pop(),N.length>0?(M=N[N.length-1],at===!0&&pt.setGlobalState(D.clippingPlanes,M.state.camera)):M=null,B.pop(),B.length>0?T=B[B.length-1]:T=null};function as(z,ee,se,he){if(z.visible===!1)return;if(z.layers.test(ee.layers)){if(z.isGroup)se=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(ee);else if(z.isLight)M.pushLight(z),z.castShadow&&M.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||He.intersectsSprite(z)){he&&_t.setFromMatrixPosition(z.matrixWorld).applyMatrix4(Ge);const Fe=Me.update(z),Ve=z.material;Ve.visible&&T.push(z,Fe,Ve,se,_t.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(!z.frustumCulled||He.intersectsObject(z))){const Fe=Me.update(z),Ve=z.material;if(he&&(z.boundingSphere!==void 0?(z.boundingSphere===null&&z.computeBoundingSphere(),_t.copy(z.boundingSphere.center)):(Fe.boundingSphere===null&&Fe.computeBoundingSphere(),_t.copy(Fe.boundingSphere.center)),_t.applyMatrix4(z.matrixWorld).applyMatrix4(Ge)),Array.isArray(Ve)){const We=Fe.groups;for(let ht=0,At=We.length;ht<At;ht++){const gt=We[ht],Pt=Ve[gt.materialIndex];Pt&&Pt.visible&&T.push(z,Fe,Pt,se,_t.z,gt)}}else Ve.visible&&T.push(z,Fe,Ve,se,_t.z,null)}}const Qe=z.children;for(let Fe=0,Ve=Qe.length;Fe<Ve;Fe++)as(Qe[Fe],ee,se,he)}function Bs(z,ee,se,he){const te=z.opaque,Qe=z.transmissive,Fe=z.transparent;M.setupLightsView(se),at===!0&&pt.setGlobalState(D.clippingPlanes,se),he&&Le.viewport(Y.copy(he)),te.length>0&&ki(te,ee,se),Qe.length>0&&ki(Qe,ee,se),Fe.length>0&&ki(Fe,ee,se),Le.buffers.depth.setTest(!0),Le.buffers.depth.setMask(!0),Le.buffers.color.setMask(!0),Le.setPolygonOffset(!1)}function Xa(z,ee,se,he){if((se.isScene===!0?se.overrideMaterial:null)!==null)return;M.state.transmissionRenderTarget[he.id]===void 0&&(M.state.transmissionRenderTarget[he.id]=new Fr(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")||ke.has("EXT_color_buffer_float")?Ts:Ea,minFilter:Or,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:In.workingColorSpace}));const Qe=M.state.transmissionRenderTarget[he.id],Fe=he.viewport||Y;Qe.setSize(Fe.z*D.transmissionResolutionScale,Fe.w*D.transmissionResolutionScale);const Ve=D.getRenderTarget(),We=D.getActiveCubeFace(),ht=D.getActiveMipmapLevel();D.setRenderTarget(Qe),D.getClearColor(de),pe=D.getClearAlpha(),pe<1&&D.setClearColor(16777215,.5),D.clear(),yt&&Nt.render(se);const At=D.toneMapping;D.toneMapping=gl;const gt=he.viewport;if(he.viewport!==void 0&&(he.viewport=void 0),M.setupLightsView(he),at===!0&&pt.setGlobalState(D.clippingPlanes,he),ki(z,se,he),lt.updateMultisampleRenderTarget(Qe),lt.updateRenderTargetMipmap(Qe),ke.has("WEBGL_multisampled_render_to_texture")===!1){let Pt=!1;for(let Zt=0,Xt=ee.length;Zt<Xt;Zt++){const vn=ee[Zt],Dt=vn.object,Tt=vn.geometry,Rn=vn.material,rn=vn.group;if(Rn.side===or&&Dt.layers.test(he.layers)){const kn=Rn.side;Rn.side=Ma,Rn.needsUpdate=!0,Kt(Dt,se,he,Tt,Rn,rn),Rn.side=kn,Rn.needsUpdate=!0,Pt=!0}}Pt===!0&&(lt.updateMultisampleRenderTarget(Qe),lt.updateRenderTargetMipmap(Qe))}D.setRenderTarget(Ve,We,ht),D.setClearColor(de,pe),gt!==void 0&&(he.viewport=gt),D.toneMapping=At}function ki(z,ee,se){const he=ee.isScene===!0?ee.overrideMaterial:null;for(let te=0,Qe=z.length;te<Qe;te++){const Fe=z[te],Ve=Fe.object,We=Fe.geometry,ht=Fe.group;let At=Fe.material;At.allowOverride===!0&&he!==null&&(At=he),Ve.layers.test(se.layers)&&Kt(Ve,ee,se,We,At,ht)}}function Kt(z,ee,se,he,te,Qe){z.onBeforeRender(D,ee,se,he,te,Qe),z.modelViewMatrix.multiplyMatrices(se.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),te.onBeforeRender(D,ee,se,he,z,Qe),te.transparent===!0&&te.side===or&&te.forceSinglePass===!1?(te.side=Ma,te.needsUpdate=!0,D.renderBufferDirect(se,ee,he,te,z,Qe),te.side=vl,te.needsUpdate=!0,D.renderBufferDirect(se,ee,he,te,z,Qe),te.side=or):D.renderBufferDirect(se,ee,he,te,z,Qe),z.onAfterRender(D,ee,se,he,te,Qe)}function ys(z,ee,se){ee.isScene!==!0&&(ee=vt);const he=st.get(z),te=M.state.lights,Qe=M.state.shadowsArray,Fe=te.state.version,Ve=Ie.getParameters(z,te.state,Qe,ee,se),We=Ie.getProgramCacheKey(Ve);let ht=he.programs;he.environment=z.isMeshStandardMaterial?ee.environment:null,he.fog=ee.fog,he.envMap=(z.isMeshStandardMaterial?kt:Ft).get(z.envMap||he.environment),he.envMapRotation=he.environment!==null&&z.envMap===null?ee.environmentRotation:z.envMapRotation,ht===void 0&&(z.addEventListener("dispose",$e),ht=new Map,he.programs=ht);let At=ht.get(We);if(At!==void 0){if(he.currentProgram===At&&he.lightsStateVersion===Fe)return G(z,Ve),At}else Ve.uniforms=Ie.getUniforms(z),z.onBeforeCompile(Ve,D),At=Ie.acquireProgram(Ve,We),ht.set(We,At),he.uniforms=Ve.uniforms;const gt=he.uniforms;return(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(gt.clippingPlanes=pt.uniform),G(z,Ve),he.needsLights=Re(z),he.lightsStateVersion=Fe,he.needsLights&&(gt.ambientLightColor.value=te.state.ambient,gt.lightProbe.value=te.state.probe,gt.directionalLights.value=te.state.directional,gt.directionalLightShadows.value=te.state.directionalShadow,gt.spotLights.value=te.state.spot,gt.spotLightShadows.value=te.state.spotShadow,gt.rectAreaLights.value=te.state.rectArea,gt.ltc_1.value=te.state.rectAreaLTC1,gt.ltc_2.value=te.state.rectAreaLTC2,gt.pointLights.value=te.state.point,gt.pointLightShadows.value=te.state.pointShadow,gt.hemisphereLights.value=te.state.hemi,gt.directionalShadowMap.value=te.state.directionalShadowMap,gt.directionalShadowMatrix.value=te.state.directionalShadowMatrix,gt.spotShadowMap.value=te.state.spotShadowMap,gt.spotLightMatrix.value=te.state.spotLightMatrix,gt.spotLightMap.value=te.state.spotLightMap,gt.pointShadowMap.value=te.state.pointShadowMap,gt.pointShadowMatrix.value=te.state.pointShadowMatrix),he.currentProgram=At,he.uniformsList=null,At}function Zn(z){if(z.uniformsList===null){const ee=z.currentProgram.getUniforms();z.uniformsList=Wy.seqWithValue(ee.seq,z.uniforms)}return z.uniformsList}function G(z,ee){const se=st.get(z);se.outputColorSpace=ee.outputColorSpace,se.batching=ee.batching,se.batchingColor=ee.batchingColor,se.instancing=ee.instancing,se.instancingColor=ee.instancingColor,se.instancingMorph=ee.instancingMorph,se.skinning=ee.skinning,se.morphTargets=ee.morphTargets,se.morphNormals=ee.morphNormals,se.morphColors=ee.morphColors,se.morphTargetsCount=ee.morphTargetsCount,se.numClippingPlanes=ee.numClippingPlanes,se.numIntersection=ee.numClipIntersection,se.vertexAlphas=ee.vertexAlphas,se.vertexTangents=ee.vertexTangents,se.toneMapping=ee.toneMapping}function J(z,ee,se,he,te){ee.isScene!==!0&&(ee=vt),lt.resetTextureUnits();const Qe=ee.fog,Fe=he.isMeshStandardMaterial?ee.environment:null,Ve=k===null?D.outputColorSpace:k.isXRRenderTarget===!0?k.texture.colorSpace:Mo,We=(he.isMeshStandardMaterial?kt:Ft).get(he.envMap||Fe),ht=he.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,At=!!se.attributes.tangent&&(!!he.normalMap||he.anisotropy>0),gt=!!se.morphAttributes.position,Pt=!!se.morphAttributes.normal,Zt=!!se.morphAttributes.color;let Xt=gl;he.toneMapped&&(k===null||k.isXRRenderTarget===!0)&&(Xt=D.toneMapping);const vn=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,Dt=vn!==void 0?vn.length:0,Tt=st.get(he),Rn=M.state.lights;if(at===!0&&(me===!0||z!==P)){const En=z===P&&he.id===O;pt.setState(he,z,En)}let rn=!1;he.version===Tt.__version?(Tt.needsLights&&Tt.lightsStateVersion!==Rn.state.version||Tt.outputColorSpace!==Ve||te.isBatchedMesh&&Tt.batching===!1||!te.isBatchedMesh&&Tt.batching===!0||te.isBatchedMesh&&Tt.batchingColor===!0&&te.colorTexture===null||te.isBatchedMesh&&Tt.batchingColor===!1&&te.colorTexture!==null||te.isInstancedMesh&&Tt.instancing===!1||!te.isInstancedMesh&&Tt.instancing===!0||te.isSkinnedMesh&&Tt.skinning===!1||!te.isSkinnedMesh&&Tt.skinning===!0||te.isInstancedMesh&&Tt.instancingColor===!0&&te.instanceColor===null||te.isInstancedMesh&&Tt.instancingColor===!1&&te.instanceColor!==null||te.isInstancedMesh&&Tt.instancingMorph===!0&&te.morphTexture===null||te.isInstancedMesh&&Tt.instancingMorph===!1&&te.morphTexture!==null||Tt.envMap!==We||he.fog===!0&&Tt.fog!==Qe||Tt.numClippingPlanes!==void 0&&(Tt.numClippingPlanes!==pt.numPlanes||Tt.numIntersection!==pt.numIntersection)||Tt.vertexAlphas!==ht||Tt.vertexTangents!==At||Tt.morphTargets!==gt||Tt.morphNormals!==Pt||Tt.morphColors!==Zt||Tt.toneMapping!==Xt||Tt.morphTargetsCount!==Dt)&&(rn=!0):(rn=!0,Tt.__version=he.version);let kn=Tt.currentProgram;rn===!0&&(kn=ys(he,ee,te));let yn=!1,Dn=!1,on=!1;const Ht=kn.getUniforms(),Wn=Tt.uniforms;if(Le.useProgram(kn.program)&&(yn=!0,Dn=!0,on=!0),he.id!==O&&(O=he.id,Dn=!0),yn||P!==z){Le.buffers.depth.getReversed()&&z.reversedDepth!==!0&&(z._reversedDepth=!0,z.updateProjectionMatrix()),Ht.setValue(ne,"projectionMatrix",z.projectionMatrix),Ht.setValue(ne,"viewMatrix",z.matrixWorldInverse);const ci=Ht.map.cameraPosition;ci!==void 0&&ci.setValue(ne,qe.setFromMatrixPosition(z.matrixWorld)),Xe.logarithmicDepthBuffer&&Ht.setValue(ne,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),(he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshLambertMaterial||he.isMeshBasicMaterial||he.isMeshStandardMaterial||he.isShaderMaterial)&&Ht.setValue(ne,"isOrthographic",z.isOrthographicCamera===!0),P!==z&&(P=z,Dn=!0,on=!0)}if(te.isSkinnedMesh){Ht.setOptional(ne,te,"bindMatrix"),Ht.setOptional(ne,te,"bindMatrixInverse");const En=te.skeleton;En&&(En.boneTexture===null&&En.computeBoneTexture(),Ht.setValue(ne,"boneTexture",En.boneTexture,lt))}te.isBatchedMesh&&(Ht.setOptional(ne,te,"batchingTexture"),Ht.setValue(ne,"batchingTexture",te._matricesTexture,lt),Ht.setOptional(ne,te,"batchingIdTexture"),Ht.setValue(ne,"batchingIdTexture",te._indirectTexture,lt),Ht.setOptional(ne,te,"batchingColorTexture"),te._colorsTexture!==null&&Ht.setValue(ne,"batchingColorTexture",te._colorsTexture,lt));const mi=se.morphAttributes;if((mi.position!==void 0||mi.normal!==void 0||mi.color!==void 0)&&tt.update(te,se,kn),(Dn||Tt.receiveShadow!==te.receiveShadow)&&(Tt.receiveShadow=te.receiveShadow,Ht.setValue(ne,"receiveShadow",te.receiveShadow)),he.isMeshGouraudMaterial&&he.envMap!==null&&(Wn.envMap.value=We,Wn.flipEnvMap.value=We.isCubeTexture&&We.isRenderTargetTexture===!1?-1:1),he.isMeshStandardMaterial&&he.envMap===null&&ee.environment!==null&&(Wn.envMapIntensity.value=ee.environmentIntensity),Dn&&(Ht.setValue(ne,"toneMappingExposure",D.toneMappingExposure),Tt.needsLights&&fe(Wn,on),Qe&&he.fog===!0&&je.refreshFogUniforms(Wn,Qe),je.refreshMaterialUniforms(Wn,he,$,Z,M.state.transmissionRenderTarget[z.id]),Wy.upload(ne,Zn(Tt),Wn,lt)),he.isShaderMaterial&&he.uniformsNeedUpdate===!0&&(Wy.upload(ne,Zn(Tt),Wn,lt),he.uniformsNeedUpdate=!1),he.isSpriteMaterial&&Ht.setValue(ne,"center",te.center),Ht.setValue(ne,"modelViewMatrix",te.modelViewMatrix),Ht.setValue(ne,"normalMatrix",te.normalMatrix),Ht.setValue(ne,"modelMatrix",te.matrixWorld),he.isShaderMaterial||he.isRawShaderMaterial){const En=he.uniformsGroups;for(let ci=0,_l=En.length;ci<_l;ci++){const Vi=En[ci];nt.update(Vi,kn),nt.bind(Vi,kn)}}return kn}function fe(z,ee){z.ambientLightColor.needsUpdate=ee,z.lightProbe.needsUpdate=ee,z.directionalLights.needsUpdate=ee,z.directionalLightShadows.needsUpdate=ee,z.pointLights.needsUpdate=ee,z.pointLightShadows.needsUpdate=ee,z.spotLights.needsUpdate=ee,z.spotLightShadows.needsUpdate=ee,z.rectAreaLights.needsUpdate=ee,z.hemisphereLights.needsUpdate=ee}function Re(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return j},this.getRenderTarget=function(){return k},this.setRenderTargetTextures=function(z,ee,se){const he=st.get(z);he.__autoAllocateDepthBuffer=z.resolveDepthBuffer===!1,he.__autoAllocateDepthBuffer===!1&&(he.__useRenderToTexture=!1),st.get(z.texture).__webglTexture=ee,st.get(z.depthTexture).__webglTexture=he.__autoAllocateDepthBuffer?void 0:se,he.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(z,ee){const se=st.get(z);se.__webglFramebuffer=ee,se.__useDefaultFramebuffer=ee===void 0};const Ne=ne.createFramebuffer();this.setRenderTarget=function(z,ee=0,se=0){k=z,I=ee,j=se;let he=!0,te=null,Qe=!1,Fe=!1;if(z){const We=st.get(z);if(We.__useDefaultFramebuffer!==void 0)Le.bindFramebuffer(ne.FRAMEBUFFER,null),he=!1;else if(We.__webglFramebuffer===void 0)lt.setupRenderTarget(z);else if(We.__hasExternalTextures)lt.rebindTextures(z,st.get(z.texture).__webglTexture,st.get(z.depthTexture).__webglTexture);else if(z.depthBuffer){const gt=z.depthTexture;if(We.__boundDepthTexture!==gt){if(gt!==null&&st.has(gt)&&(z.width!==gt.image.width||z.height!==gt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");lt.setupDepthRenderbuffer(z)}}const ht=z.texture;(ht.isData3DTexture||ht.isDataArrayTexture||ht.isCompressedArrayTexture)&&(Fe=!0);const At=st.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(Array.isArray(At[ee])?te=At[ee][se]:te=At[ee],Qe=!0):z.samples>0&&lt.useMultisampledRTT(z)===!1?te=st.get(z).__webglMultisampledFramebuffer:Array.isArray(At)?te=At[se]:te=At,Y.copy(z.viewport),ie.copy(z.scissor),re=z.scissorTest}else Y.copy(ce).multiplyScalar($).floor(),ie.copy(xe).multiplyScalar($).floor(),re=Te;if(se!==0&&(te=Ne),Le.bindFramebuffer(ne.FRAMEBUFFER,te)&&he&&Le.drawBuffers(z,te),Le.viewport(Y),Le.scissor(ie),Le.setScissorTest(re),Qe){const We=st.get(z.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+ee,We.__webglTexture,se)}else if(Fe){const We=ee;for(let ht=0;ht<z.textures.length;ht++){const At=st.get(z.textures[ht]);ne.framebufferTextureLayer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0+ht,At.__webglTexture,se,We)}}else if(z!==null&&se!==0){const We=st.get(z.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,We.__webglTexture,se)}O=-1},this.readRenderTargetPixels=function(z,ee,se,he,te,Qe,Fe,Ve=0){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let We=st.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&Fe!==void 0&&(We=We[Fe]),We){Le.bindFramebuffer(ne.FRAMEBUFFER,We);try{const ht=z.textures[Ve],At=ht.format,gt=ht.type;if(!Xe.textureFormatReadable(At)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Xe.textureTypeReadable(gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=z.width-he&&se>=0&&se<=z.height-te&&(z.textures.length>1&&ne.readBuffer(ne.COLOR_ATTACHMENT0+Ve),ne.readPixels(ee,se,he,te,ae.convert(At),ae.convert(gt),Qe))}finally{const ht=k!==null?st.get(k).__webglFramebuffer:null;Le.bindFramebuffer(ne.FRAMEBUFFER,ht)}}},this.readRenderTargetPixelsAsync=async function(z,ee,se,he,te,Qe,Fe,Ve=0){if(!(z&&z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let We=st.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&Fe!==void 0&&(We=We[Fe]),We)if(ee>=0&&ee<=z.width-he&&se>=0&&se<=z.height-te){Le.bindFramebuffer(ne.FRAMEBUFFER,We);const ht=z.textures[Ve],At=ht.format,gt=ht.type;if(!Xe.textureFormatReadable(At))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Xe.textureTypeReadable(gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Pt=ne.createBuffer();ne.bindBuffer(ne.PIXEL_PACK_BUFFER,Pt),ne.bufferData(ne.PIXEL_PACK_BUFFER,Qe.byteLength,ne.STREAM_READ),z.textures.length>1&&ne.readBuffer(ne.COLOR_ATTACHMENT0+Ve),ne.readPixels(ee,se,he,te,ae.convert(At),ae.convert(gt),0);const Zt=k!==null?st.get(k).__webglFramebuffer:null;Le.bindFramebuffer(ne.FRAMEBUFFER,Zt);const Xt=ne.fenceSync(ne.SYNC_GPU_COMMANDS_COMPLETE,0);return ne.flush(),await KD(ne,Xt,4),ne.bindBuffer(ne.PIXEL_PACK_BUFFER,Pt),ne.getBufferSubData(ne.PIXEL_PACK_BUFFER,0,Qe),ne.deleteBuffer(Pt),ne.deleteSync(Xt),Qe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(z,ee=null,se=0){const he=Math.pow(2,-se),te=Math.floor(z.image.width*he),Qe=Math.floor(z.image.height*he),Fe=ee!==null?ee.x:0,Ve=ee!==null?ee.y:0;lt.setTexture2D(z,0),ne.copyTexSubImage2D(ne.TEXTURE_2D,se,0,0,Fe,Ve,te,Qe),Le.unbindTexture()};const ze=ne.createFramebuffer(),ut=ne.createFramebuffer();this.copyTextureToTexture=function(z,ee,se=null,he=null,te=0,Qe=null){Qe===null&&(te!==0?(wg("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Qe=te,te=0):Qe=0);let Fe,Ve,We,ht,At,gt,Pt,Zt,Xt;const vn=z.isCompressedTexture?z.mipmaps[Qe]:z.image;if(se!==null)Fe=se.max.x-se.min.x,Ve=se.max.y-se.min.y,We=se.isBox3?se.max.z-se.min.z:1,ht=se.min.x,At=se.min.y,gt=se.isBox3?se.min.z:0;else{const mi=Math.pow(2,-te);Fe=Math.floor(vn.width*mi),Ve=Math.floor(vn.height*mi),z.isDataArrayTexture?We=vn.depth:z.isData3DTexture?We=Math.floor(vn.depth*mi):We=1,ht=0,At=0,gt=0}he!==null?(Pt=he.x,Zt=he.y,Xt=he.z):(Pt=0,Zt=0,Xt=0);const Dt=ae.convert(ee.format),Tt=ae.convert(ee.type);let Rn;ee.isData3DTexture?(lt.setTexture3D(ee,0),Rn=ne.TEXTURE_3D):ee.isDataArrayTexture||ee.isCompressedArrayTexture?(lt.setTexture2DArray(ee,0),Rn=ne.TEXTURE_2D_ARRAY):(lt.setTexture2D(ee,0),Rn=ne.TEXTURE_2D),ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,ee.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,ee.unpackAlignment);const rn=ne.getParameter(ne.UNPACK_ROW_LENGTH),kn=ne.getParameter(ne.UNPACK_IMAGE_HEIGHT),yn=ne.getParameter(ne.UNPACK_SKIP_PIXELS),Dn=ne.getParameter(ne.UNPACK_SKIP_ROWS),on=ne.getParameter(ne.UNPACK_SKIP_IMAGES);ne.pixelStorei(ne.UNPACK_ROW_LENGTH,vn.width),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,vn.height),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,ht),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,At),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,gt);const Ht=z.isDataArrayTexture||z.isData3DTexture,Wn=ee.isDataArrayTexture||ee.isData3DTexture;if(z.isDepthTexture){const mi=st.get(z),En=st.get(ee),ci=st.get(mi.__renderTarget),_l=st.get(En.__renderTarget);Le.bindFramebuffer(ne.READ_FRAMEBUFFER,ci.__webglFramebuffer),Le.bindFramebuffer(ne.DRAW_FRAMEBUFFER,_l.__webglFramebuffer);for(let Vi=0;Vi<We;Vi++)Ht&&(ne.framebufferTextureLayer(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,st.get(z).__webglTexture,te,gt+Vi),ne.framebufferTextureLayer(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,st.get(ee).__webglTexture,Qe,Xt+Vi)),ne.blitFramebuffer(ht,At,Fe,Ve,Pt,Zt,Fe,Ve,ne.DEPTH_BUFFER_BIT,ne.NEAREST);Le.bindFramebuffer(ne.READ_FRAMEBUFFER,null),Le.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null)}else if(te!==0||z.isRenderTargetTexture||st.has(z)){const mi=st.get(z),En=st.get(ee);Le.bindFramebuffer(ne.READ_FRAMEBUFFER,ze),Le.bindFramebuffer(ne.DRAW_FRAMEBUFFER,ut);for(let ci=0;ci<We;ci++)Ht?ne.framebufferTextureLayer(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,mi.__webglTexture,te,gt+ci):ne.framebufferTexture2D(ne.READ_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,mi.__webglTexture,te),Wn?ne.framebufferTextureLayer(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,En.__webglTexture,Qe,Xt+ci):ne.framebufferTexture2D(ne.DRAW_FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_2D,En.__webglTexture,Qe),te!==0?ne.blitFramebuffer(ht,At,Fe,Ve,Pt,Zt,Fe,Ve,ne.COLOR_BUFFER_BIT,ne.NEAREST):Wn?ne.copyTexSubImage3D(Rn,Qe,Pt,Zt,Xt+ci,ht,At,Fe,Ve):ne.copyTexSubImage2D(Rn,Qe,Pt,Zt,ht,At,Fe,Ve);Le.bindFramebuffer(ne.READ_FRAMEBUFFER,null),Le.bindFramebuffer(ne.DRAW_FRAMEBUFFER,null)}else Wn?z.isDataTexture||z.isData3DTexture?ne.texSubImage3D(Rn,Qe,Pt,Zt,Xt,Fe,Ve,We,Dt,Tt,vn.data):ee.isCompressedArrayTexture?ne.compressedTexSubImage3D(Rn,Qe,Pt,Zt,Xt,Fe,Ve,We,Dt,vn.data):ne.texSubImage3D(Rn,Qe,Pt,Zt,Xt,Fe,Ve,We,Dt,Tt,vn):z.isDataTexture?ne.texSubImage2D(ne.TEXTURE_2D,Qe,Pt,Zt,Fe,Ve,Dt,Tt,vn.data):z.isCompressedTexture?ne.compressedTexSubImage2D(ne.TEXTURE_2D,Qe,Pt,Zt,vn.width,vn.height,Dt,vn.data):ne.texSubImage2D(ne.TEXTURE_2D,Qe,Pt,Zt,Fe,Ve,Dt,Tt,vn);ne.pixelStorei(ne.UNPACK_ROW_LENGTH,rn),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,kn),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,yn),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Dn),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,on),Qe===0&&ee.generateMipmaps&&ne.generateMipmap(Rn),Le.unbindTexture()},this.initRenderTarget=function(z){st.get(z).__webglFramebuffer===void 0&&lt.setupRenderTarget(z)},this.initTexture=function(z){z.isCubeTexture?lt.setTextureCube(z,0):z.isData3DTexture?lt.setTexture3D(z,0):z.isDataArrayTexture||z.isCompressedArrayTexture?lt.setTexture2DArray(z,0):lt.setTexture2D(z,0),Le.unbindTexture()},this.resetState=function(){I=0,j=0,k=null,Le.reset(),Se.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return lr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=In._getDrawingBufferColorSpace(e),t.unpackColorSpace=In._getUnpackColorSpace()}}const NR=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:sS,AddEquation:fu,AddOperation:a2,AdditiveAnimationBlendMode:uS,AdditiveBlending:g1,AgXToneMapping:u2,AlphaFormat:oS,AlwaysCompare:T2,AlwaysDepth:sx,AlwaysStencilFunc:_1,AmbientLight:dR,AnimationAction:SR,AnimationClip:dp,AnimationLoader:AO,AnimationMixer:qO,AnimationObjectGroup:XO,AnimationUtils:yO,ArcCurve:G2,ArrayCamera:bR,ArrowHelper:yL,AttachedBindMode:x1,Audio:_R,AudioAnalyser:LO,AudioContext:GS,AudioListener:DO,AudioLoader:RO,AxesHelper:xL,BackSide:Ma,BasicDepthPacking:v2,BasicShadowMap:Hw,BatchedMesh:F2,Bone:_b,BooleanKeyframeTrack:uf,Box2:nL,Box3:ks,Box3Helper:gL,BoxGeometry:cf,BoxHelper:mL,BufferAttribute:jn,BufferGeometry:pn,BufferGeometryLoader:yR,ByteType:cb,Cache:pl,Camera:yb,CameraHelper:pL,CanvasTexture:GU,CapsuleGeometry:Eb,CatmullRomCurve3:j2,CineonToneMapping:l2,CircleGeometry:Tb,ClampToEdgeWrapping:Ki,Clock:jS,Color:Et,ColorKeyframeTrack:LS,ColorManagement:In,CompressedArrayTexture:HU,CompressedCubeTexture:zU,CompressedTexture:Mb,CompressedTextureLoader:SO,ConeGeometry:$g,ConstantAlphaFactor:n2,ConstantColorFactor:e2,Controls:_L,CubeCamera:O2,CubeReflectionMapping:yl,CubeRefractionMapping:bu,CubeTexture:Wg,CubeTextureLoader:uR,CubeUVReflectionMapping:yp,CubicBezierCurve:TS,CubicBezierCurve3:k2,CubicInterpolant:oR,CullFaceBack:m1,CullFaceFront:Fw,CullFaceFrontBack:eD,CullFaceNone:Pw,Curve:Co,CurvePath:X2,CustomBlending:zw,CustomToneMapping:c2,CylinderGeometry:Qg,Cylindrical:tL,Data3DTexture:vb,DataArrayTexture:gb,DataTexture:So,DataTextureLoader:IS,DataUtils:kh,DecrementStencilOp:uD,DecrementWrapStencilOp:fD,DefaultLoadingManager:Gd,DepthFormat:sp,DepthStencilFormat:ap,DepthTexture:SS,DetachedBindMode:f2,DirectionalLight:zS,DirectionalLightHelper:dL,DiscreteInterpolant:lR,DodecahedronGeometry:Cb,DoubleSide:or,DstAlphaFactor:Jw,DstColorFactor:Zw,DynamicCopyUsage:CD,DynamicDrawUsage:_D,DynamicReadUsage:MD,EdgesGeometry:z2,EllipseCurve:wb,EqualCompare:A2,EqualDepth:rx,EqualStencilFunc:gD,EquirectangularReflectionMapping:ep,EquirectangularRefractionMapping:Sg,Euler:ur,EventDispatcher:bl,ExternalTexture:MS,ExtrudeGeometry:Rb,FileLoader:Vs,Float16BufferAttribute:vU,Float32BufferAttribute:It,FloatType:Pi,Fog:bb,FogExp2:xb,FramebufferTexture:FU,FrontSide:vl,Frustum:xp,FrustumArray:Ab,GLBufferAttribute:QO,GLSL1:RD,GLSL3:A1,GreaterCompare:S2,GreaterDepth:lx,GreaterEqualCompare:E2,GreaterEqualDepth:ox,GreaterEqualStencilFunc:bD,GreaterStencilFunc:yD,GridHelper:hL,Group:sc,HalfFloatType:Ts,HemisphereLight:fR,HemisphereLightHelper:uL,IcosahedronGeometry:e0,ImageBitmapLoader:xR,ImageLoader:Dg,ImageUtils:B2,IncrementStencilOp:cD,IncrementWrapStencilOp:hD,InstancedBufferAttribute:$h,InstancedBufferGeometry:vR,InstancedInterleavedBuffer:ZO,InstancedMesh:bS,Int16BufferAttribute:mU,Int32BufferAttribute:gU,Int8BufferAttribute:fU,IntType:Xg,InterleavedBuffer:Kg,InterleavedBufferAttribute:Au,Interpolant:bp,InterpolateDiscrete:rp,InterpolateLinear:op,InterpolateSmooth:Yy,InterpolationSamplingMode:DD,InterpolationSamplingType:ND,InvertStencilOp:dD,KeepStencilOp:Lh,KeyframeTrack:zr,LOD:P2,LatheGeometry:Bb,Layers:up,LessCompare:_2,LessDepth:ax,LessEqualCompare:fS,LessEqualDepth:Qh,LessEqualStencilFunc:vD,LessStencilFunc:mD,Light:Tu,LightProbe:gR,Line:oc,Line3:aL,LineBasicMaterial:sa,LineCurve:CS,LineCurve3:V2,LineDashedMaterial:sR,LineLoop:_S,LineSegments:To,LinearFilter:Kn,LinearInterpolant:OS,LinearMipMapLinearFilter:b1,LinearMipMapNearestFilter:iD,LinearMipmapLinearFilter:Or,LinearMipmapNearestFilter:kd,LinearSRGBColorSpace:Mo,LinearToneMapping:r2,LinearTransfer:Eg,Loader:Xs,LoaderUtils:vu,LoadingManager:Pb,LoopOnce:d2,LoopPingPong:m2,LoopRepeat:p2,MOUSE:Uh,Material:ms,MaterialLoader:Fb,MathUtils:C2,Matrix2:qS,Matrix3:gn,Matrix4:Jt,MaxEquation:Vw,Mesh:Bi,MeshBasicMaterial:ka,MeshDepthMaterial:NS,MeshDistanceMaterial:DS,MeshLambertMaterial:nR,MeshMatcapMaterial:iR,MeshNormalMaterial:tR,MeshPhongMaterial:$2,MeshPhysicalMaterial:Hr,MeshStandardMaterial:i0,MeshToonMaterial:eR,MinEquation:kw,MirroredRepeatWrapping:tp,MixOperation:s2,MultiplyBlending:y1,MultiplyOperation:Vg,NearestFilter:Cs,NearestMipMapLinearFilter:nD,NearestMipMapNearestFilter:tD,NearestMipmapLinearFilter:zh,NearestMipmapNearestFilter:lb,NeutralToneMapping:h2,NeverCompare:b2,NeverDepth:ix,NeverStencilFunc:pD,NoBlending:ml,NoColorSpace:nc,NoToneMapping:gl,NormalAnimationBlendMode:mb,NormalBlending:Jh,NotEqualCompare:M2,NotEqualDepth:cx,NotEqualStencilFunc:xD,NumberKeyframeTrack:tf,Object3D:Pn,ObjectLoader:CO,ObjectSpaceNormalMap:x2,OctahedronGeometry:t0,OneFactor:Yw,OneMinusConstantAlphaFactor:i2,OneMinusConstantColorFactor:t2,OneMinusDstAlphaFactor:Kw,OneMinusDstColorFactor:Qw,OneMinusSrcAlphaFactor:nx,OneMinusSrcColorFactor:Ww,OrthographicCamera:Ir,PCFShadowMap:ob,PCFSoftShadowMap:cg,PMREMGenerator:B1,Path:jx,PerspectiveCamera:Ri,Plane:tc,PlaneGeometry:Eu,PlaneHelper:vL,PointLight:HS,PointLightHelper:lL,Points:AS,PointsMaterial:Sb,PolarGridHelper:fL,PolyhedronGeometry:Mu,PositionalAudio:OO,PropertyBinding:zn,PropertyMixer:AR,QuadraticBezierCurve:wS,QuadraticBezierCurve3:RS,Quaternion:ws,QuaternionKeyframeTrack:nf,QuaternionLinearInterpolant:cR,RED_GREEN_RGTC2_Format:Ix,RED_RGTC1_Format:Ox,REVISION:kg,RGBADepthPacking:y2,RGBAFormat:Zi,RGBAIntegerFormat:pb,RGBA_ASTC_10x10_Format:wx,RGBA_ASTC_10x5_Format:Ex,RGBA_ASTC_10x6_Format:Tx,RGBA_ASTC_10x8_Format:Cx,RGBA_ASTC_12x10_Format:Rx,RGBA_ASTC_12x12_Format:Bx,RGBA_ASTC_4x4_Format:vx,RGBA_ASTC_5x4_Format:yx,RGBA_ASTC_5x5_Format:xx,RGBA_ASTC_6x5_Format:bx,RGBA_ASTC_6x6_Format:_x,RGBA_ASTC_8x5_Format:Ax,RGBA_ASTC_8x6_Format:Sx,RGBA_ASTC_8x8_Format:Mx,RGBA_BPTC_Format:Nx,RGBA_ETC2_EAC_Format:gx,RGBA_PVRTC_2BPPV1_Format:dx,RGBA_PVRTC_4BPPV1_Format:fx,RGBA_S3TC_DXT1_Format:hg,RGBA_S3TC_DXT3_Format:fg,RGBA_S3TC_DXT5_Format:dg,RGBDepthPacking:aD,RGBFormat:lS,RGBIntegerFormat:sD,RGB_BPTC_SIGNED_Format:Dx,RGB_BPTC_UNSIGNED_Format:Ux,RGB_ETC1_Format:px,RGB_ETC2_Format:mx,RGB_PVRTC_2BPPV1_Format:hx,RGB_PVRTC_4BPPV1_Format:ux,RGB_S3TC_DXT1_Format:ug,RGDepthPacking:rD,RGFormat:cS,RGIntegerFormat:db,RawShaderMaterial:Q2,Ray:lf,Raycaster:YS,RectAreaLight:pR,RedFormat:Yg,RedIntegerFormat:qg,ReinhardToneMapping:o2,RenderTarget:pS,RenderTarget3D:WO,RepeatWrapping:_u,ReplaceStencilOp:lD,ReverseSubtractEquation:jw,RingGeometry:Nb,SIGNED_RED_GREEN_RGTC2_Format:Px,SIGNED_RED_RGTC1_Format:Lx,SRGBColorSpace:Gs,SRGBTransfer:oi,Scene:Jg,ShaderChunk:An,ShaderLib:vo,ShaderMaterial:Va,ShadowMaterial:Z2,Shape:Zh,ShapeGeometry:Db,ShapePath:bL,ShapeUtils:bo,ShortType:ub,Skeleton:Zg,SkeletonHelper:oL,SkinnedMesh:xS,Source:du,Sphere:Rs,SphereGeometry:n0,Spherical:w1,SphericalHarmonics3:mR,SplineCurve:BS,SpotLight:FS,SpotLightHelper:rL,Sprite:I2,SpriteMaterial:yS,SrcAlphaFactor:tx,SrcAlphaSaturateFactor:$w,SrcColorFactor:qw,StaticCopyUsage:TD,StaticDrawUsage:Tg,StaticReadUsage:SD,StereoCamera:BO,StreamCopyUsage:wD,StreamDrawUsage:AD,StreamReadUsage:ED,StringKeyframeTrack:hf,SubtractEquation:Gw,SubtractiveBlending:v1,TOUCH:Oh,TangentSpaceNormalMap:Su,TetrahedronGeometry:Ub,Texture:ti,TextureLoader:hR,TextureUtils:TL,Timer:$O,TimestampQuery:BD,TorusGeometry:Ob,TorusKnotGeometry:Lb,Triangle:Ga,TriangleFanDrawMode:Fx,TriangleStripDrawMode:hS,TrianglesDrawMode:g2,TubeGeometry:Ib,UVMapping:xu,Uint16BufferAttribute:mS,Uint32BufferAttribute:gS,Uint8BufferAttribute:dU,Uint8ClampedBufferAttribute:pU,Uniform:XS,UniformsGroup:KO,UniformsLib:wt,UniformsUtils:U2,UnsignedByteType:Ea,UnsignedInt101111Type:rS,UnsignedInt248Type:ip,UnsignedInt5999Type:aS,UnsignedIntType:xl,UnsignedShort4444Type:hb,UnsignedShort5551Type:fb,UnsignedShortType:np,VSMShadowMap:go,Vector2:Ye,Vector3:K,Vector4:Gn,VectorKeyframeTrack:sf,VideoFrameTexture:PU,VideoTexture:H2,WebGL3DRenderTarget:tU,WebGLArrayRenderTarget:eU,WebGLCoordinateSystem:lr,WebGLCubeRenderTarget:vS,WebGLRenderTarget:Fr,WebGLRenderer:JS,WebGLUtils:BR,WebGPUCoordinateSystem:lp,WebXRController:qy,WireframeGeometry:K2,WrapAroundEnding:Mg,ZeroCurvatureEnding:Gh,ZeroFactor:Xw,ZeroSlopeEnding:jh,ZeroStencilOp:oD,createCanvasElement:R2},Symbol.toStringTag,{value:"Module"}));var UA={exports:{}},OA={},LA={exports:{}},IA={};var dC;function oH(){if(dC)return IA;dC=1;var i=gp();function e(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,s=i.useEffect,r=i.useLayoutEffect,c=i.useDebugValue;function h(x,b){var _=b(),E=n({inst:{value:_,getSnapshot:b}}),R=E[0].inst,T=E[1];return r(function(){R.value=_,R.getSnapshot=b,d(R)&&T({inst:R})},[x,_,b]),s(function(){return d(R)&&T({inst:R}),x(function(){d(R)&&T({inst:R})})},[x]),c(_),_}function d(x){var b=x.getSnapshot;x=x.value;try{var _=b();return!t(x,_)}catch{return!0}}function p(x,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:h;return IA.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:y,IA}var pC;function lH(){return pC||(pC=1,LA.exports=oH()),LA.exports}var mC;function cH(){if(mC)return OA;mC=1;var i=gp(),e=lH();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=i.useRef,c=i.useEffect,h=i.useMemo,d=i.useDebugValue;return OA.useSyncExternalStoreWithSelector=function(p,y,x,b,_){var E=r(null);if(E.current===null){var R={hasValue:!1,value:null};E.current=R}else R=E.current;E=h(function(){function M(I){if(!B){if(B=!0,N=I,I=b(I),_!==void 0&&R.hasValue){var j=R.value;if(_(j,I))return D=j}return D=I}if(j=D,n(N,I))return j;var k=b(I);return _!==void 0&&_(j,k)?(N=I,j):(N=I,D=k)}var B=!1,N,D,L=x===void 0?null:x;return[function(){return M(y())},L===null?void 0:function(){return M(L())}]},[y,x,b,_]);var T=s(p,E[0],E[1]);return c(function(){R.hasValue=!0,R.value=T},[T]),d(T),T},OA}var gC;function uH(){return gC||(gC=1,UA.exports=cH()),UA.exports}var hH=uH();const fH=Q1(hH),vC=i=>{let e;const t=new Set,n=(p,y)=>{const x=typeof p=="function"?p(e):p;if(!Object.is(x,e)){const b=e;e=y??(typeof x!="object"||x===null)?x:Object.assign({},e,x),t.forEach(_=>_(e,b))}},s=()=>e,h={setState:n,getState:s,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=i(n,s,h);return h},DR=(i=>i?vC(i):vC),{useSyncExternalStoreWithSelector:dH}=fH,pH=i=>i;function mH(i,e=pH,t){const n=dH(i.subscribe,i.getState,i.getInitialState,e,t);return dl.useDebugValue(n),n}const yC=(i,e)=>{const t=DR(i),n=(s,r=e)=>mH(t,s,r);return Object.assign(n,t),n},UR=((i,e)=>i?yC(i,e):yC),gH=i=>typeof i=="object"&&typeof i.then=="function",Xh=[];function OR(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let s=0;s<n;s++)if(!t(i[s],e[s]))return!1;return!0}function LR(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const r of Xh)if(OR(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!t)throw r.promise}const s={keys:e,equal:n.equal,remove:()=>{const r=Xh.indexOf(s);r!==-1&&Xh.splice(r,1)},promise:(gH(i)?i:i(...e)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(Xh.push(s),!t)throw s.promise}const vH=(i,e,t)=>LR(i,e,!1,t),yH=(i,e,t)=>void LR(i,e,!0,t),xH=i=>{if(i===void 0||i.length===0)Xh.splice(0,Xh.length);else{const e=Xh.find(t=>OR(i,t.keys,t.equal));e&&e.remove()}};var PA={exports:{}},FA={exports:{}},HA={exports:{}},zA={};var xC;function bH(){return xC||(xC=1,(function(i){function e(H,Z){var $=H.length;H.push(Z);e:for(;0<$;){var ge=$-1>>>1,X=H[ge];if(0<s(X,Z))H[ge]=Z,H[$]=X,$=ge;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var Z=H[0],$=H.pop();if($!==Z){H[0]=$;e:for(var ge=0,X=H.length,ce=X>>>1;ge<ce;){var xe=2*(ge+1)-1,Te=H[xe],He=xe+1,at=H[He];if(0>s(Te,$))He<X&&0>s(at,Te)?(H[ge]=at,H[He]=$,ge=He):(H[ge]=Te,H[xe]=$,ge=xe);else if(He<X&&0>s(at,$))H[ge]=at,H[He]=$,ge=He;else break e}}return Z}function s(H,Z){var $=H.sortIndex-Z.sortIndex;return $!==0?$:H.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var c=Date,h=c.now();i.unstable_now=function(){return c.now()-h}}var d=[],p=[],y=1,x=null,b=3,_=!1,E=!1,R=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function N(H){for(var Z=t(p);Z!==null;){if(Z.callback===null)n(p);else if(Z.startTime<=H)n(p),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(p)}}function D(H){if(R=!1,N(H),!E)if(t(d)!==null)E=!0,de();else{var Z=t(p);Z!==null&&pe(D,Z.startTime-H)}}var L=!1,I=-1,j=5,k=-1;function O(){return!(i.unstable_now()-k<j)}function P(){if(L){var H=i.unstable_now();k=H;var Z=!0;try{e:{E=!1,R&&(R=!1,M(I),I=-1),_=!0;var $=b;try{t:{for(N(H),x=t(d);x!==null&&!(x.expirationTime>H&&O());){var ge=x.callback;if(typeof ge=="function"){x.callback=null,b=x.priorityLevel;var X=ge(x.expirationTime<=H);if(H=i.unstable_now(),typeof X=="function"){x.callback=X,N(H),Z=!0;break t}x===t(d)&&n(d),N(H)}else n(d);x=t(d)}if(x!==null)Z=!0;else{var ce=t(p);ce!==null&&pe(D,ce.startTime-H),Z=!1}}break e}finally{x=null,b=$,_=!1}Z=void 0}}finally{Z?Y():L=!1}}}var Y;if(typeof B=="function")Y=function(){B(P)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,re=ie.port2;ie.port1.onmessage=P,Y=function(){re.postMessage(null)}}else Y=function(){T(P,0)};function de(){L||(L=!0,Y())}function pe(H,Z){I=T(function(){H(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){E||_||(E=!0,de())},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(H){switch(b){case 1:case 2:case 3:var Z=3;break;default:Z=b}var $=b;b=Z;try{return H()}finally{b=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var $=b;b=H;try{return Z()}finally{b=$}},i.unstable_scheduleCallback=function(H,Z,$){var ge=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ge+$:ge):$=ge,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=$+X,H={id:y++,callback:Z,priorityLevel:H,startTime:$,expirationTime:X,sortIndex:-1},$>ge?(H.sortIndex=$,e(p,H),t(d)===null&&H===t(p)&&(R?(M(I),I=-1):R=!0,pe(D,$-ge))):(H.sortIndex=X,e(d,H),E||_||(E=!0,de())),H},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(H){var Z=b;return function(){var $=b;b=Z;try{return H.apply(this,arguments)}finally{b=$}}}})(zA)),zA}var bC;function _H(){return bC||(bC=1,HA.exports=bH()),HA.exports}var _C;function AH(){return _C||(_C=1,(function(i){i.exports=function(e){function t(l,u,v,S){return new Zp(l,u,v,S)}function n(){}function s(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)u+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return l===null||typeof l!="object"?null:(l=$r&&l[$r]||l["@@iterator"],typeof l=="function"?l:null)}function c(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===tm?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case ko:return"Fragment";case Ra:return"Portal";case Lf:return"Profiler";case eh:return"StrictMode";case If:return"Suspense";case Rc:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case Wa:return(l.displayName||"Context")+".Provider";case $p:return(l._context.displayName||"Context")+".Consumer";case nh:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Pf:return u=l.displayName||null,u!==null?u:c(l.type)||"Memo";case Ba:u=l._payload,l=l._init;try{return c(l(u))}catch{}}return null}function h(l){if(mr===void 0)try{throw Error()}catch(v){var u=v.stack.trim().match(/\n( *(at )?)/);mr=u&&u[1]||"",eo=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mr+l+eo}function d(l,u){if(!l||Tl)return"";Tl=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(u){var Ct=function(){throw Error()};if(Object.defineProperty(Ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ct,[])}catch(cn){var Rt=cn}Reflect.construct(l,[],Ct)}else{try{Ct.call()}catch(cn){Rt=cn}l.call(Ct.prototype)}}else{try{throw Error()}catch(cn){Rt=cn}(Ct=l())&&typeof Ct.catch=="function"&&Ct.catch(function(){})}}catch(cn){if(cn&&Rt&&typeof cn.stack=="string")return[cn.stack,Rt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=S.DetermineComponentFrameRoot(),W=U[0],ue=U[1];if(W&&ue){var Ee=W.split(`
`),Je=ue.split(`
`);for(w=S=0;S<Ee.length&&!Ee[S].includes("DetermineComponentFrameRoot");)S++;for(;w<Je.length&&!Je[w].includes("DetermineComponentFrameRoot");)w++;if(S===Ee.length||w===Je.length)for(S=Ee.length-1,w=Je.length-1;1<=S&&0<=w&&Ee[S]!==Je[w];)w--;for(;1<=S&&0<=w;S--,w--)if(Ee[S]!==Je[w]){if(S!==1||w!==1)do if(S--,w--,0>w||Ee[S]!==Je[w]){var mt=`
`+Ee[S].replace(" at new "," at ");return l.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",l.displayName)),mt}while(1<=S&&0<=w);break}}}finally{Tl=!1,Error.prepareStackTrace=v}return(v=l?l.displayName||l.name:"")?h(v):""}function p(l){switch(l.tag){case 26:case 27:case 5:return h(l.type);case 16:return h("Lazy");case 13:return h("Suspense");case 19:return h("SuspenseList");case 0:case 15:return l=d(l.type,!1),l;case 11:return l=d(l.type.render,!1),l;case 1:return l=d(l.type,!0),l;default:return""}}function y(l){try{var u="";do u+=p(l),l=l.return;while(l);return u}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function x(l){var u=l,v=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(v=u.return),l=u.return;while(l)}return u.tag===3?v:null}function b(l){if(x(l)!==l)throw Error(s(188))}function _(l){var u=l.alternate;if(!u){if(u=x(l),u===null)throw Error(s(188));return u!==l?null:l}for(var v=l,S=u;;){var w=v.return;if(w===null)break;var U=w.alternate;if(U===null){if(S=w.return,S!==null){v=S;continue}break}if(w.child===U.child){for(U=w.child;U;){if(U===v)return b(w),l;if(U===S)return b(w),u;U=U.sibling}throw Error(s(188))}if(v.return!==S.return)v=w,S=U;else{for(var W=!1,ue=w.child;ue;){if(ue===v){W=!0,v=w,S=U;break}if(ue===S){W=!0,S=w,v=U;break}ue=ue.sibling}if(!W){for(ue=U.child;ue;){if(ue===v){W=!0,v=U,S=w;break}if(ue===S){W=!0,S=U,v=w;break}ue=ue.sibling}if(!W)throw Error(s(189))}}if(v.alternate!==S)throw Error(s(190))}if(v.tag!==3)throw Error(s(188));return v.stateNode.current===v?l:u}function E(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=E(l),u!==null)return u;l=l.sibling}return null}function R(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(u=R(l),u!==null))return u;l=l.sibling}return null}function T(l){return{current:l}}function M(l){0>so||(l.current=Ui[so],Ui[so]=null,so--)}function B(l,u){so++,Ui[so]=l.current,l.current=u}function N(l){return l>>>=0,l===0?32:31-(gv(l)/vv|0)|0}function D(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function L(l,u){var v=l.pendingLanes;if(v===0)return 0;var S=0,w=l.suspendedLanes,U=l.pingedLanes,W=l.warmLanes;l=l.finishedLanes!==0;var ue=v&134217727;return ue!==0?(v=ue&~w,v!==0?S=D(v):(U&=ue,U!==0?S=D(U):l||(W=ue&~W,W!==0&&(S=D(W))))):(ue=v&~w,ue!==0?S=D(ue):U!==0?S=D(U):l||(W=v&~W,W!==0&&(S=D(W)))),S===0?0:u!==0&&u!==S&&(u&w)===0&&(w=S&-S,W=u&-u,w>=W||w===32&&(W&4194176)!==0)?u:S}function I(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function j(l,u){switch(l){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k(){var l=vr;return vr<<=1,(vr&4194176)===0&&(vr=128),l}function O(){var l=Rl;return Rl<<=1,(Rl&62914560)===0&&(Rl=4194304),l}function P(l){for(var u=[],v=0;31>v;v++)u.push(l);return u}function Y(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ie(l,u,v,S,w,U){var W=l.pendingLanes;l.pendingLanes=v,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=v,l.entangledLanes&=v,l.errorRecoveryDisabledLanes&=v,l.shellSuspendCounter=0;var ue=l.entanglements,Ee=l.expirationTimes,Je=l.hiddenUpdates;for(v=W&~v;0<v;){var mt=31-Is(v),Ct=1<<mt;ue[mt]=0,Ee[mt]=-1;var Rt=Je[mt];if(Rt!==null)for(Je[mt]=null,mt=0;mt<Rt.length;mt++){var cn=Rt[mt];cn!==null&&(cn.lane&=-536870913)}v&=~Ct}S!==0&&re(l,S,0),U!==0&&w===0&&l.tag!==0&&(l.suspendedLanes|=U&~(W&~u))}function re(l,u,v){l.pendingLanes|=u,l.suspendedLanes&=~u;var S=31-Is(u);l.entangledLanes|=u,l.entanglements[S]=l.entanglements[S]|1073741824|v&4194218}function de(l,u){var v=l.entangledLanes|=u;for(l=l.entanglements;v;){var S=31-Is(v),w=1<<S;w&u|l[S]&u&&(l[S]|=u),v&=~w}}function pe(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function H(l){if(Qs&&typeof Qs.onCommitFiberRoot=="function")try{Qs.onCommitFiberRoot(Oi,l,void 0,(l.current.flags&128)===128)}catch{}}function Z(l){if(typeof bv=="function"&&es(l),Qs&&typeof Qs.setStrictMode=="function")try{Qs.setStrictMode(Oi,l)}catch{}}function $(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}function ge(l,u){if(typeof l=="object"&&l!==null){var v=bm.get(l);return v!==void 0?v:(u={value:l,source:u,stack:y(u)},bm.set(l,u),u)}return{value:l,source:u,stack:y(u)}}function X(l,u){Bl[Nl++]=Fc,Bl[Nl++]=Dl,Dl=l,Fc=u}function ce(l,u,v){ca[ua++]=Za,ca[ua++]=Qa,ca[ua++]=Ko,Ko=l;var S=Za;l=Qa;var w=32-Is(S)-1;S&=~(1<<w),v+=1;var U=32-Is(u)+w;if(30<U){var W=w-w%5;U=(S&(1<<W)-1).toString(32),S>>=W,w-=W,Za=1<<32-Is(u)+w|v<<w|S,Qa=U+l}else Za=1<<U|v<<w|S,Qa=l}function xe(l){l.return!==null&&(X(l,1),ce(l,1,0))}function Te(l){for(;l===Dl;)Dl=Bl[--Nl],Bl[Nl]=null,Fc=Bl[--Nl],Bl[Nl]=null;for(;l===Ko;)Ko=ca[--ua],ca[ua]=null,Qa=ca[--ua],ca[ua]=null,Za=ca[--ua],ca[ua]=null}function He(l,u){B(yr,u),B(Hc,l),B(Yi,null),l=L0(u),M(Yi),B(Yi,l)}function at(){M(Yi),M(Hc),M(yr)}function me(l){l.memoizedState!==null&&B(Ul,l);var u=Yi.current,v=Uc(u,l.type);u!==v&&(B(Hc,l),B(Yi,v))}function Ge(l){Hc.current===l&&(M(Yi),M(Hc)),Ul.current===l&&(M(Ul),Os?Ja._currentValue=Xo:Ja._currentValue2=Xo)}function qe(l){var u=Error(s(418,""));throw ne(ge(u,l)),hh}function _t(l,u){if(!hs)throw Error(s(175));rv(l.stateNode,l.type,l.memoizedProps,u,l)||qe(l)}function vt(l){for(fs=l.return;fs;)switch(fs.tag){case 3:case 27:ts=!0;return;case 5:case 13:ts=!1;return;default:fs=fs.return}}function yt(l){if(!hs||l!==fs)return!1;if(!Un)return vt(l),Un=!0,!1;var u=!1;if(ii?l.tag!==3&&l.tag!==27&&(l.tag!==5||Yf(l.type)&&!fn(l.type,l.memoizedProps))&&(u=!0):l.tag!==3&&(l.tag!==5||Yf(l.type)&&!fn(l.type,l.memoizedProps))&&(u=!0),u&&ds&&qe(l),vt(l),l.tag===13){if(!hs)throw Error(s(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));ds=lv(l)}else ds=fs?gm(l.stateNode):null;return!0}function zt(){hs&&(ds=fs=null,Un=!1)}function ne(l){Ua===null?Ua=[l]:Ua.push(l)}function Ze(){for(var l=Ol,u=$a=Ol=0;u<l;){var v=Oa[u];Oa[u++]=null;var S=Oa[u];Oa[u++]=null;var w=Oa[u];Oa[u++]=null;var U=Oa[u];if(Oa[u++]=null,S!==null&&w!==null){var W=S.pending;W===null?w.next=w:(w.next=W.next,W.next=w),S.pending=w}U!==0&&dt(v,w,U)}}function ke(l,u,v,S){Oa[Ol++]=l,Oa[Ol++]=u,Oa[Ol++]=v,Oa[Ol++]=S,$a|=S,l.lanes|=S,l=l.alternate,l!==null&&(l.lanes|=S)}function Xe(l,u,v,S){return ke(l,u,v,S),st(l)}function Le(l,u){return ke(l,null,null,u),st(l)}function dt(l,u,v){l.lanes|=v;var S=l.alternate;S!==null&&(S.lanes|=v);for(var w=!1,U=l.return;U!==null;)U.childLanes|=v,S=U.alternate,S!==null&&(S.childLanes|=v),U.tag===22&&(l=U.stateNode,l===null||l._visibility&1||(w=!0)),l=U,U=U.return;w&&u!==null&&l.tag===3&&(U=l.stateNode,w=31-Is(v),U=U.hiddenUpdates,l=U[w],l===null?U[w]=[u]:l.push(u),u.lane=v|536870912)}function st(l){if(50<Wc)throw Wc=0,od=null,Error(s(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}function lt(l){l!==ao&&l.next===null&&(ao===null?fh=ao=l:ao=ao.next=l),ui=!0,Ll||(Ll=!0,Ie(kt))}function Ft(l,u){if(!_m&&ui){_m=!0;do for(var v=!1,S=fh;S!==null;){if(l!==0){var w=S.pendingLanes;if(w===0)var U=0;else{var W=S.suspendedLanes,ue=S.pingedLanes;U=(1<<31-Is(42|l)+1)-1,U&=w&~(W&~ue),U=U&201326677?U&201326677|1:U?U|2:0}U!==0&&(v=!0,Me(S,U))}else U=Cn,U=L(S,S===Yn?U:0),(U&3)===0||I(S,U)||(v=!0,Me(S,U));S=S.next}while(v);_m=!1}}function kt(){ui=Ll=!1;var l=0;zc!==0&&(H0()&&(l=zc),zc=0);for(var u=Da(),v=null,S=fh;S!==null;){var w=S.next,U=Q(S,u);U===0?(S.next=null,v===null?fh=w:v.next=w,w===null&&(ao=v)):(v=S,(l!==0||(U&3)!==0)&&(ui=!0)),S=w}Ft(l)}function Q(l,u){for(var v=l.suspendedLanes,S=l.pingedLanes,w=l.expirationTimes,U=l.pendingLanes&-62914561;0<U;){var W=31-Is(U),ue=1<<W,Ee=w[W];Ee===-1?((ue&v)===0||(ue&S)!==0)&&(w[W]=j(ue,u)):Ee<=u&&(l.expiredLanes|=ue),U&=~ue}if(u=Yn,v=Cn,v=L(l,l===u?v:0),S=l.callbackNode,v===0||l===u&&Qn===2||l.cancelPendingCommit!==null)return S!==null&&S!==null&&Kf(S),l.callbackNode=null,l.callbackPriority=0;if((v&3)===0||I(l,v)){if(u=v&-v,u===l.callbackPriority)return u;switch(S!==null&&Kf(S),pe(v)){case 2:case 8:v=xv;break;case 32:v=$f;break;case 268435456:v=o_;break;default:v=$f}return S=V.bind(null,l),v=uh(v,S),l.callbackPriority=u,l.callbackNode=v,u}return S!==null&&S!==null&&Kf(S),l.callbackPriority=2,l.callbackNode=null,2}function V(l,u){var v=l.callbackNode;if(qa()&&l.callbackNode!==v)return null;var S=Cn;return S=L(l,l===Yn?S:0),S===0?null:(Fo(l,S,u),Q(l,Da()),l.callbackNode!=null&&l.callbackNode===v?V.bind(null,l):null)}function Me(l,u){if(qa())return null;Fo(l,u,!0)}function Ie(l){rm?io(function(){(Ln&6)!==0?uh(Qf,l):l()}):uh(Qf,l)}function je(){return zc===0&&(zc=k()),zc}function Pe(l,u){if(Gc===null){var v=Gc=[];Il=0,ha=je(),Pl={status:"pending",value:void 0,then:function(S){v.push(S)}}}return Il++,u.then(xt,xt),u}function xt(){if(--Il===0&&Gc!==null){Pl!==null&&(Pl.status="fulfilled");var l=Gc;Gc=null,ha=0,Pl=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function pt(l,u){var v=[],S={status:"pending",value:null,reason:null,then:function(w){v.push(w)}};return l.then(function(){S.status="fulfilled",S.value=u;for(var w=0;w<v.length;w++)(0,v[w])(u)},function(w){for(S.status="rejected",S.reason=w,w=0;w<v.length;w++)(0,v[w])(void 0)}),S}function Bt(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nt(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function tt(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ot(l,u,v){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(Ln&2)!==0){var w=S.pending;return w===null?u.next=u:(u.next=w.next,w.next=u),S.pending=u,u=st(l),dt(l,null,v),u}return ke(l,S,u,v),st(l)}function Ut(l,u,v){if(u=u.updateQueue,u!==null&&(u=u.shared,(v&4194176)!==0)){var S=u.lanes;S&=l.pendingLanes,v|=S,u.lanes=v,de(l,v)}}function ae(l,u){var v=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,v===S)){var w=null,U=null;if(v=v.firstBaseUpdate,v!==null){do{var W={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};U===null?w=U=W:U=U.next=W,v=v.next}while(v!==null);U===null?w=U=u:U=U.next=u}else w=U=u;v={baseState:S.baseState,firstBaseUpdate:w,lastBaseUpdate:U,shared:S.shared,callbacks:S.callbacks},l.updateQueue=v;return}l=v.lastBaseUpdate,l===null?v.firstBaseUpdate=u:l.next=u,v.lastBaseUpdate=u}function Se(){if(Fl){var l=Pl;if(l!==null)throw l}}function nt(l,u,v,S){Fl=!1;var w=l.updateQueue;ro=!1;var U=w.firstBaseUpdate,W=w.lastBaseUpdate,ue=w.shared.pending;if(ue!==null){w.shared.pending=null;var Ee=ue,Je=Ee.next;Ee.next=null,W===null?U=Je:W.next=Je,W=Ee;var mt=l.alternate;mt!==null&&(mt=mt.updateQueue,ue=mt.lastBaseUpdate,ue!==W&&(ue===null?mt.firstBaseUpdate=Je:ue.next=Je,mt.lastBaseUpdate=Ee))}if(U!==null){var Ct=w.baseState;W=0,mt=Je=Ee=null,ue=U;do{var Rt=ue.lane&-536870913,cn=Rt!==ue.lane;if(cn?(Cn&Rt)===Rt:(S&Rt)===Rt){Rt!==0&&Rt===ha&&(Fl=!0),mt!==null&&(mt=mt.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var xa=l,al=ue;Rt=u;var rl=v;switch(al.tag){case 1:if(xa=al.payload,typeof xa=="function"){Ct=xa.call(rl,Ct,Rt);break e}Ct=xa;break e;case 3:xa.flags=xa.flags&-65537|128;case 0:if(xa=al.payload,Rt=typeof xa=="function"?xa.call(rl,Ct,Rt):xa,Rt==null)break e;Ct=Of({},Ct,Rt);break e;case 2:ro=!0}}Rt=ue.callback,Rt!==null&&(l.flags|=64,cn&&(l.flags|=8192),cn=w.callbacks,cn===null?w.callbacks=[Rt]:cn.push(Rt))}else cn={lane:Rt,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},mt===null?(Je=mt=cn,Ee=Ct):mt=mt.next=cn,W|=Rt;if(ue=ue.next,ue===null){if(ue=w.shared.pending,ue===null)break;cn=ue,ue=cn.next,cn.next=null,w.lastBaseUpdate=cn,w.shared.pending=null}}while(!0);mt===null&&(Ee=Ct),w.baseState=Ee,w.firstBaseUpdate=Je,w.lastBaseUpdate=mt,U===null&&(w.shared.lanes=0),va|=W,l.lanes=W,l.memoizedState=Ct}}function le(l,u){if(typeof l!="function")throw Error(s(191,l));l.call(u)}function be(l,u){var v=l.callbacks;if(v!==null)for(l.callbacks=null,l=0;l<v.length;l++)le(v[l],u)}function rt(l,u){if($s(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var v=Object.keys(l),S=Object.keys(u);if(v.length!==S.length)return!1;for(S=0;S<v.length;S++){var w=v[S];if(!xr.call(u,w)||!$s(l[w],u[w]))return!1}return!0}function bt(l){return l=l.status,l==="fulfilled"||l==="rejected"}function ct(){}function $e(l,u,v){switch(v=l[v],v===void 0?l.push(u):v!==u&&(u.then(ct,ct),u=v),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,l===jc?Error(s(483)):l;default:if(typeof u.status=="string")u.then(ct,ct);else{if(l=Yn,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=u,l.status="pending",l.then(function(S){if(u.status==="pending"){var w=u;w.status="fulfilled",w.value=S}},function(S){if(u.status==="pending"){var w=u;w.status="rejected",w.reason=S}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,l===jc?Error(s(483)):l}throw Zo=u,jc}}function Mt(){if(Zo===null)throw Error(s(459));var l=Zo;return Zo=null,l}function Ot(l){var u=$o;return $o+=1,Qo===null&&(Qo=[]),$e(Qo,l,u)}function un(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function an(l,u){throw u.$$typeof===e_?Error(s(525)):(l=Object.prototype.toString.call(u),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Fi(l){var u=l._init;return u(l._payload)}function ni(l){function u(Be,ve){if(l){var Oe=Be.deletions;Oe===null?(Be.deletions=[ve],Be.flags|=16):Oe.push(ve)}}function v(Be,ve){if(!l)return null;for(;ve!==null;)u(Be,ve),ve=ve.sibling;return null}function S(Be){for(var ve=new Map;Be!==null;)Be.key!==null?ve.set(Be.key,Be):ve.set(Be.index,Be),Be=Be.sibling;return ve}function w(Be,ve){return Be=wa(Be,ve),Be.index=0,Be.sibling=null,Be}function U(Be,ve,Oe){return Be.index=Oe,l?(Oe=Be.alternate,Oe!==null?(Oe=Oe.index,Oe<ve?(Be.flags|=33554434,ve):Oe):(Be.flags|=33554434,ve)):(Be.flags|=1048576,ve)}function W(Be){return l&&Be.alternate===null&&(Be.flags|=33554434),Be}function ue(Be,ve,Oe,ft){return ve===null||ve.tag!==6?(ve=Df(Oe,Be.mode,ft),ve.return=Be,ve):(ve=w(ve,Oe),ve.return=Be,ve)}function Ee(Be,ve,Oe,ft){var Gt=Oe.type;return Gt===ko?mt(Be,ve,Oe.props.children,ft,Oe.key):ve!==null&&(ve.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===Ba&&Fi(Gt)===ve.type)?(ve=w(ve,Oe.props),un(ve,Oe),ve.return=Be,ve):(ve=pr(Oe.type,Oe.key,Oe.props,null,Be.mode,ft),un(ve,Oe),ve.return=Be,ve)}function Je(Be,ve,Oe,ft){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Oe.containerInfo||ve.stateNode.implementation!==Oe.implementation?(ve=Qp(Oe,Be.mode,ft),ve.return=Be,ve):(ve=w(ve,Oe.children||[]),ve.return=Be,ve)}function mt(Be,ve,Oe,ft,Gt){return ve===null||ve.tag!==7?(ve=Mi(Oe,Be.mode,ft,Gt),ve.return=Be,ve):(ve=w(ve,Oe),ve.return=Be,ve)}function Ct(Be,ve,Oe){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=Df(""+ve,Be.mode,Oe),ve.return=Be,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case $u:return Oe=pr(ve.type,ve.key,ve.props,null,Be.mode,Oe),un(Oe,ve),Oe.return=Be,Oe;case Ra:return ve=Qp(ve,Be.mode,Oe),ve.return=Be,ve;case Ba:var ft=ve._init;return ve=ft(ve._payload),Ct(Be,ve,Oe)}if(Bc(ve)||r(ve))return ve=Mi(ve,Be.mode,Oe,null),ve.return=Be,ve;if(typeof ve.then=="function")return Ct(Be,Ot(ve),Oe);if(ve.$$typeof===Wa)return Ct(Be,Fu(Be,ve),Oe);an(Be,ve)}return null}function Rt(Be,ve,Oe,ft){var Gt=ve!==null?ve.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Gt!==null?null:ue(Be,ve,""+Oe,ft);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case $u:return Oe.key===Gt?Ee(Be,ve,Oe,ft):null;case Ra:return Oe.key===Gt?Je(Be,ve,Oe,ft):null;case Ba:return Gt=Oe._init,Oe=Gt(Oe._payload),Rt(Be,ve,Oe,ft)}if(Bc(Oe)||r(Oe))return Gt!==null?null:mt(Be,ve,Oe,ft,null);if(typeof Oe.then=="function")return Rt(Be,ve,Ot(Oe),ft);if(Oe.$$typeof===Wa)return Rt(Be,ve,Fu(Be,Oe),ft);an(Be,Oe)}return null}function cn(Be,ve,Oe,ft,Gt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Be=Be.get(Oe)||null,ue(ve,Be,""+ft,Gt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case $u:return Be=Be.get(ft.key===null?Oe:ft.key)||null,Ee(ve,Be,ft,Gt);case Ra:return Be=Be.get(ft.key===null?Oe:ft.key)||null,Je(ve,Be,ft,Gt);case Ba:var vi=ft._init;return ft=vi(ft._payload),cn(Be,ve,Oe,ft,Gt)}if(Bc(ft)||r(ft))return Be=Be.get(Oe)||null,mt(ve,Be,ft,Gt,null);if(typeof ft.then=="function")return cn(Be,ve,Oe,Ot(ft),Gt);if(ft.$$typeof===Wa)return cn(Be,ve,Oe,Fu(ve,ft),Gt);an(ve,ft)}return null}function xa(Be,ve,Oe,ft){for(var Gt=null,vi=null,tn=ve,Hn=ve=0,Li=null;tn!==null&&Hn<Oe.length;Hn++){tn.index>Hn?(Li=tn,tn=null):Li=tn.sibling;var Tn=Rt(Be,tn,Oe[Hn],ft);if(Tn===null){tn===null&&(tn=Li);break}l&&tn&&Tn.alternate===null&&u(Be,tn),ve=U(Tn,ve,Hn),vi===null?Gt=Tn:vi.sibling=Tn,vi=Tn,tn=Li}if(Hn===Oe.length)return v(Be,tn),Un&&X(Be,Hn),Gt;if(tn===null){for(;Hn<Oe.length;Hn++)tn=Ct(Be,Oe[Hn],ft),tn!==null&&(ve=U(tn,ve,Hn),vi===null?Gt=tn:vi.sibling=tn,vi=tn);return Un&&X(Be,Hn),Gt}for(tn=S(tn);Hn<Oe.length;Hn++)Li=cn(tn,Be,Hn,Oe[Hn],ft),Li!==null&&(l&&Li.alternate!==null&&tn.delete(Li.key===null?Hn:Li.key),ve=U(Li,ve,Hn),vi===null?Gt=Li:vi.sibling=Li,vi=Li);return l&&tn.forEach(function(Cr){return u(Be,Cr)}),Un&&X(Be,Hn),Gt}function al(Be,ve,Oe,ft){if(Oe==null)throw Error(s(151));for(var Gt=null,vi=null,tn=ve,Hn=ve=0,Li=null,Tn=Oe.next();tn!==null&&!Tn.done;Hn++,Tn=Oe.next()){tn.index>Hn?(Li=tn,tn=null):Li=tn.sibling;var Cr=Rt(Be,tn,Tn.value,ft);if(Cr===null){tn===null&&(tn=Li);break}l&&tn&&Cr.alternate===null&&u(Be,tn),ve=U(Cr,ve,Hn),vi===null?Gt=Cr:vi.sibling=Cr,vi=Cr,tn=Li}if(Tn.done)return v(Be,tn),Un&&X(Be,Hn),Gt;if(tn===null){for(;!Tn.done;Hn++,Tn=Oe.next())Tn=Ct(Be,Tn.value,ft),Tn!==null&&(ve=U(Tn,ve,Hn),vi===null?Gt=Tn:vi.sibling=Tn,vi=Tn);return Un&&X(Be,Hn),Gt}for(tn=S(tn);!Tn.done;Hn++,Tn=Oe.next())Tn=cn(tn,Be,Hn,Tn.value,ft),Tn!==null&&(l&&Tn.alternate!==null&&tn.delete(Tn.key===null?Hn:Tn.key),ve=U(Tn,ve,Hn),vi===null?Gt=Tn:vi.sibling=Tn,vi=Tn);return l&&tn.forEach(function(ld){return u(Be,ld)}),Un&&X(Be,Hn),Gt}function rl(Be,ve,Oe,ft){if(typeof Oe=="object"&&Oe!==null&&Oe.type===ko&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case $u:e:{for(var Gt=Oe.key;ve!==null;){if(ve.key===Gt){if(Gt=Oe.type,Gt===ko){if(ve.tag===7){v(Be,ve.sibling),ft=w(ve,Oe.props.children),ft.return=Be,Be=ft;break e}}else if(ve.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===Ba&&Fi(Gt)===ve.type){v(Be,ve.sibling),ft=w(ve,Oe.props),un(ft,Oe),ft.return=Be,Be=ft;break e}v(Be,ve);break}else u(Be,ve);ve=ve.sibling}Oe.type===ko?(ft=Mi(Oe.props.children,Be.mode,ft,Oe.key),ft.return=Be,Be=ft):(ft=pr(Oe.type,Oe.key,Oe.props,null,Be.mode,ft),un(ft,Oe),ft.return=Be,Be=ft)}return W(Be);case Ra:e:{for(Gt=Oe.key;ve!==null;){if(ve.key===Gt)if(ve.tag===4&&ve.stateNode.containerInfo===Oe.containerInfo&&ve.stateNode.implementation===Oe.implementation){v(Be,ve.sibling),ft=w(ve,Oe.children||[]),ft.return=Be,Be=ft;break e}else{v(Be,ve);break}else u(Be,ve);ve=ve.sibling}ft=Qp(Oe,Be.mode,ft),ft.return=Be,Be=ft}return W(Be);case Ba:return Gt=Oe._init,Oe=Gt(Oe._payload),rl(Be,ve,Oe,ft)}if(Bc(Oe))return xa(Be,ve,Oe,ft);if(r(Oe)){if(Gt=r(Oe),typeof Gt!="function")throw Error(s(150));return Oe=Gt.call(Oe),al(Be,ve,Oe,ft)}if(typeof Oe.then=="function")return rl(Be,ve,Ot(Oe),ft);if(Oe.$$typeof===Wa)return rl(Be,ve,Fu(Be,Oe),ft);an(Be,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,ve!==null&&ve.tag===6?(v(Be,ve.sibling),ft=w(ve,Oe),ft.return=Be,Be=ft):(v(Be,ve),ft=Df(Oe,Be.mode,ft),ft.return=Be,Be=ft),W(Be)):v(Be,ve)}return function(Be,ve,Oe,ft){try{$o=0;var Gt=rl(Be,ve,Oe,ft);return Qo=null,Gt}catch(tn){if(tn===jc)throw tn;var vi=t(29,tn,null,Be.mode);return vi.lanes=ft,vi.return=Be,vi}finally{}}}function Si(l,u){l=As,B(kc,l),B(hi,u),As=l|u.baseLanes}function li(){B(kc,As),B(hi,hi.current)}function as(){As=kc.current,M(hi),M(kc)}function Bs(l){var u=l.alternate;B(qi,qi.current&1),B(fa,l),si===null&&(u===null||hi.current!==null||u.memoizedState!==null)&&(si=l)}function Xa(l){if(l.tag===22){if(B(qi,qi.current),B(fa,l),si===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(si=l)}}else ki()}function ki(){B(qi,qi.current),B(fa,fa.current)}function Kt(l){M(fa),si===l&&(si=null),M(qi)}function ys(l){for(var u=l;u!==null;){if(u.tag===13){var v=u.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||kf(v)||Vf(v)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function Zn(){throw Error(s(321))}function G(l,u){if(u===null)return!1;for(var v=0;v<u.length&&v<l.length;v++)if(!$s(l[v],u[v]))return!1;return!0}function J(l,u,v,S,w,U){return oo=U,xn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,en.H=l===null||l.memoizedState===null?nl:Ps,tl=!1,U=v(S,w),tl=!1,Hl&&(U=Re(u,v,S,w)),fe(l),U}function fe(l){en.H=Ei;var u=Yt!==null&&Yt.next!==null;if(oo=0,On=Yt=xn=null,La=!1,zl=0,ns=null,u)throw Error(s(300));l===null||ai||(l=l.dependencies,l!==null&&Pu(l)&&(ai=!0))}function Re(l,u,v,S){xn=l;var w=0;do{if(Hl&&(ns=null),zl=0,Hl=!1,25<=w)throw Error(s(301));if(w+=1,On=Yt=null,l.updateQueue!=null){var U=l.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}en.H=da,U=u(v,S)}while(Hl);return U}function Ne(){var l=en.H,u=l.useState()[0];return u=typeof u.then=="function"?he(u):u,l=l.useState()[0],(Yt!==null?Yt.memoizedState:null)!==l&&(xn.flags|=1024),u}function ze(){var l=ed!==0;return ed=0,l}function ut(l,u,v){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~v}function z(l){if(La){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}La=!1}oo=0,On=Yt=xn=null,Hl=!1,zl=ed=0,ns=null}function ee(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?xn.memoizedState=On=l:On=On.next=l,On}function se(){if(Yt===null){var l=xn.alternate;l=l!==null?l.memoizedState:null}else l=Yt.next;var u=On===null?xn.memoizedState:On.next;if(u!==null)On=u,Yt=l;else{if(l===null)throw xn.alternate===null?Error(s(467)):Error(s(310));Yt=l,l={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},On===null?xn.memoizedState=On=l:On=On.next=l}return On}function he(l){var u=zl;return zl+=1,ns===null&&(ns=[]),l=$e(ns,l,u),u=xn,(On===null?u.memoizedState:On.next)===null&&(u=u.alternate,en.H=u===null||u.memoizedState===null?nl:Ps),l}function te(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return he(l);if(l.$$typeof===Wa)return os(l)}throw Error(s(438,String(l)))}function Qe(l){var u=null,v=xn.updateQueue;if(v!==null&&(u=v.memoCache),u==null){var S=xn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(u={data:S.data.map(function(w){return w.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),v===null&&(v=td(),xn.updateQueue=v),v.memoCache=u,v=u.data[u.index],v===void 0)for(v=u.data[u.index]=Array(l),S=0;S<l;S++)v[S]=O0;return u.index++,v}function Fe(l,u){return typeof u=="function"?u(l):u}function Ve(l){var u=se();return We(u,Yt,l)}function We(l,u,v){var S=l.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=v;var w=l.baseQueue,U=S.pending;if(U!==null){if(w!==null){var W=w.next;w.next=U.next,U.next=W}u.baseQueue=w=U,S.pending=null}if(U=l.baseState,w===null)l.memoizedState=U;else{u=w.next;var ue=W=null,Ee=null,Je=u,mt=!1;do{var Ct=Je.lane&-536870913;if(Ct!==Je.lane?(Cn&Ct)===Ct:(oo&Ct)===Ct){var Rt=Je.revertLane;if(Rt===0)Ee!==null&&(Ee=Ee.next={lane:0,revertLane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),Ct===ha&&(mt=!0);else if((oo&Rt)===Rt){Je=Je.next,Rt===ha&&(mt=!0);continue}else Ct={lane:0,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Ee===null?(ue=Ee=Ct,W=U):Ee=Ee.next=Ct,xn.lanes|=Rt,va|=Rt;Ct=Je.action,tl&&v(U,Ct),U=Je.hasEagerState?Je.eagerState:v(U,Ct)}else Rt={lane:Ct,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Ee===null?(ue=Ee=Rt,W=U):Ee=Ee.next=Rt,xn.lanes|=Ct,va|=Ct;Je=Je.next}while(Je!==null&&Je!==u);if(Ee===null?W=U:Ee.next=ue,!$s(U,l.memoizedState)&&(ai=!0,mt&&(v=Pl,v!==null)))throw v;l.memoizedState=U,l.baseState=W,l.baseQueue=Ee,S.lastRenderedState=U}return w===null&&(S.lanes=0),[l.memoizedState,S.dispatch]}function ht(l){var u=se(),v=u.queue;if(v===null)throw Error(s(311));v.lastRenderedReducer=l;var S=v.dispatch,w=v.pending,U=u.memoizedState;if(w!==null){v.pending=null;var W=w=w.next;do U=l(U,W.action),W=W.next;while(W!==w);$s(U,u.memoizedState)||(ai=!0),u.memoizedState=U,u.baseQueue===null&&(u.baseState=U),v.lastRenderedState=U}return[U,S]}function At(l,u,v){var S=xn,w=se(),U=Un;if(U){if(v===void 0)throw Error(s(407));v=v()}else v=u();var W=!$s((Yt||w).memoizedState,v);if(W&&(w.memoizedState=v,ai=!0),w=w.queue,Sp(Zt.bind(null,S,w,l),[l]),w.getSnapshot!==u||W||On!==null&&On.memoizedState.tag&1){if(S.flags|=2048,Vi(9,Pt.bind(null,S,w,v,u),{destroy:void 0},null),Yn===null)throw Error(s(349));U||(oo&60)!==0||gt(S,u,v)}return v}function gt(l,u,v){l.flags|=16384,l={getSnapshot:u,value:v},u=xn.updateQueue,u===null?(u=td(),xn.updateQueue=u,u.stores=[l]):(v=u.stores,v===null?u.stores=[l]:v.push(l))}function Pt(l,u,v,S){u.value=v,u.getSnapshot=S,Xt(u)&&vn(l)}function Zt(l,u,v){return v(function(){Xt(u)&&vn(l)})}function Xt(l){var u=l.getSnapshot;l=l.value;try{var v=u();return!$s(l,v)}catch{return!0}}function vn(l){var u=Le(l,2);u!==null&&$i(u,l,2)}function Dt(l){var u=ee();if(typeof l=="function"){var v=l;if(l=v(),tl){Z(!0);try{v()}finally{Z(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fe,lastRenderedState:l},u}function Tt(l,u,v,S){return l.baseState=v,We(l,Yt,typeof S=="function"?S:Fe)}function Rn(l,u,v,S,w){if(Du(l))throw Error(s(485));if(l=u.action,l!==null){var U={payload:w,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){U.listeners.push(W)}};en.T!==null?v(!0):U.isTransition=!1,S(U),v=u.pending,v===null?(U.next=u.pending=U,rn(u,U)):(U.next=v.next,u.pending=v.next=U)}}function rn(l,u){var v=u.action,S=u.payload,w=l.state;if(u.isTransition){var U=en.T,W={};en.T=W;try{var ue=v(w,S),Ee=en.S;Ee!==null&&Ee(W,ue),kn(l,u,ue)}catch(Je){Dn(l,u,Je)}finally{en.T=U}}else try{U=v(w,S),kn(l,u,U)}catch(Je){Dn(l,u,Je)}}function kn(l,u,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(S){yn(l,u,S)},function(S){return Dn(l,u,S)}):yn(l,u,v)}function yn(l,u,v){u.status="fulfilled",u.value=v,on(u),l.state=v,u=l.pending,u!==null&&(v=u.next,v===u?l.pending=null:(v=v.next,u.next=v,rn(l,v)))}function Dn(l,u,v){var S=l.pending;if(l.pending=null,S!==null){S=S.next;do u.status="rejected",u.reason=v,on(u),u=u.next;while(u!==S)}l.action=null}function on(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Ht(l,u){return u}function Wn(l,u){if(Un){var v=Yn.formState;if(v!==null){e:{var S=xn;if(Un){if(ds){var w=mm(ds,ts);if(w){ds=gm(w),S=nv(w);break e}}qe(S)}S=!1}S&&(u=v[0])}}v=ee(),v.memoizedState=v.baseState=u,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ht,lastRenderedState:u},v.queue=S,v=Cp.bind(null,xn,S),S.dispatch=v,S=Dt(!1);var U=fc.bind(null,xn,!1,S.queue);return S=ee(),w={state:u,dispatch:null,action:l,pending:null},S.queue=w,v=Rn.bind(null,xn,w,U,v),w.dispatch=v,S.memoizedState=l,[u,v,!1]}function mi(l){var u=se();return En(u,Yt,l)}function En(l,u,v){u=We(l,u,Ht)[0],l=Ve(Fe)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?he(u):u;var S=se(),w=S.queue,U=w.dispatch;return v!==S.memoizedState&&(xn.flags|=2048,Vi(9,ci.bind(null,w,v),{destroy:void 0},null)),[u,U,l]}function ci(l,u){l.action=u}function _l(l){var u=se(),v=Yt;if(v!==null)return En(u,v,l);se(),u=u.memoizedState,v=se();var S=v.queue.dispatch;return v.memoizedState=l,[u,S,!1]}function Vi(l,u,v,S){return l={tag:l,create:u,inst:v,deps:S,next:null},u=xn.updateQueue,u===null&&(u=td(),xn.updateQueue=u),v=u.lastEffect,v===null?u.lastEffect=l.next=l:(S=v.next,v.next=l,l.next=S,u.lastEffect=l),l}function h0(){return se().memoizedState}function Cu(l,u,v,S){var w=ee();xn.flags|=l,w.memoizedState=Vi(1|u,v,{destroy:void 0},S===void 0?null:S)}function wu(l,u,v,S){var w=se();S=S===void 0?null:S;var U=w.memoizedState.inst;Yt!==null&&S!==null&&G(S,Yt.memoizedState.deps)?w.memoizedState=Vi(u,v,U,S):(xn.flags|=l,w.memoizedState=Vi(1|u,v,U,S))}function ff(l,u){Cu(8390656,8,l,u)}function Sp(l,u){wu(2048,8,l,u)}function f0(l,u){return wu(4,2,l,u)}function Ru(l,u){return wu(4,4,l,u)}function df(l,u){if(typeof u=="function"){l=l();var v=u(l);return function(){typeof v=="function"?v():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function pf(l,u,v){v=v!=null?v.concat([l]):null,wu(4,4,df.bind(null,u,l),v)}function wo(){}function Al(l,u){var v=se();u=u===void 0?null:u;var S=v.memoizedState;return u!==null&&G(u,S[1])?S[0]:(v.memoizedState=[l,u],l)}function Mp(l,u){var v=se();u=u===void 0?null:u;var S=v.memoizedState;if(u!==null&&G(u,S[1]))return S[0];if(S=l(),tl){Z(!0);try{l()}finally{Z(!1)}}return v.memoizedState=[S,u],S}function Bu(l,u,v){return v===void 0||(oo&1073741824)!==0?l.memoizedState=u:(l.memoizedState=v,l=Yp(),xn.lanes|=l,va|=l,v)}function Ep(l,u,v,S){return $s(v,u)?v:hi.current!==null?(l=Bu(l,v,S),$s(l,u)||(ai=!0),l):(oo&42)===0?(ai=!0,l.memoizedState=v):(l=Yp(),xn.lanes|=l,va|=l,u)}function uc(l,u,v,S,w){var U=no();bs(U!==0&&8>U?U:8);var W=en.T,ue={};en.T=ue,fc(l,!1,u,v);try{var Ee=w(),Je=en.S;if(Je!==null&&Je(ue,Ee),Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var mt=pt(Ee,S);Ro(l,u,mt,Ni(l))}else Ro(l,u,S,Ni(l))}catch(Ct){Ro(l,u,{then:function(){},status:"rejected",reason:Ct},Ni())}finally{bs(U),en.T=W}}function hr(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Xo,baseState:Xo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fe,lastRenderedState:Xo},next:null};var v={};return u.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fe,lastRenderedState:v},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Nu(){return os(Ja)}function hc(){return se().memoizedState}function Gr(){return se().memoizedState}function Tp(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var v=Ni();l=tt(v);var S=ot(u,l,v);S!==null&&($i(S,u,v),Ut(S,u,v)),u={cache:Uo()},l.payload=u;return}u=u.return}}function mf(l,u,v){var S=Ni();v={lane:S,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},Du(l)?Ns(u,v):(v=Xe(l,u,v,S),v!==null&&($i(v,l,S),Bo(v,u,S)))}function Cp(l,u,v){var S=Ni();Ro(l,u,v,S)}function Ro(l,u,v,S){var w={lane:S,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(Du(l))Ns(u,w);else{var U=l.alternate;if(l.lanes===0&&(U===null||U.lanes===0)&&(U=u.lastRenderedReducer,U!==null))try{var W=u.lastRenderedState,ue=U(W,v);if(w.hasEagerState=!0,w.eagerState=ue,$s(ue,W))return ke(l,u,w,0),Yn===null&&Ze(),!1}catch{}finally{}if(v=Xe(l,u,w,S),v!==null)return $i(v,l,S),Bo(v,u,S),!0}return!1}function fc(l,u,v,S){if(S={lane:2,revertLane:je(),action:S,hasEagerState:!1,eagerState:null,next:null},Du(l)){if(u)throw Error(s(479))}else u=Xe(l,v,S,2),u!==null&&$i(u,l,2)}function Du(l){var u=l.alternate;return l===xn||u!==null&&u===xn}function Ns(l,u){Hl=La=!0;var v=l.pending;v===null?u.next=u:(u.next=v.next,v.next=u),l.pending=u}function Bo(l,u,v){if((v&4194176)!==0){var S=u.lanes;S&=l.pendingLanes,v|=S,u.lanes=v,de(l,v)}}function dc(l,u,v,S){u=l.memoizedState,v=v(S,u),v=v==null?u:Of({},u,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}function pc(l,u,v,S,w,U,W){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,U,W):u.prototype&&u.prototype.isPureReactComponent?!rt(v,S)||!rt(w,U):!0}function d0(l,u,v,S){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(v,S),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(v,S),u.state!==l&&_r.enqueueReplaceState(u,u.state,null)}function jr(l,u){var v=u;if("ref"in u){v={};for(var S in u)S!=="ref"&&(v[S]=u[S])}if(l=l.defaultProps){v===u&&(v=Of({},v));for(var w in l)v[w]===void 0&&(v[w]=l[w])}return v}function mc(l,u){try{var v=l.onUncaughtError;v(u.value,{componentStack:u.stack})}catch(S){setTimeout(function(){throw S})}}function gc(l,u,v){try{var S=l.onCaughtError;S(v.value,{componentStack:v.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function vc(l,u,v){return v=tt(v),v.tag=3,v.payload={element:null},v.callback=function(){mc(l,u)},v}function wp(l){return l=tt(l),l.tag=3,l}function p0(l,u,v,S){var w=v.type.getDerivedStateFromError;if(typeof w=="function"){var U=S.value;l.payload=function(){return w(U)},l.callback=function(){gc(u,v,S)}}var W=v.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(l.callback=function(){gc(u,v,S),typeof w!="function"&&(il===null?il=new Set([this]):il.add(this));var ue=S.stack;this.componentDidCatch(S.value,{componentStack:ue!==null?ue:""})})}function Kb(l,u,v,S,w){if(v.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(u=v.alternate,u!==null&&Iu(u,v,w,!0),v=fa.current,v!==null){switch(v.tag){case 13:return si===null?Kr():v.alternate===null&&ri===0&&(ri=3),v.flags&=-257,v.flags|=65536,v.lanes=w,S===ph?v.flags|=16384:(u=v.updateQueue,u===null?v.updateQueue=new Set([S]):u.add(S),El(l,S,w)),!1;case 22:return v.flags|=65536,S===ph?v.flags|=16384:(u=v.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([S])},v.updateQueue=u):(v=u.retryQueue,v===null?u.retryQueue=new Set([S]):v.add(S)),El(l,S,w)),!1}throw Error(s(435,v.tag))}return El(l,S,w),Kr(),!1}if(Un)return u=fa.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=w,S!==hh&&(l=Error(s(422),{cause:S}),ne(ge(l,v)))):(S!==hh&&(u=Error(s(423),{cause:S}),ne(ge(u,v))),l=l.current.alternate,l.flags|=65536,w&=-w,l.lanes|=w,S=ge(S,v),w=vc(l.stateNode,S,w),ae(l,w),ri!==4&&(ri=2)),!1;var U=Error(s(520),{cause:S});if(U=ge(U,v),jl===null?jl=[U]:jl.push(U),ri!==4&&(ri=2),u===null)return!0;S=ge(S,v),v=u;do{switch(v.tag){case 3:return v.flags|=65536,l=w&-w,v.lanes|=l,l=vc(v.stateNode,S,l),ae(v,l),!1;case 1:if(u=v.type,U=v.stateNode,(v.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(il===null||!il.has(U))))return v.flags|=65536,w&=-w,v.lanes|=w,w=wp(w),p0(w,l,v,S),ae(v,w),!1}v=v.return}while(v!==null);return!1}function rs(l,u,v,S){u.child=l===null?br(u,null,v,S):el(u,l.child,v,S)}function gf(l,u,v,S,w){v=v.render;var U=u.ref;if("ref"in S){var W={};for(var ue in S)ue!=="ref"&&(W[ue]=S[ue])}else W=S;return Do(u),S=J(l,u,v,W,U,w),ue=ze(),l!==null&&!ai?(ut(l,u,w),kr(l,u,w)):(Un&&ue&&xe(u),u.flags|=1,rs(l,u,S,w),u.child)}function m0(l,u,v,S,w){if(l===null){var U=v.type;return typeof U=="function"&&!Ju(U)&&U.defaultProps===void 0&&v.compare===null?(u.tag=15,u.type=U,g0(l,u,U,S,w)):(l=pr(v.type,null,S,u,u.mode,w),l.ref=u.ref,l.return=u,u.child=l)}if(U=l.child,!Up(l,w)){var W=U.memoizedProps;if(v=v.compare,v=v!==null?v:rt,v(W,S)&&l.ref===u.ref)return kr(l,u,w)}return u.flags|=1,l=wa(U,S),l.ref=u.ref,l.return=u,u.child=l}function g0(l,u,v,S,w){if(l!==null){var U=l.memoizedProps;if(rt(U,S)&&l.ref===u.ref)if(ai=!1,u.pendingProps=S=U,Up(l,w))(l.flags&131072)!==0&&(ai=!0);else return u.lanes=l.lanes,kr(l,u,w)}return vf(l,u,v,S,w)}function v0(l,u,v){var S=u.pendingProps,w=S.children,U=(u.stateNode._pendingVisibility&2)!==0,W=l!==null?l.memoizedState:null;if(Uu(l,u),S.mode==="hidden"||U){if((u.flags&128)!==0){if(S=W!==null?W.baseLanes|v:v,l!==null){for(w=u.child=l.child,U=0;w!==null;)U=U|w.lanes|w.childLanes,w=w.sibling;u.childLanes=U&~S}else u.childLanes=0,u.child=null;return y0(l,u,S,v)}if((v&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&xf(u,W!==null?W.cachePool:null),W!==null?Si(u,W):li(),Xa(u);else return u.lanes=u.childLanes=536870912,y0(l,u,W!==null?W.baseLanes|v:v,v)}else W!==null?(xf(u,W.cachePool),Si(u,W),ki(),u.memoizedState=null):(l!==null&&xf(u,null),li(),ki());return rs(l,u,w,v),u.child}function y0(l,u,v,S){var w=Lp();return w=w===null?null:{parent:Os?fi._currentValue:fi._currentValue2,pool:w},u.memoizedState={baseLanes:v,cachePool:w},l!==null&&xf(u,null),li(),Xa(u),l!==null&&Iu(l,u,S,!0),null}function Uu(l,u){var v=u.ref;if(v===null)l!==null&&l.ref!==null&&(u.flags|=2097664);else{if(typeof v!="function"&&typeof v!="object")throw Error(s(284));(l===null||l.ref!==v)&&(u.flags|=2097664)}}function vf(l,u,v,S,w){return Do(u),v=J(l,u,v,S,void 0,w),S=ze(),l!==null&&!ai?(ut(l,u,w),kr(l,u,w)):(Un&&S&&xe(u),u.flags|=1,rs(l,u,v,w),u.child)}function x0(l,u,v,S,w,U){return Do(u),u.updateQueue=null,v=Re(u,S,v,w),fe(l),S=ze(),l!==null&&!ai?(ut(l,u,U),kr(l,u,U)):(Un&&S&&xe(u),u.flags|=1,rs(l,u,v,U),u.child)}function b0(l,u,v,S,w){if(Do(u),u.stateNode===null){var U=Jo,W=v.contextType;typeof W=="object"&&W!==null&&(U=os(W)),U=new v(S,U),u.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=_r,u.stateNode=U,U._reactInternals=u,U=u.stateNode,U.props=S,U.state=u.memoizedState,U.refs={},Bt(u),W=v.contextType,U.context=typeof W=="object"&&W!==null?os(W):Jo,U.state=u.memoizedState,W=v.getDerivedStateFromProps,typeof W=="function"&&(dc(u,v,W,S),U.state=u.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(W=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),W!==U.state&&_r.enqueueReplaceState(U,U.state,null),nt(u,S,U,w),Se(),U.state=u.memoizedState),typeof U.componentDidMount=="function"&&(u.flags|=4194308),S=!0}else if(l===null){U=u.stateNode;var ue=u.memoizedProps,Ee=jr(v,ue);U.props=Ee;var Je=U.context,mt=v.contextType;W=Jo,typeof mt=="object"&&mt!==null&&(W=os(mt));var Ct=v.getDerivedStateFromProps;mt=typeof Ct=="function"||typeof U.getSnapshotBeforeUpdate=="function",ue=u.pendingProps!==ue,mt||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ue||Je!==W)&&d0(u,U,S,W),ro=!1;var Rt=u.memoizedState;U.state=Rt,nt(u,S,U,w),Se(),Je=u.memoizedState,ue||Rt!==Je||ro?(typeof Ct=="function"&&(dc(u,v,Ct,S),Je=u.memoizedState),(Ee=ro||pc(u,v,Ee,S,Rt,Je,W))?(mt||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(u.flags|=4194308)):(typeof U.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=S,u.memoizedState=Je),U.props=S,U.state=Je,U.context=W,S=Ee):(typeof U.componentDidMount=="function"&&(u.flags|=4194308),S=!1)}else{U=u.stateNode,Nt(l,u),W=u.memoizedProps,mt=jr(v,W),U.props=mt,Ct=u.pendingProps,Rt=U.context,Je=v.contextType,Ee=Jo,typeof Je=="object"&&Je!==null&&(Ee=os(Je)),ue=v.getDerivedStateFromProps,(Je=typeof ue=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(W!==Ct||Rt!==Ee)&&d0(u,U,S,Ee),ro=!1,Rt=u.memoizedState,U.state=Rt,nt(u,S,U,w),Se();var cn=u.memoizedState;W!==Ct||Rt!==cn||ro||l!==null&&l.dependencies!==null&&Pu(l.dependencies)?(typeof ue=="function"&&(dc(u,v,ue,S),cn=u.memoizedState),(mt=ro||pc(u,v,mt,S,Rt,cn,Ee)||l!==null&&l.dependencies!==null&&Pu(l.dependencies))?(Je||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(S,cn,Ee),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(S,cn,Ee)),typeof U.componentDidUpdate=="function"&&(u.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof U.componentDidUpdate!="function"||W===l.memoizedProps&&Rt===l.memoizedState||(u.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||W===l.memoizedProps&&Rt===l.memoizedState||(u.flags|=1024),u.memoizedProps=S,u.memoizedState=cn),U.props=S,U.state=cn,U.context=Ee,S=mt):(typeof U.componentDidUpdate!="function"||W===l.memoizedProps&&Rt===l.memoizedState||(u.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||W===l.memoizedProps&&Rt===l.memoizedState||(u.flags|=1024),S=!1)}return U=S,Uu(l,u),S=(u.flags&128)!==0,U||S?(U=u.stateNode,v=S&&typeof v.getDerivedStateFromError!="function"?null:U.render(),u.flags|=1,l!==null&&S?(u.child=el(u,l.child,null,w),u.child=el(u,null,v,w)):rs(l,u,v,w),u.memoizedState=U.state,l=u.child):l=kr(l,u,w),l}function _0(l,u,v,S){return zt(),u.flags|=256,rs(l,u,v,S),u.child}function Rp(l){return{baseLanes:l,cachePool:Ip()}}function Ou(l,u,v){return l=l!==null?l.childLanes&~v:0,u&&(l|=ya),l}function A0(l,u,v){var S=u.pendingProps,w=!1,U=(u.flags&128)!==0,W;if((W=U)||(W=l!==null&&l.memoizedState===null?!1:(qi.current&2)!==0),W&&(w=!0,u.flags&=-129),W=(u.flags&32)!==0,u.flags&=-33,l===null){if(Un){if(w?Bs(u):ki(),Un){var ue=ds,Ee;(Ee=ue)&&(ue=av(ue,ts),ue!==null?(u.memoizedState={dehydrated:ue,treeContext:Ko!==null?{id:Za,overflow:Qa}:null,retryLane:536870912},Ee=t(18,null,null,0),Ee.stateNode=ue,Ee.return=u,u.child=Ee,fs=u,ds=null,Ee=!0):Ee=!1),Ee||qe(u)}if(ue=u.memoizedState,ue!==null&&(ue=ue.dehydrated,ue!==null))return Vf(ue)?u.lanes=16:u.lanes=536870912,null;Kt(u)}return ue=S.children,S=S.fallback,w?(ki(),w=u.mode,ue=Np({mode:"hidden",children:ue},w),S=Mi(S,w,v,null),ue.return=u,S.return=u,ue.sibling=S,u.child=ue,w=u.child,w.memoizedState=Rp(v),w.childLanes=Ou(l,W,v),u.memoizedState=sd,S):(Bs(u),Bp(u,ue))}if(Ee=l.memoizedState,Ee!==null&&(ue=Ee.dehydrated,ue!==null)){if(U)u.flags&256?(Bs(u),u.flags&=-257,u=yf(l,u,v)):u.memoizedState!==null?(ki(),u.child=l.child,u.flags|=128,u=null):(ki(),w=S.fallback,ue=u.mode,S=Np({mode:"visible",children:S.children},ue),w=Mi(w,ue,v,null),w.flags|=2,S.return=u,w.return=u,S.sibling=w,u.child=S,el(u,l.child,null,v),S=u.child,S.memoizedState=Rp(v),S.childLanes=Ou(l,W,v),u.memoizedState=sd,u=w);else if(Bs(u),Vf(ue))W=ev(ue).digest,S=Error(s(419)),S.stack="",S.digest=W,ne({value:S,source:null,stack:null}),u=yf(l,u,v);else if(ai||Iu(l,u,v,!1),W=(v&l.childLanes)!==0,ai||W){if(W=Yn,W!==null){if(S=v&-v,(S&42)!==0)S=1;else switch(S){case 2:S=1;break;case 8:S=4;break;case 32:S=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:S=64;break;case 268435456:S=134217728;break;default:S=0}if(S=(S&(W.suspendedLanes|v))!==0?0:S,S!==0&&S!==Ee.retryLane)throw Ee.retryLane=S,Le(l,S),$i(W,l,S),id}kf(ue)||Kr(),u=yf(l,u,v)}else kf(ue)?(u.flags|=128,u.child=l.child,u=Zr.bind(null,l),tv(ue,u),u=null):(l=Ee.treeContext,hs&&(ds=sv(ue),fs=u,Un=!0,Ua=null,ts=!1,l!==null&&(ca[ua++]=Za,ca[ua++]=Qa,ca[ua++]=Ko,Za=l.id,Qa=l.overflow,Ko=u)),u=Bp(u,S.children),u.flags|=4096);return u}return w?(ki(),w=S.fallback,ue=u.mode,Ee=l.child,U=Ee.sibling,S=wa(Ee,{mode:"hidden",children:S.children}),S.subtreeFlags=Ee.subtreeFlags&31457280,U!==null?w=wa(U,w):(w=Mi(w,ue,v,null),w.flags|=2),w.return=u,S.return=u,S.sibling=w,u.child=S,S=w,w=u.child,ue=l.child.memoizedState,ue===null?ue=Rp(v):(Ee=ue.cachePool,Ee!==null?(U=Os?fi._currentValue:fi._currentValue2,Ee=Ee.parent!==U?{parent:U,pool:U}:Ee):Ee=Ip(),ue={baseLanes:ue.baseLanes|v,cachePool:Ee}),w.memoizedState=ue,w.childLanes=Ou(l,W,v),u.memoizedState=sd,S):(Bs(u),v=l.child,l=v.sibling,v=wa(v,{mode:"visible",children:S.children}),v.return=u,v.sibling=null,l!==null&&(W=u.deletions,W===null?(u.deletions=[l],u.flags|=16):W.push(l)),u.child=v,u.memoizedState=null,v)}function Bp(l,u){return u=Np({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Np(l,u){return Zu(l,u,0,null)}function yf(l,u,v){return el(u,l.child,null,v),l=Bp(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function S0(l,u,v){l.lanes|=u;var S=l.alternate;S!==null&&(S.lanes|=u),Lu(l.return,u,v)}function Dp(l,u,v,S,w){var U=l.memoizedState;U===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:S,tail:v,tailMode:w}:(U.isBackwards=u,U.rendering=null,U.renderingStartTime=0,U.last=S,U.tail=v,U.tailMode=w)}function M0(l,u,v){var S=u.pendingProps,w=S.revealOrder,U=S.tail;if(rs(l,u,S.children,v),S=qi.current,(S&2)!==0)S=S&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&S0(l,v,u);else if(l.tag===19)S0(l,v,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}S&=1}switch(B(qi,S),w){case"forwards":for(v=u.child,w=null;v!==null;)l=v.alternate,l!==null&&ys(l)===null&&(w=v),v=v.sibling;v=w,v===null?(w=u.child,u.child=null):(w=v.sibling,v.sibling=null),Dp(u,!1,w,v,U);break;case"backwards":for(v=null,w=u.child,u.child=null;w!==null;){if(l=w.alternate,l!==null&&ys(l)===null){u.child=w;break}l=w.sibling,w.sibling=v,v=w,w=l}Dp(u,!0,v,null,U);break;case"together":Dp(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function kr(l,u,v){if(l!==null&&(u.dependencies=l.dependencies),va|=u.lanes,(v&u.childLanes)===0)if(l!==null){if(Iu(l,u,v,!1),(v&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(s(153));if(u.child!==null){for(l=u.child,v=wa(l,l.pendingProps),u.child=v,v.return=u;l.sibling!==null;)l=l.sibling,v=v.sibling=wa(l,l.pendingProps),v.return=u;v.sibling=null}return u.child}function Up(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Pu(l)))}function Zb(l,u,v){switch(u.tag){case 3:He(u,u.stateNode.containerInfo),No(u,fi,l.memoizedState.cache),zt();break;case 27:case 5:me(u);break;case 4:He(u,u.stateNode.containerInfo);break;case 10:No(u,u.type,u.memoizedProps.value);break;case 13:var S=u.memoizedState;if(S!==null)return S.dehydrated!==null?(Bs(u),u.flags|=128,null):(v&u.child.childLanes)!==0?A0(l,u,v):(Bs(u),l=kr(l,u,v),l!==null?l.sibling:null);Bs(u);break;case 19:var w=(l.flags&128)!==0;if(S=(v&u.childLanes)!==0,S||(Iu(l,u,v,!1),S=(v&u.childLanes)!==0),w){if(S)return M0(l,u,v);u.flags|=128}if(w=u.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),B(qi,qi.current),S)break;return null;case 22:case 23:return u.lanes=0,v0(l,u,v);case 24:No(u,fi,l.memoizedState.cache)}return kr(l,u,v)}function E0(l,u,v){if(l!==null)if(l.memoizedProps!==u.pendingProps)ai=!0;else{if(!Up(l,v)&&(u.flags&128)===0)return ai=!1,Zb(l,u,v);ai=(l.flags&131072)!==0}else ai=!1,Un&&(u.flags&1048576)!==0&&ce(u,Fc,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var S=u.elementType,w=S._init;if(S=w(S._payload),u.type=S,typeof S=="function")Ju(S)?(l=jr(S,l),u.tag=1,u=b0(null,u,S,l,v)):(u.tag=0,u=vf(null,u,S,l,v));else{if(S!=null){if(w=S.$$typeof,w===nh){u.tag=11,u=gf(null,u,S,l,v);break e}else if(w===Pf){u.tag=14,u=m0(null,u,S,l,v);break e}}throw u=c(S)||S,Error(s(306,u,""))}}return u;case 0:return vf(l,u,u.type,u.pendingProps,v);case 1:return S=u.type,w=jr(S,u.pendingProps),b0(l,u,S,w,v);case 3:e:{if(He(u,u.stateNode.containerInfo),l===null)throw Error(s(387));var U=u.pendingProps;w=u.memoizedState,S=w.element,Nt(l,u),nt(u,U,null,v);var W=u.memoizedState;if(U=W.cache,No(u,fi,U),U!==w.cache&&Sl(u,[fi],v,!0),Se(),U=W.element,hs&&w.isDehydrated)if(w={element:U,isDehydrated:!1,cache:W.cache},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){u=_0(l,u,U,v);break e}else if(U!==S){S=ge(Error(s(424)),u),ne(S),u=_0(l,u,U,v);break e}else for(hs&&(ds=iv(u.stateNode.containerInfo),fs=u,Un=!0,Ua=null,ts=!0),v=br(u,null,U,v),u.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(zt(),U===S){u=kr(l,u,v);break e}rs(l,u,U,v)}u=u.child}return u;case 26:if(la)return Uu(l,u),l===null?(v=xm(u.type,null,u.pendingProps,null))?u.memoizedState=v:Un||(u.stateNode=Jf(u.type,u.pendingProps,yr.current,u)):u.memoizedState=xm(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:if(ii)return me(u),l===null&&ii&&Un&&(S=u.stateNode=Ka(u.type,u.pendingProps,yr.current,Yi.current,!1),fs=u,ts=!0,ds=Xf(S)),S=u.pendingProps.children,l!==null||Un?rs(l,u,S,v):u.child=el(u,null,S,v),Uu(l,u),u.child;case 5:return l===null&&Un&&(qf(u.type,u.pendingProps,Yi.current),(w=S=ds)&&(S=s_(S,u.type,u.pendingProps,ts),S!==null?(u.stateNode=S,fs=u,ds=Xf(S),ts=!1,w=!0):w=!1),w||qe(u)),me(u),w=u.type,U=u.pendingProps,W=l!==null?l.memoizedProps:null,S=U.children,fn(w,U)?S=null:W!==null&&fn(w,W)&&(u.flags|=32),u.memoizedState!==null&&(w=J(l,u,Ne,null,null,v),Os?Ja._currentValue=w:Ja._currentValue2=w),Uu(l,u),rs(l,u,S,v),u.child;case 6:return l===null&&Un&&(uv(u.pendingProps,Yi.current),(l=v=ds)&&(v=vm(v,u.pendingProps,ts),v!==null?(u.stateNode=v,fs=u,ds=null,l=!0):l=!1),l||qe(u)),null;case 13:return A0(l,u,v);case 4:return He(u,u.stateNode.containerInfo),S=u.pendingProps,l===null?u.child=el(u,null,S,v):rs(l,u,S,v),u.child;case 11:return gf(l,u,u.type,u.pendingProps,v);case 7:return rs(l,u,u.pendingProps,v),u.child;case 8:return rs(l,u,u.pendingProps.children,v),u.child;case 12:return rs(l,u,u.pendingProps.children,v),u.child;case 10:return S=u.pendingProps,No(u,u.type,S.value),rs(l,u,S.children,v),u.child;case 9:return w=u.type._context,S=u.pendingProps.children,Do(u),w=os(w),S=S(w),u.flags|=1,rs(l,u,S,v),u.child;case 14:return m0(l,u,u.type,u.pendingProps,v);case 15:return g0(l,u,u.type,u.pendingProps,v);case 19:return M0(l,u,v);case 22:return v0(l,u,v);case 24:return Do(u),S=os(fi),l===null?(w=Lp(),w===null&&(w=Yn,U=Uo(),w.pooledCache=U,U.refCount++,U!==null&&(w.pooledCacheLanes|=v),w=U),u.memoizedState={parent:S,cache:w},Bt(u),No(u,fi,w)):((l.lanes&v)!==0&&(Nt(l,u),nt(u,null,null,v),Se()),w=l.memoizedState,U=u.memoizedState,w.parent!==S?(w={parent:S,cache:S},u.memoizedState=w,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=w),No(u,fi,S)):(S=U.cache,No(u,fi,S),S!==w.cache&&Sl(u,[fi],v,!0))),rs(l,u,u.pendingProps.children,v),u.child;case 29:throw u.pendingProps}throw Error(s(156,u.tag))}function No(l,u,v){Os?(B(lo,u._currentValue),u._currentValue=v):(B(lo,u._currentValue2),u._currentValue2=v)}function Vr(l){var u=lo.current;Os?l._currentValue=u:l._currentValue2=u,M(lo)}function Lu(l,u,v){for(;l!==null;){var S=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,S!==null&&(S.childLanes|=u)):S!==null&&(S.childLanes&u)!==u&&(S.childLanes|=u),l===v)break;l=l.return}}function Sl(l,u,v,S){var w=l.child;for(w!==null&&(w.return=l);w!==null;){var U=w.dependencies;if(U!==null){var W=w.child;U=U.firstContext;e:for(;U!==null;){var ue=U;U=w;for(var Ee=0;Ee<u.length;Ee++)if(ue.context===u[Ee]){U.lanes|=v,ue=U.alternate,ue!==null&&(ue.lanes|=v),Lu(U.return,v,l),S||(W=null);break e}U=ue.next}}else if(w.tag===18){if(W=w.return,W===null)throw Error(s(341));W.lanes|=v,U=W.alternate,U!==null&&(U.lanes|=v),Lu(W,v,l),W=null}else W=w.child;if(W!==null)W.return=w;else for(W=w;W!==null;){if(W===l){W=null;break}if(w=W.sibling,w!==null){w.return=W.return,W=w;break}W=W.return}w=W}}function Iu(l,u,v,S){l=null;for(var w=u,U=!1;w!==null;){if(!U){if((w.flags&524288)!==0)U=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var W=w.alternate;if(W===null)throw Error(s(387));if(W=W.memoizedProps,W!==null){var ue=w.type;$s(w.pendingProps.value,W.value)||(l!==null?l.push(ue):l=[ue])}}else if(w===Ul.current){if(W=w.alternate,W===null)throw Error(s(387));W.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(l!==null?l.push(Ja):l=[Ja])}w=w.return}l!==null&&Sl(u,l,v,S),u.flags|=262144}function Pu(l){for(l=l.firstContext;l!==null;){var u=l.context;if(!$s(Os?u._currentValue:u._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function Do(l){tr=l,pa=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function os(l){return Op(tr,l)}function Fu(l,u){return tr===null&&Do(l),Op(l,u)}function Op(l,u){var v=Os?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:v,next:null},pa===null){if(l===null)throw Error(s(308));pa=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else pa=pa.next=u;return v}function Uo(){return{controller:new Vc,data:new Map,refCount:0}}function Hu(l){l.refCount--,l.refCount===0&&_v(Av,function(){l.controller.abort()})}function Lp(){var l=Ar.current;return l!==null?l:Yn.pooledCache}function xf(l,u){u===null?B(Ar,Ar.current):B(Ar,u.pool)}function Ip(){var l=Lp();return l===null?null:{parent:Os?fi._currentValue:fi._currentValue2,pool:l}}function Ys(l){l.flags|=4}function yc(l,u){if(l!==null&&l.child===u.child)return!1;if((u.flags&16)!==0)return!0;for(l=u.child;l!==null;){if((l.flags&13878)!==0||(l.subtreeFlags&13878)!==0)return!0;l=l.sibling}return!1}function Ml(l,u,v,S){if(Xi)for(v=u.child;v!==null;){if(v.tag===5||v.tag===6)sh(l,v.stateNode);else if(!(v.tag===4||ii&&v.tag===27)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}else if(Na)for(var w=u.child;w!==null;){if(w.tag===5){var U=w.stateNode;v&&S&&(U=dm(U,w.type,w.memoizedProps)),sh(l,U)}else if(w.tag===6)U=w.stateNode,v&&S&&(U=pm(U,w.memoizedProps)),sh(l,U);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)U=w.child,U!==null&&(U.return=w),Ml(l,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return;w=w.return}w.sibling.return=w.return,w=w.sibling}}function T0(l,u,v,S){if(Na)for(var w=u.child;w!==null;){if(w.tag===5){var U=w.stateNode;v&&S&&(U=dm(U,w.type,w.memoizedProps)),fm(l,U)}else if(w.tag===6)U=w.stateNode,v&&S&&(U=pm(U,w.memoizedProps)),fm(l,U);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)U=w.child,U!==null&&(U.return=w),T0(l,w,!(w.memoizedProps!==null&&w.memoizedProps.mode==="manual"),!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return;w=w.return}w.sibling.return=w.return,w=w.sibling}}function zu(l,u){if(Na&&yc(l,u)){l=u.stateNode;var v=l.containerInfo,S=ah();T0(S,u,!1,!1),l.pendingChildren=S,Ys(u),jf(v,S)}}function bf(l,u,v,S){if(Xi)l.memoizedProps!==S&&Ys(u);else if(Na){var w=l.stateNode,U=l.memoizedProps;if((l=yc(l,u))||U!==S){var W=Yi.current;U=Lc(w,v,U,S,!l,null),U===w?u.stateNode=w:(to(U,v,S,W)&&Ys(u),u.stateNode=U,l?Ml(U,u,!1,!1):Ys(u))}else u.stateNode=w}}function _f(l,u,v){if(sm(u,v)){if(l.flags|=16777216,!zf(u,v))if(Ho())l.flags|=8192;else throw Zo=ph,dh}else l.flags&=-16777217}function Af(l,u){if(dv(u)){if(l.flags|=16777216,!wl(u))if(Ho())l.flags|=8192;else throw Zo=ph,dh}else l.flags&=-16777217}function xc(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?O():536870912,l.lanes|=u,Er|=u)}function bc(l,u){if(!Un)switch(l.tailMode){case"hidden":u=l.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function yi(l){var u=l.alternate!==null&&l.alternate.child===l.child,v=0,S=0;if(u)for(var w=l.child;w!==null;)v|=w.lanes|w.childLanes,S|=w.subtreeFlags&31457280,S|=w.flags&31457280,w.return=l,w=w.sibling;else for(w=l.child;w!==null;)v|=w.lanes|w.childLanes,S|=w.subtreeFlags,S|=w.flags,w.return=l,w=w.sibling;return l.subtreeFlags|=S,l.childLanes=v,u}function C0(l,u,v){var S=u.pendingProps;switch(Te(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(u),null;case 1:return yi(u),null;case 3:return v=u.stateNode,S=null,l!==null&&(S=l.memoizedState.cache),u.memoizedState.cache!==S&&(u.flags|=2048),Vr(fi),at(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(l===null||l.child===null)&&(yt(u)?Ys(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Ua!==null&&(qu(Ua),Ua=null))),zu(l,u),yi(u),null;case 26:if(la){v=u.type;var w=u.memoizedState;return l===null?(Ys(u),w!==null?(yi(u),Af(u,w)):(yi(u),_f(u,v,S))):w?w!==l.memoizedState?(Ys(u),yi(u),Af(u,w)):(yi(u),u.flags&=-16777217):(Xi?l.memoizedProps!==S&&Ys(u):bf(l,u,v,S),yi(u),_f(u,v,S)),null}case 27:if(ii){if(Ge(u),v=yr.current,w=u.type,l!==null&&u.stateNode!=null)Xi?l.memoizedProps!==S&&Ys(u):bf(l,u,w,S);else{if(!S){if(u.stateNode===null)throw Error(s(166));return yi(u),null}l=Yi.current,yt(u)?_t(u,l):(l=Ka(w,S,v,l,!0),u.stateNode=l,Ys(u))}return yi(u),null}case 5:if(Ge(u),v=u.type,l!==null&&u.stateNode!=null)bf(l,u,v,S);else{if(!S){if(u.stateNode===null)throw Error(s(166));return yi(u),null}l=Yi.current,yt(u)?_t(u,l):(w=im(v,S,yr.current,l,u),Ml(w,u,!1,!1),u.stateNode=w,to(w,v,S,l)&&Ys(u))}return yi(u),_f(u,u.type,u.pendingProps),null;case 6:if(l&&u.stateNode!=null)v=l.memoizedProps,Xi?v!==S&&Ys(u):Na&&(v!==S?(u.stateNode=Jn(S,yr.current,Yi.current,u),Ys(u)):u.stateNode=l.stateNode);else{if(typeof S!="string"&&u.stateNode===null)throw Error(s(166));if(l=yr.current,v=Yi.current,yt(u)){if(!hs)throw Error(s(176));if(l=u.stateNode,v=u.memoizedProps,S=null,w=fs,w!==null)switch(w.tag){case 27:case 5:S=w.memoizedProps}ym(l,v,u,S)||qe(u)}else u.stateNode=Jn(S,l,v,u)}return yi(u),null;case 13:if(S=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(w=yt(u),S!==null&&S.dehydrated!==null){if(l===null){if(!w)throw Error(s(318));if(!hs)throw Error(s(344));if(w=u.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(s(317));ov(w,u)}else zt(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;yi(u),w=!1}else Ua!==null&&(qu(Ua),Ua=null),w=!0;if(!w)return u.flags&256?(Kt(u),u):(Kt(u),null)}if(Kt(u),(u.flags&128)!==0)return u.lanes=v,u;if(v=S!==null,l=l!==null&&l.memoizedState!==null,v){S=u.child,w=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(w=S.alternate.memoizedState.cachePool.pool);var U=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(U=S.memoizedState.cachePool.pool),U!==w&&(S.flags|=2048)}return v!==l&&v&&(u.child.flags|=8192),xc(u,u.updateQueue),yi(u),null;case 4:return at(),zu(l,u),l===null&&Di(u.stateNode.containerInfo),yi(u),null;case 10:return Vr(u.type),yi(u),null;case 19:if(M(qi),w=u.memoizedState,w===null)return yi(u),null;if(S=(u.flags&128)!==0,U=w.rendering,U===null)if(S)bc(w,!1);else{if(ri!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(U=ys(l),U!==null){for(u.flags|=128,bc(w,!1),l=U.updateQueue,u.updateQueue=l,xc(u,l),u.subtreeFlags=0,l=v,v=u.child;v!==null;)Ku(v,l),v=v.sibling;return B(qi,qi.current&1|2),u.child}l=l.sibling}w.tail!==null&&Da()>qc&&(u.flags|=128,S=!0,bc(w,!1),u.lanes=4194304)}else{if(!S)if(l=ys(U),l!==null){if(u.flags|=128,S=!0,l=l.updateQueue,u.updateQueue=l,xc(u,l),bc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!U.alternate&&!Un)return yi(u),null}else 2*Da()-w.renderingStartTime>qc&&v!==536870912&&(u.flags|=128,S=!0,bc(w,!1),u.lanes=4194304);w.isBackwards?(U.sibling=u.child,u.child=U):(l=w.last,l!==null?l.sibling=U:u.child=U,w.last=U)}return w.tail!==null?(u=w.tail,w.rendering=u,w.tail=u.sibling,w.renderingStartTime=Da(),u.sibling=null,l=qi.current,B(qi,S?l&1|2:l&1),u):(yi(u),null);case 22:case 23:return Kt(u),as(),S=u.memoizedState!==null,l!==null?l.memoizedState!==null!==S&&(u.flags|=8192):S&&(u.flags|=8192),S?(v&536870912)!==0&&(u.flags&128)===0&&(yi(u),u.subtreeFlags&6&&(u.flags|=8192)):yi(u),v=u.updateQueue,v!==null&&xc(u,v.retryQueue),v=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),S=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(S=u.memoizedState.cachePool.pool),S!==v&&(u.flags|=2048),l!==null&&M(Ar),null;case 24:return v=null,l!==null&&(v=l.memoizedState.cache),u.memoizedState.cache!==v&&(u.flags|=2048),Vr(fi),yi(u),null;case 25:return null}throw Error(s(156,u.tag))}function Qb(l,u){switch(Te(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Vr(fi),at(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Ge(u),null;case 13:if(Kt(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(s(340));zt()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return M(qi),null;case 4:return at(),null;case 10:return Vr(u.type),null;case 22:case 23:return Kt(u),as(),l!==null&&M(Ar),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Vr(fi),null;case 25:return null;default:return null}}function w0(l,u){switch(Te(u),u.tag){case 3:Vr(fi),at();break;case 26:case 27:case 5:Ge(u);break;case 4:at();break;case 13:Kt(u);break;case 19:M(qi);break;case 10:Vr(u.type);break;case 22:case 23:Kt(u),as(),l!==null&&M(Ar);break;case 24:Vr(fi)}}function Gu(l,u){try{var v=u.updateQueue,S=v!==null?v.lastEffect:null;if(S!==null){var w=S.next;v=w;do{if((v.tag&l)===l){S=void 0;var U=v.create,W=v.inst;S=U(),W.destroy=S}v=v.next}while(v!==w)}}catch(ue){Vn(u,u.return,ue)}}function Oo(l,u,v){try{var S=u.updateQueue,w=S!==null?S.lastEffect:null;if(w!==null){var U=w.next;S=U;do{if((S.tag&l)===l){var W=S.inst,ue=W.destroy;if(ue!==void 0){W.destroy=void 0,w=u;var Ee=v;try{ue()}catch(Je){Vn(w,Ee,Je)}}}S=S.next}while(S!==U)}}catch(Je){Vn(u,u.return,Je)}}function R0(l){var u=l.updateQueue;if(u!==null){var v=l.stateNode;try{be(u,v)}catch(S){Vn(l,l.return,S)}}}function qs(l,u,v){v.props=jr(l.type,l.memoizedProps),v.state=l.memoizedState;try{v.componentWillUnmount()}catch(S){Vn(l,u,S)}}function Ya(l,u){try{var v=l.ref;if(v!==null){var S=l.stateNode;switch(l.tag){case 26:case 27:case 5:var w=Dc(S);break;default:w=S}typeof v=="function"?l.refCleanup=v(w):v.current=w}}catch(U){Vn(l,u,U)}}function Ws(l,u){var v=l.ref,S=l.refCleanup;if(v!==null)if(typeof S=="function")try{S()}catch(w){Vn(l,u,w)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(w){Vn(l,u,w)}else v.current=null}function Pp(l){var u=l.type,v=l.memoizedProps,S=l.stateNode;try{n_(S,u,v,l)}catch(w){Vn(l,l.return,w)}}function Fp(l,u,v){try{Y0(l.stateNode,l.type,v,u,l)}catch(S){Vn(l,l.return,S)}}function Hp(l){return l.tag===5||l.tag===3||(la?l.tag===26:!1)||(ii?l.tag===27:!1)||l.tag===4}function ju(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Hp(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&(!ii||l.tag!==27)&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function zp(l,u,v){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?W0(v,l,u):cm(v,l);else if(!(S===4||ii&&S===27)&&(l=l.child,l!==null))for(zp(l,u,v),l=l.sibling;l!==null;)zp(l,u,v),l=l.sibling}function Xr(l,u,v){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?q0(v,l,u):V0(v,l);else if(!(S===4||ii&&S===27)&&(l=l.child,l!==null))for(Xr(l,u,v),l=l.sibling;l!==null;)Xr(l,u,v),l=l.sibling}function Sf(l,u,v){l=l.containerInfo;try{Ic(l,v)}catch(S){Vn(u,u.return,S)}}function ku(l,u){for(Ff(l.containerInfo),ln=u;ln!==null;)if(l=ln,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,ln=u;else for(;ln!==null;){l=ln;var v=l.alternate;switch(u=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&v!==null){u=void 0;var S=l,w=v.memoizedProps;v=v.memoizedState;var U=S.stateNode;try{var W=jr(S.type,w,S.elementType===S.type);u=U.getSnapshotBeforeUpdate(W,v),U.__reactInternalSnapshotBeforeUpdate=u}catch(ue){Vn(S,S.return,ue)}}break;case 3:(u&1024)!==0&&Xi&&$0(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(s(163))}if(u=l.sibling,u!==null){u.return=l.return,ln=u;break}ln=l.return}return W=Sn,Sn=!1,W}function Mf(l,u,v){var S=v.flags;switch(v.tag){case 0:case 11:case 15:qr(l,v),S&4&&Gu(5,v);break;case 1:if(qr(l,v),S&4)if(l=v.stateNode,u===null)try{l.componentDidMount()}catch(ue){Vn(v,v.return,ue)}else{var w=jr(v.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(w,u,l.__reactInternalSnapshotBeforeUpdate)}catch(ue){Vn(v,v.return,ue)}}S&64&&R0(v),S&512&&Ya(v,v.return);break;case 3:if(qr(l,v),S&64&&(S=v.updateQueue,S!==null)){if(l=null,v.child!==null)switch(v.child.tag){case 27:case 5:l=Dc(v.child.stateNode);break;case 1:l=v.child.stateNode}try{be(S,l)}catch(ue){Vn(v,v.return,ue)}}break;case 26:if(la){qr(l,v),S&512&&Ya(v,v.return);break}case 27:case 5:qr(l,v),u===null&&S&4&&Pp(v),S&512&&Ya(v,v.return);break;case 12:qr(l,v);break;case 13:qr(l,v),S&4&&Ef(l,v);break;case 22:if(w=v.memoizedState!==null||Sr,!w){u=u!==null&&u.memoizedState!==null||Ti;var U=Sr,W=Ti;Sr=w,(Ti=u)&&!W?Wr(l,v,(v.subtreeFlags&8772)!==0):qr(l,v),Sr=U,Ti=W}S&512&&(v.memoizedProps.mode==="manual"?Ya(v,v.return):Ws(v,v.return));break;default:qr(l,v)}}function Gp(l){var u=l.alternate;u!==null&&(l.alternate=null,Gp(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&t_(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function ls(l,u,v){for(v=v.child;v!==null;)Lo(l,u,v),v=v.sibling}function Lo(l,u,v){if(Qs&&typeof Qs.onCommitFiberUnmount=="function")try{Qs.onCommitFiberUnmount(Oi,v)}catch{}switch(v.tag){case 26:if(la){Ti||Ws(v,u),ls(l,u,v),v.memoizedState?Cl(v.memoizedState):v.stateNode&&Pc(v.stateNode);break}case 27:if(ii){Ti||Ws(v,u);var S=Vt,w=mn;Vt=v.stateNode,ls(l,u,v),Wo(v.stateNode),Vt=S,mn=w;break}case 5:Ti||Ws(v,u);case 6:if(Xi){if(S=Vt,w=mn,Vt=null,ls(l,u,v),Vt=S,mn=w,Vt!==null)if(mn)try{J0(Vt,v.stateNode)}catch(U){Vn(v,u,U)}else try{um(Vt,v.stateNode)}catch(U){Vn(v,u,U)}}else ls(l,u,v);break;case 18:Xi&&Vt!==null&&(mn?rh(Vt,v.stateNode):cv(Vt,v.stateNode));break;case 4:Xi?(S=Vt,w=mn,Vt=v.stateNode.containerInfo,mn=!0,ls(l,u,v),Vt=S,mn=w):(Na&&Sf(v.stateNode,v,ah()),ls(l,u,v));break;case 0:case 11:case 14:case 15:Ti||Oo(2,v,u),Ti||Oo(4,v,u),ls(l,u,v);break;case 1:Ti||(Ws(v,u),S=v.stateNode,typeof S.componentWillUnmount=="function"&&qs(v,u,S)),ls(l,u,v);break;case 21:ls(l,u,v);break;case 22:Ti||Ws(v,u),Ti=(S=Ti)||v.memoizedState!==null,ls(l,u,v),Ti=S;break;default:ls(l,u,v)}}function Ef(l,u){if(hs&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{r_(l)}catch(v){Vn(u,u.return,v)}}function B0(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new Xn),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new Xn),u;default:throw Error(s(435,l.tag))}}function Yr(l,u){var v=B0(l);u.forEach(function(S){var w=jo.bind(null,l,S);v.has(S)||(v.add(S),S.then(w,w))})}function Ds(l,u){var v=u.deletions;if(v!==null)for(var S=0;S<v.length;S++){var w=v[S],U=l,W=u;if(Xi){var ue=W;e:for(;ue!==null;){switch(ue.tag){case 27:case 5:Vt=ue.stateNode,mn=!1;break e;case 3:Vt=ue.stateNode.containerInfo,mn=!0;break e;case 4:Vt=ue.stateNode.containerInfo,mn=!0;break e}ue=ue.return}if(Vt===null)throw Error(s(160));Lo(U,W,w),Vt=null,mn=!1}else Lo(U,W,w);U=w.alternate,U!==null&&(U.return=null),w.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)jp(u,l),u=u.sibling}function jp(l,u){var v=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ds(u,l),Js(l),S&4&&(Oo(3,l,l.return),Gu(3,l),Oo(5,l,l.return));break;case 1:Ds(u,l),Js(l),S&512&&(Ti||v===null||Ws(v,v.return)),S&64&&Sr&&(l=l.updateQueue,l!==null&&(S=l.callbacks,S!==null&&(v=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=v===null?S:v.concat(S))));break;case 26:if(la){var w=bi;Ds(u,l),Js(l),S&512&&(Ti||v===null||Ws(v,v.return)),S&4&&(S=v!==null?v.memoizedState:null,u=l.memoizedState,v===null?u===null?l.stateNode===null?l.stateNode=lh(w,l.type,l.memoizedProps,l):ch(w,l.type,l.stateNode):l.stateNode=hv(w,u,l.memoizedProps):S!==u?(S===null?v.stateNode!==null&&Pc(v.stateNode):Cl(S),u===null?ch(w,l.type,l.stateNode):hv(w,u,l.memoizedProps)):u===null&&l.stateNode!==null&&Fp(l,l.memoizedProps,v.memoizedProps));break}case 27:if(ii&&S&4&&l.alternate===null){w=l.stateNode;var U=l.memoizedProps;try{qo(w),mv(l.type,U,w,l)}catch(mt){Vn(l,l.return,mt)}}case 5:if(Ds(u,l),Js(l),S&512&&(Ti||v===null||Ws(v,v.return)),Xi){if(l.flags&32){u=l.stateNode;try{hm(u)}catch(mt){Vn(l,l.return,mt)}}S&4&&l.stateNode!=null&&(u=l.memoizedProps,Fp(l,u,v!==null?v.memoizedProps:u)),S&1024&&(Sm=!0)}break;case 6:if(Ds(u,l),Js(l),S&4&&Xi){if(l.stateNode===null)throw Error(s(162));S=l.memoizedProps,v=v!==null?v.memoizedProps:S,u=l.stateNode;try{X0(u,v,S)}catch(mt){Vn(l,l.return,mt)}}break;case 3:if(la?(fv(),w=bi,bi=Wf(u.containerInfo),Ds(u,l),bi=w):Ds(u,l),Js(l),S&4){if(Xi&&hs&&v!==null&&v.memoizedState.isDehydrated)try{a_(u.containerInfo)}catch(mt){Vn(l,l.return,mt)}if(Na){S=u.containerInfo,v=u.pendingChildren;try{Ic(S,v)}catch(mt){Vn(l,l.return,mt)}}}Sm&&(Sm=!1,N0(l));break;case 4:la?(v=bi,bi=Wf(l.stateNode.containerInfo),Ds(u,l),Js(l),bi=v):(Ds(u,l),Js(l)),S&4&&Na&&Sf(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:Ds(u,l),Js(l);break;case 13:Ds(u,l),Js(l),l.child.flags&8192&&l.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Fs=Da()),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Yr(l,S)));break;case 22:S&512&&(Ti||v===null||Ws(v,v.return)),w=l.memoizedState!==null;var W=v!==null&&v.memoizedState!==null,ue=Sr,Ee=Ti;if(Sr=ue||w,Ti=Ee||W,Ds(u,l),Ti=Ee,Sr=ue,Js(l),u=l.stateNode,u._current=l,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,S&8192&&(u._visibility=w?u._visibility&-2:u._visibility|1,w&&(u=Sr||Ti,v===null||W||u||_c(l)),Xi&&(l.memoizedProps===null||l.memoizedProps.mode!=="manual"))){e:if(v=null,Xi)for(u=l;;){if(u.tag===5||la&&u.tag===26||ii&&u.tag===27){if(v===null){W=v=u;try{U=W.stateNode,w?K0(U):Q0(W.stateNode,W.memoizedProps)}catch(mt){Vn(W,W.return,mt)}}}else if(u.tag===6){if(v===null){W=u;try{var Je=W.stateNode;w?Z0(Je):i_(Je,W.memoizedProps)}catch(mt){Vn(W,W.return,mt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;v===u&&(v=null),u=u.return}v===u&&(v=null),u.sibling.return=u.return,u=u.sibling}}S&4&&(S=l.updateQueue,S!==null&&(v=S.retryQueue,v!==null&&(S.retryQueue=null,Yr(l,v))));break;case 19:Ds(u,l),Js(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Yr(l,S)));break;case 21:break;default:Ds(u,l),Js(l)}}function Js(l){var u=l.flags;if(u&2){try{if(Xi&&(!ii||l.tag!==27)){e:{for(var v=l.return;v!==null;){if(Hp(v)){var S=v;break e}v=v.return}throw Error(s(160))}switch(S.tag){case 27:if(ii){var w=S.stateNode,U=ju(l);Xr(l,U,w);break}case 5:var W=S.stateNode;S.flags&32&&(hm(W),S.flags&=-33);var ue=ju(l);Xr(l,ue,W);break;case 3:case 4:var Ee=S.stateNode.containerInfo,Je=ju(l);zp(l,Je,Ee);break;default:throw Error(s(161))}}}catch(mt){Vn(l,l.return,mt)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function N0(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;N0(u),u.tag===5&&u.flags&1024&&Gf(u.stateNode),l=l.sibling}}function qr(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Mf(l,u.alternate,u),u=u.sibling}function _c(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Oo(4,u,u.return),_c(u);break;case 1:Ws(u,u.return);var v=u.stateNode;typeof v.componentWillUnmount=="function"&&qs(u,u.return,v),_c(u);break;case 26:case 27:case 5:Ws(u,u.return),_c(u);break;case 22:Ws(u,u.return),u.memoizedState===null&&_c(u);break;default:_c(u)}l=l.sibling}}function Wr(l,u,v){for(v=v&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var S=u.alternate,w=l,U=u,W=U.flags;switch(U.tag){case 0:case 11:case 15:Wr(w,U,v),Gu(4,U);break;case 1:if(Wr(w,U,v),S=U,w=S.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(Je){Vn(S,S.return,Je)}if(S=U,w=S.updateQueue,w!==null){var ue=S.stateNode;try{var Ee=w.shared.hiddenCallbacks;if(Ee!==null)for(w.shared.hiddenCallbacks=null,w=0;w<Ee.length;w++)le(Ee[w],ue)}catch(Je){Vn(S,S.return,Je)}}v&&W&64&&R0(U),Ya(U,U.return);break;case 26:case 27:case 5:Wr(w,U,v),v&&S===null&&W&4&&Pp(U),Ya(U,U.return);break;case 12:Wr(w,U,v);break;case 13:Wr(w,U,v),v&&W&4&&Ef(w,U);break;case 22:U.memoizedState===null&&Wr(w,U,v),Ya(U,U.return);break;default:Wr(w,U,v)}u=u.sibling}}function Tf(l,u){var v=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==v&&(l!=null&&l.refCount++,v!=null&&Hu(v))}function Vu(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Hu(l))}function Qi(l,u,v,S){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)kp(l,u,v,S),u=u.sibling}function kp(l,u,v,S){var w=u.flags;switch(u.tag){case 0:case 11:case 15:Qi(l,u,v,S),w&2048&&Gu(9,u);break;case 3:Qi(l,u,v,S),w&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Hu(l)));break;case 12:if(w&2048){Qi(l,u,v,S),l=u.stateNode;try{var U=u.memoizedProps,W=U.id,ue=U.onPostCommit;typeof ue=="function"&&ue(W,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Ee){Vn(u,u.return,Ee)}}else Qi(l,u,v,S);break;case 23:break;case 22:U=u.stateNode,u.memoizedState!==null?U._visibility&4?Qi(l,u,v,S):xs(l,u):U._visibility&4?Qi(l,u,v,S):(U._visibility|=4,cs(l,u,v,S,(u.subtreeFlags&10256)!==0)),w&2048&&Tf(u.alternate,u);break;case 24:Qi(l,u,v,S),w&2048&&Vu(u.alternate,u);break;default:Qi(l,u,v,S)}}function cs(l,u,v,S,w){for(w=w&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var U=l,W=u,ue=v,Ee=S,Je=W.flags;switch(W.tag){case 0:case 11:case 15:cs(U,W,ue,Ee,w),Gu(8,W);break;case 23:break;case 22:var mt=W.stateNode;W.memoizedState!==null?mt._visibility&4?cs(U,W,ue,Ee,w):xs(U,W):(mt._visibility|=4,cs(U,W,ue,Ee,w)),w&&Je&2048&&Tf(W.alternate,W);break;case 24:cs(U,W,ue,Ee,w),w&&Je&2048&&Vu(W.alternate,W);break;default:cs(U,W,ue,Ee,w)}u=u.sibling}}function xs(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var v=l,S=u,w=S.flags;switch(S.tag){case 22:xs(v,S),w&2048&&Tf(S.alternate,S);break;case 24:xs(v,S),w&2048&&Vu(S.alternate,S);break;default:xs(v,S)}u=u.sibling}}function Ta(l){if(l.subtreeFlags&ma)for(l=l.child;l!==null;)Cf(l),l=l.sibling}function Cf(l){switch(l.tag){case 26:Ta(l),l.flags&ma&&(l.memoizedState!==null?pv(bi,l.memoizedState,l.memoizedProps):Ls(l.type,l.memoizedProps));break;case 5:Ta(l),l.flags&ma&&Ls(l.type,l.memoizedProps);break;case 3:case 4:if(la){var u=bi;bi=Wf(l.stateNode.containerInfo),Ta(l),bi=u}else Ta(l);break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=ma,ma=16777216,Ta(l),ma=u):Ta(l));break;default:Ta(l)}}function Xu(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Io(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var v=0;v<u.length;v++){var S=u[v];ln=S,Vp(S,l)}Xu(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)wf(l),l=l.sibling}function wf(l){switch(l.tag){case 0:case 11:case 15:Io(l),l.flags&2048&&Oo(9,l,l.return);break;case 3:Io(l);break;case 12:Io(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&4&&(l.return===null||l.return.tag!==13)?(u._visibility&=-5,Jr(l)):Io(l);break;default:Io(l)}}function Jr(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var v=0;v<u.length;v++){var S=u[v];ln=S,Vp(S,l)}Xu(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Oo(8,u,u.return),Jr(u);break;case 22:v=u.stateNode,v._visibility&4&&(v._visibility&=-5,Jr(u));break;default:Jr(u)}l=l.sibling}}function Vp(l,u){for(;ln!==null;){var v=ln;switch(v.tag){case 0:case 11:case 15:Oo(8,v,u);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var S=v.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Hu(v.memoizedState.cache)}if(S=v.child,S!==null)S.return=v,ln=S;else e:for(v=l;ln!==null;){S=ln;var w=S.sibling,U=S.return;if(Gp(S),S===v){ln=null;break e}if(w!==null){w.return=U,ln=w;break e}ln=U}}}function Ac(l){var u=P0(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if(l=om(l),l===null)throw Error(s(362));return l.stateNode.current}function Po(l,u){var v=l.tag;switch(u.$$typeof){case Yc:if(l.type===u.value)return!0;break;case Ia:e:{for(u=u.value,l=[l,0],v=0;v<l.length;){var S=l[v++],w=S.tag,U=l[v++],W=u[U];if(w!==5&&w!==26&&w!==27||!Oc(S)){for(;W!=null&&Po(S,W);)U++,W=u[U];if(U===u.length){u=!0;break e}else for(S=S.child;S!==null;)l.push(S,U),S=S.sibling}}u=!1}return u;case gi:if((v===5||v===26||v===27)&&G0(l.stateNode,u.value))return!0;break;case Mr:if((v===5||v===6||v===26||v===27)&&(l=z0(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case nr:if((v===5||v===26||v===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Xp(l){switch(l.$$typeof){case Yc:return"<"+(c(l.value)||"Unknown")+">";case Ia:return":has("+(Xp(l)||"")+")";case gi:return'[role="'+l.value+'"]';case Mr:return'"'+l.value+'"';case nr:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function Ks(l,u){var v=[];l=[l,0];for(var S=0;S<l.length;){var w=l[S++],U=w.tag,W=l[S++],ue=u[W];if(U!==5&&U!==26&&U!==27||!Oc(w)){for(;ue!=null&&Po(w,ue);)W++,ue=u[W];if(W===u.length)v.push(w);else for(w=w.child;w!==null;)l.push(w,W),w=w.sibling}}return v}function Yu(l,u){if(!Yo)throw Error(s(363));l=Ac(l),l=Ks(l,u),u=[],l=Array.from(l);for(var v=0;v<l.length;){var S=l[v++],w=S.tag;if(w===5||w===26||w===27)Oc(S)||u.push(S.stateNode);else for(S=S.child;S!==null;)l.push(S),S=S.sibling}return u}function Ni(){if((Ln&2)!==0&&Cn!==0)return Cn&-Cn;if(en.T!==null){var l=ha;return l!==0?l:je()}return F0()}function Yp(){ya===0&&(ya=(Cn&536870912)===0||Un?k():536870912);var l=fa.current;return l!==null&&(l.flags|=32),ya}function $i(l,u,v){(l===Yn&&Qn===2||l.cancelPendingCommit!==null)&&(us(l,0),Zs(l,Cn,ya,!1)),Y(l,v),((Ln&2)===0||l!==Yn)&&(l===Yn&&((Ln&2)===0&&(co|=v),ri===4&&Zs(l,Cn,ya,!1)),lt(l))}function Fo(l,u,v){if((Ln&6)!==0)throw Error(s(327));var S=!v&&(u&60)===0&&(u&l.expiredLanes)===0||I(l,u),w=S?Wp(l,u):Bf(l,u,!0),U=S;do{if(w===0){ga&&!S&&Zs(l,u,0,!1);break}else if(w===6)Zs(l,u,0,!Fa);else{if(v=l.current.alternate,U&&!Sc(v)){w=Bf(l,u,!1),U=!1;continue}if(w===2){if(U=u,l.errorRecoveryDisabledLanes&U)var W=0;else W=l.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){u=W;e:{var ue=l;w=jl;var Ee=hs&&ue.current.memoizedState.isDehydrated;if(Ee&&(us(ue,W).flags|=256),W=Bf(ue,W,!1),W!==2){if(Wi&&!Ee){ue.errorRecoveryDisabledLanes|=U,co|=U,w=4;break e}U=Ci,Ci=w,U!==null&&qu(U)}w=W}if(U=!1,w!==2)continue}}if(w===1){us(l,0),Zs(l,u,0,!0);break}e:{switch(S=l,w){case 0:case 1:throw Error(s(345));case 4:if((u&4194176)===u){Zs(S,u,ya,!Fa);break e}break;case 2:Ci=null;break;case 3:case 5:break;default:throw Error(s(329))}if(S.finishedWork=v,S.finishedLanes=u,(u&62914560)===u&&(U=Fs+300-Da(),10<U)){if(Zs(S,u,ya,!Fa),L(S,0)!==0)break e;S.timeoutHandle=zi(Rf.bind(null,S,v,Ci,gh,ad,u,ya,co,Er,Fa,2,-0,0),U);break e}Rf(S,v,Ci,gh,ad,u,ya,co,Er,Fa,0,-0,0)}}break}while(!0);lt(l)}function qu(l){Ci===null?Ci=l:Ci.push.apply(Ci,l)}function Rf(l,u,v,S,w,U,W,ue,Ee,Je,mt,Ct,Rt){var cn=u.subtreeFlags;if((cn&8192||(cn&16785408)===16785408)&&(am(),Cf(u),u=Gi(),u!==null)){l.cancelPendingCommit=u(zo.bind(null,l,v,S,w,W,ue,Ee,1,Ct,Rt)),Zs(l,U,W,!Je);return}zo(l,v,S,w,W,ue,Ee,mt,Ct,Rt)}function Sc(l){for(var u=l;;){var v=u.tag;if((v===0||v===11||v===15)&&u.flags&16384&&(v=u.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var S=0;S<v.length;S++){var w=v[S],U=w.getSnapshot;w=w.value;try{if(!$s(U(),w))return!1}catch{return!1}}if(v=u.child,u.subtreeFlags&16384&&v!==null)v.return=u,u=v;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Zs(l,u,v,S){u&=~mh,u&=~co,l.suspendedLanes|=u,l.pingedLanes&=~u,S&&(l.warmLanes|=u),S=l.expirationTimes;for(var w=u;0<w;){var U=31-Is(w),W=1<<U;S[U]=-1,w&=~W}v!==0&&re(l,v,u)}function Wu(){return(Ln&6)===0?(Ft(0),!1):!0}function Mc(){if(qt!==null){if(Qn===0)var l=qt.return;else l=qt,pa=tr=null,z(l),Qo=null,$o=0,l=qt;for(;l!==null;)w0(l.alternate,l),l=l.return;qt=null}}function us(l,u){l.finishedWork=null,l.finishedLanes=0;var v=l.timeoutHandle;v!==Vo&&(l.timeoutHandle=Vo,Hf(v)),v=l.cancelPendingCommit,v!==null&&(l.cancelPendingCommit=null,v()),Mc(),Yn=l,qt=v=wa(l.current,null),Cn=u,Qn=0,_s=null,Fa=!1,ga=I(l,u),Wi=!1,Er=ya=mh=co=va=ri=0,Ci=jl=null,ad=!1,(u&8)!==0&&(u|=u&32);var S=l.entangledLanes;if(S!==0)for(l=l.entanglements,S&=u;0<S;){var w=31-Is(S),U=1<<w;u|=l[w],S&=~U}return As=u,Ze(),v}function aa(l,u){xn=null,en.H=Ei,u===jc?(u=Mt(),Qn=3):u===dh?(u=Mt(),Qn=4):Qn=u===id?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,_s=u,qt===null&&(ri=1,mc(l,ge(u,l.current)))}function Ho(){var l=fa.current;return l===null?!0:(Cn&4194176)===Cn?si===null:(Cn&62914560)===Cn||(Cn&536870912)!==0?l===si:!1}function fr(){var l=en.H;return en.H=Ei,l===null?Ei:l}function dr(){var l=en.A;return en.A=Xc,l}function Kr(){ri=4,Fa||(Cn&4194176)!==Cn&&fa.current!==null||(ga=!0),(va&134217727)===0&&(co&134217727)===0||Yn===null||Zs(Yn,Cn,ya,!1)}function Bf(l,u,v){var S=Ln;Ln|=2;var w=fr(),U=dr();(Yn!==l||Cn!==u)&&(gh=null,us(l,u)),u=!1;var W=ri;e:do try{if(Qn!==0&&qt!==null){var ue=qt,Ee=_s;switch(Qn){case 8:Mc(),W=6;break e;case 3:case 2:case 6:fa.current===null&&(u=!0);var Je=Qn;if(Qn=0,_s=null,Ca(l,ue,Ee,Je),v&&ga){W=0;break e}break;default:Je=Qn,Qn=0,_s=null,Ca(l,ue,Ee,Je)}}qp(),W=ri;break}catch(mt){aa(l,mt)}while(!0);return u&&l.shellSuspendCounter++,pa=tr=null,Ln=S,en.H=w,en.A=U,qt===null&&(Yn=null,Cn=0,Ze()),W}function qp(){for(;qt!==null;)xi(qt)}function Wp(l,u){var v=Ln;Ln|=2;var S=fr(),w=dr();Yn!==l||Cn!==u?(gh=null,qc=Da()+500,us(l,u)):ga=I(l,u);e:do try{if(Qn!==0&&qt!==null){u=qt;var U=_s;t:switch(Qn){case 1:Qn=0,_s=null,Ca(l,u,U,1);break;case 2:if(bt(U)){Qn=0,_s=null,Fn(u);break}u=function(){Qn===2&&Yn===l&&(Qn=7),lt(l)},U.then(u,u);break e;case 3:Qn=7;break e;case 4:Qn=5;break e;case 7:bt(U)?(Qn=0,_s=null,Fn(u)):(Qn=0,_s=null,Ca(l,u,U,7));break;case 5:var W=null;switch(qt.tag){case 26:W=qt.memoizedState;case 5:case 27:var ue=qt,Ee=ue.type,Je=ue.pendingProps;if(W?wl(W):zf(Ee,Je)){Qn=0,_s=null;var mt=ue.sibling;if(mt!==null)qt=mt;else{var Ct=ue.return;Ct!==null?(qt=Ct,ra(Ct)):qt=null}break t}}Qn=0,_s=null,Ca(l,u,U,5);break;case 6:Qn=0,_s=null,Ca(l,u,U,6);break;case 8:Mc(),ri=6;break e;default:throw Error(s(462))}}Us();break}catch(Rt){aa(l,Rt)}while(!0);return pa=tr=null,en.H=S,en.A=w,Ln=v,qt!==null?0:(Yn=null,Cn=0,Ze(),ri)}function Us(){for(;qt!==null&&!yv();)xi(qt)}function xi(l){var u=E0(l.alternate,l,As);l.memoizedProps=l.pendingProps,u===null?ra(l):qt=u}function Fn(l){var u=l,v=u.alternate;switch(u.tag){case 15:case 0:u=x0(v,u,u.pendingProps,u.type,void 0,Cn);break;case 11:u=x0(v,u,u.pendingProps,u.type.render,u.ref,Cn);break;case 5:z(u);default:w0(v,u),u=qt=Ku(u,As),u=E0(v,u,As)}l.memoizedProps=l.pendingProps,u===null?ra(l):qt=u}function Ca(l,u,v,S){pa=tr=null,z(u),Qo=null,$o=0;var w=u.return;try{if(Kb(l,w,u,v,Cn)){ri=1,mc(l,ge(v,l.current)),qt=null;return}}catch(U){if(w!==null)throw qt=w,U;ri=1,mc(l,ge(v,l.current)),qt=null;return}u.flags&32768?(Un||S===1?l=!0:ga||(Cn&536870912)!==0?l=!1:(Fa=l=!0,(S===2||S===3||S===6)&&(S=fa.current,S!==null&&S.tag===13&&(S.flags|=16384))),Nf(u,l)):ra(u)}function ra(l){var u=l;do{if((u.flags&32768)!==0){Nf(u,Fa);return}l=u.return;var v=C0(u.alternate,u,As);if(v!==null){qt=v;return}if(u=u.sibling,u!==null){qt=u;return}qt=u=l}while(u!==null);ri===0&&(ri=5)}function Nf(l,u){do{var v=Qb(l.alternate,l);if(v!==null){v.flags&=32767,qt=v;return}if(v=l.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!u&&(l=l.sibling,l!==null)){qt=l;return}qt=l=v}while(l!==null);ri=6,qt=null}function zo(l,u,v,S,w,U,W,ue,Ee,Je){var mt=en.T,Ct=no();try{bs(2),en.T=null,D0(l,u,v,S,Ct,w,U,W,ue,Ee,Je)}finally{en.T=mt,bs(Ct)}}function D0(l,u,v,S,w,U,W,ue){do qa();while(Tr!==null);if((Ln&6)!==0)throw Error(s(327));var Ee=l.finishedWork;if(S=l.finishedLanes,Ee===null)return null;if(l.finishedWork=null,l.finishedLanes=0,Ee===l.current)throw Error(s(177));l.callbackNode=null,l.callbackPriority=0,l.cancelPendingCommit=null;var Je=Ee.lanes|Ee.childLanes;if(Je|=$a,ie(l,S,Je,U,W,ue),l===Yn&&(qt=Yn=null,Cn=0),(Ee.subtreeFlags&10256)===0&&(Ee.flags&10256)===0||ir||(ir=!0,sl=Je,rd=v,Qr($f,function(){return qa(),null})),v=(Ee.flags&15990)!==0,(Ee.subtreeFlags&15990)!==0||v?(v=en.T,en.T=null,U=no(),bs(2),W=Ln,Ln|=4,ku(l,Ee),jp(Ee,l),I0(l.containerInfo),l.current=Ee,Mf(l,Ee.alternate,Ee),Zf(),Ln=W,bs(U),en.T=v):l.current=Ee,ir?(ir=!1,Tr=l,kl=S):Jp(l,Je),Je=l.pendingLanes,Je===0&&(il=null),H(Ee.stateNode),lt(l),u!==null)for(w=l.onRecoverableError,Ee=0;Ee<u.length;Ee++)Je=u[Ee],w(Je.value,{componentStack:Je.stack});return(kl&3)!==0&&qa(),Je=l.pendingLanes,(S&4194218)!==0&&(Je&42)!==0?l===od?Wc++:(Wc=0,od=l):Wc=0,Ft(0),null}function Jp(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Hu(u)))}function qa(){if(Tr!==null){var l=Tr,u=sl;sl=0;var v=pe(kl),S=32>v?32:v;v=en.T;var w=no();try{if(bs(S),en.T=null,Tr===null)var U=!1;else{S=rd,rd=null;var W=Tr,ue=kl;if(Tr=null,kl=0,(Ln&6)!==0)throw Error(s(331));var Ee=Ln;if(Ln|=4,wf(W.current),kp(W,W.current,ue,S),Ln=Ee,Ft(0,!1),Qs&&typeof Qs.onPostCommitFiberRoot=="function")try{Qs.onPostCommitFiberRoot(Oi,W)}catch{}U=!0}return U}finally{bs(w),en.T=v,Jp(l,u)}}return!1}function Ec(l,u,v){u=ge(v,u),u=vc(l.stateNode,u,2),l=ot(l,u,2),l!==null&&(Y(l,2),lt(l))}function Vn(l,u,v){if(l.tag===3)Ec(l,l,v);else for(;u!==null;){if(u.tag===3){Ec(u,l,v);break}else if(u.tag===1){var S=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(il===null||!il.has(S))){l=ge(v,l),v=wp(2),S=ot(u,v,2),S!==null&&(p0(v,S,u,l),Y(S,2),lt(S));break}}u=u.return}}function El(l,u,v){var S=l.pingCache;if(S===null){S=l.pingCache=new Pa;var w=new Set;S.set(u,w)}else w=S.get(u),w===void 0&&(w=new Set,S.set(u,w));w.has(v)||(Wi=!0,w.add(v),l=Kp.bind(null,l,u,v),u.then(l,l))}function Kp(l,u,v){var S=l.pingCache;S!==null&&S.delete(u),l.pingedLanes|=l.suspendedLanes&v,l.warmLanes&=~v,Yn===l&&(Cn&v)===v&&(ri===4||ri===3&&(Cn&62914560)===Cn&&300>Da()-Fs?(Ln&2)===0&&us(l,0):mh|=v,Er===Cn&&(Er=0)),lt(l)}function Go(l,u){u===0&&(u=O()),l=Le(l,u),l!==null&&(Y(l,u),lt(l))}function Zr(l){var u=l.memoizedState,v=0;u!==null&&(v=u.retryLane),Go(l,v)}function jo(l,u){var v=0;switch(l.tag){case 13:var S=l.stateNode,w=l.memoizedState;w!==null&&(v=w.retryLane);break;case 19:S=l.stateNode;break;case 22:S=l.stateNode._retryCache;break;default:throw Error(s(314))}S!==null&&S.delete(u),Go(l,v)}function Qr(l,u){return uh(l,u)}function Zp(l,u,v,S){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ju(l){return l=l.prototype,!(!l||!l.isReactComponent)}function wa(l,u){var v=l.alternate;return v===null?(v=t(l.tag,u,l.key,l.mode),v.elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=u,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=l.flags&31457280,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,u=l.dependencies,v.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v.refCleanup=l.refCleanup,v}function Ku(l,u){l.flags&=31457282;var v=l.alternate;return v===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=v.childLanes,l.lanes=v.lanes,l.child=v.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=v.memoizedProps,l.memoizedState=v.memoizedState,l.updateQueue=v.updateQueue,l.type=v.type,u=v.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function pr(l,u,v,S,w,U){var W=0;if(S=l,typeof l=="function")Ju(l)&&(W=1);else if(typeof l=="string")W=la&&ii?oh(l,v,Yi.current)?26:gr(l)?27:5:la?oh(l,v,Yi.current)?26:5:ii&&gr(l)?27:5;else e:switch(l){case ko:return Mi(v.children,w,U,u);case eh:W=8,w|=24;break;case Lf:return l=t(12,v,u,w|2),l.elementType=Lf,l.lanes=U,l;case If:return l=t(13,v,u,w),l.elementType=If,l.lanes=U,l;case Rc:return l=t(19,v,u,w),l.elementType=Rc,l.lanes=U,l;case em:return Zu(v,w,U,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case th:case Wa:W=10;break e;case $p:W=9;break e;case nh:W=11;break e;case Pf:W=14;break e;case Ba:W=16,S=null;break e}W=29,v=Error(s(130,l===null?"null":typeof l,"")),S=null}return u=t(W,v,u,w),u.elementType=l,u.type=S,u.lanes=U,u}function Mi(l,u,v,S){return l=t(7,l,S,u),l.lanes=v,l}function Zu(l,u,v,S){l=t(22,l,S,u),l.elementType=em,l.lanes=v;var w={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var U=w._current;if(U===null)throw Error(s(456));if((w._pendingVisibility&2)===0){var W=Le(U,2);W!==null&&(w._pendingVisibility|=2,$i(W,U,2))}},attach:function(){var U=w._current;if(U===null)throw Error(s(456));if((w._pendingVisibility&2)!==0){var W=Le(U,2);W!==null&&(w._pendingVisibility&=-3,$i(W,U,2))}}};return l.stateNode=w,l}function Df(l,u,v){return l=t(6,l,null,u),l.lanes=v,l}function Qp(l,u,v){return u=t(4,l.children!==null?l.children:[],l.key,u),u.lanes=v,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function $b(l,u,v,S,w,U,W,ue){this.tag=1,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Vo,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=P(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P(0),this.hiddenUpdates=P(null),this.identifierPrefix=S,this.onUncaughtError=w,this.onCaughtError=U,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function U0(l,u,v,S,w,U,W,ue,Ee,Je,mt,Ct){return l=new $b(l,u,v,W,ue,Ee,Je,Ct),u=1,U===!0&&(u|=24),U=t(3,null,null,u),l.current=U,U.stateNode=l,u=Uo(),u.refCount++,l.pooledCache=u,u.refCount++,U.memoizedState={element:S,isDehydrated:v,cache:u},Bt(U),l}function Hi(l){return l?(l=Jo,l):Jo}function Uf(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=_(u),l=l!==null?E(l):null,l===null?null:Dc(l.stateNode)}function Tc(l,u,v,S,w,U){w=Hi(w),S.context===null?S.context=w:S.pendingContext=w,S=tt(u),S.payload={element:v},U=U===void 0?null:U,U!==null&&(S.callback=U),v=ot(l,S,u),v!==null&&($i(v,l,u),Ut(v,l,u))}function Cc(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<u?v:u}}function Qu(l,u){Cc(l,u),(l=l.alternate)&&Cc(l,u)}var hn={},wc=gp(),oa=_H(),Of=Object.assign,e_=Symbol.for("react.element"),$u=Symbol.for("react.transitional.element"),Ra=Symbol.for("react.portal"),ko=Symbol.for("react.fragment"),eh=Symbol.for("react.strict_mode"),Lf=Symbol.for("react.profiler"),th=Symbol.for("react.provider"),$p=Symbol.for("react.consumer"),Wa=Symbol.for("react.context"),nh=Symbol.for("react.forward_ref"),If=Symbol.for("react.suspense"),Rc=Symbol.for("react.suspense_list"),Pf=Symbol.for("react.memo"),Ba=Symbol.for("react.lazy"),em=Symbol.for("react.offscreen"),O0=Symbol.for("react.memo_cache_sentinel"),$r=Symbol.iterator,tm=Symbol.for("react.client.reference"),en=wc.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mr,eo,Tl=!1,Bc=Array.isArray,nm=e.rendererVersion,ih=e.rendererPackageName,Nc=e.extraDevToolsConfig,Dc=e.getPublicInstance,L0=e.getRootHostContext,Uc=e.getChildHostContext,Ff=e.prepareForCommit,I0=e.resetAfterCommit,im=e.createInstance,sh=e.appendInitialChild,to=e.finalizeInitialChildren,fn=e.shouldSetTextContent,Jn=e.createTextInstance,zi=e.scheduleTimeout,Hf=e.cancelTimeout,Vo=e.noTimeout,Os=e.isPrimaryRenderer;e.warnsIfNotActing;var Xi=e.supportsMutation,Na=e.supportsPersistence,hs=e.supportsHydration,P0=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Di=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var bs=e.setCurrentUpdatePriority,no=e.getCurrentUpdatePriority,F0=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var H0=e.shouldAttemptEagerTransition,t_=e.detachDeletedInstance;e.requestPostPaintCallback;var sm=e.maySuspendCommit,zf=e.preloadInstance,am=e.startSuspendingCommit,Ls=e.suspendInstance,Gi=e.waitForCommitToBeReady,Xo=e.NotPendingTransition,Ja=e.HostTransitionContext,Gf=e.resetFormInstance;e.bindToConsole;var rm=e.supportsMicrotasks,io=e.scheduleMicrotask,Yo=e.supportsTestSelectors,om=e.findFiberRoot,lm=e.getBoundingRect,z0=e.getTextContent,Oc=e.isHiddenSubtree,G0=e.matchAccessibilityRole,j0=e.setFocusIfFocusable,k0=e.setupIntersectionObserver,V0=e.appendChild,cm=e.appendChildToContainer,X0=e.commitTextUpdate,n_=e.commitMount,Y0=e.commitUpdate,q0=e.insertBefore,W0=e.insertInContainerBefore,um=e.removeChild,J0=e.removeChildFromContainer,hm=e.resetTextContent,K0=e.hideInstance,Z0=e.hideTextInstance,Q0=e.unhideInstance,i_=e.unhideTextInstance,$0=e.clearContainer,Lc=e.cloneInstance,ah=e.createContainerChildSet,fm=e.appendChildToContainerChildSet,jf=e.finalizeContainerChildren,Ic=e.replaceContainerChildren,dm=e.cloneHiddenInstance,pm=e.cloneHiddenTextInstance,kf=e.isSuspenseInstancePending,Vf=e.isSuspenseInstanceFallback,ev=e.getSuspenseInstanceFallbackErrorDetails,tv=e.registerSuspenseInstanceRetry,mm=e.canHydrateFormStateMarker,nv=e.isFormStateMarkerMatching,gm=e.getNextHydratableSibling,Xf=e.getFirstHydratableChild,iv=e.getFirstHydratableChildWithinContainer,sv=e.getFirstHydratableChildWithinSuspenseInstance,s_=e.canHydrateInstance,vm=e.canHydrateTextInstance,av=e.canHydrateSuspenseInstance,rv=e.hydrateInstance,ym=e.hydrateTextInstance,ov=e.hydrateSuspenseInstance,lv=e.getNextHydratableInstanceAfterSuspenseInstance,a_=e.commitHydratedContainer,r_=e.commitHydratedSuspenseInstance,cv=e.clearSuspenseBoundary,rh=e.clearSuspenseBoundaryFromContainer,Yf=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var qf=e.validateHydratableInstance,uv=e.validateHydratableTextInstance,la=e.supportsResources,oh=e.isHostHoistableType,Wf=e.getHoistableRoot,xm=e.getResource,hv=e.acquireResource,Cl=e.releaseResource,lh=e.hydrateHoistable,ch=e.mountHoistable,Pc=e.unmountHoistable,Jf=e.createHoistableInstance,fv=e.prepareToCommitHoistables,dv=e.mayResourceSuspendCommit,wl=e.preloadResource,pv=e.suspendResource,ii=e.supportsSingletons,Ka=e.resolveSingletonInstance,qo=e.clearSingleton,mv=e.acquireSingletonInstance,Wo=e.releaseSingletonInstance,gr=e.isHostSingletonType,Ui=[],so=-1,Jo={},Is=Math.clz32?Math.clz32:N,gv=Math.log,vv=Math.LN2,vr=128,Rl=4194304,uh=oa.unstable_scheduleCallback,Kf=oa.unstable_cancelCallback,yv=oa.unstable_shouldYield,Zf=oa.unstable_requestPaint,Da=oa.unstable_now,Qf=oa.unstable_ImmediatePriority,xv=oa.unstable_UserBlockingPriority,$f=oa.unstable_NormalPriority,o_=oa.unstable_IdlePriority,bv=oa.log,es=oa.unstable_setDisableYieldValue,Oi=null,Qs=null,$s=typeof Object.is=="function"?Object.is:$,bm=new WeakMap,Bl=[],Nl=0,Dl=null,Fc=0,ca=[],ua=0,Ko=null,Za=1,Qa="",Yi=T(null),Hc=T(null),yr=T(null),Ul=T(null),fs=null,ds=null,Un=!1,Ua=null,ts=!1,hh=Error(s(519)),Oa=[],Ol=0,$a=0,fh=null,ao=null,Ll=!1,ui=!1,_m=!1,zc=0,Gc=null,Il=0,ha=0,Pl=null,ro=!1,Fl=!1,xr=Object.prototype.hasOwnProperty,jc=Error(s(460)),dh=Error(s(474)),ph={then:function(){}},Zo=null,Qo=null,$o=0,el=ni(!0),br=ni(!1),hi=T(null),kc=T(0),fa=T(null),si=null,qi=T(0),oo=0,xn=null,Yt=null,On=null,La=!1,Hl=!1,tl=!1,ed=0,zl=0,ns=null,er=0,td=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ei={readContext:os,use:te,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useLayoutEffect:Zn,useInsertionEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useSyncExternalStore:Zn,useId:Zn};Ei.useCacheRefresh=Zn,Ei.useMemoCache=Zn,Ei.useHostTransitionStatus=Zn,Ei.useFormState=Zn,Ei.useActionState=Zn,Ei.useOptimistic=Zn;var nl={readContext:os,use:te,useCallback:function(l,u){return ee().memoizedState=[l,u===void 0?null:u],l},useContext:os,useEffect:ff,useImperativeHandle:function(l,u,v){v=v!=null?v.concat([l]):null,Cu(4194308,4,df.bind(null,u,l),v)},useLayoutEffect:function(l,u){return Cu(4194308,4,l,u)},useInsertionEffect:function(l,u){Cu(4,2,l,u)},useMemo:function(l,u){var v=ee();u=u===void 0?null:u;var S=l();if(tl){Z(!0);try{l()}finally{Z(!1)}}return v.memoizedState=[S,u],S},useReducer:function(l,u,v){var S=ee();if(v!==void 0){var w=v(u);if(tl){Z(!0);try{v(u)}finally{Z(!1)}}}else w=u;return S.memoizedState=S.baseState=w,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:w},S.queue=l,l=l.dispatch=mf.bind(null,xn,l),[S.memoizedState,l]},useRef:function(l){var u=ee();return l={current:l},u.memoizedState=l},useState:function(l){l=Dt(l);var u=l.queue,v=Cp.bind(null,xn,u);return u.dispatch=v,[l.memoizedState,v]},useDebugValue:wo,useDeferredValue:function(l,u){var v=ee();return Bu(v,l,u)},useTransition:function(){var l=Dt(!1);return l=uc.bind(null,xn,l.queue,!0,!1),ee().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,v){var S=xn,w=ee();if(Un){if(v===void 0)throw Error(s(407));v=v()}else{if(v=u(),Yn===null)throw Error(s(349));(Cn&60)!==0||gt(S,u,v)}w.memoizedState=v;var U={value:v,getSnapshot:u};return w.queue=U,ff(Zt.bind(null,S,U,l),[l]),S.flags|=2048,Vi(9,Pt.bind(null,S,U,v,u),{destroy:void 0},null),v},useId:function(){var l=ee(),u=Yn.identifierPrefix;if(Un){var v=Qa,S=Za;v=(S&~(1<<32-Is(S)-1)).toString(32)+v,u=":"+u+"R"+v,v=ed++,0<v&&(u+="H"+v.toString(32)),u+=":"}else v=er++,u=":"+u+"r"+v.toString(32)+":";return l.memoizedState=u},useCacheRefresh:function(){return ee().memoizedState=Tp.bind(null,xn)}};nl.useMemoCache=Qe,nl.useHostTransitionStatus=Nu,nl.useFormState=Wn,nl.useActionState=Wn,nl.useOptimistic=function(l){var u=ee();u.memoizedState=u.baseState=l;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=v,u=fc.bind(null,xn,!0,v),v.dispatch=u,[l,u]};var Ps={readContext:os,use:te,useCallback:Al,useContext:os,useEffect:Sp,useImperativeHandle:pf,useInsertionEffect:f0,useLayoutEffect:Ru,useMemo:Mp,useReducer:Ve,useRef:h0,useState:function(){return Ve(Fe)},useDebugValue:wo,useDeferredValue:function(l,u){var v=se();return Ep(v,Yt.memoizedState,l,u)},useTransition:function(){var l=Ve(Fe)[0],u=se().memoizedState;return[typeof l=="boolean"?l:he(l),u]},useSyncExternalStore:At,useId:hc};Ps.useCacheRefresh=Gr,Ps.useMemoCache=Qe,Ps.useHostTransitionStatus=Nu,Ps.useFormState=mi,Ps.useActionState=mi,Ps.useOptimistic=function(l,u){var v=se();return Tt(v,Yt,l,u)};var da={readContext:os,use:te,useCallback:Al,useContext:os,useEffect:Sp,useImperativeHandle:pf,useInsertionEffect:f0,useLayoutEffect:Ru,useMemo:Mp,useReducer:ht,useRef:h0,useState:function(){return ht(Fe)},useDebugValue:wo,useDeferredValue:function(l,u){var v=se();return Yt===null?Bu(v,l,u):Ep(v,Yt.memoizedState,l,u)},useTransition:function(){var l=ht(Fe)[0],u=se().memoizedState;return[typeof l=="boolean"?l:he(l),u]},useSyncExternalStore:At,useId:hc};da.useCacheRefresh=Gr,da.useMemoCache=Qe,da.useHostTransitionStatus=Nu,da.useFormState=_l,da.useActionState=_l,da.useOptimistic=function(l,u){var v=se();return Yt!==null?Tt(v,Yt,l,u):(v.baseState=l,[l,v.queue.dispatch])};var _r={isMounted:function(l){return(l=l._reactInternals)?x(l)===l:!1},enqueueSetState:function(l,u,v){l=l._reactInternals;var S=Ni(),w=tt(S);w.payload=u,v!=null&&(w.callback=v),u=ot(l,w,S),u!==null&&($i(u,l,S),Ut(u,l,S))},enqueueReplaceState:function(l,u,v){l=l._reactInternals;var S=Ni(),w=tt(S);w.tag=1,w.payload=u,v!=null&&(w.callback=v),u=ot(l,w,S),u!==null&&($i(u,l,S),Ut(u,l,S))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var v=Ni(),S=tt(v);S.tag=2,u!=null&&(S.callback=u),u=ot(l,S,v),u!==null&&($i(u,l,v),Ut(u,l,v))}},nd=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},id=Error(s(461)),ai=!1,sd={dehydrated:null,treeContext:null,retryLane:0},lo=T(null),tr=null,pa=null,Vc=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(v,S){l.push(S)}};this.abort=function(){u.aborted=!0,l.forEach(function(v){return v()})}},_v=oa.unstable_scheduleCallback,Av=oa.unstable_NormalPriority,fi={$$typeof:Wa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Am=en.S;en.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Pe(l,u),Am!==null&&Am(l,u)};var Ar=T(null),Sr=!1,Ti=!1,Sm=!1,Xn=typeof WeakSet=="function"?WeakSet:Set,ln=null,Sn=!1,Vt=null,mn=!1,bi=null,ma=8192,Xc={getCacheForType:function(l){var u=os(fi),v=u.data.get(l);return v===void 0&&(v=l(),u.data.set(l,v)),v}},Yc=0,Ia=1,gi=2,nr=3,Mr=4;if(typeof Symbol=="function"&&Symbol.for){var Gl=Symbol.for;Yc=Gl("selector.component"),Ia=Gl("selector.has_pseudo_class"),gi=Gl("selector.role"),nr=Gl("selector.test_id"),Mr=Gl("selector.text")}var Pa=typeof WeakMap=="function"?WeakMap:Map,Ln=0,Yn=null,qt=null,Cn=0,Qn=0,_s=null,Fa=!1,ga=!1,Wi=!1,As=0,ri=0,va=0,co=0,mh=0,ya=0,Er=0,jl=null,Ci=null,ad=!1,Fs=0,qc=1/0,gh=null,il=null,ir=!1,Tr=null,kl=0,sl=0,rd=null,Wc=0,od=null;return hn.attemptContinuousHydration=function(l){if(l.tag===13){var u=Le(l,67108864);u!==null&&$i(u,l,67108864),Qu(l,67108864)}},hn.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=Ni(),v=Le(l,u);v!==null&&$i(v,l,u),Qu(l,u)}},hn.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var u=D(l.pendingLanes);if(u!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;u;){var v=1<<31-Is(u);l.entanglements[1]|=v,u&=~v}lt(l),(Ln&6)===0&&(qc=Da()+500,Ft(0))}}break;case 13:u=Le(l,2),u!==null&&$i(u,l,2),Wu(),Qu(l,2)}},hn.batchedUpdates=function(l,u){return l(u)},hn.createComponentSelector=function(l){return{$$typeof:Yc,value:l}},hn.createContainer=function(l,u,v,S,w,U,W,ue,Ee,Je){return U0(l,u,!1,null,v,S,U,W,ue,Ee,Je,null)},hn.createHasPseudoClassSelector=function(l){return{$$typeof:Ia,value:l}},hn.createHydrationContainer=function(l,u,v,S,w,U,W,ue,Ee,Je,mt,Ct,Rt){return l=U0(v,S,!0,l,w,U,ue,Ee,Je,mt,Ct,Rt),l.context=Hi(null),v=l.current,S=Ni(),w=tt(S),w.callback=u??null,ot(v,w,S),l.current.lanes=S,Y(l,S),lt(l),l},hn.createPortal=function(l,u,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ra,key:S==null?null:""+S,children:l,containerInfo:u,implementation:v}},hn.createRoleSelector=function(l){return{$$typeof:gi,value:l}},hn.createTestNameSelector=function(l){return{$$typeof:nr,value:l}},hn.createTextSelector=function(l){return{$$typeof:Mr,value:l}},hn.defaultOnCaughtError=function(l){console.error(l)},hn.defaultOnRecoverableError=function(l){nd(l)},hn.defaultOnUncaughtError=function(l){nd(l)},hn.deferredUpdates=function(l){var u=en.T,v=no();try{return bs(32),en.T=null,l()}finally{bs(v),en.T=u}},hn.discreteUpdates=function(l,u,v,S,w){var U=en.T,W=no();try{return bs(2),en.T=null,l(u,v,S,w)}finally{bs(W),en.T=U,Ln===0&&(qc=Da()+500)}},hn.findAllNodes=Yu,hn.findBoundingRects=function(l,u){if(!Yo)throw Error(s(363));u=Yu(l,u),l=[];for(var v=0;v<u.length;v++)l.push(lm(u[v]));for(u=l.length-1;0<u;u--){v=l[u];for(var S=v.x,w=S+v.width,U=v.y,W=U+v.height,ue=u-1;0<=ue;ue--)if(u!==ue){var Ee=l[ue],Je=Ee.x,mt=Je+Ee.width,Ct=Ee.y,Rt=Ct+Ee.height;if(S>=Je&&U>=Ct&&w<=mt&&W<=Rt){l.splice(u,1);break}else if(S!==Je||v.width!==Ee.width||Rt<U||Ct>W){if(!(U!==Ct||v.height!==Ee.height||mt<S||Je>w)){Je>S&&(Ee.width+=Je-S,Ee.x=S),mt<w&&(Ee.width=w-Je),l.splice(u,1);break}}else{Ct>U&&(Ee.height+=Ct-U,Ee.y=U),Rt<W&&(Ee.height=W-Ct),l.splice(u,1);break}}}return l},hn.findHostInstance=Uf,hn.findHostInstanceWithNoPortals=function(l){return l=_(l),l=l!==null?R(l):null,l===null?null:Dc(l.stateNode)},hn.findHostInstanceWithWarning=function(l){return Uf(l)},hn.flushPassiveEffects=qa,hn.flushSyncFromReconciler=function(l){var u=Ln;Ln|=1;var v=en.T,S=no();try{if(bs(2),en.T=null,l)return l()}finally{bs(S),en.T=v,Ln=u,(Ln&6)===0&&Ft(0)}},hn.flushSyncWork=Wu,hn.focusWithin=function(l,u){if(!Yo)throw Error(s(363));for(l=Ac(l),u=Ks(l,u),u=Array.from(u),l=0;l<u.length;){var v=u[l++],S=v.tag;if(!Oc(v)){if((S===5||S===26||S===27)&&j0(v.stateNode))return!0;for(v=v.child;v!==null;)u.push(v),v=v.sibling}}return!1},hn.getFindAllNodesFailureDescription=function(l,u){if(!Yo)throw Error(s(363));var v=0,S=[];l=[Ac(l),0];for(var w=0;w<l.length;){var U=l[w++],W=U.tag,ue=l[w++],Ee=u[ue];if((W!==5&&W!==26&&W!==27||!Oc(U))&&(Po(U,Ee)&&(S.push(Xp(Ee)),ue++,ue>v&&(v=ue)),ue<u.length))for(U=U.child;U!==null;)l.push(U,ue),U=U.sibling}if(v<u.length){for(l=[];v<u.length;v++)l.push(Xp(u[v]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},hn.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return Dc(l.child.stateNode);default:return l.child.stateNode}},hn.injectIntoDevTools=function(){var l={bundleType:0,version:nm,rendererPackageName:ih,currentDispatcherRef:en,findFiberByHostInstance:P0,reconcilerVersion:"19.0.0"};if(Nc!==null&&(l.rendererConfig=Nc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{Oi=u.inject(l),Qs=u}catch{}l=!!u.checkDCE}}return l},hn.isAlreadyRendering=function(){return!1},hn.observeVisibleRects=function(l,u,v,S){if(!Yo)throw Error(s(363));l=Yu(l,u);var w=k0(l,v,S).disconnect;return{disconnect:function(){w()}}},hn.shouldError=function(){return null},hn.shouldSuspend=function(){return!1},hn.startHostTransition=function(l,u,v,S){if(l.tag!==5)throw Error(s(476));var w=hr(l).queue;uc(l,w,u,Xo,v===null?n:function(){var U=hr(l).next.queue;return Ro(l,U,{},Ni()),v(S)})},hn.updateContainer=function(l,u,v,S){var w=u.current,U=Ni();return Tc(w,U,l,u,v,S),U},hn.updateContainerSync=function(l,u,v,S){return u.tag===0&&qa(),Tc(u.current,2,l,u,v,S),2},hn},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(FA)),FA.exports}var AC;function SH(){return AC||(AC=1,PA.exports=AH()),PA.exports}var MH=SH();const EH=Q1(MH);var GA={exports:{}},jA={};var SC;function TH(){return SC||(SC=1,(function(i){function e(H,Z){var $=H.length;H.push(Z);e:for(;0<$;){var ge=$-1>>>1,X=H[ge];if(0<s(X,Z))H[ge]=Z,H[$]=X,$=ge;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var Z=H[0],$=H.pop();if($!==Z){H[0]=$;e:for(var ge=0,X=H.length,ce=X>>>1;ge<ce;){var xe=2*(ge+1)-1,Te=H[xe],He=xe+1,at=H[He];if(0>s(Te,$))He<X&&0>s(at,Te)?(H[ge]=at,H[He]=$,ge=He):(H[ge]=Te,H[xe]=$,ge=xe);else if(He<X&&0>s(at,$))H[ge]=at,H[He]=$,ge=He;else break e}}return Z}function s(H,Z){var $=H.sortIndex-Z.sortIndex;return $!==0?$:H.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var c=Date,h=c.now();i.unstable_now=function(){return c.now()-h}}var d=[],p=[],y=1,x=null,b=3,_=!1,E=!1,R=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function N(H){for(var Z=t(p);Z!==null;){if(Z.callback===null)n(p);else if(Z.startTime<=H)n(p),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(p)}}function D(H){if(R=!1,N(H),!E)if(t(d)!==null)E=!0,de();else{var Z=t(p);Z!==null&&pe(D,Z.startTime-H)}}var L=!1,I=-1,j=5,k=-1;function O(){return!(i.unstable_now()-k<j)}function P(){if(L){var H=i.unstable_now();k=H;var Z=!0;try{e:{E=!1,R&&(R=!1,M(I),I=-1),_=!0;var $=b;try{t:{for(N(H),x=t(d);x!==null&&!(x.expirationTime>H&&O());){var ge=x.callback;if(typeof ge=="function"){x.callback=null,b=x.priorityLevel;var X=ge(x.expirationTime<=H);if(H=i.unstable_now(),typeof X=="function"){x.callback=X,N(H),Z=!0;break t}x===t(d)&&n(d),N(H)}else n(d);x=t(d)}if(x!==null)Z=!0;else{var ce=t(p);ce!==null&&pe(D,ce.startTime-H),Z=!1}}break e}finally{x=null,b=$,_=!1}Z=void 0}}finally{Z?Y():L=!1}}}var Y;if(typeof B=="function")Y=function(){B(P)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,re=ie.port2;ie.port1.onmessage=P,Y=function(){re.postMessage(null)}}else Y=function(){T(P,0)};function de(){L||(L=!0,Y())}function pe(H,Z){I=T(function(){H(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){E||_||(E=!0,de())},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(H){switch(b){case 1:case 2:case 3:var Z=3;break;default:Z=b}var $=b;b=Z;try{return H()}finally{b=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var $=b;b=H;try{return Z()}finally{b=$}},i.unstable_scheduleCallback=function(H,Z,$){var ge=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ge+$:ge):$=ge,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=$+X,H={id:y++,callback:Z,priorityLevel:H,startTime:$,expirationTime:X,sortIndex:-1},$>ge?(H.sortIndex=$,e(p,H),t(d)===null&&H===t(p)&&(R?(M(I),I=-1):R=!0,pe(D,$-ge))):(H.sortIndex=X,e(d,H),E||_||(E=!0,de())),H},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(H){var Z=b;return function(){var $=b;b=Z;try{return H.apply(this,arguments)}finally{b=$}}}})(jA)),jA}var MC;function CH(){return MC||(MC=1,GA.exports=TH()),GA.exports}var EC=CH();function KS(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const s=KS(n,e,t);if(s)return s;n=e?null:n.sibling}}function IR(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const ZS=IR(Ae.createContext(null));class PR extends Ae.Component{render(){return Ae.createElement(ZS.Provider,{value:this._reactInternals},this.props.children)}}function FR(){const i=Ae.useContext(ZS);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Ae.useId();return Ae.useMemo(()=>{for(const t of[i,i?.alternate]){if(!t)continue;const n=KS(t,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(n)return n}},[i,e])}const wH=Symbol.for("react.context"),RH=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===wH;function BH(){const i=FR(),[e]=Ae.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;RH(n)&&n!==ZS&&!e.has(n)&&e.set(n,Ae.use(IR(n))),t=t.return}return e}function NH(){const i=BH();return Ae.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>Ae.createElement(e,null,Ae.createElement(t.Provider,{...n,value:i.get(t)})),e=>Ae.createElement(PR,{...e})),[i])}function HR(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const zR=i=>i&&i.isOrthographicCamera,DH=i=>i&&i.hasOwnProperty("current"),UH=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),s0=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?Ae.useLayoutEffect:Ae.useEffect;function QS(i){const e=Ae.useRef(i);return s0(()=>void(e.current=i),[i]),e}function OH(){const i=FR(),e=NH();return Ae.useMemo(()=>({children:t})=>{const s=!!KS(i,!0,r=>r.type===Ae.StrictMode)?Ae.StrictMode:Ae.Fragment;return g.jsx(s,{children:g.jsx(e,{children:t})})},[i,e])}function LH({set:i}){return s0(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const IH=(i=>(i=class extends Ae.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function GR(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function Ld(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const wi={obj:i=>i===Object(i)&&!wi.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(wi.str(i)||wi.num(i)||wi.boo(i))return i===e;const r=wi.obj(i);if(r&&n==="reference")return i===e;const c=wi.arr(i);if(c&&t==="reference")return i===e;if((c||r)&&i===e)return!0;let h;for(h in i)if(!(h in e))return!1;if(r&&t==="shallow"&&n==="shallow"){for(h in s?e:i)if(!wi.equ(i[h],e[h],{strict:s,objects:"reference"}))return!1}else for(h in s?e:i)if(i[h]!==e[h])return!1;if(wi.und(h)){if(c&&i.length===0&&e.length===0||r&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function PH(i){const e={nodes:{},materials:{},meshes:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function FH(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const jR=["children","key","ref"];function HH(i){const e={};for(const t in i)jR.includes(t)||(e[t]=i[t]);return e}function kx(i,e,t,n){const s=i;let r=s?.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:HH(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function Ug(i,e){if(!e.includes("-"))return{root:i,key:e,target:i[e]};if(e in i)return{root:i,key:e,target:i[e]};let t=i;const n=e.split("-");for(const s of n){if(typeof t!="object"||t===null){if(t!==void 0){const r=n.slice(n.indexOf(s)).join("-");return{root:t,key:r,target:void 0}}return{root:i,key:e,target:void 0}}e=s,i=t,t=t[e]}return{root:i,key:e,target:t}}const TC=/-\d+$/;function Vx(i,e){if(wi.str(e.props.attach)){if(TC.test(e.props.attach)){const s=e.props.attach.replace(TC,""),{root:r,key:c}=Ug(i.object,s);Array.isArray(r[c])||(r[c]=[])}const{root:t,key:n}=Ug(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else wi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function Xx(i,e){if(wi.str(e.props.attach)){const{root:t,key:n}=Ug(i.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[n]:t[n]=s}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const D1=[...jR,"args","dispose","attach","object","onUpdate","dispose"],CC=new Map;function zH(i){let e=CC.get(i.constructor);try{e||(e=new i.constructor,CC.set(i.constructor,e))}catch{}return e}function GH(i,e){const t={};for(const n in e)if(!D1.includes(n)&&!wi.equ(e[n],i.props[n])){t[n]=e[n];for(const s in e)s.startsWith(`${n}-`)&&(t[s]=e[s])}for(const n in i.props){if(D1.includes(n)||e.hasOwnProperty(n))continue;const{root:s,key:r}=Ug(i.object,n);if(s.constructor&&s.constructor.length===0){const c=zH(s);wi.und(c)||(t[r]=c[r])}else t[r]=0}return t}const jH=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],kH=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function xo(i,e){var t;const n=i.__r3f,s=n&&HR(n).getState(),r=n?.eventCount;for(const h in e){let d=e[h];if(D1.includes(h))continue;if(n&&kH.test(h)){typeof d=="function"?n.handlers[h]=d:delete n.handlers[h],n.eventCount=Object.keys(n.handlers).length;continue}if(d===void 0)continue;let{root:p,key:y,target:x}=Ug(i,h);if(x===void 0&&(typeof p!="object"||p===null))throw Error(`R3F: Cannot set "${h}". Ensure it is an object before setting "${y}".`);if(x instanceof up&&d instanceof up)x.mask=d.mask;else if(x instanceof Et&&UH(d))x.set(d);else if(x!==null&&typeof x=="object"&&typeof x.set=="function"&&typeof x.copy=="function"&&d!=null&&d.constructor&&x.constructor===d.constructor)x.copy(d);else if(x!==null&&typeof x=="object"&&typeof x.set=="function"&&Array.isArray(d))typeof x.fromArray=="function"?x.fromArray(d):x.set(...d);else if(x!==null&&typeof x=="object"&&typeof x.set=="function"&&typeof d=="number")typeof x.setScalar=="function"?x.setScalar(d):x.set(d);else{var c;p[y]=d,s&&!s.linear&&jH.includes(y)&&(c=p[y])!=null&&c.isTexture&&p[y].format===Zi&&p[y].type===Ea&&(p[y].colorSpace=Gs)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(t=n.object)!=null&&t.isObject3D&&r!==n.eventCount){const h=n.object,d=s.internal.interaction.indexOf(h);d>-1&&s.internal.interaction.splice(d,1),n.eventCount&&h.raycast!==null&&s.internal.interaction.push(h)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Ap(n),i}function Ap(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function kR(i,e){i.manual||(zR(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const Aa=i=>i?.isObject3D;function Dy(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function VR(i,e,t,n){const s=t.get(e);s&&(t.delete(e),t.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function VH(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,s)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((n,s)=>{VR(t.capturedMap,e,n,s)})}function XH(i){function e(d){const{internal:p}=i.getState(),y=d.offsetX-p.initialClick[0],x=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(y*y+x*x))}function t(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(y=>{var x;return(x=p.__r3f)==null?void 0:x.handlers["onPointer"+y]}))}function n(d,p){const y=i.getState(),x=new Set,b=[],_=p?p(y.internal.interaction):y.internal.interaction;for(let M=0;M<_.length;M++){const B=Ld(_[M]);B&&(B.raycaster.camera=void 0)}y.previousRoot||y.events.compute==null||y.events.compute(d,y);function E(M){const B=Ld(M);if(!B||!B.events.enabled||B.raycaster.camera===null)return[];if(B.raycaster.camera===void 0){var N;B.events.compute==null||B.events.compute(d,B,(N=B.previousRoot)==null?void 0:N.getState()),B.raycaster.camera===void 0&&(B.raycaster.camera=null)}return B.raycaster.camera?B.raycaster.intersectObject(M,!0):[]}let R=_.flatMap(E).sort((M,B)=>{const N=Ld(M.object),D=Ld(B.object);return!N||!D?M.distance-B.distance:D.events.priority-N.events.priority||M.distance-B.distance}).filter(M=>{const B=Dy(M);return x.has(B)?!1:(x.add(B),!0)});y.events.filter&&(R=y.events.filter(R,y));for(const M of R){let B=M.object;for(;B;){var T;(T=B.__r3f)!=null&&T.eventCount&&b.push({...M,eventObject:B}),B=B.parent}}if("pointerId"in d&&y.internal.capturedMap.has(d.pointerId))for(let M of y.internal.capturedMap.get(d.pointerId).values())x.has(Dy(M.intersection))||b.push(M.intersection);return b}function s(d,p,y,x){if(d.length){const b={stopped:!1};for(const _ of d){let E=Ld(_.object);if(E||_.object.traverseAncestors(R=>{const T=Ld(R);if(T)return E=T,!1}),E){const{raycaster:R,pointer:T,camera:M,internal:B}=E,N=new K(T.x,T.y,0).unproject(M),D=O=>{var P,Y;return(P=(Y=B.capturedMap.get(O))==null?void 0:Y.has(_.eventObject))!=null?P:!1},L=O=>{const P={intersection:_,target:p.target};B.capturedMap.has(O)?B.capturedMap.get(O).set(_.eventObject,P):B.capturedMap.set(O,new Map([[_.eventObject,P]])),p.target.setPointerCapture(O)},I=O=>{const P=B.capturedMap.get(O);P&&VR(B.capturedMap,_.eventObject,P,O)};let j={};for(let O in p){let P=p[O];typeof P!="function"&&(j[O]=P)}let k={..._,...j,pointer:T,intersections:d,stopped:b.stopped,delta:y,unprojectedPoint:N,ray:R.ray,camera:M,stopPropagation(){const O="pointerId"in p&&B.capturedMap.get(p.pointerId);if((!O||O.has(_.eventObject))&&(k.stopped=b.stopped=!0,B.hovered.size&&Array.from(B.hovered.values()).find(P=>P.eventObject===_.eventObject))){const P=d.slice(0,d.indexOf(_));r([...P,_])}},target:{hasPointerCapture:D,setPointerCapture:L,releasePointerCapture:I},currentTarget:{hasPointerCapture:D,setPointerCapture:L,releasePointerCapture:I},nativeEvent:p};if(x(k),b.stopped===!0)break}}}return d}function r(d){const{internal:p}=i.getState();for(const y of p.hovered.values())if(!d.length||!d.find(x=>x.object===y.object&&x.index===y.index&&x.instanceId===y.instanceId)){const b=y.eventObject.__r3f;if(p.hovered.delete(Dy(y)),b!=null&&b.eventCount){const _=b.handlers,E={...y,intersections:d};_.onPointerOut==null||_.onPointerOut(E),_.onPointerLeave==null||_.onPointerLeave(E)}}}function c(d,p){for(let y=0;y<p.length;y++){const x=p[y].__r3f;x==null||x.handlers.onPointerMissed==null||x.handlers.onPointerMissed(d)}}function h(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return p=>{const{internal:y}=i.getState();"pointerId"in p&&y.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{y.capturedMap.has(p.pointerId)&&(y.capturedMap.delete(p.pointerId),r([]))})}}return function(y){const{onPointerMissed:x,internal:b}=i.getState();b.lastEvent.current=y;const _=d==="onPointerMove",E=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",T=n(y,_?t:void 0),M=E?e(y):0;d==="onPointerDown"&&(b.initialClick=[y.offsetX,y.offsetY],b.initialHits=T.map(N=>N.eventObject)),E&&!T.length&&M<=2&&(c(y,b.interaction),x&&x(y)),_&&r(T);function B(N){const D=N.eventObject,L=D.__r3f;if(!(L!=null&&L.eventCount))return;const I=L.handlers;if(_){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const j=Dy(N),k=b.hovered.get(j);k?k.stopped&&N.stopPropagation():(b.hovered.set(j,N),I.onPointerOver==null||I.onPointerOver(N),I.onPointerEnter==null||I.onPointerEnter(N))}I.onPointerMove==null||I.onPointerMove(N)}else{const j=I[d];j?(!E||b.initialHits.includes(D))&&(c(y,b.interaction.filter(k=>!b.initialHits.includes(k))),j(N)):E&&b.initialHits.includes(D)&&c(y,b.interaction.filter(k=>!b.initialHits.includes(k)))}}s(T,y,M,B)}}return{handlePointer:h}}const wC=i=>!!(i!=null&&i.render),$S=Ae.createContext(null),YH=(i,e)=>{const t=UR((h,d)=>{const p=new K,y=new K,x=new K;function b(M=d().camera,B=y,N=d().size){const{width:D,height:L,top:I,left:j}=N,k=D/L;B.isVector3?x.copy(B):x.set(...B);const O=M.getWorldPosition(p).distanceTo(x);if(zR(M))return{width:D/M.zoom,height:L/M.zoom,top:I,left:j,factor:1,distance:O,aspect:k};{const P=M.fov*Math.PI/180,Y=2*Math.tan(P/2)*O,ie=Y*(D/L);return{width:ie,height:Y,top:I,left:j,factor:D/ie,distance:O,aspect:k}}}let _;const E=M=>h(B=>({performance:{...B.performance,current:M}})),R=new Ye;return{set:h,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>i(d(),M),advance:(M,B)=>e(M,B,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new jS,pointer:R,mouse:R,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();_&&clearTimeout(_),M.performance.current!==M.performance.min&&E(M.performance.min),_=setTimeout(()=>E(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:b},setEvents:M=>h(B=>({...B,events:{...B.events,...M}})),setSize:(M,B,N=0,D=0)=>{const L=d().camera,I={width:M,height:B,top:N,left:D};h(j=>({size:I,viewport:{...j.viewport,...b(L,y,I)}}))},setDpr:M=>h(B=>{const N=GR(M);return{viewport:{...B.viewport,dpr:N,initialDpr:B.viewport.initialDpr||N}}}),setFrameloop:(M="always")=>{const B=d().clock;B.stop(),B.elapsedTime=0,M!=="never"&&(B.start(),B.elapsedTime=0),h(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:Ae.createRef(),active:!1,frames:0,priority:0,subscribe:(M,B,N)=>{const D=d().internal;return D.priority=D.priority+(B>0?1:0),D.subscribers.push({ref:M,priority:B,store:N}),D.subscribers=D.subscribers.sort((L,I)=>L.priority-I.priority),()=>{const L=d().internal;L!=null&&L.subscribers&&(L.priority=L.priority-(B>0?1:0),L.subscribers=L.subscribers.filter(I=>I.ref!==M))}}}}}),n=t.getState();let s=n.size,r=n.viewport.dpr,c=n.camera;return t.subscribe(()=>{const{camera:h,size:d,viewport:p,gl:y,set:x}=t.getState();if(d.width!==s.width||d.height!==s.height||p.dpr!==r){s=d,r=p.dpr,kR(h,d),p.dpr>0&&y.setPixelRatio(p.dpr);const b=typeof HTMLCanvasElement<"u"&&y.domElement instanceof HTMLCanvasElement;y.setSize(d.width,d.height,b)}h!==c&&(c=h,x(b=>({viewport:{...b.viewport,...b.viewport.getCurrentViewport(h)}})))}),t.subscribe(h=>i(h)),t};function eM(){const i=Ae.useContext($S);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function zs(i=t=>t,e){return eM()(i,e)}function zb(i,e=0){const t=eM(),n=t.getState().internal.subscribe,s=QS(i);return s0(()=>n(s,e,t),[e,n,t]),null}const RC=new WeakMap,qH=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function XR(i,e){return function(t,...n){let s;return qH(t)?(s=RC.get(t),s||(s=new t,RC.set(t,s))):s=t,i&&i(s),Promise.all(n.map(r=>new Promise((c,h)=>s.load(r,d=>{Aa(d?.scene)&&Object.assign(d,PH(d.scene)),c(d)},e,d=>h(new Error(`Could not load ${r}: ${d?.message}`))))))}}function lc(i,e,t,n){const s=Array.isArray(e)?e:[e],r=vH(XR(t,n),[i,...s],{equal:wi.equ});return Array.isArray(e)?r:r[0]}lc.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return yH(XR(t),[i,...n])};lc.clear=function(i,e){const t=Array.isArray(e)?e:[e];return xH([i,...t])};function WH(i){const e=EH(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ae.version}),e}const YR=0,pp={},JH=/^three(?=[A-Z])/,Gb=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let KH=0;const ZH=i=>typeof i=="function";function qR(i){if(ZH(i)){const e=`${KH++}`;return pp[e]=i,e}else Object.assign(pp,i)}function WR(i,e){const t=Gb(i),n=pp[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function QH(i,e,t){var n;return i=Gb(i)in pp?i:i.replace(JH,""),WR(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,kx(e.object,t,i,e)}function $H(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Xx(i.parent,i):Aa(i.object)&&(i.object.visible=!1),i.isHidden=!0,Ap(i)}}function JR(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Vx(i.parent,i):Aa(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Ap(i)}}function tM(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var s,r;const c=pp[Gb(e.type)];e.object=(s=e.props.object)!=null?s:new c(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if(xo(e.object,e.props),e.props.attach)Vx(i,e);else if(Aa(e.object)&&Aa(i.object)){const c=i.object.children.indexOf(t?.object);if(t&&c!==-1){const h=i.object.children.indexOf(e.object);if(h!==-1){i.object.children.splice(h,1);const d=h<c?c-1:c;i.object.children.splice(d,0,e.object)}else e.object.parent=i.object,i.object.children.splice(c,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const c of e.children)tM(e,c);Ap(e)}}function kA(i,e){e&&(e.parent=i,i.children.push(e),tM(i,e))}function BC(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),tM(i,e,t)}function KR(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():EC.unstable_scheduleCallback(EC.unstable_IdlePriority,e)}}function U1(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?Xx(i,e):Aa(e.object)&&Aa(i.object)&&(i.object.remove(e.object),VH(HR(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const c=e.children[r];U1(e,c,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&KR(e.object),t===void 0&&Ap(e)}function ez(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const Jy=[];function tz(){for(const[t]of Jy){const n=t.parent;if(n){t.props.attach?Xx(n,t):Aa(t.object)&&Aa(n.object)&&n.object.remove(t.object);for(const s of t.children)s.props.attach?Xx(t,s):Aa(s.object)&&Aa(t.object)&&t.object.remove(s.object)}t.isHidden&&JR(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&KR(t.object)}for(const[t,n,s]of Jy){t.props=n;const r=t.parent;if(r){var i,e;const c=pp[Gb(t.type)];t.object=(i=t.props.object)!=null?i:new c(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,ez(s,t.object),xo(t.object,t.props),t.props.attach?Vx(r,t):Aa(t.object)&&Aa(r.object)&&r.object.add(t.object);for(const h of t.children)h.props.attach?Vx(t,h):Aa(h.object)&&Aa(t.object)&&t.object.add(h.object);Ap(t)}}Jy.length=0}const VA=()=>{},NC={};let Uy=YR;const nz=0,iz=4,Yx=WH({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:QH,removeChild:U1,appendChild:kA,appendInitialChild:kA,insertBefore:BC,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||kA(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||U1(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||BC(n,e,t)},getRootHostContext:()=>NC,getChildHostContext:()=>NC,commitUpdate(i,e,t,n,s){var r,c,h;WR(e,n);let d=!1;if((i.type==="primitive"&&t.object!==n.object||((r=n.args)==null?void 0:r.length)!==((c=t.args)==null?void 0:c.length)||(h=n.args)!=null&&h.some((y,x)=>{var b;return y!==((b=t.args)==null?void 0:b[x])}))&&(d=!0),d)Jy.push([i,{...n},s]);else{const y=GH(i,n);Object.keys(y).length&&(Object.assign(i.props,y),xo(i.object,y))}(s.sibling===null||(s.flags&iz)===nz)&&tz()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>kx(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:$H,unhideInstance:JR,createTextInstance:VA,hideTextInstance:VA,unhideTextInstance:VA,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:Ae.createContext(null),setCurrentUpdatePriority(i){Uy=i},getCurrentUpdatePriority(){return Uy},resolveUpdatePriority(){var i;if(Uy!==YR)return Uy;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Xy.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Xy.ContinuousEventPriority;default:return Xy.DefaultEventPriority}},resetFormInstance(){}}),af=new Map,Id={objects:"shallow",strict:!1};function sz(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:s,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function az(i){const e=af.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||YH(I1,UC),c=t||Yx.createContainer(r,Xy.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||af.set(i,{fiber:c,store:r});let h,d,p=!1,y=null;return{async configure(x={}){let b;y=new Promise(ce=>b=ce);let{gl:_,size:E,scene:R,events:T,onCreated:M,shadows:B=!1,linear:N=!1,flat:D=!1,legacy:L=!1,orthographic:I=!1,frameloop:j="always",dpr:k=[1,2],performance:O,raycaster:P,camera:Y,onPointerMissed:ie}=x,re=r.getState(),de=re.gl;if(!re.gl){const ce={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},xe=typeof _=="function"?await _(ce):_;wC(xe)?de=xe:de=new JS({...ce,..._}),re.set({gl:de})}let pe=re.raycaster;pe||re.set({raycaster:pe=new YS});const{params:H,...Z}=P||{};if(wi.equ(Z,pe,Id)||xo(pe,{...Z}),wi.equ(H,pe.params,Id)||xo(pe,{params:{...pe.params,...H}}),!re.camera||re.camera===d&&!wi.equ(d,Y,Id)){d=Y;const ce=Y?.isCamera,xe=ce?Y:I?new Ir(0,0,0,0,.1,1e3):new Ri(75,0,.1,1e3);ce||(xe.position.z=5,Y&&(xo(xe,Y),xe.manual||("aspect"in Y||"left"in Y||"right"in Y||"bottom"in Y||"top"in Y)&&(xe.manual=!0,xe.updateProjectionMatrix())),!re.camera&&!(Y!=null&&Y.rotation)&&xe.lookAt(0,0,0)),re.set({camera:xe}),pe.camera=xe}if(!re.scene){let ce;R!=null&&R.isScene?(ce=R,kx(ce,r,"",{})):(ce=new Jg,kx(ce,r,"",{}),R&&xo(ce,R)),re.set({scene:ce})}T&&!re.events.handlers&&re.set({events:T(r)});const $=sz(i,E);if(wi.equ($,re.size,Id)||re.setSize($.width,$.height,$.top,$.left),k&&re.viewport.dpr!==GR(k)&&re.setDpr(k),re.frameloop!==j&&re.setFrameloop(j),re.onPointerMissed||re.set({onPointerMissed:ie}),O&&!wi.equ(O,re.performance,Id)&&re.set(ce=>({performance:{...ce.performance,...O}})),!re.xr){var ge;const ce=(He,at)=>{const me=r.getState();me.frameloop!=="never"&&UC(He,!0,me,at)},xe=()=>{const He=r.getState();He.gl.xr.enabled=He.gl.xr.isPresenting,He.gl.xr.setAnimationLoop(He.gl.xr.isPresenting?ce:null),He.gl.xr.isPresenting||I1(He)},Te={connect(){const He=r.getState().gl;He.xr.addEventListener("sessionstart",xe),He.xr.addEventListener("sessionend",xe)},disconnect(){const He=r.getState().gl;He.xr.removeEventListener("sessionstart",xe),He.xr.removeEventListener("sessionend",xe)}};typeof((ge=de.xr)==null?void 0:ge.addEventListener)=="function"&&Te.connect(),re.set({xr:Te})}if(de.shadowMap){const ce=de.shadowMap.enabled,xe=de.shadowMap.type;if(de.shadowMap.enabled=!!B,wi.boo(B))de.shadowMap.type=cg;else if(wi.str(B)){var X;const Te={basic:Hw,percentage:ob,soft:cg,variance:go};de.shadowMap.type=(X=Te[B])!=null?X:cg}else wi.obj(B)&&Object.assign(de.shadowMap,B);(ce!==de.shadowMap.enabled||xe!==de.shadowMap.type)&&(de.shadowMap.needsUpdate=!0)}return In.enabled=!L,p||(de.outputColorSpace=N?Mo:Gs,de.toneMapping=D?gl:sS),re.legacy!==L&&re.set(()=>({legacy:L})),re.linear!==N&&re.set(()=>({linear:N})),re.flat!==D&&re.set(()=>({flat:D})),_&&!wi.fun(_)&&!wC(_)&&!wi.equ(_,de,Id)&&xo(de,_),h=M,p=!0,b(),this},render(x){return!p&&!y&&this.configure(),y.then(()=>{Yx.updateContainer(g.jsx(rz,{store:r,children:x,onCreated:h,rootElement:i}),c,null,()=>{})}),r},unmount(){ZR(i)}}}function rz({store:i,children:e,onCreated:t,rootElement:n}){return s0(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),t&&t(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),g.jsx($S.Provider,{value:i,children:e})}function ZR(i,e){const t=af.get(i),n=t?.fiber;if(n){const s=t?.store.getState();s&&(s.internal.active=!1),Yx.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,c,h,d;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(c=r.renderLists)==null||c.dispose==null||c.dispose(),(h=s.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),(d=s.gl)!=null&&d.xr&&s.xr.disconnect(),FH(s.scene),af.delete(i)}catch{}},500)})}}function oz(i,e,t){return g.jsx(lz,{children:i,container:e,state:t})}function lz({state:i={},children:e,container:t}){const{events:n,size:s,...r}=i,c=eM(),[h]=Ae.useState(()=>new YS),[d]=Ae.useState(()=>new Ye),p=QS((x,b)=>{let _;if(b.camera&&s){const E=b.camera;_=x.viewport.getCurrentViewport(E,new K,s),E!==x.camera&&kR(E,s)}return{...x,...b,scene:t,raycaster:h,pointer:d,mouse:d,previousRoot:c,events:{...x.events,...b.events,...n},size:{...x.size,...s},viewport:{...x.viewport,..._},setEvents:E=>b.set(R=>({...R,events:{...R.events,...E}}))}}),y=Ae.useMemo(()=>{const x=UR((_,E)=>({...r,set:_,get:E})),b=_=>x.setState(E=>p.current(_,E));return b(c.getState()),c.subscribe(b),x},[c,t]);return g.jsx(g.Fragment,{children:Yx.createPortal(g.jsx($S.Provider,{value:y,children:e}),y,null)})}function cz(i,e){const t={callback:i};return e.add(t),()=>void e.delete(t)}const QR=new Set,uz=new Set,hz=new Set,fz=i=>cz(i,QR);function XA(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function vg(i,e){switch(i){case"before":return XA(QR,e);case"after":return XA(uz,e);case"tail":return XA(hz,e)}}let YA,qA;function O1(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),YA=e.internal.subscribers;for(let s=0;s<YA.length;s++)qA=YA[s],qA.ref.current(qA.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let qx=!1,L1=!1,WA,DC,Pd;function $R(i){DC=requestAnimationFrame($R),qx=!0,WA=0,vg("before",i),L1=!0;for(const t of af.values()){var e;Pd=t.store.getState(),Pd.internal.active&&(Pd.frameloop==="always"||Pd.internal.frames>0)&&!((e=Pd.gl.xr)!=null&&e.isPresenting)&&(WA+=O1(i,Pd))}if(L1=!1,vg("after",i),WA===0)return vg("tail",i),qx=!1,cancelAnimationFrame(DC)}function I1(i,e=1){var t;if(!i)return af.forEach(n=>I1(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):L1?i.internal.frames=2:i.internal.frames=1,qx||(qx=!0,requestAnimationFrame($R)))}function UC(i,e=!0,t,n){if(e&&vg("before",i),t)O1(i,t,n);else for(const s of af.values())O1(i,s.store.getState());e&&vg("after",i)}const JA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function dz(i){const{handlePointer:e}=XH(i);return{priority:1,enabled:!0,compute(t,n,s){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(JA).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:s}=i.getState();(t=s.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:t}})),s.handlers)for(const r in s.handlers){const c=s.handlers[r],[h,d]=JA[r];t.addEventListener(h,c,{passive:d})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[c]=JA[s];n.connected.removeEventListener(c,r)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function OC(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function pz({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,c]=Ae.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=Ae.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),d=i?typeof i=="number"?i:i.scroll:null,p=i?typeof i=="number"?i:i.resize:null,y=Ae.useRef(!1);Ae.useEffect(()=>(y.current=!0,()=>void(y.current=!1)));const[x,b,_]=Ae.useMemo(()=>{const M=()=>{if(!h.current.element)return;const{left:B,top:N,width:D,height:L,bottom:I,right:j,x:k,y:O}=h.current.element.getBoundingClientRect(),P={left:B,top:N,width:D,height:L,bottom:I,right:j,x:k,y:O};h.current.element instanceof HTMLElement&&n&&(P.height=h.current.element.offsetHeight,P.width=h.current.element.offsetWidth),Object.freeze(P),y.current&&!yz(h.current.lastBounds,P)&&c(h.current.lastBounds=P)};return[M,p?OC(M,p):M,d?OC(M,d):M]},[c,n,d,p]);function E(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",_,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null),h.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",h.current.orientationHandler))}function R(){h.current.element&&(h.current.resizeObserver=new s(_),h.current.resizeObserver.observe(h.current.element),e&&h.current.scrollContainers&&h.current.scrollContainers.forEach(M=>M.addEventListener("scroll",_,{capture:!0,passive:!0})),h.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",h.current.orientationHandler))}const T=M=>{!M||M===h.current.element||(E(),h.current.element=M,h.current.scrollContainers=e3(M),R())};return gz(_,!!e),mz(b),Ae.useEffect(()=>{E(),R()},[e,_,b]),Ae.useEffect(()=>E,[]),[T,r,x]}function mz(i){Ae.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function gz(i,e){Ae.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function e3(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[t,n,s].some(r=>r==="auto"||r==="scroll")&&e.push(i),[...e,...e3(i.parentElement)]}const vz=["x","y","top","bottom","left","right","width","height"],yz=(i,e)=>vz.every(t=>i[t]===e[t]);function xz({ref:i,children:e,fallback:t,resize:n,style:s,gl:r,events:c=dz,eventSource:h,eventPrefix:d,shadows:p,linear:y,flat:x,legacy:b,orthographic:_,frameloop:E,dpr:R,performance:T,raycaster:M,camera:B,scene:N,onPointerMissed:D,onCreated:L,...I}){Ae.useMemo(()=>qR(NR),[]);const j=OH(),[k,O]=pz({scroll:!0,debounce:{scroll:50,resize:0},...n}),P=Ae.useRef(null),Y=Ae.useRef(null);Ae.useImperativeHandle(i,()=>P.current);const ie=QS(D),[re,de]=Ae.useState(!1),[pe,H]=Ae.useState(!1);if(re)throw re;if(pe)throw pe;const Z=Ae.useRef(null);s0(()=>{const ge=P.current;if(O.width>0&&O.height>0&&ge){Z.current||(Z.current=az(ge));async function X(){await Z.current.configure({gl:r,scene:N,events:c,shadows:p,linear:y,flat:x,legacy:b,orthographic:_,frameloop:E,dpr:R,performance:T,raycaster:M,camera:B,size:O,onPointerMissed:(...ce)=>ie.current==null?void 0:ie.current(...ce),onCreated:ce=>{ce.events.connect==null||ce.events.connect(h?DH(h)?h.current:h:Y.current),d&&ce.setEvents({compute:(xe,Te)=>{const He=xe[d+"X"],at=xe[d+"Y"];Te.pointer.set(He/Te.size.width*2-1,-(at/Te.size.height)*2+1),Te.raycaster.setFromCamera(Te.pointer,Te.camera)}}),L?.(ce)}}),Z.current.render(g.jsx(j,{children:g.jsx(IH,{set:H,children:g.jsx(Ae.Suspense,{fallback:g.jsx(LH,{set:de}),children:e??null})})}))}X()}}),Ae.useEffect(()=>{const ge=P.current;if(ge)return()=>ZR(ge)},[]);const $=h?"none":"auto";return g.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:$,...s},...I,children:g.jsx("div",{ref:k,style:{width:"100%",height:"100%"},children:g.jsx("canvas",{ref:P,style:{display:"block"},children:t})})})}function bz(i){return g.jsx(PR,{children:g.jsx(xz,{...i})})}var nM=r0(),dn=i=>a0(i,nM),iM=r0();dn.write=i=>a0(i,iM);var jb=r0();dn.onStart=i=>a0(i,jb);var sM=r0();dn.onFrame=i=>a0(i,sM);var aM=r0();dn.onFinish=i=>a0(i,aM);var Xd=[];dn.setTimeout=(i,e)=>{const t=dn.now()+e,n=()=>{const r=Xd.findIndex(c=>c.cancel==n);~r&&Xd.splice(r,1),mu-=~r?1:0},s={time:t,handler:i,cancel:n};return Xd.splice(t3(t),0,s),mu+=1,n3(),s};var t3=i=>~(~Xd.findIndex(e=>e.time>i)||~Xd.length);dn.cancel=i=>{jb.delete(i),sM.delete(i),aM.delete(i),nM.delete(i),iM.delete(i)};dn.sync=i=>{P1=!0,dn.batchedUpdates(i),P1=!1};dn.throttle=i=>{let e;function t(){try{i(...e)}finally{e=null}}function n(...s){e=s,dn.onStart(t)}return n.handler=i,n.cancel=()=>{jb.delete(t),e=null},n};var rM=typeof window<"u"?window.requestAnimationFrame:(()=>{});dn.use=i=>rM=i;dn.now=typeof performance<"u"?()=>performance.now():Date.now;dn.batchedUpdates=i=>i();dn.catch=console.error;dn.frameLoop="always";dn.advance=()=>{dn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):s3()};var pu=-1,mu=0,P1=!1;function a0(i,e){P1?(e.delete(i),i(0)):(e.add(i),n3())}function n3(){pu<0&&(pu=0,dn.frameLoop!=="demand"&&rM(i3))}function _z(){pu=-1}function i3(){~pu&&(rM(i3),dn.batchedUpdates(s3))}function s3(){const i=pu;pu=dn.now();const e=t3(pu);if(e&&(a3(Xd.splice(0,e),t=>t.handler()),mu-=e),!mu){_z();return}jb.flush(),nM.flush(i?Math.min(64,pu-i):16.667),sM.flush(),iM.flush(),aM.flush()}function r0(){let i=new Set,e=i;return{add(t){mu+=e==i&&!i.has(t)?1:0,i.add(t)},delete(t){return mu-=e==i&&i.has(t)?1:0,i.delete(t)},flush(t){e.size&&(i=new Set,mu-=e.size,a3(e,n=>n(t)&&i.add(n)),mu+=i.size,e=i)}}}function a3(i,e){i.forEach(t=>{try{e(t)}catch(n){dn.catch(n)}})}var Az=Object.defineProperty,Sz=(i,e)=>{for(var t in e)Az(i,t,{get:e[t],enumerable:!0})},Eo={};Sz(Eo,{assign:()=>Ez,colors:()=>yu,createStringInterpolator:()=>lM,skipAnimation:()=>o3,to:()=>r3,willAdvance:()=>cM});function F1(){}var Mz=(i,e,t)=>Object.defineProperty(i,e,{value:t,writable:!0,configurable:!0}),St={arr:Array.isArray,obj:i=>!!i&&i.constructor.name==="Object",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",und:i=>i===void 0};function $l(i,e){if(St.arr(i)){if(!St.arr(e)||i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}return i===e}var ei=(i,e)=>i.forEach(e);function cc(i,e,t){if(St.arr(i)){for(let n=0;n<i.length;n++)e.call(t,i[n],`${n}`);return}for(const n in i)i.hasOwnProperty(n)&&e.call(t,i[n],n)}var Lr=i=>St.und(i)?[]:St.arr(i)?i:[i];function yg(i,e){if(i.size){const t=Array.from(i);i.clear(),ei(t,e)}}var og=(i,...e)=>yg(i,t=>t(...e)),oM=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),lM,r3,yu=null,o3=!1,cM=F1,Ez=i=>{i.to&&(r3=i.to),i.now&&(dn.now=i.now),i.colors!==void 0&&(yu=i.colors),i.skipAnimation!=null&&(o3=i.skipAnimation),i.createStringInterpolator&&(lM=i.createStringInterpolator),i.requestAnimationFrame&&dn.use(i.requestAnimationFrame),i.batchedUpdates&&(dn.batchedUpdates=i.batchedUpdates),i.willAdvance&&(cM=i.willAdvance),i.frameLoop&&(dn.frameLoop=i.frameLoop)},xg=new Set,Dr=[],KA=[],Wx=0,kb={get idle(){return!xg.size&&!Dr.length},start(i){Wx>i.priority?(xg.add(i),dn.onStart(Tz)):(l3(i),dn(H1))},advance:H1,sort(i){if(Wx)dn.onFrame(()=>kb.sort(i));else{const e=Dr.indexOf(i);~e&&(Dr.splice(e,1),c3(i))}},clear(){Dr=[],xg.clear()}};function Tz(){xg.forEach(l3),xg.clear(),dn(H1)}function l3(i){Dr.includes(i)||c3(i)}function c3(i){Dr.splice(Cz(Dr,e=>e.priority>i.priority),0,i)}function H1(i){const e=KA;for(let t=0;t<Dr.length;t++){const n=Dr[t];Wx=n.priority,n.idle||(cM(n),n.advance(i),n.idle||e.push(n))}return Wx=0,KA=Dr,KA.length=0,Dr=e,Dr.length>0}function Cz(i,e){const t=i.findIndex(e);return t<0?i.length:t}var wz={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},_o="[-+]?\\d*\\.?\\d+",Jx=_o+"%";function Vb(...i){return"\\(\\s*("+i.join(")\\s*,\\s*(")+")\\s*\\)"}var Rz=new RegExp("rgb"+Vb(_o,_o,_o)),Bz=new RegExp("rgba"+Vb(_o,_o,_o,_o)),Nz=new RegExp("hsl"+Vb(_o,Jx,Jx)),Dz=new RegExp("hsla"+Vb(_o,Jx,Jx,_o)),Uz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Oz=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Lz=/^#([0-9a-fA-F]{6})$/,Iz=/^#([0-9a-fA-F]{8})$/;function Pz(i){let e;return typeof i=="number"?i>>>0===i&&i>=0&&i<=4294967295?i:null:(e=Lz.exec(i))?parseInt(e[1]+"ff",16)>>>0:yu&&yu[i]!==void 0?yu[i]:(e=Rz.exec(i))?(Fd(e[1])<<24|Fd(e[2])<<16|Fd(e[3])<<8|255)>>>0:(e=Bz.exec(i))?(Fd(e[1])<<24|Fd(e[2])<<16|Fd(e[3])<<8|PC(e[4]))>>>0:(e=Uz.exec(i))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Iz.exec(i))?parseInt(e[1],16)>>>0:(e=Oz.exec(i))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Nz.exec(i))?(LC(IC(e[1]),Oy(e[2]),Oy(e[3]))|255)>>>0:(e=Dz.exec(i))?(LC(IC(e[1]),Oy(e[2]),Oy(e[3]))|PC(e[4]))>>>0:null}function ZA(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function LC(i,e,t){const n=t<.5?t*(1+e):t+e-t*e,s=2*t-n,r=ZA(s,n,i+1/3),c=ZA(s,n,i),h=ZA(s,n,i-1/3);return Math.round(r*255)<<24|Math.round(c*255)<<16|Math.round(h*255)<<8}function Fd(i){const e=parseInt(i,10);return e<0?0:e>255?255:e}function IC(i){return(parseFloat(i)%360+360)%360/360}function PC(i){const e=parseFloat(i);return e<0?0:e>1?255:Math.round(e*255)}function Oy(i){const e=parseFloat(i);return e<0?0:e>100?1:e/100}function FC(i){let e=Pz(i);if(e===null)return i;e=e||0;const t=(e&4278190080)>>>24,n=(e&16711680)>>>16,s=(e&65280)>>>8,r=(e&255)/255;return`rgba(${t}, ${n}, ${s}, ${r})`}var Og=(i,e,t)=>{if(St.fun(i))return i;if(St.arr(i))return Og({range:i,output:e,extrapolate:t});if(St.str(i.output[0]))return lM(i);const n=i,s=n.output,r=n.range||[0,1],c=n.extrapolateLeft||n.extrapolate||"extend",h=n.extrapolateRight||n.extrapolate||"extend",d=n.easing||(p=>p);return p=>{const y=Hz(p,r);return Fz(p,r[y],r[y+1],s[y],s[y+1],d,c,h,n.map)}};function Fz(i,e,t,n,s,r,c,h,d){let p=d?d(i):i;if(p<e){if(c==="identity")return p;c==="clamp"&&(p=e)}if(p>t){if(h==="identity")return p;h==="clamp"&&(p=t)}return n===s?n:e===t?i<=e?n:s:(e===-1/0?p=-p:t===1/0?p=p-e:p=(p-e)/(t-e),p=r(p),n===-1/0?p=-p:s===1/0?p=p+n:p=p*(s-n)+n,p)}function Hz(i,e){for(var t=1;t<e.length-1&&!(e[t]>=i);++t);return t-1}var zz={linear:i=>i},Lg=Symbol.for("FluidValue.get"),mp=Symbol.for("FluidValue.observers"),fl=i=>!!(i&&i[Lg]),Nr=i=>i&&i[Lg]?i[Lg]():i,HC=i=>i[mp]||null;function Gz(i,e){i.eventObserved?i.eventObserved(e):i(e)}function Kx(i,e){const t=i[mp];t&&t.forEach(n=>{Gz(n,e)})}var jz=class{constructor(i){if(!i&&!(i=this.get))throw Error("Unknown getter");kz(this,i)}},kz=(i,e)=>u3(i,Lg,e);function o0(i,e){if(i[Lg]){let t=i[mp];t||u3(i,mp,t=new Set),t.has(e)||(t.add(e),i.observerAdded&&i.observerAdded(t.size,e))}return e}function Zx(i,e){const t=i[mp];if(t&&t.has(e)){const n=t.size-1;n?t.delete(e):i[mp]=null,i.observerRemoved&&i.observerRemoved(n,e)}}var u3=(i,e,t)=>Object.defineProperty(i,e,{value:t,writable:!0,configurable:!0}),Ky=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Vz=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,zC=new RegExp(`(${Ky.source})(%|[a-z]+)`,"i"),Xz=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Xb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,h3=i=>{const[e,t]=Yz(i);if(!e||oM())return i;const n=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(n)return n.trim();if(t&&t.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(t);return s||i}else{if(t&&Xb.test(t))return h3(t);if(t)return t}return i},Yz=i=>{const e=Xb.exec(i);if(!e)return[,];const[,t,n]=e;return[t,n]},QA,qz=(i,e,t,n,s)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(n)}, ${s})`,f3=i=>{QA||(QA=yu?new RegExp(`(${Object.keys(yu).join("|")})(?!\\w)`,"g"):/^\b$/);const e=i.output.map(r=>Nr(r).replace(Xb,h3).replace(Vz,FC).replace(QA,FC)),t=e.map(r=>r.match(Ky).map(Number)),s=t[0].map((r,c)=>t.map(h=>{if(!(c in h))throw Error('The arity of each "output" value must be equal');return h[c]})).map(r=>Og({...i,output:r}));return r=>{const c=!zC.test(e[0])&&e.find(d=>zC.test(d))?.replace(Ky,"");let h=0;return e[0].replace(Ky,()=>`${s[h++](r)}${c||""}`).replace(Xz,qz)}},uM="react-spring: ",d3=i=>{const e=i;let t=!1;if(typeof e!="function")throw new TypeError(`${uM}once requires a function parameter`);return(...n)=>{t||(e(...n),t=!0)}},Wz=d3(console.warn);function Jz(){Wz(`${uM}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Kz=d3(console.warn);function Zz(){Kz(`${uM}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Yb(i){return St.str(i)&&(i[0]=="#"||/\d/.test(i)||!oM()&&Xb.test(i)||i in(yu||{}))}var hM=oM()?Ae.useEffect:Ae.useLayoutEffect,Qz=()=>{const i=Ae.useRef(!1);return hM(()=>(i.current=!0,()=>{i.current=!1}),[]),i};function p3(){const i=Ae.useState()[1],e=Qz();return()=>{e.current&&i(Math.random())}}var m3=i=>Ae.useEffect(i,$z),$z=[];function GC(i){const e=Ae.useRef(void 0);return Ae.useEffect(()=>{e.current=i}),e.current}var Ig=Symbol.for("Animated:node"),e5=i=>!!i&&i[Ig]===i,ul=i=>i&&i[Ig],fM=(i,e)=>Mz(i,Ig,e),qb=i=>i&&i[Ig]&&i[Ig].getPayload(),g3=class{constructor(){fM(this,this)}getPayload(){return this.payload||[]}},Wb=class v3 extends g3{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,St.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new v3(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return St.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,St.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Qx=class y3 extends Wb{constructor(e){super(0),this._string=null,this._toString=Og({output:[e,e]})}static create(e){return new y3(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(St.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Og({output:[this.getValue(),e]})),this._value=0,super.reset()}},$x={dependencies:null},dM=class extends g3{constructor(i){super(),this.source=i,this.setValue(i)}getValue(i){const e={};return cc(this.source,(t,n)=>{e5(t)?e[n]=t.getValue(i):fl(t)?e[n]=Nr(t):i||(e[n]=t)}),e}setValue(i){this.source=i,this.payload=this._makePayload(i)}reset(){this.payload&&ei(this.payload,i=>i.reset())}_makePayload(i){if(i){const e=new Set;return cc(i,this._addToPayload,e),Array.from(e)}}_addToPayload(i){$x.dependencies&&fl(i)&&$x.dependencies.add(i);const e=qb(i);e&&ei(e,t=>this.add(t))}},t5=class x3 extends dM{constructor(e){super(e)}static create(e){return new x3(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,s)=>n.setValue(e[s])).some(Boolean):(super.setValue(e.map(n5)),!0)}};function n5(i){return(Yb(i)?Qx:Wb).create(i)}function z1(i){const e=ul(i);return e?e.constructor:St.arr(i)?t5:Yb(i)?Qx:Wb}var jC=(i,e)=>{const t=!St.fun(i)||i.prototype&&i.prototype.isReactComponent;return Ae.forwardRef((n,s)=>{const r=Ae.useRef(null),c=t&&Ae.useCallback(E=>{r.current=a5(s,E)},[s]),[h,d]=s5(n,e),p=p3(),y=()=>{const E=r.current;if(t&&!E)return;(E?e.applyAnimatedValues(E,h.getValue(!0)):!1)===!1&&p()},x=new i5(y,d),b=Ae.useRef(void 0);hM(()=>(b.current=x,ei(d,E=>o0(E,x)),()=>{b.current&&(ei(b.current.deps,E=>Zx(E,b.current)),dn.cancel(b.current.update))})),Ae.useEffect(y,[]),m3(()=>()=>{const E=b.current;ei(E.deps,R=>Zx(R,E))});const _=e.getComponentProps(h.getValue());return Ae.createElement(i,{..._,ref:c})})},i5=class{constructor(i,e){this.update=i,this.deps=e}eventObserved(i){i.type=="change"&&dn.write(this.update)}};function s5(i,e){const t=new Set;return $x.dependencies=t,i.style&&(i={...i,style:e.createAnimatedStyle(i.style)}),i=new dM(i),$x.dependencies=null,[i,t]}function a5(i,e){return i&&(St.fun(i)?i(e):i.current=e),e}var kC=Symbol.for("AnimatedComponent"),r5=(i,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=s=>new dM(s),getComponentProps:n=s=>s}={})=>{const s={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:n},r=c=>{const h=VC(c)||"Anonymous";return St.str(c)?c=r[c]||(r[c]=jC(c,s)):c=c[kC]||(c[kC]=jC(c,s)),c.displayName=`Animated(${h})`,c};return cc(i,(c,h)=>{St.arr(i)&&(h=VC(c)),r[h]=r(c)}),{animated:r}},VC=i=>St.str(i)?i:i&&St.str(i.displayName)?i.displayName:St.fun(i)&&i.name||null;function Fh(i,...e){return St.fun(i)?i(...e):i}var bg=(i,e)=>i===!0||!!(e&&i&&(St.fun(i)?i(e):Lr(i).includes(e))),b3=(i,e)=>St.obj(i)?e&&i[e]:i,_3=(i,e)=>i.default===!0?i[e]:i.default?i.default[e]:void 0,o5=i=>i,pM=(i,e=o5)=>{let t=l5;i.default&&i.default!==!0&&(i=i.default,t=Object.keys(i));const n={};for(const s of t){const r=e(i[s],s);St.und(r)||(n[s]=r)}return n},l5=["config","onProps","onStart","onChange","onPause","onResume","onRest"],c5={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function u5(i){const e={};let t=0;if(cc(i,(n,s)=>{c5[s]||(e[s]=n,t++)}),t)return e}function A3(i){const e=u5(i);if(e){const t={to:e};return cc(i,(n,s)=>s in e||(t[s]=n)),t}return{...i}}function Pg(i){return i=Nr(i),St.arr(i)?i.map(Pg):Yb(i)?Eo.createStringInterpolator({range:[0,1],output:[i,i]})(1):i}function h5(i){for(const e in i)return!0;return!1}function G1(i){return St.fun(i)||St.arr(i)&&St.obj(i[0])}function f5(i,e){i.ref?.delete(i),e?.delete(i)}function d5(i,e){e&&i.ref!==e&&(i.ref?.delete(i),e.add(i),i.ref=e)}var p5={default:{tension:170,friction:26}},j1={...p5.default,mass:1,damping:1,easing:zz.linear,clamp:!1},m5=class{constructor(){this.velocity=0,Object.assign(this,j1)}};function g5(i,e,t){t&&(t={...t},XC(t,e),e={...t,...e}),XC(i,e),Object.assign(i,e);for(const c in j1)i[c]==null&&(i[c]=j1[c]);let{frequency:n,damping:s}=i;const{mass:r}=i;return St.und(n)||(n<.01&&(n=.01),s<0&&(s=0),i.tension=Math.pow(2*Math.PI/n,2)*r,i.friction=4*Math.PI*s*r/n),i}function XC(i,e){if(!St.und(e.decay))i.duration=void 0;else{const t=!St.und(e.tension)||!St.und(e.friction);(t||!St.und(e.frequency)||!St.und(e.damping)||!St.und(e.mass))&&(i.duration=void 0,i.decay=void 0),t&&(i.frequency=void 0)}}var YC=[],v5=class{constructor(){this.changed=!1,this.values=YC,this.toValues=null,this.fromValues=YC,this.config=new m5,this.immediate=!1}};function S3(i,{key:e,props:t,defaultProps:n,state:s,actions:r}){return new Promise((c,h)=>{let d,p,y=bg(t.cancel??n?.cancel,e);if(y)_();else{St.und(t.pause)||(s.paused=bg(t.pause,e));let E=n?.pause;E!==!0&&(E=s.paused||bg(E,e)),d=Fh(t.delay||0,e),E?(s.resumeQueue.add(b),r.pause()):(r.resume(),b())}function x(){s.resumeQueue.add(b),s.timeouts.delete(p),p.cancel(),d=p.time-dn.now()}function b(){d>0&&!Eo.skipAnimation?(s.delayed=!0,p=dn.setTimeout(_,d),s.pauseQueue.add(x),s.timeouts.add(p)):_()}function _(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(x),s.timeouts.delete(p),i<=(s.cancelId||0)&&(y=!0);try{r.start({...t,callId:i,cancel:y},c)}catch(E){h(E)}}})}var mM=(i,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?Yd(i.get()):e.every(t=>t.noop)?M3(i.get()):yo(i.get(),e.every(t=>t.finished)),M3=i=>({value:i,noop:!0,finished:!0,cancelled:!1}),yo=(i,e,t=!1)=>({value:i,finished:e,cancelled:t}),Yd=i=>({value:i,cancelled:!0,finished:!1});function E3(i,e,t,n){const{callId:s,parentId:r,onRest:c}=e,{asyncTo:h,promise:d}=t;return!r&&i===h&&!e.reset?d:t.promise=(async()=>{t.asyncId=s,t.asyncTo=i;const p=pM(e,(T,M)=>M==="onRest"?void 0:T);let y,x;const b=new Promise((T,M)=>(y=T,x=M)),_=T=>{const M=s<=(t.cancelId||0)&&Yd(n)||s!==t.asyncId&&yo(n,!1);if(M)throw T.result=M,x(T),T},E=(T,M)=>{const B=new qC,N=new WC;return(async()=>{if(Eo.skipAnimation)throw Fg(t),N.result=yo(n,!1),x(N),N;_(B);const D=St.obj(T)?{...T}:{...M,to:T};D.parentId=s,cc(p,(I,j)=>{St.und(D[j])&&(D[j]=I)});const L=await n.start(D);return _(B),t.paused&&await new Promise(I=>{t.resumeQueue.add(I)}),L})()};let R;if(Eo.skipAnimation)return Fg(t),yo(n,!1);try{let T;St.arr(i)?T=(async M=>{for(const B of M)await E(B)})(i):T=Promise.resolve(i(E,n.stop.bind(n))),await Promise.all([T.then(y),b]),R=yo(n.get(),!0,!1)}catch(T){if(T instanceof qC)R=T.result;else if(T instanceof WC)R=T.result;else throw T}finally{s==t.asyncId&&(t.asyncId=r,t.asyncTo=r?h:void 0,t.promise=r?d:void 0)}return St.fun(c)&&dn.batchedUpdates(()=>{c(R,n,n.item)}),R})()}function Fg(i,e){yg(i.timeouts,t=>t.cancel()),i.pauseQueue.clear(),i.resumeQueue.clear(),i.asyncId=i.asyncTo=i.promise=void 0,e&&(i.cancelId=e)}var qC=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},WC=class extends Error{constructor(){super("SkipAnimationSignal")}},k1=i=>i instanceof gM,y5=1,gM=class extends jz{constructor(){super(...arguments),this.id=y5++,this._priority=0}get priority(){return this._priority}set priority(i){this._priority!=i&&(this._priority=i,this._onPriorityChange(i))}get(){const i=ul(this);return i&&i.getValue()}to(...i){return Eo.to(this,i)}interpolate(...i){return Jz(),Eo.to(this,i)}toJSON(){return this.get()}observerAdded(i){i==1&&this._attach()}observerRemoved(i){i==0&&this._detach()}_attach(){}_detach(){}_onChange(i,e=!1){Kx(this,{type:"change",parent:this,value:i,idle:e})}_onPriorityChange(i){this.idle||kb.sort(this),Kx(this,{type:"priority",parent:this,priority:i})}},rf=Symbol.for("SpringPhase"),T3=1,V1=2,X1=4,$A=i=>(i[rf]&T3)>0,lu=i=>(i[rf]&V1)>0,Km=i=>(i[rf]&X1)>0,JC=(i,e)=>e?i[rf]|=V1|T3:i[rf]&=~V1,KC=(i,e)=>e?i[rf]|=X1:i[rf]&=~X1,x5=class extends gM{constructor(i,e){if(super(),this.animation=new v5,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!St.und(i)||!St.und(e)){const t=St.obj(i)?{...i}:{...e,from:i};St.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(lu(this)||this._state.asyncTo)||Km(this)}get goal(){return Nr(this.animation.to)}get velocity(){const i=ul(this);return i instanceof Wb?i.lastVelocity||0:i.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return $A(this)}get isAnimating(){return lu(this)}get isPaused(){return Km(this)}get isDelayed(){return this._state.delayed}advance(i){let e=!0,t=!1;const n=this.animation;let{toValues:s}=n;const{config:r}=n,c=qb(n.to);!c&&fl(n.to)&&(s=Lr(Nr(n.to))),n.values.forEach((p,y)=>{if(p.done)return;const x=p.constructor==Qx?1:c?c[y].lastPosition:s[y];let b=n.immediate,_=x;if(!b){if(_=p.lastPosition,r.tension<=0){p.done=!0;return}let E=p.elapsedTime+=i;const R=n.fromValues[y],T=p.v0!=null?p.v0:p.v0=St.arr(r.velocity)?r.velocity[y]:r.velocity;let M;const B=r.precision||(R==x?.005:Math.min(1,Math.abs(x-R)*.001));if(St.und(r.duration))if(r.decay){const N=r.decay===!0?.998:r.decay,D=Math.exp(-(1-N)*E);_=R+T/(1-N)*(1-D),b=Math.abs(p.lastPosition-_)<=B,M=T*D}else{M=p.lastVelocity==null?T:p.lastVelocity;const N=r.restVelocity||B/10,D=r.clamp?0:r.bounce,L=!St.und(D),I=R==x?p.v0>0:R<x;let j,k=!1;const O=1,P=Math.ceil(i/O);for(let Y=0;Y<P&&(j=Math.abs(M)>N,!(!j&&(b=Math.abs(x-_)<=B,b)));++Y){L&&(k=_==x||_>x==I,k&&(M=-M*D,_=x));const ie=-r.tension*1e-6*(_-x),re=-r.friction*.001*M,de=(ie+re)/r.mass;M=M+de*O,_=_+M*O}}else{let N=1;r.duration>0&&(this._memoizedDuration!==r.duration&&(this._memoizedDuration=r.duration,p.durationProgress>0&&(p.elapsedTime=r.duration*p.durationProgress,E=p.elapsedTime+=i)),N=(r.progress||0)+E/this._memoizedDuration,N=N>1?1:N<0?0:N,p.durationProgress=N),_=R+r.easing(N)*(x-R),M=(_-p.lastPosition)/i,b=N==1}p.lastVelocity=M,Number.isNaN(_)&&(console.warn("Got NaN while animating:",this),b=!0)}c&&!c[y].done&&(b=!1),b?p.done=!0:e=!1,p.setValue(_,r.round)&&(t=!0)});const h=ul(this),d=h.getValue();if(e){const p=Nr(n.to);(d!==p||t)&&!r.decay?(h.setValue(p),this._onChange(p)):t&&r.decay&&this._onChange(d),this._stop()}else t&&this._onChange(d)}set(i){return dn.batchedUpdates(()=>{this._stop(),this._focus(i),this._set(i)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(lu(this)){const{to:i,config:e}=this.animation;dn.batchedUpdates(()=>{this._onStart(),e.decay||this._set(i,!1),this._stop()})}return this}update(i){return(this.queue||(this.queue=[])).push(i),this}start(i,e){let t;return St.und(i)?(t=this.queue||[],this.queue=[]):t=[St.obj(i)?i:{...e,to:i}],Promise.all(t.map(n=>this._update(n))).then(n=>mM(this,n))}stop(i){const{to:e}=this.animation;return this._focus(this.get()),Fg(this._state,i&&this._lastCallId),dn.batchedUpdates(()=>this._stop(e,i)),this}reset(){this._update({reset:!0})}eventObserved(i){i.type=="change"?this._start():i.type=="priority"&&(this.priority=i.priority+1)}_prepareNode(i){const e=this.key||"";let{to:t,from:n}=i;t=St.obj(t)?t[e]:t,(t==null||G1(t))&&(t=void 0),n=St.obj(n)?n[e]:n,n==null&&(n=void 0);const s={to:t,from:n};return $A(this)||(i.reverse&&([t,n]=[n,t]),n=Nr(n),St.und(n)?ul(this)||this._set(t):this._set(n)),s}_update({...i},e){const{key:t,defaultProps:n}=this;i.default&&Object.assign(n,pM(i,(c,h)=>/^on/.test(h)?b3(c,t):c)),QC(this,i,"onProps"),Qm(this,"onProps",i,this);const s=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const r=this._state;return S3(++this._lastCallId,{key:t,props:i,defaultProps:n,state:r,actions:{pause:()=>{Km(this)||(KC(this,!0),og(r.pauseQueue),Qm(this,"onPause",yo(this,Zm(this,this.animation.to)),this))},resume:()=>{Km(this)&&(KC(this,!1),lu(this)&&this._resume(),og(r.resumeQueue),Qm(this,"onResume",yo(this,Zm(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(c=>{if(i.loop&&c.finished&&!(e&&c.noop)){const h=C3(i);if(h)return this._update(h,!0)}return c})}_merge(i,e,t){if(e.cancel)return this.stop(!0),t(Yd(this));const n=!St.und(i.to),s=!St.und(i.from);if(n||s)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(Yd(this));const{key:r,defaultProps:c,animation:h}=this,{to:d,from:p}=h;let{to:y=d,from:x=p}=i;s&&!n&&(!e.default||St.und(y))&&(y=x),e.reverse&&([y,x]=[x,y]);const b=!$l(x,p);b&&(h.from=x),x=Nr(x);const _=!$l(y,d);_&&this._focus(y);const E=G1(e.to),{config:R}=h,{decay:T,velocity:M}=R;(n||s)&&(R.velocity=0),e.config&&!E&&g5(R,Fh(e.config,r),e.config!==c.config?Fh(c.config,r):void 0);let B=ul(this);if(!B||St.und(y))return t(yo(this,!0));const N=St.und(e.reset)?s&&!e.default:!St.und(x)&&bg(e.reset,r),D=N?x:this.get(),L=Pg(y),I=St.num(L)||St.arr(L)||Yb(L),j=!E&&(!I||bg(c.immediate||e.immediate,r));if(_){const Y=z1(y);if(Y!==B.constructor)if(j)B=this._set(L);else throw Error(`Cannot animate between ${B.constructor.name} and ${Y.name}, as the "to" prop suggests`)}const k=B.constructor;let O=fl(y),P=!1;if(!O){const Y=N||!$A(this)&&b;(_||Y)&&(P=$l(Pg(D),L),O=!P),(!$l(h.immediate,j)&&!j||!$l(R.decay,T)||!$l(R.velocity,M))&&(O=!0)}if(P&&lu(this)&&(h.changed&&!N?O=!0:O||this._stop(d)),!E&&((O||fl(d))&&(h.values=B.getPayload(),h.toValues=fl(y)?null:k==Qx?[1]:Lr(L)),h.immediate!=j&&(h.immediate=j,!j&&!N&&this._set(d)),O)){const{onRest:Y}=h;ei(_5,re=>QC(this,e,re));const ie=yo(this,Zm(this,d));og(this._pendingCalls,ie),this._pendingCalls.add(t),h.changed&&dn.batchedUpdates(()=>{h.changed=!N,Y?.(ie,this),N?Fh(c.onRest,ie):h.onStart?.(ie,this)})}N&&this._set(D),E?t(E3(e.to,e,this._state,this)):O?this._start():lu(this)&&!_?this._pendingCalls.add(t):t(M3(D))}_focus(i){const e=this.animation;i!==e.to&&(HC(this)&&this._detach(),e.to=i,HC(this)&&this._attach())}_attach(){let i=0;const{to:e}=this.animation;fl(e)&&(o0(e,this),k1(e)&&(i=e.priority+1)),this.priority=i}_detach(){const{to:i}=this.animation;fl(i)&&Zx(i,this)}_set(i,e=!0){const t=Nr(i);if(!St.und(t)){const n=ul(this);if(!n||!$l(t,n.getValue())){const s=z1(t);!n||n.constructor!=s?fM(this,s.create(t)):n.setValue(t),n&&dn.batchedUpdates(()=>{this._onChange(t,e)})}}return ul(this)}_onStart(){const i=this.animation;i.changed||(i.changed=!0,Qm(this,"onStart",yo(this,Zm(this,i.to)),this))}_onChange(i,e){e||(this._onStart(),Fh(this.animation.onChange,i,this)),Fh(this.defaultProps.onChange,i,this),super._onChange(i,e)}_start(){const i=this.animation;ul(this).reset(Nr(i.to)),i.immediate||(i.fromValues=i.values.map(e=>e.lastPosition)),lu(this)||(JC(this,!0),Km(this)||this._resume())}_resume(){Eo.skipAnimation?this.finish():kb.start(this)}_stop(i,e){if(lu(this)){JC(this,!1);const t=this.animation;ei(t.values,s=>{s.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),Kx(this,{type:"idle",parent:this});const n=e?Yd(this.get()):yo(this.get(),Zm(this,i??t.to));og(this._pendingCalls,n),t.changed&&(t.changed=!1,Qm(this,"onRest",n,this))}}};function Zm(i,e){const t=Pg(e),n=Pg(i.get());return $l(n,t)}function C3(i,e=i.loop,t=i.to){const n=Fh(e);if(n){const s=n!==!0&&A3(n),r=(s||i).reverse,c=!s||s.reset;return Hg({...i,loop:e,default:!1,pause:void 0,to:!r||G1(t)?t:void 0,from:c?i.from:void 0,reset:c,...s})}}function Hg(i){const{to:e,from:t}=i=A3(i),n=new Set;return St.obj(e)&&ZC(e,n),St.obj(t)&&ZC(t,n),i.keys=n.size?Array.from(n):null,i}function b5(i){const e=Hg(i);return St.und(e.default)&&(e.default=pM(e)),e}function ZC(i,e){cc(i,(t,n)=>t!=null&&e.add(n))}var _5=["onStart","onRest","onChange","onPause","onResume"];function QC(i,e,t){i.animation[t]=e[t]!==_3(e,t)?b3(e[t],i.key):void 0}function Qm(i,e,...t){i.animation[e]?.(...t),i.defaultProps[e]?.(...t)}var A5=["onStart","onChange","onRest"],S5=1,M5=class{constructor(i,e){this.id=S5++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),i&&this.start({default:!0,...i})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(i=>i.idle&&!i.isDelayed&&!i.isPaused)}get item(){return this._item}set item(i){this._item=i}get(){const i={};return this.each((e,t)=>i[t]=e.get()),i}set(i){for(const e in i){const t=i[e];St.und(t)||this.springs[e].set(t)}}update(i){return i&&this.queue.push(Hg(i)),this}start(i){let{queue:e}=this;return i?e=Lr(i).map(Hg):this.queue=[],this._flush?this._flush(this,e):(D3(this,e),Y1(this,e))}stop(i,e){if(i!==!!i&&(e=i),e){const t=this.springs;ei(Lr(e),n=>t[n].stop(!!i))}else Fg(this._state,this._lastAsyncId),this.each(t=>t.stop(!!i));return this}pause(i){if(St.und(i))this.start({pause:!0});else{const e=this.springs;ei(Lr(i),t=>e[t].pause())}return this}resume(i){if(St.und(i))this.start({pause:!1});else{const e=this.springs;ei(Lr(i),t=>e[t].resume())}return this}each(i){cc(this.springs,i)}_onFrame(){const{onStart:i,onChange:e,onRest:t}=this._events,n=this._active.size>0,s=this._changed.size>0;(n&&!this._started||s&&!this._started)&&(this._started=!0,yg(i,([h,d])=>{d.value=this.get(),h(d,this,this._item)}));const r=!n&&this._started,c=s||r&&t.size?this.get():null;s&&e.size&&yg(e,([h,d])=>{d.value=c,h(d,this,this._item)}),r&&(this._started=!1,yg(t,([h,d])=>{d.value=c,h(d,this,this._item)}))}eventObserved(i){if(i.type=="change")this._changed.add(i.parent),i.idle||this._active.add(i.parent);else if(i.type=="idle")this._active.delete(i.parent);else return;dn.onFrame(this._onFrame)}};function Y1(i,e){return Promise.all(e.map(t=>w3(i,t))).then(t=>mM(i,t))}async function w3(i,e,t){const{keys:n,to:s,from:r,loop:c,onRest:h,onResolve:d}=e,p=St.obj(e.default)&&e.default;c&&(e.loop=!1),s===!1&&(e.to=null),r===!1&&(e.from=null);const y=St.arr(s)||St.fun(s)?s:void 0;y?(e.to=void 0,e.onRest=void 0,p&&(p.onRest=void 0)):ei(A5,R=>{const T=e[R];if(St.fun(T)){const M=i._events[R];e[R]=({finished:B,cancelled:N})=>{const D=M.get(T);D?(B||(D.finished=!1),N&&(D.cancelled=!0)):M.set(T,{value:null,finished:B||!1,cancelled:N||!1})},p&&(p[R]=e[R])}});const x=i._state;e.pause===!x.paused?(x.paused=e.pause,og(e.pause?x.pauseQueue:x.resumeQueue)):x.paused&&(e.pause=!0);const b=(n||Object.keys(i.springs)).map(R=>i.springs[R].start(e)),_=e.cancel===!0||_3(e,"cancel")===!0;(y||_&&x.asyncId)&&b.push(S3(++i._lastAsyncId,{props:e,state:x,actions:{pause:F1,resume:F1,start(R,T){_?(Fg(x,i._lastAsyncId),T(Yd(i))):(R.onRest=h,T(E3(y,R,x,i)))}}})),x.paused&&await new Promise(R=>{x.resumeQueue.add(R)});const E=mM(i,await Promise.all(b));if(c&&E.finished&&!(t&&E.noop)){const R=C3(e,c,s);if(R)return D3(i,[R]),w3(i,R,!0)}return d&&dn.batchedUpdates(()=>d(E,i,i.item)),E}function $C(i,e){const t={...i.springs};return e&&ei(Lr(e),n=>{St.und(n.keys)&&(n=Hg(n)),St.obj(n.to)||(n={...n,to:void 0}),N3(t,n,s=>B3(s))}),R3(i,t),t}function R3(i,e){cc(e,(t,n)=>{i.springs[n]||(i.springs[n]=t,o0(t,i))})}function B3(i,e){const t=new x5;return t.key=i,e&&o0(t,e),t}function N3(i,e,t){e.keys&&ei(e.keys,n=>{(i[n]||(i[n]=t(n)))._prepareNode(e)})}function D3(i,e){ei(e,t=>{N3(i.springs,t,n=>B3(n,i))})}var E5=Ae.createContext({pause:!1,immediate:!1}),T5=()=>{const i=[],e=function(n){Zz();const s=[];return ei(i,(r,c)=>{if(St.und(n))s.push(r.start());else{const h=t(n,r,c);h&&s.push(r.start(h))}}),s};e.current=i,e.add=function(n){i.includes(n)||i.push(n)},e.delete=function(n){const s=i.indexOf(n);~s&&i.splice(s,1)},e.pause=function(){return ei(i,n=>n.pause(...arguments)),this},e.resume=function(){return ei(i,n=>n.resume(...arguments)),this},e.set=function(n){ei(i,(s,r)=>{const c=St.fun(n)?n(r,s):n;c&&s.set(c)})},e.start=function(n){const s=[];return ei(i,(r,c)=>{if(St.und(n))s.push(r.start());else{const h=this._getProps(n,r,c);h&&s.push(r.start(h))}}),s},e.stop=function(){return ei(i,n=>n.stop(...arguments)),this},e.update=function(n){return ei(i,(s,r)=>s.update(this._getProps(n,s,r))),this};const t=function(n,s,r){return St.fun(n)?n(r,s):n};return e._getProps=t,e};function C5(i,e,t){const n=St.fun(e)&&e;n&&!t&&(t=[]);const s=Ae.useMemo(()=>n||arguments.length==3?T5():void 0,[]),r=Ae.useRef(0),c=p3(),h=Ae.useMemo(()=>({ctrls:[],queue:[],flush(M,B){const N=$C(M,B);return r.current>0&&!h.queue.length&&!Object.keys(N).some(L=>!M.springs[L])?Y1(M,B):new Promise(L=>{R3(M,N),h.queue.push(()=>{L(Y1(M,B))}),c()})}}),[]),d=Ae.useRef([...h.ctrls]),p=Ae.useRef([]),y=GC(i)||0;Ae.useMemo(()=>{ei(d.current.slice(i,y),M=>{f5(M,s),M.stop(!0)}),d.current.length=i,x(y,i)},[i]),Ae.useMemo(()=>{x(0,Math.min(y,i))},t);function x(M,B){for(let N=M;N<B;N++){const D=d.current[N]||(d.current[N]=new M5(null,h.flush)),L=n?n(N,D):e[N];L&&(p.current[N]=b5(L))}}const b=d.current.map((M,B)=>$C(M,p.current[B])),_=Ae.useContext(E5),E=GC(_),R=_!==E&&h5(_);hM(()=>{r.current++,h.ctrls=d.current;const{queue:M}=h;M.length&&(h.queue=[],ei(M,B=>B())),ei(d.current,(B,N)=>{s?.add(B),R&&B.start({default:_});const D=p.current[N];D&&(d5(B,D.ref),B.ref?B.queue.push(D):B.start(D))})}),m3(()=>()=>{ei(h.ctrls,M=>M.stop(!0))});const T=b.map(M=>({...M}));return s?[T,s]:T}function w5(i,e){const t=St.fun(i),[[n],s]=C5(1,t?i:[i],t?[]:e);return t||arguments.length==2?[n,s]:n}var R5=class extends gM{constructor(i,e){super(),this.source=i,this.idle=!0,this._active=new Set,this.calc=Og(...e);const t=this._get(),n=z1(t);fM(this,n.create(t))}advance(i){const e=this._get(),t=this.get();$l(e,t)||(ul(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&ew(this._active)&&e1(this)}_get(){const i=St.arr(this.source)?this.source.map(Nr):Lr(Nr(this.source));return this.calc(...i)}_start(){this.idle&&!ew(this._active)&&(this.idle=!1,ei(qb(this),i=>{i.done=!1}),Eo.skipAnimation?(dn.batchedUpdates(()=>this.advance()),e1(this)):kb.start(this))}_attach(){let i=1;ei(Lr(this.source),e=>{fl(e)&&o0(e,this),k1(e)&&(e.idle||this._active.add(e),i=Math.max(i,e.priority+1))}),this.priority=i,this._start()}_detach(){ei(Lr(this.source),i=>{fl(i)&&Zx(i,this)}),this._active.clear(),e1(this)}eventObserved(i){i.type=="change"?i.idle?this.advance():(this._active.add(i.parent),this._start()):i.type=="idle"?this._active.delete(i.parent):i.type=="priority"&&(this.priority=Lr(this.source).reduce((e,t)=>Math.max(e,(k1(t)?t.priority:0)+1),0))}};function B5(i){return i.idle!==!1}function ew(i){return!i.size||Array.from(i).every(B5)}function e1(i){i.idle||(i.idle=!0,ei(qb(i),e=>{e.done=!0}),Kx(i,{type:"idle",parent:i}))}Eo.assign({createStringInterpolator:f3,to:(i,e)=>new R5(i,e)});var N5=["primitive"].concat(Object.keys(NR).filter(i=>/^[A-Z]/.test(i)).map(i=>i[0].toLowerCase()+i.slice(1)));Eo.assign({createStringInterpolator:f3,colors:wz,frameLoop:"demand"});fz(()=>{dn.advance()});r5(N5,{applyAnimatedValues:xo});function zg(){return zg=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},zg.apply(null,arguments)}const l0=new K,vM=new K,D5=new K,tw=new Ye;function U5(i,e,t){const n=l0.setFromMatrixPosition(i.matrixWorld);n.project(e);const s=t.width/2,r=t.height/2;return[n.x*s+s,-(n.y*r)+r]}function O5(i,e){const t=l0.setFromMatrixPosition(i.matrixWorld),n=vM.setFromMatrixPosition(e.matrixWorld),s=t.sub(n),r=e.getWorldDirection(D5);return s.angleTo(r)>Math.PI/2}function L5(i,e,t,n){const s=l0.setFromMatrixPosition(i.matrixWorld),r=s.clone();r.project(e),tw.set(r.x,r.y),t.setFromCamera(tw,e);const c=t.intersectObjects(n,!0);if(c.length){const h=c[0].distance;return s.distanceTo(t.ray.origin)<h}return!0}function I5(i,e){if(e instanceof Ir)return e.zoom;if(e instanceof Ri){const t=l0.setFromMatrixPosition(i.matrixWorld),n=vM.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,r=t.distanceTo(n);return 1/(2*Math.tan(s/2)*r)}else return 1}function P5(i,e,t){if(e instanceof Ri||e instanceof Ir){const n=l0.setFromMatrixPosition(i.matrixWorld),s=vM.setFromMatrixPosition(e.matrixWorld),r=n.distanceTo(s),c=(t[1]-t[0])/(e.far-e.near),h=t[1]-c*e.far;return Math.round(c*r+h)}}const q1=i=>Math.abs(i)<1e-10?0:i;function U3(i,e,t=""){let n="matrix3d(";for(let s=0;s!==16;s++)n+=q1(e[s]*i.elements[s])+(s!==15?",":")");return t+n}const F5=(i=>e=>U3(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),H5=(i=>(e,t)=>U3(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function z5(i){return i&&typeof i=="object"&&"current"in i}const O3=Ae.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:s,center:r,fullscreen:c,portal:h,distanceFactor:d,sprite:p=!1,transform:y=!1,occlude:x,onOcclude:b,castShadow:_,receiveShadow:E,material:R,geometry:T,zIndexRange:M=[16777271,0],calculatePosition:B=U5,as:N="div",wrapperClass:D,pointerEvents:L="auto",...I},j)=>{const{gl:k,camera:O,scene:P,size:Y,raycaster:ie,events:re,viewport:de}=zs(),[pe]=Ae.useState(()=>document.createElement(N)),H=Ae.useRef(null),Z=Ae.useRef(null),$=Ae.useRef(0),ge=Ae.useRef([0,0]),X=Ae.useRef(null),ce=Ae.useRef(null),xe=h?.current||re.connected||k.domElement.parentNode,Te=Ae.useRef(null),He=Ae.useRef(!1),at=Ae.useMemo(()=>x&&x!=="blending"||Array.isArray(x)&&x.length&&z5(x[0]),[x]);Ae.useLayoutEffect(()=>{const vt=k.domElement;x&&x==="blending"?(vt.style.zIndex=`${Math.floor(M[0]/2)}`,vt.style.position="absolute",vt.style.pointerEvents="none"):(vt.style.zIndex=null,vt.style.position=null,vt.style.pointerEvents=null)},[x]),Ae.useLayoutEffect(()=>{if(Z.current){const vt=H.current=fw.createRoot(pe);if(P.updateMatrixWorld(),y)pe.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const yt=B(Z.current,O,Y);pe.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${yt[0]}px,${yt[1]}px,0);transform-origin:0 0;`}return xe&&(s?xe.prepend(pe):xe.appendChild(pe)),()=>{xe&&xe.removeChild(pe),vt.unmount()}}},[xe,y]),Ae.useLayoutEffect(()=>{D&&(pe.className=D)},[D]);const me=Ae.useMemo(()=>y?{position:"absolute",top:0,left:0,width:Y.width,height:Y.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:r?"translate3d(-50%,-50%,0)":"none",...c&&{top:-Y.height/2,left:-Y.width/2,width:Y.width,height:Y.height},...t},[t,r,c,Y,y]),Ge=Ae.useMemo(()=>({position:"absolute",pointerEvents:L}),[L]);Ae.useLayoutEffect(()=>{if(He.current=!1,y){var vt;(vt=H.current)==null||vt.render(Ae.createElement("div",{ref:X,style:me},Ae.createElement("div",{ref:ce,style:Ge},Ae.createElement("div",{ref:j,className:n,style:t,children:i}))))}else{var yt;(yt=H.current)==null||yt.render(Ae.createElement("div",{ref:j,style:me,className:n,children:i}))}});const qe=Ae.useRef(!0);zb(vt=>{if(Z.current){O.updateMatrixWorld(),Z.current.updateWorldMatrix(!0,!1);const yt=y?ge.current:B(Z.current,O,Y);if(y||Math.abs($.current-O.zoom)>e||Math.abs(ge.current[0]-yt[0])>e||Math.abs(ge.current[1]-yt[1])>e){const zt=O5(Z.current,O);let ne=!1;at&&(Array.isArray(x)?ne=x.map(Le=>Le.current):x!=="blending"&&(ne=[P]));const Ze=qe.current;if(ne){const Le=L5(Z.current,O,ie,ne);qe.current=Le&&!zt}else qe.current=!zt;Ze!==qe.current&&(b?b(!qe.current):pe.style.display=qe.current?"block":"none");const ke=Math.floor(M[0]/2),Xe=x?at?[M[0],ke]:[ke-1,0]:M;if(pe.style.zIndex=`${P5(Z.current,O,Xe)}`,y){const[Le,dt]=[Y.width/2,Y.height/2],st=O.projectionMatrix.elements[5]*dt,{isOrthographicCamera:lt,top:Ft,left:kt,bottom:Q,right:V}=O,Me=F5(O.matrixWorldInverse),Ie=lt?`scale(${st})translate(${q1(-(V+kt)/2)}px,${q1((Ft+Q)/2)}px)`:`translateZ(${st}px)`;let je=Z.current.matrixWorld;p&&(je=O.matrixWorldInverse.clone().transpose().copyPosition(je).scale(Z.current.scale),je.elements[3]=je.elements[7]=je.elements[11]=0,je.elements[15]=1),pe.style.width=Y.width+"px",pe.style.height=Y.height+"px",pe.style.perspective=lt?"":`${st}px`,X.current&&ce.current&&(X.current.style.transform=`${Ie}${Me}translate(${Le}px,${dt}px)`,ce.current.style.transform=H5(je,1/((d||10)/400)))}else{const Le=d===void 0?1:I5(Z.current,O)*d;pe.style.transform=`translate3d(${yt[0]}px,${yt[1]}px,0) scale(${Le})`}ge.current=yt,$.current=O.zoom}}if(!at&&Te.current&&!He.current)if(y){if(X.current){const yt=X.current.children[0];if(yt!=null&&yt.clientWidth&&yt!=null&&yt.clientHeight){const{isOrthographicCamera:zt}=O;if(zt||T)I.scale&&(Array.isArray(I.scale)?I.scale instanceof K?Te.current.scale.copy(I.scale.clone().divideScalar(1)):Te.current.scale.set(1/I.scale[0],1/I.scale[1],1/I.scale[2]):Te.current.scale.setScalar(1/I.scale));else{const ne=(d||10)/400,Ze=yt.clientWidth*ne,ke=yt.clientHeight*ne;Te.current.scale.set(Ze,ke,1)}He.current=!0}}}else{const yt=pe.children[0];if(yt!=null&&yt.clientWidth&&yt!=null&&yt.clientHeight){const zt=1/de.factor,ne=yt.clientWidth*zt,Ze=yt.clientHeight*zt;Te.current.scale.set(ne,Ze,1),He.current=!0}Te.current.lookAt(vt.camera.position)}});const _t=Ae.useMemo(()=>({vertexShader:y?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[y]);return Ae.createElement("group",zg({},I,{ref:Z}),x&&!at&&Ae.createElement("mesh",{castShadow:_,receiveShadow:E,ref:Te},T||Ae.createElement("planeGeometry",null),R||Ae.createElement("shaderMaterial",{side:or,vertexShader:_t.vertexShader,fragmentShader:_t.fragmentShader})))}),G5=i=>i;function j5(i,e=G5){const t=dl.useSyncExternalStore(i.subscribe,dl.useCallback(()=>e(i.getState()),[i,e]),dl.useCallback(()=>e(i.getInitialState()),[i,e]));return dl.useDebugValue(t),t}const nw=i=>{const e=DR(i),t=n=>j5(e,n);return Object.assign(t,e),t},k5=(i=>i?nw(i):nw);let $m=0;const L3=k5(i=>(Gd.onStart=(e,t,n)=>{i({active:!0,item:e,loaded:t,total:n,progress:(t-$m)/(n-$m)*100})},Gd.onLoad=()=>{i({active:!1})},Gd.onError=e=>i(t=>({errors:[...t.errors,e]})),Gd.onProgress=(e,t,n)=>{t===n&&($m=n),i({active:!0,item:e,loaded:t,total:n,progress:(t-$m)/(n-$m)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),yM=parseInt(kg.replace(/\D+/g,""));function iw(i,e){if(e===g2)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===Fx||e===hS){let t=i.getIndex();if(t===null){const c=[],h=i.getAttribute("position");if(h!==void 0){for(let d=0;d<h.count;d++)c.push(d);i.setIndex(c),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,s=[];if(t)if(e===Fx)for(let c=1;c<=n;c++)s.push(t.getX(0)),s.push(t.getX(c)),s.push(t.getX(c+1));else for(let c=0;c<n;c++)c%2===0?(s.push(t.getX(c)),s.push(t.getX(c+1)),s.push(t.getX(c+2))):(s.push(t.getX(c+2)),s.push(t.getX(c+1)),s.push(t.getX(c)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var Ur=Uint8Array,gu=Uint16Array,W1=Uint32Array,I3=new Ur([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),P3=new Ur([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),V5=new Ur([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F3=function(i,e){for(var t=new gu(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var s=new W1(t[30]),n=1;n<30;++n)for(var r=t[n];r<t[n+1];++r)s[r]=r-t[n]<<5|n;return[t,s]},H3=F3(I3,2),z3=H3[0],X5=H3[1];z3[28]=258,X5[258]=28;var Y5=F3(P3,0),q5=Y5[0],J1=new gu(32768);for(var Ai=0;Ai<32768;++Ai){var cu=(Ai&43690)>>>1|(Ai&21845)<<1;cu=(cu&52428)>>>2|(cu&13107)<<2,cu=(cu&61680)>>>4|(cu&3855)<<4,J1[Ai]=((cu&65280)>>>8|(cu&255)<<8)>>>1}var _g=(function(i,e,t){for(var n=i.length,s=0,r=new gu(e);s<n;++s)++r[i[s]-1];var c=new gu(e);for(s=0;s<e;++s)c[s]=c[s-1]+r[s-1]<<1;var h;if(t){h=new gu(1<<e);var d=15-e;for(s=0;s<n;++s)if(i[s])for(var p=s<<4|i[s],y=e-i[s],x=c[i[s]-1]++<<y,b=x|(1<<y)-1;x<=b;++x)h[J1[x]>>>d]=p}else for(h=new gu(n),s=0;s<n;++s)i[s]&&(h[s]=J1[c[i[s]-1]++]>>>15-i[s]);return h}),c0=new Ur(288);for(var Ai=0;Ai<144;++Ai)c0[Ai]=8;for(var Ai=144;Ai<256;++Ai)c0[Ai]=9;for(var Ai=256;Ai<280;++Ai)c0[Ai]=7;for(var Ai=280;Ai<288;++Ai)c0[Ai]=8;var G3=new Ur(32);for(var Ai=0;Ai<32;++Ai)G3[Ai]=5;var W5=_g(c0,9,1),J5=_g(G3,5,1),t1=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},mo=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},n1=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},K5=function(i){return(i/8|0)+(i&7&&1)},Z5=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof gu?gu:i instanceof W1?W1:Ur)(t-e);return n.set(i.subarray(e,t)),n},Q5=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new Ur(0);var s=!e||t,r=!t||t.i;t||(t={}),e||(e=new Ur(n*3));var c=function(me){var Ge=e.length;if(me>Ge){var qe=new Ur(Math.max(Ge*2,me));qe.set(e),e=qe}},h=t.f||0,d=t.p||0,p=t.b||0,y=t.l,x=t.d,b=t.m,_=t.n,E=n*8;do{if(!y){t.f=h=mo(i,d,1);var R=mo(i,d+1,3);if(d+=3,R)if(R==1)y=W5,x=J5,b=9,_=5;else if(R==2){var N=mo(i,d,31)+257,D=mo(i,d+10,15)+4,L=N+mo(i,d+5,31)+1;d+=14;for(var I=new Ur(L),j=new Ur(19),k=0;k<D;++k)j[V5[k]]=mo(i,d+k*3,7);d+=D*3;for(var O=t1(j),P=(1<<O)-1,Y=_g(j,O,1),k=0;k<L;){var ie=Y[mo(i,d,P)];d+=ie&15;var T=ie>>>4;if(T<16)I[k++]=T;else{var re=0,de=0;for(T==16?(de=3+mo(i,d,3),d+=2,re=I[k-1]):T==17?(de=3+mo(i,d,7),d+=3):T==18&&(de=11+mo(i,d,127),d+=7);de--;)I[k++]=re}}var pe=I.subarray(0,N),H=I.subarray(N);b=t1(pe),_=t1(H),y=_g(pe,b,1),x=_g(H,_,1)}else throw"invalid block type";else{var T=K5(d)+4,M=i[T-4]|i[T-3]<<8,B=T+M;if(B>n){if(r)throw"unexpected EOF";break}s&&c(p+M),e.set(i.subarray(T,B),p),t.b=p+=M,t.p=d=B*8;continue}if(d>E){if(r)throw"unexpected EOF";break}}s&&c(p+131072);for(var Z=(1<<b)-1,$=(1<<_)-1,ge=d;;ge=d){var re=y[n1(i,d)&Z],X=re>>>4;if(d+=re&15,d>E){if(r)throw"unexpected EOF";break}if(!re)throw"invalid length/literal";if(X<256)e[p++]=X;else if(X==256){ge=d,y=null;break}else{var ce=X-254;if(X>264){var k=X-257,xe=I3[k];ce=mo(i,d,(1<<xe)-1)+z3[k],d+=xe}var Te=x[n1(i,d)&$],He=Te>>>4;if(!Te)throw"invalid distance";d+=Te&15;var H=q5[He];if(He>3){var xe=P3[He];H+=n1(i,d)&(1<<xe)-1,d+=xe}if(d>E){if(r)throw"unexpected EOF";break}s&&c(p+131072);for(var at=p+ce;p<at;p+=4)e[p]=e[p-H],e[p+1]=e[p+1-H],e[p+2]=e[p+2-H],e[p+3]=e[p+3-H];p=at}}t.l=y,t.p=ge,t.b=p,y&&(h=1,t.m=b,t.d=x,t.n=_)}while(!h);return p==e.length?e:Z5(e,0,p)},$5=new Ur(0),eG=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ly(i,e){return Q5((eG(i),i.subarray(2,-4)),e)}var tG=typeof TextDecoder<"u"&&new TextDecoder,nG=0;try{tG.decode($5,{stream:!0}),nG=1}catch{}const iG=i=>i&&i.isCubeTexture;class sG extends Bi{constructor(e,t){var n,s;const r=iG(e),h=((s=r?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?s:1024)/4,d=Math.floor(Math.log2(h)),p=Math.pow(2,d),y=3*Math.max(p,112),x=4*p,b=[r?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/y}`,`#define CUBEUV_TEXEL_HEIGHT ${1/x}`,`#define CUBEUV_MAX_MIP ${d}.0`],_=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,E=b.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${yM>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,R={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},T=new e0(1,16),M=new Va({uniforms:R,fragmentShader:E,vertexShader:_,side:or});super(T,M)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var aG=Object.defineProperty,rG=(i,e,t)=>e in i?aG(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,oG=(i,e,t)=>(rG(i,e+"",t),t);class lG{constructor(){oG(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,c=s.length;r<c;r++)s[r].call(this,e);e.target=null}}}var cG=Object.defineProperty,uG=(i,e,t)=>e in i?cG(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Wt=(i,e,t)=>(uG(i,typeof e!="symbol"?e+"":e,t),t);const Iy=new lf,sw=new tc,hG=Math.cos(70*(Math.PI/180)),aw=(i,e)=>(i%e+e)%e;let fG=class extends lG{constructor(e,t){super(),Wt(this,"object"),Wt(this,"domElement"),Wt(this,"enabled",!0),Wt(this,"target",new K),Wt(this,"minDistance",0),Wt(this,"maxDistance",1/0),Wt(this,"minZoom",0),Wt(this,"maxZoom",1/0),Wt(this,"minPolarAngle",0),Wt(this,"maxPolarAngle",Math.PI),Wt(this,"minAzimuthAngle",-1/0),Wt(this,"maxAzimuthAngle",1/0),Wt(this,"enableDamping",!1),Wt(this,"dampingFactor",.05),Wt(this,"enableZoom",!0),Wt(this,"zoomSpeed",1),Wt(this,"enableRotate",!0),Wt(this,"rotateSpeed",1),Wt(this,"enablePan",!0),Wt(this,"panSpeed",1),Wt(this,"screenSpacePanning",!0),Wt(this,"keyPanSpeed",7),Wt(this,"zoomToCursor",!1),Wt(this,"autoRotate",!1),Wt(this,"autoRotateSpeed",2),Wt(this,"reverseOrbit",!1),Wt(this,"reverseHorizontalOrbit",!1),Wt(this,"reverseVerticalOrbit",!1),Wt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Wt(this,"mouseButtons",{LEFT:Uh.ROTATE,MIDDLE:Uh.DOLLY,RIGHT:Uh.PAN}),Wt(this,"touches",{ONE:Oh.ROTATE,TWO:Oh.DOLLY_PAN}),Wt(this,"target0"),Wt(this,"position0"),Wt(this,"zoom0"),Wt(this,"_domElementKeyEvents",null),Wt(this,"getPolarAngle"),Wt(this,"getAzimuthalAngle"),Wt(this,"setPolarAngle"),Wt(this,"setAzimuthalAngle"),Wt(this,"getDistance"),Wt(this,"getZoomScale"),Wt(this,"listenToKeyEvents"),Wt(this,"stopListenToKeyEvents"),Wt(this,"saveState"),Wt(this,"reset"),Wt(this,"update"),Wt(this,"connect"),Wt(this,"dispose"),Wt(this,"dollyIn"),Wt(this,"dollyOut"),Wt(this,"getScale"),Wt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>y.phi,this.getAzimuthalAngle=()=>y.theta,this.setPolarAngle=ae=>{let Se=aw(ae,2*Math.PI),nt=y.phi;nt<0&&(nt+=2*Math.PI),Se<0&&(Se+=2*Math.PI);let le=Math.abs(Se-nt);2*Math.PI-le<le&&(Se<nt?Se+=2*Math.PI:nt+=2*Math.PI),x.phi=Se-nt,n.update()},this.setAzimuthalAngle=ae=>{let Se=aw(ae,2*Math.PI),nt=y.theta;nt<0&&(nt+=2*Math.PI),Se<0&&(Se+=2*Math.PI);let le=Math.abs(Se-nt);2*Math.PI-le<le&&(Se<nt?Se+=2*Math.PI:nt+=2*Math.PI),x.theta=Se-nt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ae=>{ae.addEventListener("keydown",Pe),this._domElementKeyEvents=ae},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Pe),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(s),n.update(),d=h.NONE},this.update=(()=>{const ae=new K,Se=new K(0,1,0),nt=new ws().setFromUnitVectors(e.up,Se),le=nt.clone().invert(),be=new K,rt=new ws,bt=2*Math.PI;return function(){const $e=n.object.position;nt.setFromUnitVectors(e.up,Se),le.copy(nt).invert(),ae.copy($e).sub(n.target),ae.applyQuaternion(nt),y.setFromVector3(ae),n.autoRotate&&d===h.NONE&&de(ie()),n.enableDamping?(y.theta+=x.theta*n.dampingFactor,y.phi+=x.phi*n.dampingFactor):(y.theta+=x.theta,y.phi+=x.phi);let Mt=n.minAzimuthAngle,Ot=n.maxAzimuthAngle;isFinite(Mt)&&isFinite(Ot)&&(Mt<-Math.PI?Mt+=bt:Mt>Math.PI&&(Mt-=bt),Ot<-Math.PI?Ot+=bt:Ot>Math.PI&&(Ot-=bt),Mt<=Ot?y.theta=Math.max(Mt,Math.min(Ot,y.theta)):y.theta=y.theta>(Mt+Ot)/2?Math.max(Mt,y.theta):Math.min(Ot,y.theta)),y.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,y.phi)),y.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(_,n.dampingFactor):n.target.add(_),n.zoomToCursor&&O||n.object.isOrthographicCamera?y.radius=Te(y.radius):y.radius=Te(y.radius*b),ae.setFromSpherical(y),ae.applyQuaternion(le),$e.copy(n.target).add(ae),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(x.theta*=1-n.dampingFactor,x.phi*=1-n.dampingFactor,_.multiplyScalar(1-n.dampingFactor)):(x.set(0,0,0),_.set(0,0,0));let un=!1;if(n.zoomToCursor&&O){let an=null;if(n.object instanceof Ri&&n.object.isPerspectiveCamera){const Fi=ae.length();an=Te(Fi*b);const ni=Fi-an;n.object.position.addScaledVector(j,ni),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Fi=new K(k.x,k.y,0);Fi.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/b)),n.object.updateProjectionMatrix(),un=!0;const ni=new K(k.x,k.y,0);ni.unproject(n.object),n.object.position.sub(ni).add(Fi),n.object.updateMatrixWorld(),an=ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;an!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(an).add(n.object.position):(Iy.origin.copy(n.object.position),Iy.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Iy.direction))<hG?e.lookAt(n.target):(sw.setFromNormalAndCoplanarPoint(n.object.up,n.target),Iy.intersectPlane(sw,n.target))))}else n.object instanceof Ir&&n.object.isOrthographicCamera&&(un=b!==1,un&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/b)),n.object.updateProjectionMatrix()));return b=1,O=!1,un||be.distanceToSquared(n.object.position)>p||8*(1-rt.dot(n.object.quaternion))>p?(n.dispatchEvent(s),be.copy(n.object.position),rt.copy(n.object.quaternion),un=!1,!0):!1}})(),this.connect=ae=>{n.domElement=ae,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Bt),n.domElement.addEventListener("pointerdown",kt),n.domElement.addEventListener("pointercancel",V),n.domElement.addEventListener("wheel",je)},this.dispose=()=>{var ae,Se,nt,le,be,rt;n.domElement&&(n.domElement.style.touchAction="auto"),(ae=n.domElement)==null||ae.removeEventListener("contextmenu",Bt),(Se=n.domElement)==null||Se.removeEventListener("pointerdown",kt),(nt=n.domElement)==null||nt.removeEventListener("pointercancel",V),(le=n.domElement)==null||le.removeEventListener("wheel",je),(be=n.domElement)==null||be.ownerDocument.removeEventListener("pointermove",Q),(rt=n.domElement)==null||rt.ownerDocument.removeEventListener("pointerup",V),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Pe)};const n=this,s={type:"change"},r={type:"start"},c={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=h.NONE;const p=1e-6,y=new w1,x=new w1;let b=1;const _=new K,E=new Ye,R=new Ye,T=new Ye,M=new Ye,B=new Ye,N=new Ye,D=new Ye,L=new Ye,I=new Ye,j=new K,k=new Ye;let O=!1;const P=[],Y={};function ie(){return 2*Math.PI/60/60*n.autoRotateSpeed}function re(){return Math.pow(.95,n.zoomSpeed)}function de(ae){n.reverseOrbit||n.reverseHorizontalOrbit?x.theta+=ae:x.theta-=ae}function pe(ae){n.reverseOrbit||n.reverseVerticalOrbit?x.phi+=ae:x.phi-=ae}const H=(()=>{const ae=new K;return function(nt,le){ae.setFromMatrixColumn(le,0),ae.multiplyScalar(-nt),_.add(ae)}})(),Z=(()=>{const ae=new K;return function(nt,le){n.screenSpacePanning===!0?ae.setFromMatrixColumn(le,1):(ae.setFromMatrixColumn(le,0),ae.crossVectors(n.object.up,ae)),ae.multiplyScalar(nt),_.add(ae)}})(),$=(()=>{const ae=new K;return function(nt,le){const be=n.domElement;if(be&&n.object instanceof Ri&&n.object.isPerspectiveCamera){const rt=n.object.position;ae.copy(rt).sub(n.target);let bt=ae.length();bt*=Math.tan(n.object.fov/2*Math.PI/180),H(2*nt*bt/be.clientHeight,n.object.matrix),Z(2*le*bt/be.clientHeight,n.object.matrix)}else be&&n.object instanceof Ir&&n.object.isOrthographicCamera?(H(nt*(n.object.right-n.object.left)/n.object.zoom/be.clientWidth,n.object.matrix),Z(le*(n.object.top-n.object.bottom)/n.object.zoom/be.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function ge(ae){n.object instanceof Ri&&n.object.isPerspectiveCamera||n.object instanceof Ir&&n.object.isOrthographicCamera?b=ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function X(ae){ge(b/ae)}function ce(ae){ge(b*ae)}function xe(ae){if(!n.zoomToCursor||!n.domElement)return;O=!0;const Se=n.domElement.getBoundingClientRect(),nt=ae.clientX-Se.left,le=ae.clientY-Se.top,be=Se.width,rt=Se.height;k.x=nt/be*2-1,k.y=-(le/rt)*2+1,j.set(k.x,k.y,1).unproject(n.object).sub(n.object.position).normalize()}function Te(ae){return Math.max(n.minDistance,Math.min(n.maxDistance,ae))}function He(ae){E.set(ae.clientX,ae.clientY)}function at(ae){xe(ae),D.set(ae.clientX,ae.clientY)}function me(ae){M.set(ae.clientX,ae.clientY)}function Ge(ae){R.set(ae.clientX,ae.clientY),T.subVectors(R,E).multiplyScalar(n.rotateSpeed);const Se=n.domElement;Se&&(de(2*Math.PI*T.x/Se.clientHeight),pe(2*Math.PI*T.y/Se.clientHeight)),E.copy(R),n.update()}function qe(ae){L.set(ae.clientX,ae.clientY),I.subVectors(L,D),I.y>0?X(re()):I.y<0&&ce(re()),D.copy(L),n.update()}function _t(ae){B.set(ae.clientX,ae.clientY),N.subVectors(B,M).multiplyScalar(n.panSpeed),$(N.x,N.y),M.copy(B),n.update()}function vt(ae){xe(ae),ae.deltaY<0?ce(re()):ae.deltaY>0&&X(re()),n.update()}function yt(ae){let Se=!1;switch(ae.code){case n.keys.UP:$(0,n.keyPanSpeed),Se=!0;break;case n.keys.BOTTOM:$(0,-n.keyPanSpeed),Se=!0;break;case n.keys.LEFT:$(n.keyPanSpeed,0),Se=!0;break;case n.keys.RIGHT:$(-n.keyPanSpeed,0),Se=!0;break}Se&&(ae.preventDefault(),n.update())}function zt(){if(P.length==1)E.set(P[0].pageX,P[0].pageY);else{const ae=.5*(P[0].pageX+P[1].pageX),Se=.5*(P[0].pageY+P[1].pageY);E.set(ae,Se)}}function ne(){if(P.length==1)M.set(P[0].pageX,P[0].pageY);else{const ae=.5*(P[0].pageX+P[1].pageX),Se=.5*(P[0].pageY+P[1].pageY);M.set(ae,Se)}}function Ze(){const ae=P[0].pageX-P[1].pageX,Se=P[0].pageY-P[1].pageY,nt=Math.sqrt(ae*ae+Se*Se);D.set(0,nt)}function ke(){n.enableZoom&&Ze(),n.enablePan&&ne()}function Xe(){n.enableZoom&&Ze(),n.enableRotate&&zt()}function Le(ae){if(P.length==1)R.set(ae.pageX,ae.pageY);else{const nt=Ut(ae),le=.5*(ae.pageX+nt.x),be=.5*(ae.pageY+nt.y);R.set(le,be)}T.subVectors(R,E).multiplyScalar(n.rotateSpeed);const Se=n.domElement;Se&&(de(2*Math.PI*T.x/Se.clientHeight),pe(2*Math.PI*T.y/Se.clientHeight)),E.copy(R)}function dt(ae){if(P.length==1)B.set(ae.pageX,ae.pageY);else{const Se=Ut(ae),nt=.5*(ae.pageX+Se.x),le=.5*(ae.pageY+Se.y);B.set(nt,le)}N.subVectors(B,M).multiplyScalar(n.panSpeed),$(N.x,N.y),M.copy(B)}function st(ae){const Se=Ut(ae),nt=ae.pageX-Se.x,le=ae.pageY-Se.y,be=Math.sqrt(nt*nt+le*le);L.set(0,be),I.set(0,Math.pow(L.y/D.y,n.zoomSpeed)),X(I.y),D.copy(L)}function lt(ae){n.enableZoom&&st(ae),n.enablePan&&dt(ae)}function Ft(ae){n.enableZoom&&st(ae),n.enableRotate&&Le(ae)}function kt(ae){var Se,nt;n.enabled!==!1&&(P.length===0&&((Se=n.domElement)==null||Se.ownerDocument.addEventListener("pointermove",Q),(nt=n.domElement)==null||nt.ownerDocument.addEventListener("pointerup",V)),Nt(ae),ae.pointerType==="touch"?xt(ae):Me(ae))}function Q(ae){n.enabled!==!1&&(ae.pointerType==="touch"?pt(ae):Ie(ae))}function V(ae){var Se,nt,le;tt(ae),P.length===0&&((Se=n.domElement)==null||Se.releasePointerCapture(ae.pointerId),(nt=n.domElement)==null||nt.ownerDocument.removeEventListener("pointermove",Q),(le=n.domElement)==null||le.ownerDocument.removeEventListener("pointerup",V)),n.dispatchEvent(c),d=h.NONE}function Me(ae){let Se;switch(ae.button){case 0:Se=n.mouseButtons.LEFT;break;case 1:Se=n.mouseButtons.MIDDLE;break;case 2:Se=n.mouseButtons.RIGHT;break;default:Se=-1}switch(Se){case Uh.DOLLY:if(n.enableZoom===!1)return;at(ae),d=h.DOLLY;break;case Uh.ROTATE:if(ae.ctrlKey||ae.metaKey||ae.shiftKey){if(n.enablePan===!1)return;me(ae),d=h.PAN}else{if(n.enableRotate===!1)return;He(ae),d=h.ROTATE}break;case Uh.PAN:if(ae.ctrlKey||ae.metaKey||ae.shiftKey){if(n.enableRotate===!1)return;He(ae),d=h.ROTATE}else{if(n.enablePan===!1)return;me(ae),d=h.PAN}break;default:d=h.NONE}d!==h.NONE&&n.dispatchEvent(r)}function Ie(ae){if(n.enabled!==!1)switch(d){case h.ROTATE:if(n.enableRotate===!1)return;Ge(ae);break;case h.DOLLY:if(n.enableZoom===!1)return;qe(ae);break;case h.PAN:if(n.enablePan===!1)return;_t(ae);break}}function je(ae){n.enabled===!1||n.enableZoom===!1||d!==h.NONE&&d!==h.ROTATE||(ae.preventDefault(),n.dispatchEvent(r),vt(ae),n.dispatchEvent(c))}function Pe(ae){n.enabled===!1||n.enablePan===!1||yt(ae)}function xt(ae){switch(ot(ae),P.length){case 1:switch(n.touches.ONE){case Oh.ROTATE:if(n.enableRotate===!1)return;zt(),d=h.TOUCH_ROTATE;break;case Oh.PAN:if(n.enablePan===!1)return;ne(),d=h.TOUCH_PAN;break;default:d=h.NONE}break;case 2:switch(n.touches.TWO){case Oh.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ke(),d=h.TOUCH_DOLLY_PAN;break;case Oh.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Xe(),d=h.TOUCH_DOLLY_ROTATE;break;default:d=h.NONE}break;default:d=h.NONE}d!==h.NONE&&n.dispatchEvent(r)}function pt(ae){switch(ot(ae),d){case h.TOUCH_ROTATE:if(n.enableRotate===!1)return;Le(ae),n.update();break;case h.TOUCH_PAN:if(n.enablePan===!1)return;dt(ae),n.update();break;case h.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;lt(ae),n.update();break;case h.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ft(ae),n.update();break;default:d=h.NONE}}function Bt(ae){n.enabled!==!1&&ae.preventDefault()}function Nt(ae){P.push(ae)}function tt(ae){delete Y[ae.pointerId];for(let Se=0;Se<P.length;Se++)if(P[Se].pointerId==ae.pointerId){P.splice(Se,1);return}}function ot(ae){let Se=Y[ae.pointerId];Se===void 0&&(Se=new Ye,Y[ae.pointerId]=Se),Se.set(ae.pageX,ae.pageY)}function Ut(ae){const Se=ae.pointerId===P[0].pointerId?P[1]:P[0];return Y[Se.pointerId]}this.dollyIn=(ae=re())=>{ce(ae),n.update()},this.dollyOut=(ae=re())=>{X(ae),n.update()},this.getScale=()=>b,this.setScale=ae=>{ge(ae),n.update()},this.getZoomScale=()=>re(),t!==void 0&&this.connect(t),this.update()}};function eb(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Yh="srgb",rc="srgb-linear",rw=3001,dG=3e3;class xM extends Xs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new yG(t)}),this.register(function(t){return new xG(t)}),this.register(function(t){return new wG(t)}),this.register(function(t){return new RG(t)}),this.register(function(t){return new BG(t)}),this.register(function(t){return new _G(t)}),this.register(function(t){return new AG(t)}),this.register(function(t){return new SG(t)}),this.register(function(t){return new MG(t)}),this.register(function(t){return new vG(t)}),this.register(function(t){return new EG(t)}),this.register(function(t){return new bG(t)}),this.register(function(t){return new CG(t)}),this.register(function(t){return new TG(t)}),this.register(function(t){return new mG(t)}),this.register(function(t){return new NG(t)}),this.register(function(t){return new DG(t)})}load(e,t,n,s){const r=this;let c;if(this.resourcePath!=="")c=this.resourcePath;else if(this.path!==""){const p=vu.extractUrlBase(e);c=vu.resolveURL(p,this.path)}else c=vu.extractUrlBase(e);this.manager.itemStart(e);const h=function(p){s?s(p):console.error(p),r.manager.itemError(e),r.manager.itemEnd(e)},d=new Vs(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(p){try{r.parse(p,c,function(y){t(y),r.manager.itemEnd(e)},h)}catch(y){h(y)}},n,h)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let r;const c={},h={};if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(eb(new Uint8Array(e.slice(0,4)))===j3){try{c[Nn.KHR_BINARY_GLTF]=new UG(e)}catch(y){s&&s(y);return}r=JSON.parse(c[Nn.KHR_BINARY_GLTF].content)}else r=JSON.parse(eb(new Uint8Array(e)));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new YG(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const y=this.pluginCallbacks[p](d);y.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),h[y.name]=y,c[y.name]=!0}if(r.extensionsUsed)for(let p=0;p<r.extensionsUsed.length;++p){const y=r.extensionsUsed[p],x=r.extensionsRequired||[];switch(y){case Nn.KHR_MATERIALS_UNLIT:c[y]=new gG;break;case Nn.KHR_DRACO_MESH_COMPRESSION:c[y]=new OG(r,this.dracoLoader);break;case Nn.KHR_TEXTURE_TRANSFORM:c[y]=new LG;break;case Nn.KHR_MESH_QUANTIZATION:c[y]=new IG;break;default:x.indexOf(y)>=0&&h[y]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+y+'".')}}d.setExtensions(c),d.setPlugins(h),d.parse(n,s)}parseAsync(e,t){const n=this;return new Promise(function(s,r){n.parse(e,t,s,r)})}}function pG(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Nn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class mG{constructor(e){this.parser=e,this.name=Nn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const r=t.json,d=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let p;const y=new Et(16777215);d.color!==void 0&&y.setRGB(d.color[0],d.color[1],d.color[2],rc);const x=d.range!==void 0?d.range:0;switch(d.type){case"directional":p=new zS(y),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new HS(y),p.distance=x;break;case"spot":p=new FS(y),p.distance=x,d.spot=d.spot||{},d.spot.innerConeAngle=d.spot.innerConeAngle!==void 0?d.spot.innerConeAngle:0,d.spot.outerConeAngle=d.spot.outerConeAngle!==void 0?d.spot.outerConeAngle:Math.PI/4,p.angle=d.spot.outerConeAngle,p.penumbra=1-d.spot.innerConeAngle/d.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+d.type)}return p.position.set(0,0,0),p.decay=2,ec(p,d),d.intensity!==void 0&&(p.intensity=d.intensity),p.name=t.createUniqueName(d.name||"light_"+e),s=Promise.resolve(p),t.cache.add(n,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],h=(r.extensions&&r.extensions[this.name]||{}).light;return h===void 0?null:this._loadLight(h).then(function(d){return n._getNodeRef(t.cache,h,d)})}}class gG{constructor(){this.name=Nn.KHR_MATERIALS_UNLIT}getMaterialType(){return ka}extendParams(e,t,n){const s=[];e.color=new Et(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const c=r.baseColorFactor;e.color.setRGB(c[0],c[1],c[2],rc),e.opacity=c[3]}r.baseColorTexture!==void 0&&s.push(n.assignTexture(e,"map",r.baseColorTexture,Yh))}return Promise.all(s)}}class vG{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class yG{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Hr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],c=s.extensions[this.name];if(c.clearcoatFactor!==void 0&&(t.clearcoat=c.clearcoatFactor),c.clearcoatTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatMap",c.clearcoatTexture)),c.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=c.clearcoatRoughnessFactor),c.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",c.clearcoatRoughnessTexture)),c.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(t,"clearcoatNormalMap",c.clearcoatNormalTexture)),c.clearcoatNormalTexture.scale!==void 0)){const h=c.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ye(h,h)}return Promise.all(r)}}class xG{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Hr}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class bG{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Hr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],c=s.extensions[this.name];return c.iridescenceFactor!==void 0&&(t.iridescence=c.iridescenceFactor),c.iridescenceTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceMap",c.iridescenceTexture)),c.iridescenceIor!==void 0&&(t.iridescenceIOR=c.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),c.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=c.iridescenceThicknessMinimum),c.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=c.iridescenceThicknessMaximum),c.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceThicknessMap",c.iridescenceThicknessTexture)),Promise.all(r)}}class _G{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Hr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Et(0,0,0),t.sheenRoughness=0,t.sheen=1;const c=s.extensions[this.name];if(c.sheenColorFactor!==void 0){const h=c.sheenColorFactor;t.sheenColor.setRGB(h[0],h[1],h[2],rc)}return c.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=c.sheenRoughnessFactor),c.sheenColorTexture!==void 0&&r.push(n.assignTexture(t,"sheenColorMap",c.sheenColorTexture,Yh)),c.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"sheenRoughnessMap",c.sheenRoughnessTexture)),Promise.all(r)}}class AG{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Hr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],c=s.extensions[this.name];return c.transmissionFactor!==void 0&&(t.transmission=c.transmissionFactor),c.transmissionTexture!==void 0&&r.push(n.assignTexture(t,"transmissionMap",c.transmissionTexture)),Promise.all(r)}}class SG{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Hr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],c=s.extensions[this.name];t.thickness=c.thicknessFactor!==void 0?c.thicknessFactor:0,c.thicknessTexture!==void 0&&r.push(n.assignTexture(t,"thicknessMap",c.thicknessTexture)),t.attenuationDistance=c.attenuationDistance||1/0;const h=c.attenuationColor||[1,1,1];return t.attenuationColor=new Et().setRGB(h[0],h[1],h[2],rc),Promise.all(r)}}class MG{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Hr}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class EG{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Hr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],c=s.extensions[this.name];t.specularIntensity=c.specularFactor!==void 0?c.specularFactor:1,c.specularTexture!==void 0&&r.push(n.assignTexture(t,"specularIntensityMap",c.specularTexture));const h=c.specularColorFactor||[1,1,1];return t.specularColor=new Et().setRGB(h[0],h[1],h[2],rc),c.specularColorTexture!==void 0&&r.push(n.assignTexture(t,"specularColorMap",c.specularColorTexture,Yh)),Promise.all(r)}}class TG{constructor(e){this.parser=e,this.name=Nn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Hr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],c=s.extensions[this.name];return t.bumpScale=c.bumpFactor!==void 0?c.bumpFactor:1,c.bumpTexture!==void 0&&r.push(n.assignTexture(t,"bumpMap",c.bumpTexture)),Promise.all(r)}}class CG{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Hr}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],c=s.extensions[this.name];return c.anisotropyStrength!==void 0&&(t.anisotropy=c.anisotropyStrength),c.anisotropyRotation!==void 0&&(t.anisotropyRotation=c.anisotropyRotation),c.anisotropyTexture!==void 0&&r.push(n.assignTexture(t,"anisotropyMap",c.anisotropyTexture)),Promise.all(r)}}class wG{constructor(e){this.parser=e,this.name=Nn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],c=t.options.ktx2Loader;if(!c){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,c)}}class RG{constructor(e){this.parser=e,this.name=Nn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const c=r.extensions[t],h=s.images[c.source];let d=n.textureLoader;if(h.uri){const p=n.options.manager.getHandler(h.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return n.loadTextureImage(e,c.source,d);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class BG{constructor(e){this.parser=e,this.name=Nn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const c=r.extensions[t],h=s.images[c.source];let d=n.textureLoader;if(h.uri){const p=n.options.manager.getHandler(h.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return n.loadTextureImage(e,c.source,d);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class NG{constructor(e){this.name=Nn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),c=this.parser.options.meshoptDecoder;if(!c||!c.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(h){const d=s.byteOffset||0,p=s.byteLength||0,y=s.count,x=s.byteStride,b=new Uint8Array(h,d,p);return c.decodeGltfBufferAsync?c.decodeGltfBufferAsync(y,x,b,s.mode,s.filter).then(function(_){return _.buffer}):c.ready.then(function(){const _=new ArrayBuffer(y*x);return c.decodeGltfBuffer(new Uint8Array(_),y,x,b,s.mode,s.filter),_})})}else return null}}class DG{constructor(e){this.name=Nn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=t.meshes[n.mesh];for(const p of s.primitives)if(p.mode!==Br.TRIANGLES&&p.mode!==Br.TRIANGLE_STRIP&&p.mode!==Br.TRIANGLE_FAN&&p.mode!==void 0)return null;const c=n.extensions[this.name].attributes,h=[],d={};for(const p in c)h.push(this.parser.getDependency("accessor",c[p]).then(y=>(d[p]=y,d[p])));return h.length<1?null:(h.push(this.parser.createNodeMesh(e)),Promise.all(h).then(p=>{const y=p.pop(),x=y.isGroup?y.children:[y],b=p[0].count,_=[];for(const E of x){const R=new Jt,T=new K,M=new ws,B=new K(1,1,1),N=new bS(E.geometry,E.material,b);for(let D=0;D<b;D++)d.TRANSLATION&&T.fromBufferAttribute(d.TRANSLATION,D),d.ROTATION&&M.fromBufferAttribute(d.ROTATION,D),d.SCALE&&B.fromBufferAttribute(d.SCALE,D),N.setMatrixAt(D,R.compose(T,M,B));for(const D in d)if(D==="_COLOR_0"){const L=d[D];N.instanceColor=new $h(L.array,L.itemSize,L.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&E.geometry.setAttribute(D,d[D]);Pn.prototype.copy.call(N,E),this.parser.assignFinalMaterial(N),_.push(N)}return y.isGroup?(y.clear(),y.add(..._),y):_[0]}))}}const j3="glTF",eg=12,ow={JSON:1313821514,BIN:5130562};class UG{constructor(e){this.name=Nn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,eg);if(this.header={magic:eb(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==j3)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-eg,s=new DataView(e,eg);let r=0;for(;r<n;){const c=s.getUint32(r,!0);r+=4;const h=s.getUint32(r,!0);if(r+=4,h===ow.JSON){const d=new Uint8Array(e,eg+r,c);this.content=eb(d)}else if(h===ow.BIN){const d=eg+r;this.body=e.slice(d,d+c)}r+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class OG{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Nn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,c=e.extensions[this.name].attributes,h={},d={},p={};for(const y in c){const x=K1[y]||y.toLowerCase();h[x]=c[y]}for(const y in e.attributes){const x=K1[y]||y.toLowerCase();if(c[y]!==void 0){const b=n.accessors[e.attributes[y]],_=qd[b.componentType];p[x]=_.name,d[x]=b.normalized===!0}}return t.getDependency("bufferView",r).then(function(y){return new Promise(function(x,b){s.decodeDracoFile(y,function(_){for(const E in _.attributes){const R=_.attributes[E],T=d[E];T!==void 0&&(R.normalized=T)}x(_)},h,p,rc,b)})})}}class LG{constructor(){this.name=Nn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class IG{constructor(){this.name=Nn.KHR_MESH_QUANTIZATION}}class k3 extends bp{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let c=0;c!==s;c++)t[c]=n[r+c];return t}interpolate_(e,t,n,s){const r=this.resultBuffer,c=this.sampleValues,h=this.valueSize,d=h*2,p=h*3,y=s-t,x=(n-t)/y,b=x*x,_=b*x,E=e*p,R=E-p,T=-2*_+3*b,M=_-b,B=1-T,N=M-b+x;for(let D=0;D!==h;D++){const L=c[R+D+h],I=c[R+D+d]*y,j=c[E+D+h],k=c[E+D]*y;r[D]=B*L+N*I+T*j+M*k}return r}}const PG=new ws;class FG extends k3{interpolate_(e,t,n,s){const r=super.interpolate_(e,t,n,s);return PG.fromArray(r).normalize().toArray(r),r}}const Br={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},qd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},lw={9728:Cs,9729:Kn,9984:lb,9985:kd,9986:zh,9987:Or},cw={33071:Ki,33648:tp,10497:_u},i1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},K1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...yM>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},uu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},HG={CUBICSPLINE:void 0,LINEAR:op,STEP:rp},s1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function zG(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new i0({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:vl})),i.DefaultMaterial}function Dh(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function ec(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function GG(i,e,t){let n=!1,s=!1,r=!1;for(let p=0,y=e.length;p<y;p++){const x=e[p];if(x.POSITION!==void 0&&(n=!0),x.NORMAL!==void 0&&(s=!0),x.COLOR_0!==void 0&&(r=!0),n&&s&&r)break}if(!n&&!s&&!r)return Promise.resolve(i);const c=[],h=[],d=[];for(let p=0,y=e.length;p<y;p++){const x=e[p];if(n){const b=x.POSITION!==void 0?t.getDependency("accessor",x.POSITION):i.attributes.position;c.push(b)}if(s){const b=x.NORMAL!==void 0?t.getDependency("accessor",x.NORMAL):i.attributes.normal;h.push(b)}if(r){const b=x.COLOR_0!==void 0?t.getDependency("accessor",x.COLOR_0):i.attributes.color;d.push(b)}}return Promise.all([Promise.all(c),Promise.all(h),Promise.all(d)]).then(function(p){const y=p[0],x=p[1],b=p[2];return n&&(i.morphAttributes.position=y),s&&(i.morphAttributes.normal=x),r&&(i.morphAttributes.color=b),i.morphTargetsRelative=!0,i})}function jG(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function kG(i){let e;const t=i.extensions&&i.extensions[Nn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+a1(t.attributes):e=i.indices+":"+a1(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,s=i.targets.length;n<s;n++)e+=":"+a1(i.targets[n]);return e}function a1(i){let e="";const t=Object.keys(i).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+i[t[n]]+";";return e}function Z1(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function VG(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const XG=new Jt;class YG{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new pG,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||s&&r<98?this.textureLoader=new hR(this.options.manager):this.textureLoader=new xR(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Vs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(c){return c._markDefs&&c._markDefs()}),Promise.all(this._invokeAll(function(c){return c.beforeRoot&&c.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(c){const h={scene:c[0][s.scene||0],scenes:c[0],animations:c[1],cameras:c[2],asset:s.asset,parser:n,userData:{}};return Dh(r,h,s),ec(h,s),Promise.all(n._invokeAll(function(d){return d.afterRoot&&d.afterRoot(h)})).then(function(){for(const d of h.scenes)d.updateMatrixWorld();e(h)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const c=t[s].joints;for(let h=0,d=c.length;h<d;h++)e[c[h]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const c=e[s];c.mesh!==void 0&&(this._addNodeRef(this.meshCache,c.mesh),c.skin!==void 0&&(n[c.mesh].isSkinnedMesh=!0)),c.camera!==void 0&&this._addNodeRef(this.cameraCache,c.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone(),r=(c,h)=>{const d=this.associations.get(c);d!=null&&this.associations.set(h,d);for(const[p,y]of c.children.entries())r(y,h.children[p])};return r(n,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,c){return n.getDependency(e,c)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Nn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,c){n.load(vu.resolveURL(t.uri,s.path),r,void 0,function(){c(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteLength||0,r=t.byteOffset||0;return n.slice(r,r+s)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const c=i1[s.type],h=qd[s.componentType],d=s.normalized===!0,p=new h(s.count*c);return Promise.resolve(new jn(p,c,d))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(c){const h=c[0],d=i1[s.type],p=qd[s.componentType],y=p.BYTES_PER_ELEMENT,x=y*d,b=s.byteOffset||0,_=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,E=s.normalized===!0;let R,T;if(_&&_!==x){const M=Math.floor(b/_),B="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+M+":"+s.count;let N=t.cache.get(B);N||(R=new p(h,M*_,s.count*_/y),N=new Kg(R,_/y),t.cache.add(B,N)),T=new Au(N,d,b%_/y,E)}else h===null?R=new p(s.count*d):R=new p(h,b,s.count*d),T=new jn(R,d,E);if(s.sparse!==void 0){const M=i1.SCALAR,B=qd[s.sparse.indices.componentType],N=s.sparse.indices.byteOffset||0,D=s.sparse.values.byteOffset||0,L=new B(c[1],N,s.sparse.count*M),I=new p(c[2],D,s.sparse.count*d);h!==null&&(T=new jn(T.array.slice(),T.itemSize,T.normalized));for(let j=0,k=L.length;j<k;j++){const O=L[j];if(T.setX(O,I[j*d]),d>=2&&T.setY(O,I[j*d+1]),d>=3&&T.setZ(O,I[j*d+2]),d>=4&&T.setW(O,I[j*d+3]),d>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return T})}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,c=t.images[r];let h=this.textureLoader;if(c.uri){const d=n.manager.getHandler(c.uri);d!==null&&(h=d)}return this.loadTextureImage(e,r,h)}loadTextureImage(e,t,n){const s=this,r=this.json,c=r.textures[e],h=r.images[t],d=(h.uri||h.bufferView)+":"+c.sampler;if(this.textureCache[d])return this.textureCache[d];const p=this.loadImageSource(t,n).then(function(y){y.flipY=!1,y.name=c.name||h.name||"",y.name===""&&typeof h.uri=="string"&&h.uri.startsWith("data:image/")===!1&&(y.name=h.uri);const b=(r.samplers||{})[c.sampler]||{};return y.magFilter=lw[b.magFilter]||Kn,y.minFilter=lw[b.minFilter]||Or,y.wrapS=cw[b.wrapS]||_u,y.wrapT=cw[b.wrapT]||_u,s.associations.set(y,{textures:e}),y}).catch(function(){return null});return this.textureCache[d]=p,p}loadImageSource(e,t){const n=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(x=>x.clone());const c=s.images[e],h=self.URL||self.webkitURL;let d=c.uri||"",p=!1;if(c.bufferView!==void 0)d=n.getDependency("bufferView",c.bufferView).then(function(x){p=!0;const b=new Blob([x],{type:c.mimeType});return d=h.createObjectURL(b),d});else if(c.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const y=Promise.resolve(d).then(function(x){return new Promise(function(b,_){let E=b;t.isImageBitmapLoader===!0&&(E=function(R){const T=new ti(R);T.needsUpdate=!0,b(T)}),t.load(vu.resolveURL(x,r.path),E,void 0,_)})}).then(function(x){return p===!0&&h.revokeObjectURL(d),ec(x,c),x.userData.mimeType=c.mimeType||VG(c.uri),x}).catch(function(x){throw console.error("THREE.GLTFLoader: Couldn't load texture",d),x});return this.sourceCache[e]=y,y}assignTexture(e,t,n,s){const r=this;return this.getDependency("texture",n.index).then(function(c){if(!c)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(c=c.clone(),c.channel=n.texCoord),r.extensions[Nn.KHR_TEXTURE_TRANSFORM]){const h=n.extensions!==void 0?n.extensions[Nn.KHR_TEXTURE_TRANSFORM]:void 0;if(h){const d=r.associations.get(c);c=r.extensions[Nn.KHR_TEXTURE_TRANSFORM].extendTexture(c,h),r.associations.set(c,d)}}return s!==void 0&&(typeof s=="number"&&(s=s===rw?Yh:rc),"colorSpace"in c?c.colorSpace=s:c.encoding=s===Yh?rw:dG),e[t]=c,c})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,c=t.attributes.normal===void 0;if(e.isPoints){const h="PointsMaterial:"+n.uuid;let d=this.cache.get(h);d||(d=new Sb,ms.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,d.sizeAttenuation=!1,this.cache.add(h,d)),n=d}else if(e.isLine){const h="LineBasicMaterial:"+n.uuid;let d=this.cache.get(h);d||(d=new sa,ms.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,this.cache.add(h,d)),n=d}if(s||r||c){let h="ClonedMaterial:"+n.uuid+":";s&&(h+="derivative-tangents:"),r&&(h+="vertex-colors:"),c&&(h+="flat-shading:");let d=this.cache.get(h);d||(d=n.clone(),r&&(d.vertexColors=!0),c&&(d.flatShading=!0),s&&(d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(h,d),this.associations.set(d,this.associations.get(n))),n=d}e.material=n}getMaterialType(){return i0}loadMaterial(e){const t=this,n=this.json,s=this.extensions,r=n.materials[e];let c;const h={},d=r.extensions||{},p=[];if(d[Nn.KHR_MATERIALS_UNLIT]){const x=s[Nn.KHR_MATERIALS_UNLIT];c=x.getMaterialType(),p.push(x.extendParams(h,r,t))}else{const x=r.pbrMetallicRoughness||{};if(h.color=new Et(1,1,1),h.opacity=1,Array.isArray(x.baseColorFactor)){const b=x.baseColorFactor;h.color.setRGB(b[0],b[1],b[2],rc),h.opacity=b[3]}x.baseColorTexture!==void 0&&p.push(t.assignTexture(h,"map",x.baseColorTexture,Yh)),h.metalness=x.metallicFactor!==void 0?x.metallicFactor:1,h.roughness=x.roughnessFactor!==void 0?x.roughnessFactor:1,x.metallicRoughnessTexture!==void 0&&(p.push(t.assignTexture(h,"metalnessMap",x.metallicRoughnessTexture)),p.push(t.assignTexture(h,"roughnessMap",x.metallicRoughnessTexture))),c=this._invokeOne(function(b){return b.getMaterialType&&b.getMaterialType(e)}),p.push(Promise.all(this._invokeAll(function(b){return b.extendMaterialParams&&b.extendMaterialParams(e,h)})))}r.doubleSided===!0&&(h.side=or);const y=r.alphaMode||s1.OPAQUE;if(y===s1.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,y===s1.MASK&&(h.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&c!==ka&&(p.push(t.assignTexture(h,"normalMap",r.normalTexture)),h.normalScale=new Ye(1,1),r.normalTexture.scale!==void 0)){const x=r.normalTexture.scale;h.normalScale.set(x,x)}if(r.occlusionTexture!==void 0&&c!==ka&&(p.push(t.assignTexture(h,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&c!==ka){const x=r.emissiveFactor;h.emissive=new Et().setRGB(x[0],x[1],x[2],rc)}return r.emissiveTexture!==void 0&&c!==ka&&p.push(t.assignTexture(h,"emissiveMap",r.emissiveTexture,Yh)),Promise.all(p).then(function(){const x=new c(h);return r.name&&(x.name=r.name),ec(x,r),t.associations.set(x,{materials:e}),r.extensions&&Dh(s,x,r),x})}createUniqueName(e){const t=zn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function r(h){return n[Nn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,t).then(function(d){return uw(d,h,t)})}const c=[];for(let h=0,d=e.length;h<d;h++){const p=e[h],y=kG(p),x=s[y];if(x)c.push(x.promise);else{let b;p.extensions&&p.extensions[Nn.KHR_DRACO_MESH_COMPRESSION]?b=r(p):b=uw(new pn,p,t),s[y]={primitive:p,promise:b},c.push(b)}}return Promise.all(c)}loadMesh(e){const t=this,n=this.json,s=this.extensions,r=n.meshes[e],c=r.primitives,h=[];for(let d=0,p=c.length;d<p;d++){const y=c[d].material===void 0?zG(this.cache):this.getDependency("material",c[d].material);h.push(y)}return h.push(t.loadGeometries(c)),Promise.all(h).then(function(d){const p=d.slice(0,d.length-1),y=d[d.length-1],x=[];for(let _=0,E=y.length;_<E;_++){const R=y[_],T=c[_];let M;const B=p[_];if(T.mode===Br.TRIANGLES||T.mode===Br.TRIANGLE_STRIP||T.mode===Br.TRIANGLE_FAN||T.mode===void 0)M=r.isSkinnedMesh===!0?new xS(R,B):new Bi(R,B),M.isSkinnedMesh===!0&&M.normalizeSkinWeights(),T.mode===Br.TRIANGLE_STRIP?M.geometry=iw(M.geometry,hS):T.mode===Br.TRIANGLE_FAN&&(M.geometry=iw(M.geometry,Fx));else if(T.mode===Br.LINES)M=new To(R,B);else if(T.mode===Br.LINE_STRIP)M=new oc(R,B);else if(T.mode===Br.LINE_LOOP)M=new _S(R,B);else if(T.mode===Br.POINTS)M=new AS(R,B);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+T.mode);Object.keys(M.geometry.morphAttributes).length>0&&jG(M,r),M.name=t.createUniqueName(r.name||"mesh_"+e),ec(M,r),T.extensions&&Dh(s,M,T),t.assignFinalMaterial(M),x.push(M)}for(let _=0,E=x.length;_<E;_++)t.associations.set(x[_],{meshes:e,primitives:_});if(x.length===1)return r.extensions&&Dh(s,x[0],r),x[0];const b=new sc;r.extensions&&Dh(s,b,r),t.associations.set(b,{meshes:e});for(let _=0,E=x.length;_<E;_++)b.add(x[_]);return b})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Ri(C2.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(t=new Ir(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ec(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let s=0,r=t.joints.length;s<r;s++)n.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const r=s.pop(),c=s,h=[],d=[];for(let p=0,y=c.length;p<y;p++){const x=c[p];if(x){h.push(x);const b=new Jt;r!==null&&b.fromArray(r.array,p*16),d.push(b)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[p])}return new Zg(h,d)})}loadAnimation(e){const t=this.json,n=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,c=[],h=[],d=[],p=[],y=[];for(let x=0,b=s.channels.length;x<b;x++){const _=s.channels[x],E=s.samplers[_.sampler],R=_.target,T=R.node,M=s.parameters!==void 0?s.parameters[E.input]:E.input,B=s.parameters!==void 0?s.parameters[E.output]:E.output;R.node!==void 0&&(c.push(this.getDependency("node",T)),h.push(this.getDependency("accessor",M)),d.push(this.getDependency("accessor",B)),p.push(E),y.push(R))}return Promise.all([Promise.all(c),Promise.all(h),Promise.all(d),Promise.all(p),Promise.all(y)]).then(function(x){const b=x[0],_=x[1],E=x[2],R=x[3],T=x[4],M=[];for(let B=0,N=b.length;B<N;B++){const D=b[B],L=_[B],I=E[B],j=R[B],k=T[B];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();const O=n._createAnimationTracks(D,L,I,j,k);if(O)for(let P=0;P<O.length;P++)M.push(O[P])}return new dp(r,void 0,M)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(r){const c=n._getNodeRef(n.meshCache,s.mesh,r);return s.weights!==void 0&&c.traverse(function(h){if(h.isMesh)for(let d=0,p=s.weights.length;d<p;d++)h.morphTargetInfluences[d]=s.weights[d]}),c})}loadNode(e){const t=this.json,n=this,s=t.nodes[e],r=n._loadNodeShallow(e),c=[],h=s.children||[];for(let p=0,y=h.length;p<y;p++)c.push(n.getDependency("node",h[p]));const d=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([r,Promise.all(c),d]).then(function(p){const y=p[0],x=p[1],b=p[2];b!==null&&y.traverse(function(_){_.isSkinnedMesh&&_.bind(b,XG)});for(let _=0,E=x.length;_<E;_++)y.add(x[_]);return y})}_loadNodeShallow(e){const t=this.json,n=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],c=r.name?s.createUniqueName(r.name):"",h=[],d=s._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(e)});return d&&h.push(d),r.camera!==void 0&&h.push(s.getDependency("camera",r.camera).then(function(p){return s._getNodeRef(s.cameraCache,r.camera,p)})),s._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(e)}).forEach(function(p){h.push(p)}),this.nodeCache[e]=Promise.all(h).then(function(p){let y;if(r.isBone===!0?y=new _b:p.length>1?y=new sc:p.length===1?y=p[0]:y=new Pn,y!==p[0])for(let x=0,b=p.length;x<b;x++)y.add(p[x]);if(r.name&&(y.userData.name=r.name,y.name=c),ec(y,r),r.extensions&&Dh(n,y,r),r.matrix!==void 0){const x=new Jt;x.fromArray(r.matrix),y.applyMatrix4(x)}else r.translation!==void 0&&y.position.fromArray(r.translation),r.rotation!==void 0&&y.quaternion.fromArray(r.rotation),r.scale!==void 0&&y.scale.fromArray(r.scale);return s.associations.has(y)||s.associations.set(y,{}),s.associations.get(y).nodes=e,y}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],s=this,r=new sc;n.name&&(r.name=s.createUniqueName(n.name)),ec(r,n),n.extensions&&Dh(t,r,n);const c=n.nodes||[],h=[];for(let d=0,p=c.length;d<p;d++)h.push(s.getDependency("node",c[d]));return Promise.all(h).then(function(d){for(let y=0,x=d.length;y<x;y++)r.add(d[y]);const p=y=>{const x=new Map;for(const[b,_]of s.associations)(b instanceof ms||b instanceof ti)&&x.set(b,_);return y.traverse(b=>{const _=s.associations.get(b);_!=null&&x.set(b,_)}),x};return s.associations=p(r),r})}_createAnimationTracks(e,t,n,s,r){const c=[],h=e.name?e.name:e.uuid,d=[];uu[r.path]===uu.weights?e.traverse(function(b){b.morphTargetInfluences&&d.push(b.name?b.name:b.uuid)}):d.push(h);let p;switch(uu[r.path]){case uu.weights:p=tf;break;case uu.rotation:p=nf;break;case uu.position:case uu.scale:p=sf;break;default:switch(n.itemSize){case 1:p=tf;break;case 2:case 3:default:p=sf;break}break}const y=s.interpolation!==void 0?HG[s.interpolation]:op,x=this._getArrayFromAccessor(n);for(let b=0,_=d.length;b<_;b++){const E=new p(d[b]+"."+uu[r.path],t.array,x,y);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(E),c.push(E)}return c}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=Z1(t.constructor),s=new Float32Array(t.length);for(let r=0,c=t.length;r<c;r++)s[r]=t[r]*n;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const s=this instanceof nf?FG:k3;return new s(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function qG(i,e,t){const n=e.attributes,s=new ks;if(n.POSITION!==void 0){const h=t.json.accessors[n.POSITION],d=h.min,p=h.max;if(d!==void 0&&p!==void 0){if(s.set(new K(d[0],d[1],d[2]),new K(p[0],p[1],p[2])),h.normalized){const y=Z1(qd[h.componentType]);s.min.multiplyScalar(y),s.max.multiplyScalar(y)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const h=new K,d=new K;for(let p=0,y=r.length;p<y;p++){const x=r[p];if(x.POSITION!==void 0){const b=t.json.accessors[x.POSITION],_=b.min,E=b.max;if(_!==void 0&&E!==void 0){if(d.setX(Math.max(Math.abs(_[0]),Math.abs(E[0]))),d.setY(Math.max(Math.abs(_[1]),Math.abs(E[1]))),d.setZ(Math.max(Math.abs(_[2]),Math.abs(E[2]))),b.normalized){const R=Z1(qd[b.componentType]);d.multiplyScalar(R)}h.max(d)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(h)}i.boundingBox=s;const c=new Rs;s.getCenter(c.center),c.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=c}function uw(i,e,t){const n=e.attributes,s=[];function r(c,h){return t.getDependency("accessor",c).then(function(d){i.setAttribute(h,d)})}for(const c in n){const h=K1[c]||c.toLowerCase();h in i.attributes||s.push(r(n[c],h))}if(e.indices!==void 0&&!i.index){const c=t.getDependency("accessor",e.indices).then(function(h){i.setIndex(h)});s.push(c)}return ec(i,e),qG(i,e,t),Promise.all(s).then(function(){return e.targets!==void 0?GG(i,e.targets,t):i})}class WG extends IS{constructor(e){super(e),this.type=Ts}parse(e){const c=function(k,O){switch(k){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(O||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(O||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(O||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(O||""))}},x=function(k,O,P){O=O||1024;let ie=k.pos,re=-1,de=0,pe="",H=String.fromCharCode.apply(null,new Uint16Array(k.subarray(ie,ie+128)));for(;0>(re=H.indexOf(`
`))&&de<O&&ie<k.byteLength;)pe+=H,de+=H.length,ie+=128,H+=String.fromCharCode.apply(null,new Uint16Array(k.subarray(ie,ie+128)));return-1<re?(k.pos+=de+re+1,pe+H.slice(0,re)):!1},b=function(k){const O=/^#\?(\S+)/,P=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ie=/^\s*FORMAT=(\S+)\s*$/,re=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,de={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let pe,H;for((k.pos>=k.byteLength||!(pe=x(k)))&&c(1,"no header found"),(H=pe.match(O))||c(3,"bad initial token"),de.valid|=1,de.programtype=H[1],de.string+=pe+`
`;pe=x(k),pe!==!1;){if(de.string+=pe+`
`,pe.charAt(0)==="#"){de.comments+=pe+`
`;continue}if((H=pe.match(P))&&(de.gamma=parseFloat(H[1])),(H=pe.match(Y))&&(de.exposure=parseFloat(H[1])),(H=pe.match(ie))&&(de.valid|=2,de.format=H[1]),(H=pe.match(re))&&(de.valid|=4,de.height=parseInt(H[1],10),de.width=parseInt(H[2],10)),de.valid&2&&de.valid&4)break}return de.valid&2||c(3,"missing format specifier"),de.valid&4||c(3,"missing image size specifier"),de},_=function(k,O,P){const Y=O;if(Y<8||Y>32767||k[0]!==2||k[1]!==2||k[2]&128)return new Uint8Array(k);Y!==(k[2]<<8|k[3])&&c(3,"wrong scanline width");const ie=new Uint8Array(4*O*P);ie.length||c(4,"unable to allocate buffer space");let re=0,de=0;const pe=4*Y,H=new Uint8Array(4),Z=new Uint8Array(pe);let $=P;for(;$>0&&de<k.byteLength;){de+4>k.byteLength&&c(1),H[0]=k[de++],H[1]=k[de++],H[2]=k[de++],H[3]=k[de++],(H[0]!=2||H[1]!=2||(H[2]<<8|H[3])!=Y)&&c(3,"bad rgbe scanline format");let ge=0,X;for(;ge<pe&&de<k.byteLength;){X=k[de++];const xe=X>128;if(xe&&(X-=128),(X===0||ge+X>pe)&&c(3,"bad scanline data"),xe){const Te=k[de++];for(let He=0;He<X;He++)Z[ge++]=Te}else Z.set(k.subarray(de,de+X),ge),ge+=X,de+=X}const ce=Y;for(let xe=0;xe<ce;xe++){let Te=0;ie[re]=Z[xe+Te],Te+=Y,ie[re+1]=Z[xe+Te],Te+=Y,ie[re+2]=Z[xe+Te],Te+=Y,ie[re+3]=Z[xe+Te],re+=4}$--}return ie},E=function(k,O,P,Y){const ie=k[O+3],re=Math.pow(2,ie-128)/255;P[Y+0]=k[O+0]*re,P[Y+1]=k[O+1]*re,P[Y+2]=k[O+2]*re,P[Y+3]=1},R=function(k,O,P,Y){const ie=k[O+3],re=Math.pow(2,ie-128)/255;P[Y+0]=kh.toHalfFloat(Math.min(k[O+0]*re,65504)),P[Y+1]=kh.toHalfFloat(Math.min(k[O+1]*re,65504)),P[Y+2]=kh.toHalfFloat(Math.min(k[O+2]*re,65504)),P[Y+3]=kh.toHalfFloat(1)},T=new Uint8Array(e);T.pos=0;const M=b(T),B=M.width,N=M.height,D=_(T.subarray(T.pos),B,N);let L,I,j;switch(this.type){case Pi:j=D.length/4;const k=new Float32Array(j*4);for(let P=0;P<j;P++)E(D,P*4,k,P*4);L=k,I=Pi;break;case Ts:j=D.length/4;const O=new Uint16Array(j*4);for(let P=0;P<j;P++)R(D,P*4,O,P*4);L=O,I=Ts;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:B,height:N,data:L,header:M.string,gamma:M.gamma,exposure:M.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,n,s){function r(c,h){switch(c.type){case Pi:case Ts:"colorSpace"in c?c.colorSpace="srgb-linear":c.encoding=3e3,c.minFilter=Kn,c.magFilter=Kn,c.generateMipmaps=!1,c.flipY=!0;break}t&&t(c,h)}return super.load(e,r,n,s)}}const tg=yM>=152;class JG extends IS{constructor(e){super(e),this.type=Ts}parse(e){const O=Math.pow(2.7182818,2.2);function P(G,J){for(var fe=0,Re=0;Re<65536;++Re)(Re==0||G[Re>>3]&1<<(Re&7))&&(J[fe++]=Re);for(var Ne=fe-1;fe<65536;)J[fe++]=0;return Ne}function Y(G){for(var J=0;J<16384;J++)G[J]={},G[J].len=0,G[J].lit=0,G[J].p=null}const ie={l:0,c:0,lc:0};function re(G,J,fe,Re,Ne){for(;fe<G;)J=J<<8|Ut(Re,Ne),fe+=8;fe-=G,ie.l=J>>fe&(1<<G)-1,ie.c=J,ie.lc=fe}const de=new Array(59);function pe(G){for(var J=0;J<=58;++J)de[J]=0;for(var J=0;J<65537;++J)de[G[J]]+=1;for(var fe=0,J=58;J>0;--J){var Re=fe+de[J]>>1;de[J]=fe,fe=Re}for(var J=0;J<65537;++J){var Ne=G[J];Ne>0&&(G[J]=Ne|de[Ne]++<<6)}}function H(G,J,fe,Re,Ne,ze,ut){for(var z=fe,ee=0,se=0;Ne<=ze;Ne++){if(z.value-fe.value>Re)return!1;re(6,ee,se,G,z);var he=ie.l;if(ee=ie.c,se=ie.lc,ut[Ne]=he,he==63){if(z.value-fe.value>Re)throw"Something wrong with hufUnpackEncTable";re(8,ee,se,G,z);var te=ie.l+6;if(ee=ie.c,se=ie.lc,Ne+te>ze+1)throw"Something wrong with hufUnpackEncTable";for(;te--;)ut[Ne++]=0;Ne--}else if(he>=59){var te=he-59+2;if(Ne+te>ze+1)throw"Something wrong with hufUnpackEncTable";for(;te--;)ut[Ne++]=0;Ne--}}pe(ut)}function Z(G){return G&63}function $(G){return G>>6}function ge(G,J,fe,Re){for(;J<=fe;J++){var Ne=$(G[J]),ze=Z(G[J]);if(Ne>>ze)throw"Invalid table entry";if(ze>14){var ut=Re[Ne>>ze-14];if(ut.len)throw"Invalid table entry";if(ut.lit++,ut.p){var z=ut.p;ut.p=new Array(ut.lit);for(var ee=0;ee<ut.lit-1;++ee)ut.p[ee]=z[ee]}else ut.p=new Array(1);ut.p[ut.lit-1]=J}else if(ze)for(var se=0,ee=1<<14-ze;ee>0;ee--){var ut=Re[(Ne<<14-ze)+se];if(ut.len||ut.p)throw"Invalid table entry";ut.len=ze,ut.lit=J,se++}}return!0}const X={c:0,lc:0};function ce(G,J,fe,Re){G=G<<8|Ut(fe,Re),J+=8,X.c=G,X.lc=J}const xe={c:0,lc:0};function Te(G,J,fe,Re,Ne,ze,ut,z,ee,se){if(G==J){Re<8&&(ce(fe,Re,Ne,ut),fe=X.c,Re=X.lc),Re-=8;var he=fe>>Re,he=new Uint8Array([he])[0];if(ee.value+he>se)return!1;for(var te=z[ee.value-1];he-- >0;)z[ee.value++]=te}else if(ee.value<se)z[ee.value++]=G;else return!1;xe.c=fe,xe.lc=Re}function He(G){return G&65535}function at(G){var J=He(G);return J>32767?J-65536:J}const me={a:0,b:0};function Ge(G,J){var fe=at(G),Re=at(J),Ne=Re,ze=fe+(Ne&1)+(Ne>>1),ut=ze,z=ze-Ne;me.a=ut,me.b=z}function qe(G,J){var fe=He(G),Re=He(J),Ne=fe-(Re>>1)&65535,ze=Re+Ne-32768&65535;me.a=ze,me.b=Ne}function _t(G,J,fe,Re,Ne,ze,ut){for(var z=ut<16384,ee=fe>Ne?Ne:fe,se=1,he;se<=ee;)se<<=1;for(se>>=1,he=se,se>>=1;se>=1;){for(var te=0,Qe=te+ze*(Ne-he),Fe=ze*se,Ve=ze*he,We=Re*se,ht=Re*he,At,gt,Pt,Zt;te<=Qe;te+=Ve){for(var Xt=te,vn=te+Re*(fe-he);Xt<=vn;Xt+=ht){var Dt=Xt+We,Tt=Xt+Fe,Rn=Tt+We;z?(Ge(G[Xt+J],G[Tt+J]),At=me.a,Pt=me.b,Ge(G[Dt+J],G[Rn+J]),gt=me.a,Zt=me.b,Ge(At,gt),G[Xt+J]=me.a,G[Dt+J]=me.b,Ge(Pt,Zt),G[Tt+J]=me.a,G[Rn+J]=me.b):(qe(G[Xt+J],G[Tt+J]),At=me.a,Pt=me.b,qe(G[Dt+J],G[Rn+J]),gt=me.a,Zt=me.b,qe(At,gt),G[Xt+J]=me.a,G[Dt+J]=me.b,qe(Pt,Zt),G[Tt+J]=me.a,G[Rn+J]=me.b)}if(fe&se){var Tt=Xt+Fe;z?Ge(G[Xt+J],G[Tt+J]):qe(G[Xt+J],G[Tt+J]),At=me.a,G[Tt+J]=me.b,G[Xt+J]=At}}if(Ne&se)for(var Xt=te,vn=te+Re*(fe-he);Xt<=vn;Xt+=ht){var Dt=Xt+We;z?Ge(G[Xt+J],G[Dt+J]):qe(G[Xt+J],G[Dt+J]),At=me.a,G[Dt+J]=me.b,G[Xt+J]=At}he=se,se>>=1}return te}function vt(G,J,fe,Re,Ne,ze,ut,z,ee,se){for(var he=0,te=0,Qe=z,Fe=Math.trunc(Ne.value+(ze+7)/8);Ne.value<Fe;)for(ce(he,te,fe,Ne),he=X.c,te=X.lc;te>=14;){var Ve=he>>te-14&16383,We=J[Ve];if(We.len)te-=We.len,Te(We.lit,ut,he,te,fe,Re,Ne,ee,se,Qe),he=xe.c,te=xe.lc;else{if(!We.p)throw"hufDecode issues";var ht;for(ht=0;ht<We.lit;ht++){for(var At=Z(G[We.p[ht]]);te<At&&Ne.value<Fe;)ce(he,te,fe,Ne),he=X.c,te=X.lc;if(te>=At&&$(G[We.p[ht]])==(he>>te-At&(1<<At)-1)){te-=At,Te(We.p[ht],ut,he,te,fe,Re,Ne,ee,se,Qe),he=xe.c,te=xe.lc;break}}if(ht==We.lit)throw"hufDecode issues"}}var gt=8-ze&7;for(he>>=gt,te-=gt;te>0;){var We=J[he<<14-te&16383];if(We.len)te-=We.len,Te(We.lit,ut,he,te,fe,Re,Ne,ee,se,Qe),he=xe.c,te=xe.lc;else throw"hufDecode issues"}return!0}function yt(G,J,fe,Re,Ne,ze){var ut={value:0},z=fe.value,ee=ot(J,fe),se=ot(J,fe);fe.value+=4;var he=ot(J,fe);if(fe.value+=4,ee<0||ee>=65537||se<0||se>=65537)throw"Something wrong with HUF_ENCSIZE";var te=new Array(65537),Qe=new Array(16384);Y(Qe);var Fe=Re-(fe.value-z);if(H(G,J,fe,Fe,ee,se,te),he>8*(Re-(fe.value-z)))throw"Something wrong with hufUncompress";ge(te,ee,se,Qe),vt(te,Qe,G,J,fe,he,se,ze,Ne,ut)}function zt(G,J,fe){for(var Re=0;Re<fe;++Re)J[Re]=G[J[Re]]}function ne(G){for(var J=1;J<G.length;J++){var fe=G[J-1]+G[J]-128;G[J]=fe}}function Ze(G,J){for(var fe=0,Re=Math.floor((G.length+1)/2),Ne=0,ze=G.length-1;!(Ne>ze||(J[Ne++]=G[fe++],Ne>ze));)J[Ne++]=G[Re++]}function ke(G){for(var J=G.byteLength,fe=new Array,Re=0,Ne=new DataView(G);J>0;){var ze=Ne.getInt8(Re++);if(ze<0){var ut=-ze;J-=ut+1;for(var z=0;z<ut;z++)fe.push(Ne.getUint8(Re++))}else{var ut=ze;J-=2;for(var ee=Ne.getUint8(Re++),z=0;z<ut+1;z++)fe.push(ee)}}return fe}function Xe(G,J,fe,Re,Ne,ze){var Dt=new DataView(ze.buffer),ut=fe[G.idx[0]].width,z=fe[G.idx[0]].height,ee=3,se=Math.floor(ut/8),he=Math.ceil(ut/8),te=Math.ceil(z/8),Qe=ut-(he-1)*8,Fe=z-(te-1)*8,Ve={value:0},We=new Array(ee),ht=new Array(ee),At=new Array(ee),gt=new Array(ee),Pt=new Array(ee);for(let yn=0;yn<ee;++yn)Pt[yn]=J[G.idx[yn]],We[yn]=yn<1?0:We[yn-1]+he*te,ht[yn]=new Float32Array(64),At[yn]=new Uint16Array(64),gt[yn]=new Uint16Array(he*64);for(let yn=0;yn<te;++yn){var Zt=8;yn==te-1&&(Zt=Fe);var Xt=8;for(let on=0;on<he;++on){on==he-1&&(Xt=Qe);for(let Ht=0;Ht<ee;++Ht)At[Ht].fill(0),At[Ht][0]=Ne[We[Ht]++],Le(Ve,Re,At[Ht]),dt(At[Ht],ht[Ht]),st(ht[Ht]);lt(ht);for(let Ht=0;Ht<ee;++Ht)Ft(ht[Ht],gt[Ht],on*64)}let Dn=0;for(let on=0;on<ee;++on){const Ht=fe[G.idx[on]].type;for(let Wn=8*yn;Wn<8*yn+Zt;++Wn){Dn=Pt[on][Wn];for(let mi=0;mi<se;++mi){const En=mi*64+(Wn&7)*8;Dt.setUint16(Dn+0*Ht,gt[on][En+0],!0),Dt.setUint16(Dn+2*Ht,gt[on][En+1],!0),Dt.setUint16(Dn+4*Ht,gt[on][En+2],!0),Dt.setUint16(Dn+6*Ht,gt[on][En+3],!0),Dt.setUint16(Dn+8*Ht,gt[on][En+4],!0),Dt.setUint16(Dn+10*Ht,gt[on][En+5],!0),Dt.setUint16(Dn+12*Ht,gt[on][En+6],!0),Dt.setUint16(Dn+14*Ht,gt[on][En+7],!0),Dn+=16*Ht}}if(se!=he)for(let Wn=8*yn;Wn<8*yn+Zt;++Wn){const mi=Pt[on][Wn]+8*se*2*Ht,En=se*64+(Wn&7)*8;for(let ci=0;ci<Xt;++ci)Dt.setUint16(mi+ci*2*Ht,gt[on][En+ci],!0)}}}for(var vn=new Uint16Array(ut),Dt=new DataView(ze.buffer),Tt=0;Tt<ee;++Tt){fe[G.idx[Tt]].decoded=!0;var Rn=fe[G.idx[Tt]].type;if(fe[Tt].type==2)for(var rn=0;rn<z;++rn){const yn=Pt[Tt][rn];for(var kn=0;kn<ut;++kn)vn[kn]=Dt.getUint16(yn+kn*2*Rn,!0);for(var kn=0;kn<ut;++kn)Dt.setFloat32(yn+kn*2*Rn,be(vn[kn]),!0)}}}function Le(G,J,fe){for(var Re,Ne=1;Ne<64;)Re=J[G.value],Re==65280?Ne=64:Re>>8==255?Ne+=Re&255:(fe[Ne]=Re,Ne++),G.value++}function dt(G,J){J[0]=be(G[0]),J[1]=be(G[1]),J[2]=be(G[5]),J[3]=be(G[6]),J[4]=be(G[14]),J[5]=be(G[15]),J[6]=be(G[27]),J[7]=be(G[28]),J[8]=be(G[2]),J[9]=be(G[4]),J[10]=be(G[7]),J[11]=be(G[13]),J[12]=be(G[16]),J[13]=be(G[26]),J[14]=be(G[29]),J[15]=be(G[42]),J[16]=be(G[3]),J[17]=be(G[8]),J[18]=be(G[12]),J[19]=be(G[17]),J[20]=be(G[25]),J[21]=be(G[30]),J[22]=be(G[41]),J[23]=be(G[43]),J[24]=be(G[9]),J[25]=be(G[11]),J[26]=be(G[18]),J[27]=be(G[24]),J[28]=be(G[31]),J[29]=be(G[40]),J[30]=be(G[44]),J[31]=be(G[53]),J[32]=be(G[10]),J[33]=be(G[19]),J[34]=be(G[23]),J[35]=be(G[32]),J[36]=be(G[39]),J[37]=be(G[45]),J[38]=be(G[52]),J[39]=be(G[54]),J[40]=be(G[20]),J[41]=be(G[22]),J[42]=be(G[33]),J[43]=be(G[38]),J[44]=be(G[46]),J[45]=be(G[51]),J[46]=be(G[55]),J[47]=be(G[60]),J[48]=be(G[21]),J[49]=be(G[34]),J[50]=be(G[37]),J[51]=be(G[47]),J[52]=be(G[50]),J[53]=be(G[56]),J[54]=be(G[59]),J[55]=be(G[61]),J[56]=be(G[35]),J[57]=be(G[36]),J[58]=be(G[48]),J[59]=be(G[49]),J[60]=be(G[57]),J[61]=be(G[58]),J[62]=be(G[62]),J[63]=be(G[63])}function st(G){const J=.5*Math.cos(.7853975),fe=.5*Math.cos(3.14159/16),Re=.5*Math.cos(3.14159/8),Ne=.5*Math.cos(3*3.14159/16),ze=.5*Math.cos(5*3.14159/16),ut=.5*Math.cos(3*3.14159/8),z=.5*Math.cos(7*3.14159/16);for(var ee=new Array(4),se=new Array(4),he=new Array(4),te=new Array(4),Qe=0;Qe<8;++Qe){var Fe=Qe*8;ee[0]=Re*G[Fe+2],ee[1]=ut*G[Fe+2],ee[2]=Re*G[Fe+6],ee[3]=ut*G[Fe+6],se[0]=fe*G[Fe+1]+Ne*G[Fe+3]+ze*G[Fe+5]+z*G[Fe+7],se[1]=Ne*G[Fe+1]-z*G[Fe+3]-fe*G[Fe+5]-ze*G[Fe+7],se[2]=ze*G[Fe+1]-fe*G[Fe+3]+z*G[Fe+5]+Ne*G[Fe+7],se[3]=z*G[Fe+1]-ze*G[Fe+3]+Ne*G[Fe+5]-fe*G[Fe+7],he[0]=J*(G[Fe+0]+G[Fe+4]),he[3]=J*(G[Fe+0]-G[Fe+4]),he[1]=ee[0]+ee[3],he[2]=ee[1]-ee[2],te[0]=he[0]+he[1],te[1]=he[3]+he[2],te[2]=he[3]-he[2],te[3]=he[0]-he[1],G[Fe+0]=te[0]+se[0],G[Fe+1]=te[1]+se[1],G[Fe+2]=te[2]+se[2],G[Fe+3]=te[3]+se[3],G[Fe+4]=te[3]-se[3],G[Fe+5]=te[2]-se[2],G[Fe+6]=te[1]-se[1],G[Fe+7]=te[0]-se[0]}for(var Ve=0;Ve<8;++Ve)ee[0]=Re*G[16+Ve],ee[1]=ut*G[16+Ve],ee[2]=Re*G[48+Ve],ee[3]=ut*G[48+Ve],se[0]=fe*G[8+Ve]+Ne*G[24+Ve]+ze*G[40+Ve]+z*G[56+Ve],se[1]=Ne*G[8+Ve]-z*G[24+Ve]-fe*G[40+Ve]-ze*G[56+Ve],se[2]=ze*G[8+Ve]-fe*G[24+Ve]+z*G[40+Ve]+Ne*G[56+Ve],se[3]=z*G[8+Ve]-ze*G[24+Ve]+Ne*G[40+Ve]-fe*G[56+Ve],he[0]=J*(G[Ve]+G[32+Ve]),he[3]=J*(G[Ve]-G[32+Ve]),he[1]=ee[0]+ee[3],he[2]=ee[1]-ee[2],te[0]=he[0]+he[1],te[1]=he[3]+he[2],te[2]=he[3]-he[2],te[3]=he[0]-he[1],G[0+Ve]=te[0]+se[0],G[8+Ve]=te[1]+se[1],G[16+Ve]=te[2]+se[2],G[24+Ve]=te[3]+se[3],G[32+Ve]=te[3]-se[3],G[40+Ve]=te[2]-se[2],G[48+Ve]=te[1]-se[1],G[56+Ve]=te[0]-se[0]}function lt(G){for(var J=0;J<64;++J){var fe=G[0][J],Re=G[1][J],Ne=G[2][J];G[0][J]=fe+1.5747*Ne,G[1][J]=fe-.1873*Re-.4682*Ne,G[2][J]=fe+1.8556*Re}}function Ft(G,J,fe){for(var Re=0;Re<64;++Re)J[fe+Re]=kh.toHalfFloat(kt(G[Re]))}function kt(G){return G<=1?Math.sign(G)*Math.pow(Math.abs(G),2.2):Math.sign(G)*Math.pow(O,Math.abs(G)-1)}function Q(G){return new DataView(G.array.buffer,G.offset.value,G.size)}function V(G){var J=G.viewer.buffer.slice(G.offset.value,G.offset.value+G.size),fe=new Uint8Array(ke(J)),Re=new Uint8Array(fe.length);return ne(fe),Ze(fe,Re),new DataView(Re.buffer)}function Me(G){var J=G.array.slice(G.offset.value,G.offset.value+G.size),fe=Ly(J),Re=new Uint8Array(fe.length);return ne(fe),Ze(fe,Re),new DataView(Re.buffer)}function Ie(G){for(var J=G.viewer,fe={value:G.offset.value},Re=new Uint16Array(G.width*G.scanlineBlockSize*(G.channels*G.type)),Ne=new Uint8Array(8192),ze=0,ut=new Array(G.channels),z=0;z<G.channels;z++)ut[z]={},ut[z].start=ze,ut[z].end=ut[z].start,ut[z].nx=G.width,ut[z].ny=G.lines,ut[z].size=G.type,ze+=ut[z].nx*ut[z].ny*ut[z].size;var ee=rt(J,fe),se=rt(J,fe);if(se>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ee<=se)for(var z=0;z<se-ee+1;z++)Ne[z+ee]=ae(J,fe);var he=new Uint16Array(65536),te=P(Ne,he),Qe=ot(J,fe);yt(G.array,J,fe,Qe,Re,ze);for(var z=0;z<G.channels;++z)for(var Fe=ut[z],Ve=0;Ve<ut[z].size;++Ve)_t(Re,Fe.start+Ve,Fe.nx,Fe.size,Fe.ny,Fe.nx*Fe.size,te);zt(he,Re,ze);for(var We=0,ht=new Uint8Array(Re.buffer.byteLength),At=0;At<G.lines;At++)for(var gt=0;gt<G.channels;gt++){var Fe=ut[gt],Pt=Fe.nx*Fe.size,Zt=new Uint8Array(Re.buffer,Fe.end*2,Pt*2);ht.set(Zt,We),We+=Pt*2,Fe.end+=Pt}return new DataView(ht.buffer)}function je(G){var J=G.array.slice(G.offset.value,G.offset.value+G.size),fe=Ly(J);const Re=G.lines*G.channels*G.width,Ne=G.type==1?new Uint16Array(Re):new Uint32Array(Re);let ze=0,ut=0;const z=new Array(4);for(let ee=0;ee<G.lines;ee++)for(let se=0;se<G.channels;se++){let he=0;switch(G.type){case 1:z[0]=ze,z[1]=z[0]+G.width,ze=z[1]+G.width;for(let te=0;te<G.width;++te){const Qe=fe[z[0]++]<<8|fe[z[1]++];he+=Qe,Ne[ut]=he,ut++}break;case 2:z[0]=ze,z[1]=z[0]+G.width,z[2]=z[1]+G.width,ze=z[2]+G.width;for(let te=0;te<G.width;++te){const Qe=fe[z[0]++]<<24|fe[z[1]++]<<16|fe[z[2]++]<<8;he+=Qe,Ne[ut]=he,ut++}break}}return new DataView(Ne.buffer)}function Pe(G){var J=G.viewer,fe={value:G.offset.value},Re=new Uint8Array(G.width*G.lines*(G.channels*G.type*2)),Ne={version:Se(J,fe),unknownUncompressedSize:Se(J,fe),unknownCompressedSize:Se(J,fe),acCompressedSize:Se(J,fe),dcCompressedSize:Se(J,fe),rleCompressedSize:Se(J,fe),rleUncompressedSize:Se(J,fe),rleRawSize:Se(J,fe),totalAcUncompressedCount:Se(J,fe),totalDcUncompressedCount:Se(J,fe),acCompression:Se(J,fe)};if(Ne.version<2)throw"EXRLoader.parse: "+ki.compression+" version "+Ne.version+" is unsupported";for(var ze=new Array,ut=rt(J,fe)-2;ut>0;){var z=xt(J.buffer,fe),ee=ae(J,fe),se=ee>>2&3,he=(ee>>4)-1,te=new Int8Array([he])[0],Qe=ae(J,fe);ze.push({name:z,index:te,type:Qe,compression:se}),ut-=z.length+3}for(var Fe=ki.channels,Ve=new Array(G.channels),We=0;We<G.channels;++We){var ht=Ve[We]={},At=Fe[We];ht.name=At.name,ht.compression=0,ht.decoded=!1,ht.type=At.pixelType,ht.pLinear=At.pLinear,ht.width=G.width,ht.height=G.lines}for(var gt={idx:new Array(3)},Pt=0;Pt<G.channels;++Pt)for(var ht=Ve[Pt],We=0;We<ze.length;++We){var Zt=ze[We];ht.name==Zt.name&&(ht.compression=Zt.compression,Zt.index>=0&&(gt.idx[Zt.index]=Pt),ht.offset=Pt)}if(Ne.acCompressedSize>0)switch(Ne.acCompression){case 0:var Dt=new Uint16Array(Ne.totalAcUncompressedCount);yt(G.array,J,fe,Ne.acCompressedSize,Dt,Ne.totalAcUncompressedCount);break;case 1:var Xt=G.array.slice(fe.value,fe.value+Ne.totalAcUncompressedCount),vn=Ly(Xt),Dt=new Uint16Array(vn.buffer);fe.value+=Ne.totalAcUncompressedCount;break}if(Ne.dcCompressedSize>0){var Tt={array:G.array,offset:fe,size:Ne.dcCompressedSize},Rn=new Uint16Array(Me(Tt).buffer);fe.value+=Ne.dcCompressedSize}if(Ne.rleRawSize>0){var Xt=G.array.slice(fe.value,fe.value+Ne.rleCompressedSize),vn=Ly(Xt),rn=ke(vn.buffer);fe.value+=Ne.rleCompressedSize}for(var kn=0,yn=new Array(Ve.length),We=0;We<yn.length;++We)yn[We]=new Array;for(var Dn=0;Dn<G.lines;++Dn)for(var on=0;on<Ve.length;++on)yn[on].push(kn),kn+=Ve[on].width*G.type*2;Xe(gt,yn,Ve,Dt,Rn,Re);for(var We=0;We<Ve.length;++We){var ht=Ve[We];if(!ht.decoded)switch(ht.compression){case 2:for(var Ht=0,Wn=0,Dn=0;Dn<G.lines;++Dn){for(var mi=yn[We][Ht],En=0;En<ht.width;++En){for(var ci=0;ci<2*ht.type;++ci)Re[mi++]=rn[Wn+ci*ht.width*ht.height];Wn++}Ht++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Re.buffer)}function xt(G,J){for(var fe=new Uint8Array(G),Re=0;fe[J.value+Re]!=0;)Re+=1;var Ne=new TextDecoder().decode(fe.slice(J.value,J.value+Re));return J.value=J.value+Re+1,Ne}function pt(G,J,fe){var Re=new TextDecoder().decode(new Uint8Array(G).slice(J.value,J.value+fe));return J.value=J.value+fe,Re}function Bt(G,J){var fe=tt(G,J),Re=ot(G,J);return[fe,Re]}function Nt(G,J){var fe=ot(G,J),Re=ot(G,J);return[fe,Re]}function tt(G,J){var fe=G.getInt32(J.value,!0);return J.value=J.value+4,fe}function ot(G,J){var fe=G.getUint32(J.value,!0);return J.value=J.value+4,fe}function Ut(G,J){var fe=G[J.value];return J.value=J.value+1,fe}function ae(G,J){var fe=G.getUint8(J.value);return J.value=J.value+1,fe}const Se=function(G,J){let fe;return"getBigInt64"in DataView.prototype?fe=Number(G.getBigInt64(J.value,!0)):fe=G.getUint32(J.value+4,!0)+Number(G.getUint32(J.value,!0)<<32),J.value+=8,fe};function nt(G,J){var fe=G.getFloat32(J.value,!0);return J.value+=4,fe}function le(G,J){return kh.toHalfFloat(nt(G,J))}function be(G){var J=(G&31744)>>10,fe=G&1023;return(G>>15?-1:1)*(J?J===31?fe?NaN:1/0:Math.pow(2,J-15)*(1+fe/1024):6103515625e-14*(fe/1024))}function rt(G,J){var fe=G.getUint16(J.value,!0);return J.value+=2,fe}function bt(G,J){return be(rt(G,J))}function ct(G,J,fe,Re){for(var Ne=fe.value,ze=[];fe.value<Ne+Re-1;){var ut=xt(J,fe),z=tt(G,fe),ee=ae(G,fe);fe.value+=3;var se=tt(G,fe),he=tt(G,fe);ze.push({name:ut,pixelType:z,pLinear:ee,xSampling:se,ySampling:he})}return fe.value+=1,ze}function $e(G,J){var fe=nt(G,J),Re=nt(G,J),Ne=nt(G,J),ze=nt(G,J),ut=nt(G,J),z=nt(G,J),ee=nt(G,J),se=nt(G,J);return{redX:fe,redY:Re,greenX:Ne,greenY:ze,blueX:ut,blueY:z,whiteX:ee,whiteY:se}}function Mt(G,J){var fe=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Re=ae(G,J);return fe[Re]}function Ot(G,J){var fe=ot(G,J),Re=ot(G,J),Ne=ot(G,J),ze=ot(G,J);return{xMin:fe,yMin:Re,xMax:Ne,yMax:ze}}function un(G,J){var fe=["INCREASING_Y"],Re=ae(G,J);return fe[Re]}function an(G,J){var fe=nt(G,J),Re=nt(G,J);return[fe,Re]}function Fi(G,J){var fe=nt(G,J),Re=nt(G,J),Ne=nt(G,J);return[fe,Re,Ne]}function ni(G,J,fe,Re,Ne){if(Re==="string"||Re==="stringvector"||Re==="iccProfile")return pt(J,fe,Ne);if(Re==="chlist")return ct(G,J,fe,Ne);if(Re==="chromaticities")return $e(G,fe);if(Re==="compression")return Mt(G,fe);if(Re==="box2i")return Ot(G,fe);if(Re==="lineOrder")return un(G,fe);if(Re==="float")return nt(G,fe);if(Re==="v2f")return an(G,fe);if(Re==="v3f")return Fi(G,fe);if(Re==="int")return tt(G,fe);if(Re==="rational")return Bt(G,fe);if(Re==="timecode")return Nt(G,fe);if(Re==="preview")return fe.value+=Ne,"skipped";fe.value+=Ne}function Si(G,J,fe){const Re={};if(G.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Re.version=G.getUint8(4);const Ne=G.getUint8(5);Re.spec={singleTile:!!(Ne&2),longName:!!(Ne&4),deepFormat:!!(Ne&8),multiPart:!!(Ne&16)},fe.value=8;for(var ze=!0;ze;){var ut=xt(J,fe);if(ut==0)ze=!1;else{var z=xt(J,fe),ee=ot(G,fe),se=ni(G,J,fe,z,ee);se===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${z}'.`):Re[ut]=se}}if((Ne&-5)!=0)throw console.error("EXRHeader:",Re),"THREE.EXRLoader: provided file is currently unsupported.";return Re}function li(G,J,fe,Re,Ne){const ze={size:0,viewer:J,array:fe,offset:Re,width:G.dataWindow.xMax-G.dataWindow.xMin+1,height:G.dataWindow.yMax-G.dataWindow.yMin+1,channels:G.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:G.channels[0].pixelType,uncompress:null,getter:null,format:null,[tg?"colorSpace":"encoding"]:null};switch(G.compression){case"NO_COMPRESSION":ze.lines=1,ze.uncompress=Q;break;case"RLE_COMPRESSION":ze.lines=1,ze.uncompress=V;break;case"ZIPS_COMPRESSION":ze.lines=1,ze.uncompress=Me;break;case"ZIP_COMPRESSION":ze.lines=16,ze.uncompress=Me;break;case"PIZ_COMPRESSION":ze.lines=32,ze.uncompress=Ie;break;case"PXR24_COMPRESSION":ze.lines=16,ze.uncompress=je;break;case"DWAA_COMPRESSION":ze.lines=32,ze.uncompress=Pe;break;case"DWAB_COMPRESSION":ze.lines=256,ze.uncompress=Pe;break;default:throw"EXRLoader.parse: "+G.compression+" is unsupported"}if(ze.scanlineBlockSize=ze.lines,ze.type==1)switch(Ne){case Pi:ze.getter=bt,ze.inputSize=2;break;case Ts:ze.getter=rt,ze.inputSize=2;break}else if(ze.type==2)switch(Ne){case Pi:ze.getter=nt,ze.inputSize=4;break;case Ts:ze.getter=le,ze.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ze.type+" for "+G.compression+".";ze.blockCount=(G.dataWindow.yMax+1)/ze.scanlineBlockSize;for(var ut=0;ut<ze.blockCount;ut++)Se(J,Re);ze.outputChannels=ze.channels==3?4:ze.channels;const z=ze.width*ze.height*ze.outputChannels;switch(Ne){case Pi:ze.byteArray=new Float32Array(z),ze.channels<ze.outputChannels&&ze.byteArray.fill(1,0,z);break;case Ts:ze.byteArray=new Uint16Array(z),ze.channels<ze.outputChannels&&ze.byteArray.fill(15360,0,z);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ne);break}return ze.bytesPerLine=ze.width*ze.inputSize*ze.channels,ze.outputChannels==4?ze.format=Zi:ze.format=Yg,tg?ze.colorSpace="srgb-linear":ze.encoding=3e3,ze}const as=new DataView(e),Bs=new Uint8Array(e),Xa={value:0},ki=Si(as,e,Xa),Kt=li(ki,as,Bs,Xa,this.type),ys={value:0},Zn={R:0,G:1,B:2,A:3,Y:0};for(let G=0;G<Kt.height/Kt.scanlineBlockSize;G++){const J=ot(as,Xa);Kt.size=ot(as,Xa),Kt.lines=J+Kt.scanlineBlockSize>Kt.height?Kt.height-J:Kt.scanlineBlockSize;const Re=Kt.size<Kt.lines*Kt.bytesPerLine?Kt.uncompress(Kt):Q(Kt);Xa.value+=Kt.size;for(let Ne=0;Ne<Kt.scanlineBlockSize;Ne++){const ze=Ne+G*Kt.scanlineBlockSize;if(ze>=Kt.height)break;for(let ut=0;ut<Kt.channels;ut++){const z=Zn[ki.channels[ut].name];for(let ee=0;ee<Kt.width;ee++){ys.value=(Ne*(Kt.channels*Kt.width)+ut*Kt.width+ee)*Kt.inputSize;const se=(Kt.height-1-ze)*(Kt.width*Kt.outputChannels)+ee*Kt.outputChannels+z;Kt.byteArray[se]=Kt.getter(Re,ys)}}}}return{header:ki,width:Kt.width,height:Kt.height,data:Kt.byteArray,format:Kt.format,[tg?"colorSpace":"encoding"]:Kt[tg?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,s){function r(c,h){tg?c.colorSpace=h.colorSpace:c.encoding=h.encoding,c.minFilter=Kn,c.magFilter=Kn,c.generateMipmaps=!1,c.flipY=!1,t&&t(c,h)}return super.load(e,r,n,s)}}const r1=new WeakMap;class KG extends Xs{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,s){const r=new Vs(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,c=>{const h={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(c,h).then(t).catch(s)},n,s)}decodeDracoFile(e,t,n,s){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const d in t.attributeTypes){const p=t.attributeTypes[d];p.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[d]=p.name)}const n=JSON.stringify(t);if(r1.has(e)){const d=r1.get(e);if(d.key===n)return d.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,c=e.byteLength,h=this._getWorker(r,c).then(d=>(s=d,new Promise((p,y)=>{s._callbacks[r]={resolve:p,reject:y},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(d=>this._createGeometry(d.geometry));return h.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),r1.set(e,{key:n,promise:h}),h}_createGeometry(e){const t=new pn;e.index&&t.setIndex(new jn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n],r=s.name,c=s.array,h=s.itemSize;t.setAttribute(r,new jn(c,h))}return t}_loadLibrary(e,t){const n=new Vs(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((s,r)=>{n.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const s=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const r=ZG.toString(),c=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([c]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const c=r.data;switch(c.type){case"decode":s._callbacks[c.id].resolve(c);break;case"error":s._callbacks[c.id].reject(c);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+c.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function ZG(){let i,e;onmessage=function(c){const h=c.data;switch(h.type){case"init":i=h.decoderConfig,e=new Promise(function(y){i.onModuleLoaded=function(x){y({draco:x})},DracoDecoderModule(i)});break;case"decode":const d=h.buffer,p=h.taskConfig;e.then(y=>{const x=y.draco,b=new x.Decoder,_=new x.DecoderBuffer;_.Init(new Int8Array(d),d.byteLength);try{const E=t(x,b,_,p),R=E.attributes.map(T=>T.array.buffer);E.index&&R.push(E.index.array.buffer),self.postMessage({type:"decode",id:h.id,geometry:E},R)}catch(E){console.error(E),self.postMessage({type:"error",id:h.id,error:E.message})}finally{x.destroy(_),x.destroy(b)}});break}};function t(c,h,d,p){const y=p.attributeIDs,x=p.attributeTypes;let b,_;const E=h.GetEncodedGeometryType(d);if(E===c.TRIANGULAR_MESH)b=new c.Mesh,_=h.DecodeBufferToMesh(d,b);else if(E===c.POINT_CLOUD)b=new c.PointCloud,_=h.DecodeBufferToPointCloud(d,b);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!_.ok()||b.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+_.error_msg());const R={index:null,attributes:[]};for(const T in y){const M=self[x[T]];let B,N;if(p.useUniqueIDs)N=y[T],B=h.GetAttributeByUniqueId(b,N);else{if(N=h.GetAttributeId(b,c[y[T]]),N===-1)continue;B=h.GetAttribute(b,N)}R.attributes.push(s(c,h,b,T,M,B))}return E===c.TRIANGULAR_MESH&&(R.index=n(c,h,b)),c.destroy(b),R}function n(c,h,d){const y=d.num_faces()*3,x=y*4,b=c._malloc(x);h.GetTrianglesUInt32Array(d,x,b);const _=new Uint32Array(c.HEAPF32.buffer,b,y).slice();return c._free(b),{array:_,itemSize:1}}function s(c,h,d,p,y,x){const b=x.num_components(),E=d.num_points()*b,R=E*y.BYTES_PER_ELEMENT,T=r(c,y),M=c._malloc(R);h.GetAttributeDataArrayForAllPoints(d,x,T,R,M);const B=new y(c.HEAPF32.buffer,M,E).slice();return c._free(M),{name:p,array:B,itemSize:b}}function r(c,h){switch(h){case Float32Array:return c.DT_FLOAT32;case Int8Array:return c.DT_INT8;case Int16Array:return c.DT_INT16;case Int32Array:return c.DT_INT32;case Uint8Array:return c.DT_UINT8;case Uint16Array:return c.DT_UINT16;case Uint32Array:return c.DT_UINT32}}}let Py;const o1=()=>{if(Py)return Py;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=i;WebAssembly.validate(t)&&(s=e);let r;const c=WebAssembly.instantiate(h(s),{}).then(x=>{r=x.instance,r.exports.__wasm_call_ctors()});function h(x){const b=new Uint8Array(x.length);for(let E=0;E<x.length;++E){const R=x.charCodeAt(E);b[E]=R>96?R-71:R>64?R-65:R>47?R+4:R>46?63:62}let _=0;for(let E=0;E<x.length;++E)b[_++]=b[E]<60?n[b[E]]:(b[E]-60)*64+b[++E];return b.buffer.slice(0,_)}function d(x,b,_,E,R,T){const M=r.exports.sbrk,B=_+3&-4,N=M(B*E),D=M(R.length),L=new Uint8Array(r.exports.memory.buffer);L.set(R,D);const I=x(N,_,E,D,R.length);if(I===0&&T&&T(N,B,E),b.set(L.subarray(N,N+_*E)),M(N-M(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const p={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},y={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Py={ready:c,supported:!0,decodeVertexBuffer(x,b,_,E,R){d(r.exports.meshopt_decodeVertexBuffer,x,b,_,E,r.exports[p[R]])},decodeIndexBuffer(x,b,_,E){d(r.exports.meshopt_decodeIndexBuffer,x,b,_,E)},decodeIndexSequence(x,b,_,E){d(r.exports.meshopt_decodeIndexSequence,x,b,_,E)},decodeGltfBuffer(x,b,_,E,R,T){d(r.exports[y[R]],x,b,_,E,r.exports[p[T]])}},Py};let Fy=null,V3="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function X3(i=!0,e=!0,t){return n=>{t&&t(n),i&&(Fy||(Fy=new KG),Fy.setDecoderPath(typeof i=="string"?i:V3),n.setDRACOLoader(Fy)),e&&n.setMeshoptDecoder(typeof o1=="function"?o1():o1)}}const u0=(i,e,t,n)=>lc(xM,i,X3(e,t,n));u0.preload=(i,e,t,n)=>lc.preload(xM,i,X3(e,t,n));u0.clear=i=>lc.clear(xM,i);u0.setDecoderPath=i=>{V3=i};const QG=Ae.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:s=!0,keyEvents:r=!1,onChange:c,onStart:h,onEnd:d,...p},y)=>{const x=zs(I=>I.invalidate),b=zs(I=>I.camera),_=zs(I=>I.gl),E=zs(I=>I.events),R=zs(I=>I.setEvents),T=zs(I=>I.set),M=zs(I=>I.get),B=zs(I=>I.performance),N=e||b,D=n||E.connected||_.domElement,L=Ae.useMemo(()=>new fG(N),[N]);return zb(()=>{L.enabled&&L.update()},-1),Ae.useEffect(()=>(r&&L.connect(r===!0?D:r),L.connect(D),()=>void L.dispose()),[r,D,t,L,x]),Ae.useEffect(()=>{const I=O=>{x(),t&&B.regress(),c&&c(O)},j=O=>{h&&h(O)},k=O=>{d&&d(O)};return L.addEventListener("change",I),L.addEventListener("start",j),L.addEventListener("end",k),()=>{L.removeEventListener("start",j),L.removeEventListener("end",k),L.removeEventListener("change",I)}},[c,h,d,L,x,R]),Ae.useEffect(()=>{if(i){const I=M().controls;return T({controls:L}),()=>T({controls:I})}},[i,L]),Ae.createElement("primitive",zg({ref:y,object:L,enableDamping:s},p))}),Y3=(i,e,t)=>{let n;switch(i){case Ea:n=new Uint8ClampedArray(e*t*4);break;case Ts:n=new Uint16Array(e*t*4);break;case xl:n=new Uint32Array(e*t*4);break;case cb:n=new Int8Array(e*t*4);break;case ub:n=new Int16Array(e*t*4);break;case Xg:n=new Int32Array(e*t*4);break;case Pi:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let Hy;const $G=(i,e,t,n)=>{if(Hy!==void 0)return Hy;const s=new Fr(1,1,n);e.setRenderTarget(s);const r=new Bi(new Eu,new ka({color:16777215}));e.render(r,t),e.setRenderTarget(null);const c=Y3(i,s.width,s.height);return e.readRenderTargetPixels(s,0,0,s.width,s.height,c),s.dispose(),r.geometry.dispose(),r.material.dispose(),Hy=c[0]!==0,Hy};class bM{constructor(e){var t,n,s,r,c,h,d,p,y,x,b,_,E,R,T,M;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(N){throw this._renderer.setRenderTarget(null),N}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const B={format:Zi,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps:!1,magFilter:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.magFilter)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.magFilter:Kn,minFilter:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.minFilter)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.minFilter:Kn,samples:((y=e.renderTargetOptions)===null||y===void 0?void 0:y.samples)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.samples:void 0,wrapS:((b=e.renderTargetOptions)===null||b===void 0?void 0:b.wrapS)!==void 0?(_=e.renderTargetOptions)===null||_===void 0?void 0:_.wrapS:Ki,wrapT:((E=e.renderTargetOptions)===null||E===void 0?void 0:E.wrapT)!==void 0?(R=e.renderTargetOptions)===null||R===void 0?void 0:R.wrapT:Ki};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=bM.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Jg,this._camera=new Ir,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!$G(this._type,this._renderer,this._camera,B)){let N;switch(this._type){case Ts:N=this._renderer.extensions.has("EXT_color_buffer_float")?Pi:void 0;break}N!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Pi}`),this._type=N):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Bi(new Eu,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Fr(this.width,this.height,B),this._renderTarget.texture.mapping=((T=e.renderTargetOptions)===null||T===void 0?void 0:T.mapping)!==void 0?(M=e.renderTargetOptions)===null||M===void 0?void 0:M.mapping:xu}static instantiateRenderer(){const e=new JS;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=Y3(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new So(this.toArray(),this.width,this.height,Zi,this._type,e?.mapping||xu,e?.wrapS||Ki,e?.wrapT||Ki,e?.magFilter||Kn,e?.minFilter||Kn,e?.anisotropy||1,Mo);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Va&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof ti&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof ti&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const ej=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,tj=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class nj extends Va{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:s,gainMapMax:r,maxDisplayBoost:c,hdrCapacityMin:h,hdrCapacityMax:d,sdr:p,gainMap:y}){super({name:"GainMapDecoderMaterial",vertexShader:ej,fragmentShader:tj,uniforms:{sdr:{value:p},gainMap:{value:y},gamma:{value:new K(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new K().fromArray(t)},offsetSdr:{value:new K().fromArray(n)},gainMapMin:{value:new K().fromArray(s)},gainMapMax:{value:new K().fromArray(r)},weightFactor:{value:(Math.log2(c)-h)/(d-h)}},blending:ml,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=c,this._hdrCapacityMin=h,this._hdrCapacityMax=d,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class q3 extends Error{}class W3 extends Error{}const ng=(i,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(i);if(n)return n[1];const s=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(i);if(s){const r=s[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return r&&r.length===3?r.map(c=>c.replace(/<\/?rdf:li>/g,"")):s[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},ij=i=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(i):e=i.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),s=e.slice(t,n+10);try{const r=ng(s,"hdrgm:GainMapMin","0"),c=ng(s,"hdrgm:GainMapMax"),h=ng(s,"hdrgm:Gamma","1"),d=ng(s,"hdrgm:OffsetSDR","0.015625"),p=ng(s,"hdrgm:OffsetHDR","0.015625"),y=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(s),x=y?y[1]:"0",b=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(s);if(!b)throw new Error("Incomplete gainmap metadata");const _=b[1];return{gainMapMin:Array.isArray(r)?r.map(E=>parseFloat(E)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(c)?c.map(E=>parseFloat(E)):[parseFloat(c),parseFloat(c),parseFloat(c)],gamma:Array.isArray(h)?h.map(E=>parseFloat(E)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetSdr:Array.isArray(d)?d.map(E=>parseFloat(E)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(p)?p.map(E=>parseFloat(E)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(x),hdrCapacityMax:parseFloat(_)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class sj{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const s=this.options.debug,r=new DataView(e.buffer);if(r.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const c=r.byteLength;let h=2,d=0,p;for(;h<c;){if(++d>250){n(new Error(`Found no marker after ${d} loops `));return}if(r.getUint8(h)!==255){n(new Error(`Not a valid marker at offset 0x${h.toString(16)}, found: 0x${r.getUint8(h).toString(16)}`));return}if(p=r.getUint8(h+1),s&&console.log(`Marker: ${p.toString(16)}`),p===226){s&&console.log("Found APP2 marker (0xffe2)");const y=h+4;if(r.getUint32(y)===1297106432){const x=y+4;let b;if(r.getUint16(x)===18761)b=!1;else if(r.getUint16(x)===19789)b=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(r.getUint16(x+2,!b)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const _=r.getUint32(x+4,!b);if(_<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const E=x+_,R=r.getUint16(E,!b),T=E+2;let M=0;for(let L=T;L<T+12*R;L+=12)r.getUint16(L,!b)===45057&&(M=r.getUint32(L+8,!b));const N=E+2+R*12+4,D=[];for(let L=N;L<N+M*16;L+=16){const I={MPType:r.getUint32(L,!b),size:r.getUint32(L+4,!b),dataOffset:r.getUint32(L+8,!b),dependantImages:r.getUint32(L+12,!b),start:-1,end:-1,isFII:!1};I.dataOffset?(I.start=x+I.dataOffset,I.isFII=!1):(I.start=0,I.isFII=!0),I.end=I.start+I.size,D.push(I)}if(this.options.extractNonFII&&D.length){const L=new Blob([r]),I=[];for(const j of D){if(j.isFII&&!this.options.extractFII)continue;const k=L.slice(j.start,j.end+1,"image/jpeg");I.push(k)}t(I)}}}h+=2+r.getUint16(h+2)}})}}const aj=async i=>{const e=ij(i);if(!e)throw new W3("Gain map XMP metadata not found");const n=await new sj({extractFII:!0,extractNonFII:!0}).extract(i);if(n.length!==2)throw new q3("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},hw=i=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=s=>{t(s)},n.src=URL.createObjectURL(i)});class J3 extends Xs{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Pb}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new nj({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new ti,sdr:new ti});return new bM({width:16,height:16,type:Ts,colorSpace:Mo,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,s){const r=s?new Blob([s],{type:"image/jpeg"}):void 0,c=new Blob([n],{type:"image/jpeg"});let h,d,p=!1;if(typeof createImageBitmap>"u"){const b=await Promise.all([r?hw(r):Promise.resolve(void 0),hw(c)]);d=b[0],h=b[1],p=!0}else{const b=await Promise.all([r?createImageBitmap(r,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(c,{imageOrientation:"flipY"})]);d=b[0],h=b[1]}const y=new ti(d||new ImageData(2,2),xu,Ki,Ki,Kn,b1,Zi,Ea,1,Mo);y.flipY=p,y.needsUpdate=!0;const x=new ti(h,xu,Ki,Ki,Kn,b1,Zi,Ea,1,Gs);x.flipY=p,x.needsUpdate=!0,e.width=h.width,e.height=h.height,e.material.gainMap=y,e.material.sdr=x,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class rj extends J3{load([e,t,n],s,r,c){const h=this.prepareQuadRenderer();let d,p,y;const x=async()=>{if(d&&p&&y){try{await this.render(h,y,d,p)}catch(O){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof c=="function"&&c(O),h.disposeOnDemandRenderer();return}typeof s=="function"&&s(h),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),h.disposeOnDemandRenderer()}};let b=!0,_=0,E=0,R=!0,T=0,M=0,B=!0,N=0,D=0;const L=()=>{if(typeof r=="function"){const O=_+T+N,P=E+M+D,Y=b&&R&&B;r(new ProgressEvent("progress",{lengthComputable:Y,loaded:P,total:O}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const I=new Vs(this._internalLoadingManager);I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(e,async O=>{if(typeof O=="string")throw new Error("Invalid sdr buffer");d=O,await x()},O=>{b=O.lengthComputable,E=O.loaded,_=O.total,L()},O=>{this.manager.itemError(e),typeof c=="function"&&c(O)});const j=new Vs(this._internalLoadingManager);j.setResponseType("arraybuffer"),j.setRequestHeader(this.requestHeader),j.setPath(this.path),j.setWithCredentials(this.withCredentials),j.load(t,async O=>{if(typeof O=="string")throw new Error("Invalid gainmap buffer");p=O,await x()},O=>{R=O.lengthComputable,M=O.loaded,T=O.total,L()},O=>{this.manager.itemError(t),typeof c=="function"&&c(O)});const k=new Vs(this._internalLoadingManager);return k.setRequestHeader(this.requestHeader),k.setPath(this.path),k.setWithCredentials(this.withCredentials),k.load(n,async O=>{if(typeof O!="string")throw new Error("Invalid metadata string");y=JSON.parse(O),await x()},O=>{B=O.lengthComputable,D=O.loaded,N=O.total,L()},O=>{this.manager.itemError(n),typeof c=="function"&&c(O)}),h}}class oj extends J3{load(e,t,n,s){const r=this.prepareQuadRenderer(),c=new Vs(this._internalLoadingManager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(this.withCredentials),this.manager.itemStart(e),c.load(e,async h=>{if(typeof h=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const d=new Uint8Array(h);let p,y,x;try{const b=await aj(d);p=b.sdr,y=b.gainMap,x=b.metadata}catch(b){if(b instanceof W3||b instanceof q3)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),x={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=d;else throw b}try{await this.render(r,x,p,y)}catch(b){this.manager.itemError(e),typeof s=="function"&&s(b),r.disposeOnDemandRenderer();return}typeof t=="function"&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()},n,h=>{this.manager.itemError(e),typeof s=="function"&&s(h)}),r}}const Gg={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},K3="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Wd=i=>Array.isArray(i),_M=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Jb({files:i=_M,path:e="",preset:t=void 0,colorSpace:n=void 0,extensions:s}={}){t&&(AM(t),i=Gg[t],e=K3);const r=Wd(i),{extension:c,isCubemap:h}=SM(i),d=MM(c);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+i);const p=zs(_=>_.gl);Ae.useLayoutEffect(()=>{if(c!=="webp"&&c!=="jpg"&&c!=="jpeg")return;function _(){lc.clear(d,r?[i]:i)}p.domElement.addEventListener("webglcontextlost",_,{once:!0})},[i,p.domElement]);const y=lc(d,r?[i]:i,_=>{(c==="webp"||c==="jpg"||c==="jpeg")&&_.setRenderer(p),_.setPath==null||_.setPath(e),s&&s(_)});let x=r?y[0]:y;if(c==="jpg"||c==="jpeg"||c==="webp"){var b;x=(b=x.renderTarget)==null?void 0:b.texture}return x.mapping=h?yl:ep,x.colorSpace=n??(h?"srgb":"srgb-linear"),x}const lj={files:_M,path:"",preset:void 0,extensions:void 0};Jb.preload=i=>{const e={...lj,...i};let{files:t,path:n=""}=e;const{preset:s,extensions:r}=e;s&&(AM(s),t=Gg[s],n=K3);const{extension:c}=SM(t);if(c==="webp"||c==="jpg"||c==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const h=MM(c);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+t);lc.preload(h,Wd(t)?[t]:t,d=>{d.setPath==null||d.setPath(n),r&&r(d)})};const cj={files:_M,preset:void 0};Jb.clear=i=>{const e={...cj,...i};let{files:t}=e;const{preset:n}=e;n&&(AM(n),t=Gg[n]);const{extension:s}=SM(t),r=MM(s);if(!r)throw new Error("useEnvironment: Unrecognized file extension: "+t);lc.clear(r,Wd(t)?[t]:t)};function AM(i){if(!(i in Gg))throw new Error("Preset must be one of: "+Object.keys(Gg).join(", "))}function SM(i){var e;const t=Wd(i)&&i.length===6,n=Wd(i)&&i.length===3&&i.some(c=>c.endsWith("json")),s=Wd(i)?i[0]:i;return{extension:t?"cube":n?"webp":s.startsWith("data:application/exr")?"exr":s.startsWith("data:application/hdr")?"hdr":s.startsWith("data:image/jpeg")?"jpg":(e=s.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function MM(i){return i==="cube"?uR:i==="hdr"?WG:i==="exr"?JG:i==="jpg"||i==="jpeg"?oj:i==="webp"?rj:null}const uj=i=>i.current&&i.current.isScene,hj=i=>uj(i)?i.current:i;function EM(i,e,t,n,s={}){var r,c,h,d;s={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...s};const p=hj(e||t),y=p.background,x=p.environment,b={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(r=(c=p.backgroundRotation)==null||c.clone==null?void 0:c.clone())!==null&&r!==void 0?r:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(h=(d=p.environmentRotation)==null||d.clone==null?void 0:d.clone())!==null&&h!==void 0?h:[0,0,0]};return i!=="only"&&(p.environment=n),i&&(p.background=n),xo(p,s),()=>{i!=="only"&&(p.environment=x),i&&(p.background=y),xo(p,b)}}function TM({scene:i,background:e=!1,map:t,...n}){const s=zs(r=>r.scene);return Ae.useLayoutEffect(()=>{if(t)return EM(e,i,s,t,n)}),null}function Z3({background:i=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:c,environmentRotation:h,...d}){const p=Jb(d),y=zs(x=>x.scene);return Ae.useLayoutEffect(()=>EM(i,e,y,p,{backgroundBlurriness:t??n,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:c,environmentRotation:h})),Ae.useEffect(()=>()=>{p.dispose()},[p]),null}function fj({children:i,near:e=.1,far:t=1e3,resolution:n=256,frames:s=1,map:r,background:c=!1,blur:h,backgroundBlurriness:d,backgroundIntensity:p,backgroundRotation:y,environmentIntensity:x,environmentRotation:b,scene:_,files:E,path:R,preset:T=void 0,extensions:M}){const B=zs(k=>k.gl),N=zs(k=>k.scene),D=Ae.useRef(null),[L]=Ae.useState(()=>new Jg),I=Ae.useMemo(()=>{const k=new vS(n);return k.texture.type=Ts,k},[n]);Ae.useEffect(()=>()=>{I.dispose()},[I]),Ae.useLayoutEffect(()=>{if(s===1){const k=B.autoClear;B.autoClear=!0,D.current.update(B,L),B.autoClear=k}return EM(c,_,N,I.texture,{backgroundBlurriness:h??d,backgroundIntensity:p,backgroundRotation:y,environmentIntensity:x,environmentRotation:b})},[i,L,I.texture,_,N,c,s,B]);let j=1;return zb(()=>{if(s===1/0||j<s){const k=B.autoClear;B.autoClear=!0,D.current.update(B,L),B.autoClear=k,j++}}),Ae.createElement(Ae.Fragment,null,oz(Ae.createElement(Ae.Fragment,null,i,Ae.createElement("cubeCamera",{ref:D,args:[e,t,I]}),E||T?Ae.createElement(Z3,{background:!0,files:E,preset:T,path:R,extensions:M}):r?Ae.createElement(TM,{background:!0,map:r,extensions:M}):null),L))}function dj(i){var e,t,n,s;const r=Jb(i),c=i.map||r;Ae.useMemo(()=>qR({GroundProjectedEnvImpl:sG}),[]),Ae.useEffect(()=>()=>{r.dispose()},[r]);const h=Ae.useMemo(()=>[c],[c]),d=(e=i.ground)==null?void 0:e.height,p=(t=i.ground)==null?void 0:t.radius,y=(n=(s=i.ground)==null?void 0:s.scale)!==null&&n!==void 0?n:1e3;return Ae.createElement(Ae.Fragment,null,Ae.createElement(TM,zg({},i,{map:c})),Ae.createElement("groundProjectedEnvImpl",{args:h,scale:y,height:d,radius:p}))}function pj(i){return i.ground?Ae.createElement(dj,i):i.map?Ae.createElement(TM,i):i.children?Ae.createElement(fj,i):Ae.createElement(Z3,i)}function mj({path:i,scale:e=1}){const t=u0(i);return g.jsx("primitive",{object:t.scene,scale:e})}const gj=Ae.forwardRef(({disableControls:i=!1,...e},t)=>{const{camera:n,gl:s}=zs(),r=new K(-3,0,-3),c=new K(3,4,3);return g.jsx(QG,{ref:t,args:[n,s.domElement],enablePan:!i,enableZoom:!i,enableRotate:!0,screenSpacePanning:!0,enableDamping:!0,dampingFactor:.025,zoomSpeed:.8,enableDollyZoom:!1,panSpeed:.6,rotateSpeed:.5,minDistance:.6,maxDistance:10,onChange:()=>{if(!t?.current)return;const h=t.current.target;h.x=Math.max(r.x,Math.min(c.x,h.x)),h.y=Math.max(r.y,Math.min(c.y,h.y)),h.z=Math.max(r.z,Math.min(c.z,h.z))},...e})});function vj({hotspots:i,onHotspotClick:e,activeHotspot:t,showAllLabels:n}){const s=document.getElementById("overlay-root");return g.jsx(g.Fragment,{children:i.map(r=>{const c=t?.id===r.id,h=!!t,d=r.distance;let p=1;return h&&(p=.2),g.jsx(O3,{position:r.position,distanceFactor:d,portal:s,wrapperClass:"drei-html-container",className:"drei-html-content",children:g.jsxs("div",{className:"relative flex flex-col items-center group",children:[g.jsx("div",{className:`
                  absolute bottom-full mb-2
                  font-NSansJP text-black shadow-lg
                  pointer-events-none whitespace-nowrap text-center
                  ${n?"opacity-90":c?"opacity-0":"opacity-0 group-hover:opacity-90"}
                  transition-all duration-400
                  text-[14px] px-2 py-1 bg-white tracking-widest rounded
                `,children:r.label}),g.jsx("div",{onClick:()=>e(r),className:`
                  w-6 h-6 bg-blue-400 rounded-full 
                  border-2 border-white shadow-lg cursor-pointer
                  hover:scale-125
                  hover:bg-orange-400
                  transition-all duration-300
                  ${c?"bg-orange-500":"bg-blue-500"}
                `,style:{opacity:p}})]})},r.id)})})}function yj({onClose:i,closing:e}){const[t,n]=Ae.useState(!1);return Ae.useEffect(()=>{const s=requestAnimationFrame(()=>n(!0));return()=>cancelAnimationFrame(s)},[]),g.jsxs("div",{className:`
        bg-black/55 text-white p-4 rounded-xl shadow-lg w-64
        select-none backdrop-blur-sm
        transition-all duration-300
        ${e?"opacity-0 scale-95":t?"opacity-100 scale-100":"opacity-0 scale-95"}
      `,children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("h2",{className:"text-xl font-bold",children:"Controls"}),g.jsx("div",{onClick:i,className:"transition-transform duration-150 hover:scale-125 active:scale-95",children:""})]}),g.jsxs("ul",{className:"text-sm space-y-1",children:[g.jsxs("li",{children:[g.jsx("strong",{children:"Left-click:"})," Orbit"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Right-click:"})," Pan"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Scroll:"})," Zoom"]}),g.jsxs("li",{children:[g.jsx("strong",{children:g.jsx("u",{children:"Click"})})," on a hotspot for more info"]})]})]})}const xj=()=>g.jsx(bj,{children:g.jsxs("div",{className:"like-button",children:[g.jsx("input",{className:"on",id:"heart",type:"checkbox"}),g.jsxs("label",{className:"like",htmlFor:"heart",children:[g.jsx("svg",{className:"like-icon",fillRule:"nonzero",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"})}),g.jsx("span",{className:"like-text",children:"Likes"})]}),g.jsx("span",{className:"like-count one",children:"68"}),g.jsx("span",{className:"like-count two",children:"69"})]})}),bj=of.div`
  #heart {
    display: none;
  }

  .like-button {
    position: relative;
    cursor: pointer;
    display: flex;
    height: 48px;
    width: 136px;
    border-radius: 16px;
    border: none;
    background-color: #1d1d1d;
    overflow: hidden;
    // box-shadow:
    //   inset -2px -2px 5px rgba(255, 255, 255, 0.2),
    //   inset 2px 2px 5px rgba(0, 0, 0, 0.1),
    //   4px 4px 10px rgba(0, 0, 0, 0.4),
    //   -2px -2px 8px rgba(255, 255, 255, 0.1);
  }

  .like {
    width: 70%;
    height: 100%;
    display: flex;
    cursor: pointer;
    align-items: center;
    justify-content: space-evenly;
  }

  .like-icon {
    fill: #505050;
    height: 28px;
    width: 28px;
  }

  .like-text {
    color: #fcfcfc;
    font-size: 16px;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  }

  .like-count {
    position: absolute;
    right: 0;
    width: 30%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #717070;
    font-size: 16px;
    border-left: 2px solid #4e4e4e;
    transition: all 0.5s ease-out;
  }

  .like-count.two {
    transform: translateY(40px);
  }

  .on:checked ~ .like .like-icon {
    fill: #fc4e4e;
    animation: enlarge 0.2s ease-out 1;
    transition: all 0.2s ease-out;
  }

  .on:checked ~ .like-count.two {
    transform: translateX(0);
    color: #fcfcfc;
  }

  .on:checked ~ .like-count.one {
    transform: translateY(-40px);
  }

  @keyframes enlarge {
    0% {
      transform: scale(0.5);
    }
    100% {
      transform: scale(1.2);
    }
  }`,_j=()=>{const[i,e]=Ae.useState(!1),[t,n]=Ae.useState(!1),[s,r]=Ae.useState(!1),[c,h]=Ae.useState(!1),[d,p]=Ae.useState(!1),[y,x]=Ae.useState(!1),b=300,_=["This resource has improved my knowledge of wheelchair fitting","The 3D model is easy to navigate","The information is easy to understand","The website layout is visually appealing","Overall, I am satisfied with the experience"],E=["Strongly Disagree","Disagree","Neutral","Agree","Strongly Agree"],[R,T]=Ae.useState(Array(_.length).fill(null));Ae.useEffect(()=>{const L=setInterval(()=>{r(!0),setTimeout(()=>r(!1),600)},4e3);return()=>clearInterval(L)},[]);const M=()=>{c||(e(!0),requestAnimationFrame(()=>n(!0)))},B=()=>{n(!1),setTimeout(()=>e(!1),b)},N=(L,I)=>{const j=[...R];j[L]=I,T(j)},D=()=>{R.every(L=>L!==null)&&(h(!0),x(!0),requestAnimationFrame(()=>p(!0)),setTimeout(()=>{p(!1),setTimeout(()=>x(!1),700),B()},2500))};return g.jsxs(g.Fragment,{children:[!i&&!c&&g.jsx("div",{onClick:M,className:`fixed hover:bg-blue-600 text-xl bottom-5 -right-16 transform -translate-x-1/2 bg-blue-500 text-white font-Pixelmono px-6 py-3 rounded-lg cursor-pointer shadow-lg transition-transform duration-300 ${s?"animate-wiggle":""}`,children:"Give Feedback"}),i&&!c&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{backgroundColor:"rgba(0,0,0,0.5)",transition:`opacity ${b}ms`,opacity:t?1:0},children:g.jsxs("div",{onClick:L=>L.stopPropagation(),className:"bg-white p-8 rounded-xl w-200 max-w-full shadow-xl transition-all duration-300 ease-in-out",style:{opacity:t?1:0,transform:t?"translateY(0)":"translateY(20px)"},children:[g.jsx("button",{onClick:B,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-800 font-bold text-xl",children:""}),g.jsx("h2",{className:"text-2xl font-bold text-black mb-4",children:"Feedback Survey"}),g.jsx("p",{className:"text-gray-700 mb-6",children:"Please provide your feedback using the scale below"}),g.jsxs("div",{className:"grid grid-cols-6 text-center font-semibold mb-4",children:[g.jsx("div",{})," ",E.map((L,I)=>g.jsx("div",{className:"text-xs px-1 text-black",children:L},I))]}),g.jsx("div",{className:"flex flex-col gap-4",children:_.map((L,I)=>g.jsxs("div",{className:"grid grid-cols-6 items-center gap-2",children:[g.jsx("div",{className:"text-left text-sm pr-2 text-black",children:L}),[0,1,2,3,4].map(j=>g.jsx("div",{onClick:()=>N(I,j),className:"flex justify-center items-center w-full h-8 cursor-pointer transition-transform duration-200",children:g.jsx("div",{className:`w-4 h-4 rounded-full border border-gray-400 transition-all duration-200 transform ${R[I]===j?"bg-blue-500":"bg-gray-300"} hover:scale-125`})},j))]},I))}),g.jsx("div",{className:"mt-10 mx-auto",children:g.jsx(xj,{})}),g.jsx("div",{onClick:D,className:"mt-6 w-full bg-black font-Pixelmono text-center text-white py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Submit"})]})}),y&&g.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:g.jsx("div",{className:"bg-green-400/80 border-2 border-white text-white font-Pixelmono px-6 py-3 rounded-xs shadow-lg font-bold text-xl transition-all duration-700 ease-in-out",style:{opacity:d?1:0,transform:d?"translateY(-250px)":"translateY(-270px)",transitionProperty:"opacity, transform"},children:"Thanks for your feedback!"})}),g.jsx("style",{children:`
        @keyframes wiggle {
          0% { transform: rotate(0deg); }
          15% { transform: rotate(4deg); }
          30% { transform: rotate(-3deg); }
          45% { transform: rotate(2deg); }
          60% { transform: rotate(-1deg); }
          75% { transform: rotate(1deg); }
          100% { transform: rotate(0deg); }
        }
        .animate-wiggle {
          animation: wiggle 0.6s ease-in-out;
          display: inline-block;
        }
      `})]})};function Aj(){const{progress:i}=L3();return g.jsx(O3,{center:!0,children:g.jsxs("div",{style:{fontSize:"20px",color:"#fff",padding:"20px",background:"rgba(0,0,0,0.7)",borderRadius:"2px",border:"2px",borderColor:"black",width:"175px",fontFamily:"mono",textAlign:"center"},children:["Loading: ",Math.floor(i),"%"]})})}function Sj(){const{camera:i}=zs(),e=Ae.useRef(0);return zb(({clock:t})=>{t.elapsedTime-e.current>5&&(e.current=t.elapsedTime,console.log("Camera Position:",i.position.toArray()),i.controls&&i.controls.target&&console.log("Camera Target:",i.controls.target.toArray()))}),null}console.log("GLB URL:",js("goopcompressed2kfinal.glb"));function Mj({target:i,controlsRef:e,defaultPos:t=[-3,4,5],defaultLookAt:n=[0,1,0]}){const{camera:s}=zs(),[r,c]=w5(()=>({camPos:s.position.toArray(),lookAt:n,config:{mass:1,tension:60,friction:18},onChange:({value:h})=>{s.position.set(...h.camPos),e.current&&(e.current.target.set(...h.lookAt),e.current.update())}}));return Ae.useEffect(()=>{if(!e.current)return;const h=s.position.toArray(),d=e.current.target.toArray();if(i){const p=i.position,y=i.offset||[1,.5,1],x=new K(...p).add(new K(...y)).toArray();c.start({from:{camPos:h,lookAt:d},to:{camPos:x,lookAt:p}})}else c.start({from:{camPos:h,lookAt:d},to:{camPos:t,lookAt:n}})},[i,c,s,e,t,n]),null}function Ej({cameraTarget:i,onHotspotClick:e,hotspots:t,activeHotspot:n,activePage:s}){const r=Ae.useRef(),[c,h]=Ae.useState(!1),[d,p]=Ae.useState(!1),[y,x]=Ae.useState(!1),{progress:b}=L3();Ae.useEffect(()=>{u0.clear(js("goopcompressed2kfinal.glb"))},[]),Ae.useEffect(()=>{const E=setTimeout(()=>h(!0),500);return()=>clearTimeout(E)},[]);const _=()=>{p(!0),setTimeout(()=>{h(!1),p(!1)},300)};return Ae.useEffect(()=>{const E=R=>{r.current&&r.current.dispatchEvent({type:"wheel",deltaY:R.deltaY})};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E)},[]),g.jsxs("div",{className:"flex-1 w-full h-screen overflow-hidden z-10",style:{positon:"relative"},children:[g.jsxs(bz,{onContextMenu:E=>E.preventDefault(),shadows:!0,camera:{position:[5,3,5],fov:50},style:{width:"100%",height:"100%",background:"#f1efefff"},children:[g.jsx(Sj,{}),g.jsxs(Ae.Suspense,{fallback:g.jsx(Aj,{progress:b}),children:[g.jsx("ambientLight",{intensity:.6}),g.jsx("directionalLight",{castShadow:!0,position:[5,5,5],intensity:3}),g.jsx("directionalLight",{castShadow:!0,position:[-5,5,-5],intensity:3}),g.jsx("directionalLight",{castShadow:!0,position:[0,5,-5],intensity:3}),g.jsx(Mj,{target:i,controlsRef:r}),g.jsx(mj,{path:js("goopcompressed2kfinal.glb"),scale:.04},s),g.jsx(pj,{files:js("golden_gate_hills_4k.hdr"),background:!1}),g.jsx(gj,{ref:r,disableControls:!!i}),g.jsx(vj,{hotspots:t,onHotspotClick:e,activeHotspot:n,showAllLabels:y})]})]}),g.jsxs("div",{className:"absolute top-4 right-4 z-40 flex flex-col space-y-2 transition-all duration-500",children:[c&&g.jsx(yj,{onClose:_,closing:d}),g.jsx("div",{className:`
            bg-black/55 text-white p-2 rounded-xl shadow-lg w-64 
            select-none backdrop-blur-sm 
            transition-all duration-500 overflow-hidden
            ${d?"opacity-0 scale-95 max-h-0 p-0":"opacity-100 scale-100 max-h-96"}
          `,children:g.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:y,onChange:E=>x(E.target.checked)}),g.jsx("span",{className:"text-sm",children:"Show all labels"})]})})]}),g.jsx(_j,{})]})}const Tj=()=>g.jsx(Cj,{children:g.jsxs("div",{className:"button",children:[g.jsx("div",{className:"box",children:"A"}),g.jsx("div",{className:"box",children:"W"}),g.jsx("div",{className:"box",children:"G"}),g.jsx("div",{className:"box",children:"F"})]})}),Cj=of.div`
  .button {
    display: flex;
  }

  .box {
    width: 35px;
    height: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 15px;
    font-weight: 700;
    color: #fff;
    transition: all .8s;
    cursor: pointer;
    position: relative;
    background: rgb(58, 165, 253);
    overflow: hidden;
  }

  .box:before {
    content: "A";
    position: absolute;
    top: 0;
    background: #0f0f0f;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    transform: translateY(100%);
    transition: transform .4s;
  }

  .box:nth-child(2)::before {
    transform: translateY(-100%);
    content: 'W';
  }

  .box:nth-child(3)::before {
    content: 'G';
  }

  .box:nth-child(4)::before {
    transform: translateY(-100%);
    content: 'F';
  }

  .box:nth-child(5)::before {
    content: 'R';
  }

  .button:hover .box:before {
    transform: translateY(0);
  }`,wj=()=>g.jsx(Rj,{children:g.jsxs("div",{className:"loader",children:[g.jsxs("div",{className:"box box-1",children:[g.jsx("div",{className:"side-left"}),g.jsx("div",{className:"side-right"}),g.jsx("div",{className:"side-top"})]}),g.jsxs("div",{className:"box box-2",children:[g.jsx("div",{className:"side-left"}),g.jsx("div",{className:"side-right"}),g.jsx("div",{className:"side-top"})]}),g.jsxs("div",{className:"box box-3",children:[g.jsx("div",{className:"side-left"}),g.jsx("div",{className:"side-right"}),g.jsx("div",{className:"side-top"})]}),g.jsxs("div",{className:"box box-4",children:[g.jsx("div",{className:"side-left"}),g.jsx("div",{className:"side-right"}),g.jsx("div",{className:"side-top"})]})]})}),Rj=of.div`
  /* 3D tower loader made by: csozi | Website: www.csozi.hu*/

  .loader {
    scale: 3;
    height: 50px;
    width: 40px;
  }

  .box {
    position: relative;
    opacity: 0;
    left: 10px;
  }

  .side-left {
    position: absolute;
    background-color: #286cb5;
    width: 19px;
    height: 5px;
    transform: skew(0deg, -25deg);
    top: 14px;
    left: 10px;
  }

  .side-right {
    position: absolute;
    background-color: #2f85e0;
    width: 19px;
    height: 5px;
    transform: skew(0deg, 25deg);
    top: 14px;
    left: -9px;
  }

  .side-top {
    position: absolute;
    background-color: #5fa8f5;
    width: 20px;
    height: 20px;
    rotate: 45deg;
    transform: skew(-20deg, -20deg);
  }

  .box-1 {
    animation: from-left 4s infinite;
  }

  .box-2 {
    animation: from-right 4s infinite;
    animation-delay: 1s;
  }

  .box-3 {
    animation: from-left 4s infinite;
    animation-delay: 2s;
  }

  .box-4 {
    animation: from-right 4s infinite;
    animation-delay: 3s;
  }

  @keyframes from-left {
    0% {
      z-index: 20;
      opacity: 0;
      translate: -20px -6px;
    }

    20% {
      z-index: 10;
      opacity: 1;
      translate: 0px 0px;
    }

    40% {
      z-index: 9;
      translate: 0px 4px;
    }

    60% {
      z-index: 8;
      translate: 0px 8px;
    }

    80% {
      z-index: 7;
      opacity: 1;
      translate: 0px 12px;
    }

    100% {
      z-index: 5;
      translate: 0px 30px;
      opacity: 0;
    }
  }

  @keyframes from-right {
    0% {
      z-index: 20;
      opacity: 0;
      translate: 20px -6px;
    }

    20% {
      z-index: 10;
      opacity: 1;
      translate: 0px 0px;
    }

    40% {
      z-index: 9;
      translate: 0px 4px;
    }

    60% {
      z-index: 8;
      translate: 0px 8px;
    }

    80% {
      z-index: 7;
      opacity: 1;
      translate: 0px 12px;
    }

    100% {
      z-index: 5;
      translate: 0px 30px;
      opacity: 0;
    }
  }`;of.div`
  .spinner {
   width: 56px;
   height: 56px;
   border-radius: 50%;
   color: #01040aaf;
   background: linear-gradient(currentColor 0 0) center/100% 4px,
            linear-gradient(currentColor 0 0) center/4px 100%,
            radial-gradient(farthest-side,#0000 calc(100% - 7px),currentColor calc(100% - 6px)),
            radial-gradient(circle 7px,currentColor 94%,#0000 0);
   background-repeat: no-repeat;
   animation: spinner-mu2ebf 1s infinite linear;
   position: relative;
  }

  .spinner::before {
   content: "";
   position: absolute;
   inset: 0;
   border-radius: inherit;
   background: inherit;
   transform: rotate(45deg);
  }

  @keyframes spinner-mu2ebf {
   to {
    transform: rotate(.5turn);
   }
  }`;const Bj=()=>g.jsx("div",{className:"flex items-center space-x-3",children:g.jsxs("label",{className:"group flex items-center cursor-pointer",children:[g.jsx("input",{className:"hidden peer",type:"checkbox"}),g.jsxs("span",{className:"relative w-8 h-8 flex justify-center items-center bg-gray-100 border-2 border-gray-400 rounded-md shadow-md transition-all duration-500 peer-checked:border-blue-500 peer-checked:bg-blue-500 peer-hover:scale-105",children:[g.jsx("span",{className:"absolute inset-0 bg-gradient-to-br from-white/30 to-white/10 opacity-0 peer-checked:opacity-100 rounded-md transition-all duration-500 peer-checked:animate-pulse"}),g.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",className:"hidden w-5 h-5 text-white peer-checked:block transition-transform duration-500 transform scale-50 peer-checked:scale-100",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{clipRule:"evenodd",d:"M16.707 5.293a1 1 0 00-1.414 0L8 12.586 4.707 9.293a1 1 0 10-1.414 1.414l4 4a1 1 0 001.414 0l8-8a1 1 0 000-1.414z",fillRule:"evenodd"})})]}),g.jsx("span",{className:"ml-3 text-xs text-gray-700 group-hover:text-blue-500 font-medium transition-colors duration-300",children:"click to enable background music"})]})}),Nj=({title:i,activeSubtab:e,onSubtabClick:t})=>{const n=[{id:"intro",label:"Overview",content:g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:'In April 2023, the World Health Organisation (WHO) introduced a new four-step process for wheelchair provision in its Wheelchair Provision Guidelines: Select, Fit, Use, and Follow-Up. As a clients needs change or equipment requires replacement, their wheelchair configuration may also need to be reviewed or adjusted. This website provides an introductory foundation to the "Fit" domain, with a focus on manual wheelchairs.'}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:"The WHO (2023) defines this step as:"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mx-15 p-4 border-2 border-orange-500",children:"Assembling the wheelchair and any accessories, and adjusting and modifying the wheelchair, cushion, postural support devices, and other accessories to achieve an optimal fit. The goal is to enhance mobility, postural support, and function."})]}),g.jsx("img",{src:js("/pg2_1.png"),alt:"Wheelbarrow diagram",className:"w-100 h-auto rounded-lg shadow"})]}),g.jsx("h2",{className:"text-gray-700 text-5xl font-Cap mt-15",children:"Role of the Therapist"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"As a physiotherapist, key aspects of wheelchair prescription and fitting are within our scope of practice. This holistic, client-centred process requires clinicians to advocate for the client's specific needs and functional goals while collaborating with an interdisciplinary team. Other professionals commonly involved in this process may include:"}),g.jsx("img",{src:js("/pg2_2.png"),alt:"Wheelbarrow diagram",className:"w-200 h-auto rounded-lg shadow mx-auto mt-10"}),g.jsx("h2",{className:"text-gray-700 text-5xl font-Cap mt-15",children:"Our Approach"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"A Wheel Good Fit will explore this crucial step by breaking down the understanding of the wheeled mobility system into three key dimensions:"}),g.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("ol",{className:"text-gray-700 text-xl font-Rob ml-10 p-4 border-2 border-orange-500 w-70 mb-4",children:[g.jsx("li",{children:"1. The Person/Client"}),g.jsx("li",{children:"2. Seating and Positioning"}),g.jsx("li",{children:"3. The Wheelchair"})]}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:"The following content is included:"}),g.jsxs("ol",{className:"text-gray-700 text-xl font-Rob ml-10 p-4 border-2 border-orange-500 mb-4",children:[g.jsx("li",{children:"1. An interactive, labelled 3D manual wheelchair model."}),g.jsx("li",{children:"2. The impact of wheelchair components and design on fit and function."}),g.jsx("li",{children:"3. General clinical and technical information related to the person, the seating system, and the wheelchair."})]})]}),g.jsx("img",{src:js("/pg2_3.png"),alt:"Wheelbarrow diagram",className:"w-80 h-auto rounded-lg shadow"})]}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:"This is a supplementary resource, intended to build your knowledge of manual wheelchairs and basic fitting considerations. It is essential to recognise that the wheelchair prescription process is complex, and solutions are specific to each client. Thus, we encourage you to further your understanding through continued education and professional development to enhance your clinical practice."}),g.jsxs("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:["Your journey to a ",g.jsx("span",{className:"pixel-italic",children:"wheel good"})," fit starts here. We hope this helps you roll out a higher standard of patient-centred care."]}),g.jsxs("p",{className:"text-gray-700 text-xl font-Rob",children:[g.jsx("b",{children:"Please note: "})," This resource is not intended to replace professional healthcare advice and should be used for personal reference only."]})]})},{id:"fit",label:"Background",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"Why the fit domain?"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:'Inadequate manual wheelchair fitting is a high-stakes clinical competency gap within wheelchair provision, directly linked to adverse outcomes including pressure injuries, pain, and reduced functional independence (Sprigle, 2023). The associated economic burden is substantial, with pressure injuries alone costing the Australian healthcare system an estimated $9.11 billion annually (Nghiem et al., 2022). Conversely, a well-fitted wheelchair significantly enhances comfort, user participation, and quality of life (Gallagher et al., 2020). Despite its importance, the "fitting" domain is consistently identified as the weakest competency among emerging physiotherapistsattributable to a lack of standardised entry-level education in wheelchair knowledge and relevant fitting principles (Burrola-Mendez et al., 2022; Toro-Hernndez et al., 2019; Goldberg et al., 2023). This highlights a critical disparity between foundational training and the competencies emphasised by international guidelines (WHO, 2023), necessitating supplemental, targeted educational interventions.'}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-8",children:"Our goal:"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:"This project aimed to design and develop an engaging, evidence-based online resource to enhance knowledge of manual wheelchair components and fitting considerations for physiotherapy students and early-career clinicians."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-8",children:"Method:"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:"Project content was synthesised from a search of literature databases (MEDLINE, CINAHL, PubMed), and supplemented by clinical practice resources including specialist e-books, webinars, and equipment manuals. All content was validated for clinical applicability and relevance by experienced physiotherapist stakeholders. A mixed-methods evaluation framework was employed for iterative refinement. Formative and summative stakeholder feedback was gathered via surveys and structured interviews to analyse quantitative usability metrics, educational impact, and qualitative content relevance."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:"Established literature benchmarks were used to evaluate quantitative project aims. Perceived usability was measured using the Usability Metric for User Experience-Lite, a validated 4-item instrument where scores >80 indicate very strong usability (Lewis et al., 2013). Overall satisfaction was assessed using the Net Promoter Score, where 20 was considered good, 50 strong, and 71 excellent for tertiary educational resources (Kara et al., 2022; Lucero, 2022). Changes in knowledge and confidence was evaluated using a retrospective prepost design with 5-point Likert scales. A mean increase of 0.5 points was considered indicative of meaningful educational impact as an online, self-directed resource (Lindner & Lindner, 2024; Lucero, 2022)."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:"Thematic analysis of qualitative responses guided improvements, and a lightweight pop-up survey was embedded within the website to facilitate ongoing monitoring of relevance and usability (Hoffmann et al., 2017)."})]})},{id:"measure",label:"Acknowledgements",content:g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:"I am truly grateful to the contributing Physiotherapists and Clinical Supervisors for their invaluable expertise, clinical resources, and guidance, which were essential to the development of this resource."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mb-4",children:"I would also like to extend a special thanks to Nick C. for his support throughout the website development process."})]})},{id:"4",label:"Page References",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap mt-8",children:'References for: "Overview"'}),g.jsxs("div",{className:"text-sm font-YakuHanJP",children:[g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Burrola-Mendez, Y., Kamalakannan, S., Rushton, P. W., Bouziane, Selsabil-A., Giesbrecht, E., Kirby, R. L., Gowran, R. J., Rusaw, D. F., Tasiemski, T., Goldberg, M., Tofani, M., Pedersen, J. P., & Pearlman, J. (2022). Wheelchair service provision education for healthcare professional students, healthcare personnel and educators across low- to high-resourced settings: a scoping review. ",g.jsx("i",{children:"Disability and Rehabilitation: Assistive Technology"}),", 122. https://doi.org/10.1080/17483107.2022.2037757"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Gallagher, A., Cleary, G., Clifford, A., McKee, J., OFarrell, K., & Gowran, R. J. (2020). Unknown world of wheelchairs A mixed methods study exploring experiences of wheelchair and seating assistive technology provision for people with spinal cord injury in an Irish context. ",g.jsx("i",{children:"Disability and Rehabilitation, 44"}),"(10), 113. https://doi.org/10.1080/09638288.2020.1814879"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Goldberg, M., Rushton, P., Kirby, R. L., Muera, S., Kandavel, K., Pearlman, J., & Tawashy, A. (2022). Wheelchair service provision content in professional rehabilitation organisations standards documents and contemporary initiatives: a rapid review. ",g.jsx("i",{children:"Disability and Rehabilitation: Assistive Technology"}),", 112. https://doi.org/10.1080/17483107.2022.2063421"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Hoffmann, T., Bennett, S., & Mar, C. D. (2017). ",g.jsx("i",{children:"Evidence-based practice across the health professions"})," (3rd ed.). Elsevier."]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Kara, A., Mintu-Wimsatt, A., & Spillan, J. E. (2022). An application of the net promoter score in higher education. ",g.jsx("i",{children:"Journal of Marketing for Higher Education"}),", 124. https://doi.org/10.1080/08841241.2021.2018088"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Lewis, J. R., Utesch, B. S., & Maher, D. E. (2013). UMUX-LITE: When Theres No Time for the SUS. ",g.jsx("i",{children:"Proceedings of the SIGCHI Conference on Human Factors in Computing Systems"}),", 20992102. https://doi.org/10.1145/2470654.2481287"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Lindner, J. R., & Lindner, N. (2024). Interpreting Likert type, summated, unidimensional, and attitudinal scales: I neither agree nor disagree, Likert or not. ",g.jsx("i",{children:"Advancements in Agricultural Development, 5"}),"(2), 152163. https://doi.org/10.37433/aad.v5i2.351"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Nghiem, S., Campbell, J., Walker, R. M., Byrnes, J., & Chaboyer, W. (2022). Pressure injuries in Australian public hospitals: a cost of illness study. ",g.jsx("i",{children:"International Journal of Nursing Studies, 130"}),"(1), 104191. https://doi.org/10.1016/j.ijnurstu.2022.104191"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Sprigle, S. (2023). Measure It: Proper Wheelchair Fit Is Key to Ensuring Function while Protecting Skin Integrity. ",g.jsx("i",{children:"Advances in Skin & Wound Care, 36"}),"(8), 404413. https://doi.org/10.1097/asw.0000000000000001"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Toro-Hernndez, M. L., Mondragn-Barrera, M. A., Torres-Narvez, M. R., Velasco-Forero, S. E., & Goldberg, M. (2019). Undergraduate physiotherapy students basic wheelchair provision knowledge: a pilot study in two universities in Colombia. ",g.jsx("i",{children:"Disability and Rehabilitation: Assistive Technology, 15"}),"(3), 336341. https://doi.org/10.1080/17483107.2019.1580776"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["World Health Organization. (2023). ",g.jsx("i",{children:"Wheelchair provision guidelines"}),". World Health Organization."]})]})]})}],s=n.findIndex(p=>p.id===e),r=n[s],c=Ae.useRef(null),h=()=>{s>0&&t(n[s-1].id,"page2")},d=()=>{s<n.length-1&&t(n[s+1].id,"page2")};return Ae.useEffect(()=>{c.current&&c.current.scrollTo({top:0,behavior:"instant"})},[e]),g.jsxs("div",{className:"w-full h-full flex",children:[g.jsxs("div",{className:"w-72 bg-gray-100 border-r border-gray-300 p-6 flex-shrink-0 h-screen flex flex-col transition-opacity duration-300",children:[g.jsx("p",{className:"text-4xl font-mono text-black font-bold tracking-tight mb-6",children:i}),g.jsx("div",{className:"flex flex-col gap-3",children:n.map(p=>g.jsx("div",{onClick:()=>t(p.id,"page2"),className:`cursor-pointer px-3 py-2 rounded font-Pixelmono text-xl
                ${e===p.id?"bg-black text-white":"hover:bg-gray-300 text-black"}`,children:p.label},p.id))})]}),g.jsxs("div",{ref:c,className:"flex-1 p-8 bg-white overflow-y-auto relative transition-opacity duration-300",children:[g.jsx("h2",{className:"text-6xl font-bold mb-6 font-Cap text-gray-700",children:r?.label}),g.jsx("div",{className:"space-y-6",children:r?.content}),g.jsxs("div",{className:"flex justify-between mt-8",children:[g.jsx("div",{onClick:h,className:`px-6 py-2 font-Pixelmono text-2xl font-bold rounded
                        ${s===0?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-black text-white hover:bg-gray-800 hover:cursor-pointer"}`,children:"< Previous"}),g.jsx("div",{onClick:d,className:`px-6 py-2 font-Pixelmono text-2xl font-bold rounded
                        ${s===n.length-1?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-black text-white hover:bg-gray-800 hover:cursor-pointer"}`,children:"Next >"})]})]})]})},Dj=({title:i,activeSubtab:e,onSubtabClick:t})=>{const n=[{id:"intro",label:"The Person",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"What is the importance of a good fit?"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"The right wheelchair features directly impact a user's mobility, posture, and ability to participate in daily life. Here are some examples:"}),g.jsxs("ol",{className:"list-decimal ml-6 space-y-6 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Mobility & Daily Activities"}),g.jsx("p",{className:"ml-4 mt-2",children:"This includes how easily someone can move, transfer, and complete tasks."}),g.jsxs("ul",{className:"list-disc ml-12 mt-2 space-y-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Examples:"})," Overall weight, frame design, seat height and angle, wheel position and size, and the design of footrests and armrests."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Practical Considerations:"}),g.jsxs("ul",{className:"list-disc ml-6 mt-1 space-y-1",children:[g.jsx("li",{children:"Home: Does it fit through doorways and under tables? Can the user reach their bed or countertops?"}),g.jsx("li",{children:"Transport: How is it stored and transported? Does it fit in their car?"}),g.jsx("li",{children:"Skills: How does the user currently move around? Is it safe, efficient, and independent?"})]})]})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Postural Support & Comfort"}),g.jsx("p",{className:"ml-4 mt-2",children:"This refers to optimising a clients sitting position, which is crucial for comfort, function and preventing pain."}),g.jsxs("ul",{className:"list-disc ml-12 mt-2 space-y-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Examples:"})," Adjustability of the seat depth, backrest angle and height, and armrest/footrest height. Extra postural support devices can be added."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Practical Considerations:"}),g.jsxs("ul",{className:"list-disc ml-6 mt-1 space-y-1",children:[g.jsx("li",{children:"Proper body alignment and pressure distribution to protect the skin."}),g.jsx("li",{children:"Supporting functional needs and improving sitting tolerance."}),g.jsx("li",{children:"Managing muscle tone, spasticity, and pain."}),g.jsx("li",{children:"Easing the physical burden on caregivers."})]})]})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Participation & Environment"}),g.jsx("p",{className:"ml-4 mt-2",children:"Evaluating the real-world environments where the wheelchair will be used to ensure it supports the user's participation in desired activities."}),g.jsxs("ul",{className:"list-disc ml-12 mt-2 space-y-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Examples:"})," Frame design and durability, wheelbase length, and the size/position of the wheels (especially for uneven surfaces)."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Practical Considerations:"}),g.jsx("ul",{className:"list-disc ml-6 mt-1 space-y-1",children:g.jsx("li",{children:"Does it enable the user to get where they need to go, whether in an urban setting or on rough terrain?"})})]})]})]})]})]})},{id:"fit",label:"Personal & Contextual Factors",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"A Client-Centred Approach"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"The wheelchair needs to be responsive to the clients needs. This can be identified through feedback from the client themselves, as well as carers and the wider care team."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Before checking the wheelchair itself, it is important to understand the person using it. The following factors will help guide a more effective assessment:"}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold mt-10",children:"Understanding Medical & Physical History"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob mt-5",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Condition & Comorbidities:"})," How does the person's diagnosis and other health issues affect their function and posture?"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Surgical History:"})," Have past surgeries impacted bone alignment or joint range of motion?"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Pain Levels:"})," Identify the cause of pain and consider how seating or wheelchair configuration can help manage it, including the ergonomics of propulsion."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Pressure Injury Risk:"})," Assess the individual's risk for skin breakdown."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Weight Changes:"})," Note any significant weight gain or loss, as this alters fit."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Musculoskeletal Considerations:"})," Evaluate how muscle tightness, reduced joint range of movement, contracture and muscle spasm may impact posture or functional reach."]})]}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold mt-10",children:"Understanding Medical & Physical History"}),g.jsxs("ul",{className:"list-disc ml-6 space-y-4 text-gray-700 text-xl font-Rob mt-5",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Vision:"})," A person's head and neck posture is often adapted to optimise vision for mobility and interaction."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Functional Skills:"})," Assess both static and dynamic sitting during key activities:",g.jsxs("ul",{className:"list-disc ml-6 mt-2 space-y-1",children:[g.jsx("li",{children:"Propelling the wheelchair"}),g.jsx("li",{children:"Completing transfers"}),g.jsx("li",{children:"Making positional adjustments"}),g.jsx("li",{children:"Performing functional tasks"})]})]})]}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold mt-10",children:"Understanding Medical & Physical History"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob mt-5",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Environmental Access:"})," Consider the home, vehicle, and community environments the wheelchair must navigate."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Psychosocial Factors:"})," Account for self-image and personal preferences, as these greatly influence acceptance of assistive equipment and postural supports."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Caregiver Support:"})," Identify the level of assistance available for adjusting and maintaining the seating system."]})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"New vs. Experienced Users"}),g.jsxs("p",{className:"text-gray-700 text-xl font-Rob",children:[g.jsx("span",{className:"font-bold block",children:"For New Users:"}),"A first manual wheelchair often features adjustable components, allowing for fine-tuning as the user's skills and preferences develop. A formal review may be scheduled within 6-12 months to reassess the configuration, as functional capabilities and mobility needs often change significantly during this period."]}),g.jsxs("p",{className:"text-gray-700 text-xl font-Rob",children:[g.jsx("span",{className:"font-bold block",children:"For Experienced Users:"}),"Experienced users typically have well-defined preferences based on past use. While their input is essential, a clinical assessment is crucial to integrate new technologies that enhance performance and prevent upper limb injury."]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Upper Limb Pain and Repetitive Strain Injury"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Shoulder pain and carpal tunnel syndrome are highly prevalent among manual wheelchair users, with incidence rates reaching up to 78% and 65%, respectively (Mashola et al., 2021; Asheghan et al., 2016)."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Modifiable, extrinsic risk factors related to repetitive strain injury in users include:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsx("li",{children:"Propulsion biomechanics and frequency"}),g.jsx("li",{children:"Transfer technique and quantity"}),g.jsx("li",{children:"Wheelchair configuration and postural support"}),g.jsx("li",{children:"Rolling resistance"}),g.jsx("li",{children:"Demands of daily tasks (e.g., overhead reaching)"})]}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"These factors should be taken into consideration during chair configuration and adjustments (Ott et al., 2021; Ott & Pearlman, 2021; Worobey et al., 2023). The use of propulsion-assist devices should also be considered as a strategy for injury prevention."})]})},{id:"fat",label:"Page References",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap mt-8",children:'References for: "The Person"'}),g.jsxs("div",{className:"text-sm font-YakuHanJP",children:[g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Agency for Clinical Innovation. (2017). ",g.jsx("i",{children:"Gathering information for the client profile."})," Aci.health.nsw.gov.au. https://aci.health.nsw.gov.au/networks/spinal-cord-injury/spinal-seating/module-2/gathering-information-for-the-client-profile"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Asheghan, M., Hollisaz, M. T., Taheri, T., Kazemi, H., & Aghda, A. K. (2016). The prevalence of carpal tunnel syndrome among long-term manual wheelchair users with spinal cord injury: A cross-sectional study. ",g.jsx("i",{children:"The Journal of Spinal Cord Medicine, 39"}),"(3), 265271. https://doi.org/10.1179/2045772315y.0000000033"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Cherubini, M., & Melchiorri, G. (2012). Descriptive study about congruence in wheelchair prescription. ",g.jsx("i",{children:"PubMed, 48"}),"(2), 217222"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Lange, M. L., & Minkel, J. (2025). ",g.jsx("i",{children:"Seating and wheeled mobility: A clinical resource guide"})," (2nd ed.). Routledge"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Mashola, M. K., Korkie, E., & Mothabeng, D. J. (2021). Pain and its impact on functioning and disability in manual wheelchair users with spinal cord injury: a protocol for a mixed-methods study. ",g.jsx("i",{children:"BMJ Open, 11"}),"(1), e044152. https://doi.org/10.1136/bmjopen-2020-044152"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Ott, J., Henderson, T., Wilson-Jene, H., Koontz, A., & Pearlman, J. (2021). A high prevalence of manual wheelchair rear-wheel misalignment could be leading to increased risk of repetitive strain injuries. ",g.jsx("i",{children:"Disability and Rehabilitation: Assistive Technology"}),", 19. https://doi.org/10.1080/17483107.2021.1890843"]}),g.jsxs("p",{className:"text-gray-700   leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Ott, J., & Pearlman, J. (2021). Scoping review of the rolling resistance testing methods and factors that impact manual wheelchairs. ",g.jsx("i",{children:"Journal of Rehabilitation and Assistive Technologies Engineering, 8"}),", 205566832098030. https://doi.org/10.1177/2055668320980300"]}),g.jsxs("p",{className:"text-gray-700   leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Paralyzed Veterans of America. (2005). ",g.jsx("i",{children:"Preservation of upper limb function following spinal cord injury: a clinical practice guideline for health-care professionals"}),". Consortium For Spinal Cord Medicine."]}),g.jsx("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:"Robertson, B., Lane, R., Lannin, N., Laver, K., & Barr, C. (2022). A Systematic Review of Outcomes Measured Following New Wheelchair and Seating-Prescription Interventions in Adults. Archives of Rehabilitation Research and Clinical Translation, 5(1), 100249. https://doi.org/10.1016/j.arrct.2022.100249"}),g.jsx("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:"Sprigle, S. (2023). Measure It: Proper Wheelchair Fit Is Key to Ensuring Function while Protecting Skin Integrity. Advances in Skin & Wound Care, 36(8), 404413. https://doi.org/10.1097/asw.0000000000000001"}),g.jsx("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:"World Health Organization. (2023). Wheelchair provision guidelines. World Health Organization."}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Worobey, L. A., Bernstein, J., Ott, J., Berner, T., Black, J., Cabarle, M., Roesler, T., Scarborough, S., & Betz, K. (2023). RESNA position on the application of ultralight manual wheelchairs. Assistive Technology: ",g.jsx("i",{children:"The Official Journal of RESNA"}),", 118. https://doi.org/10.1080/10400435.2023.2221148"]})]})]})}],s=n.findIndex(d=>d.id===e),r=Ae.useRef(null),c=()=>{s>0&&t(n[s-1].id,"page3")},h=()=>{s<n.length-1&&t(n[s+1].id,"page3")};return Ae.useEffect(()=>{r.current&&r.current.scrollTo({top:0,behavior:"instant"})},[e]),g.jsxs("div",{className:"w-full h-full flex",children:[g.jsxs("div",{className:"w-72 bg-gray-100 border-r border-gray-300 p-6 flex-shrink-0 h-screen flex flex-col",children:[g.jsx("p",{className:"text-4xl font-mono font-bold text-gray-800 tracking-tight mb-6",children:i}),g.jsx("div",{className:"flex flex-col gap-3",children:n.map(d=>g.jsx("div",{onClick:()=>t(d.id,"page3"),className:`cursor-pointer px-3 py-2 rounded font-Pixelmono text-xl
                ${e===d.id?"bg-black text-white":"hover:bg-gray-300 text-black"}`,children:d.label},d.id))})]}),g.jsxs("div",{ref:r,className:"flex-1 p-8 overflow-y-auto relative bg-white",children:[g.jsx("h2",{className:"text-6xl font-bold text-gray-700 mb-6 font-Cap",children:n.find(d=>d.id===e)?.label}),g.jsx("div",{className:"space-y-6",children:n.find(d=>d.id===e)?.content}),g.jsxs("div",{className:"flex justify-between mt-8",children:[g.jsx("div",{onClick:c,className:`px-6 py-2 font-Pixelmono text-2xl font-bold rounded 
                      ${e===n[0].id?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-black text-white hover:bg-gray-800 hover:cursor-pointer"}`,children:"< Previous"}),g.jsx("div",{onClick:h,className:`px-6 py-2 font-Pixelmono text-2xl font-bold rounded 
                      ${e===n[n.length-1].id?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-black text-white hover:bg-gray-800 hover:cursor-pointer"}`,children:"Next >"})]})]})]})},Uj=({checked:i=!1,onChange:e,uniqueId:t})=>g.jsx(Oj,{children:g.jsxs("div",{className:"cntr",children:[g.jsx("input",{type:"checkbox",id:t,className:"hidden-xs-up",checked:i,onChange:n=>e(n.target.checked)}),g.jsx("label",{htmlFor:t,className:`cbx ${i?"checked":""}`})]})}),Oj=of.div`
  .cbx {
    position: relative;
    top: 1px;
    width: 27px;
    height: 27px;
    border: 1px solid #c8ccd4;
    border-radius: 3px;
    vertical-align: middle;
    transition: background 0.1s ease;
    cursor: pointer;
    display: block;
  }

  .cbx:after {
    content: '';
    position: absolute;
    top: 2px;
    left: 8px;
    width: 7px;
    height: 14px;
    opacity: 0;
    transform: rotate(45deg) scale(0);
    border-right: 2px solid #fff;
    border-bottom: 2px solid #fff;
    transition: all 0.3s ease;
    transition-delay: 0.15s;
  }

  .cntr {
    position: relative;
  }

    .cbx.checked {
    border-color: transparent;
    background: #6871f1;
    animation: jelly 0.6s ease;
    }

    .cbx.checked:after {
    opacity: 1;
    transform: rotate(45deg) scale(1);
    }

  @keyframes jelly {
    0% { transform: scale(1, 1); }
    30% { transform: scale(1.25, 0.75); }
    40% { transform: scale(0.75, 1.25); }
    50% { transform: scale(1.15, 0.85); }
    65% { transform: scale(0.95, 1.05); }
    75% { transform: scale(1.05, 0.95); }
    to { transform: scale(1, 1); }
  }

  .hidden-xs-up {
    display: none !important;
  }
`,ps=({id:i,items:e})=>{const[t,n]=Ae.useState(e.map(()=>!1)),s=(r,c)=>{const h=[...t];h[r]=c,n(h)};return g.jsx("div",{className:"flex flex-col gap-4",children:e.map((r,c)=>g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Uj,{checked:t[c],onChange:h=>s(c,h),uniqueId:`${i}-cbx-${c}`}),g.jsx("p",{className:`text-xl font-Rob transition-all duration-300 ${t[c]?"text-gray-400 line-through":"text-gray-700"}`,children:r})]},c))})};function Lj(){const i=["Is their pelvis upright and level (or as close to this as is comfortable for the user)?","Is the trunk upright and symmetrical (or as close to this as is comfortable for the user)?","Is the head balanced and upright (as much as possible)?","Are the legs and feet supported as close to neutral as possible?"],e=["Backrest height, recline and contours","Tilt in space","Pelvis side pads and trunk side pads","Outside and inside thigh wedges, outside thigh pads and lower leg supports"],t=["hips fit comfortably between armrests or pelvis side pads;","trunk fits comfortably between the wheelchair frame backrest tubes or trunk side pads;","thighs fit comfortably between the armrests, mud/skirt guards or pelvis side pads and are not pushed together."],n=["Place your finger between the wheelchair user's body and each postural support including pads and straps. Does the postural support make even contact with the body? Is the pressure safe?"],s=["the headrest should usually support the wheelchair user's head at the base of the skull;","supports the head in a balanced and upright posture."],r=["there is no high pressure on caused by the outside thigh pads or knee separator pad;","knee separator pad 4060 mm away from the groin area for children and 60100mm for adults."],c=["thighs are fully supported on the cushion with no gaps. Feet are fully supported on the footrests with no gaps;","foot straps can be done up firmly without pinching;","calf strap and behind the heel foot straps supporting calf and feet."];return g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"Check posture"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Check from the front and side to see whether the wheelchair user is sitting as close to neutral sitting posture as is comfortable for them:"}),g.jsx("div",{className:"ml-6",children:g.jsx(ps,{id:"1",items:i})}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Check that all PSDs are providing support as intended. In particular check (if provided):"}),g.jsx("div",{className:"ml-6",children:g.jsx(ps,{id:"2",items:e})}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Check posture again after 15 minutes to see if there has been any change."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Check pressure"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Check pressure under both seat bones."}),g.jsx("div",{className:"ml-6",children:g.jsx(ps,{id:"4",items:["Is the pressure safe on both sides?"]})}),g.jsxs("div",{className:"ml-6 space-y-3 text-gray-700 text-xl font-Rob border-2 p-2 w-185",children:[g.jsxs("p",{children:[g.jsx("b",{children:"Level I = safe:"})," Fingertips can wriggle up and down 5 mm or more."]}),g.jsxs("p",{children:[g.jsx("b",{children:"Level 2 = warning:"})," Fingertips cannot wriggle, but can easily slide out."]}),g.jsxs("p",{children:[g.jsx("b",{children:"Level 3 = unsafe:"})," Fingertips are squeezed firmly. It is difficult to slide fingers out."]})]}),g.jsx("div",{className:"ml-6",children:g.jsx(ps,{id:"5",items:n})}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"If the wheelchair user has any particularly bony prominences, bulges or bumps  check there is no pressure on these areas."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Check Wheelchair and PSDs Fit"}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Wheelchair width:"}),g.jsx("div",{className:"ml-6 mt-4",children:g.jsx(ps,{id:"6",items:t})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Headrest:"}),g.jsx("div",{className:"ml-6 mt-4",children:g.jsx(ps,{id:"7",items:s})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Thighs:"}),g.jsx("div",{className:"ml-6 mt-4",children:g.jsx(ps,{id:"8",items:r})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Footrest height:"}),g.jsx("div",{className:"ml-6 mt-4",children:g.jsx(ps,{id:"9",items:c})})]})}const Ij=({title:i,activeSubtab:e,onSubtabClick:t})=>{const n=[{id:"intro",label:"Body Measurements",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"What is the importance of a good fit?"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"A properly fitted wheelchair depends on the relationship between three key dimensions:"}),g.jsxs("ul",{className:"list-decimal ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"The Body:"})," The person's unique physical structure and posture."]}),g.jsxs("li",{children:[g.jsx("b",{children:"The Seating Components:"})," The supports required for comfort, posture, and pressure relief."]}),g.jsxs("li",{children:[g.jsx("b",{children:"The Wheelchair:"})," The base frame and its components."]})]}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"It is crucial to understand how these dimensions interact. For example, a person's buttock-thigh length (Body) determines the needed cushion depth (Seating Component), which may differ from the seat frame length (Wheelchair) (Waugh et al., 2013)."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Using consistent terminology for these parts is essential to accurately turn body measurements into equipment recommendations and to ensure the system is set up correctly (International Organization for Standardisation, 2018)."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"Why Body Measurements Are Taken"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-4",children:'This resource does not cover the detailed measuring process (which relates to the earlier "Select" phase), but it will clarify how body measurements relate to seating and wheelchair dimensions.'}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-4",children:"These objective measurements of a person's seated posture are important to:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsx("li",{children:"Objectively assess postural alignment."}),g.jsx("li",{children:"Help determine the specific features needed in seating products."}),g.jsx("li",{children:"Document postural outcomes before and after an intervention."}),g.jsx("li",{children:"Monitor postural changes over time and set measurable goals."})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"Terminology"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-4",children:"Labelling terminology for each body segment is depicted in Figure 1"}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob",children:"This is relevant when referring to or documenting:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob mt-4",children:[g.jsx("li",{children:"Linear or angular measurements of the body (e.g., lower leg length, thigh to trunk angle)"}),g.jsx("li",{children:"The surface or support designed to contact that segment (e.g., thigh support, trunk support)"})]}),g.jsxs("div",{className:"mx-auto mt-10 w-200",children:[g.jsx("img",{src:js("/pg4_1.png"),alt:"Wheelbarrow diagram",className:"w-full h-auto rounded-lg"}),g.jsx("p",{className:"text-left text-gray-700 text-xl font-Rob mt-2",children:"(Waugh & Crane, 2013)"})]})]})},{id:"fit",label:"Linear Measurements",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"A Guide to Understanding Linear Measurements"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"To ensure consistency and accuracy, linear measurements for seating follow two key principles:"}),g.jsxs("ol",{className:"list-decimal ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsx("li",{children:"They are taken parallel to the body segment."}),g.jsx("li",{children:"Or, they are taken along a strict vertical or horizontal line, regardless of the person's posture."})]}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Key Characteristics of Linear Measures:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsx("li",{children:"They are straight lines and do not follow body contours."}),g.jsx("li",{children:"They are taken without compressing soft tissue."}),g.jsxs("li",{children:[g.jsx("b",{children:"Exception:"})," Circumferential measures (e.g., around the head or ankle) are the only ones that follow the body's curve."]})]}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"The specific measurements needed depend on the individual's posture and the complexity of the seating system required."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:'"Effective" Measurements'}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:`Sometimes, measuring a body part in its standard anatomical position isn't clinically helpful, especially when postures are asymmetrical or non-reproducible. In these cases, the addition of "Effective" measurements may be documented.`}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"What:"}),' "Effective" measurements record the functional space the body will occupy in the seating system, rather than the true anatomical length.']}),g.jsxs("li",{children:[g.jsx("b",{children:"Why:"})," They provide the practical dimensions needed to configure the seating components correctly."]})]}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob",children:"Example: Lower Leg vs. Effective Lower Leg Length"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob mt-7",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Standard Method:"})," Measures the length of the tibia parallel to the bone itself."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Effective Method:"})," Measures the horizontal distance from the back of the knee to the heel. This tells you the actual depth needed for the footplate to provide proper support, especially if the legs are angled."]})]}),g.jsxs("div",{className:"mx-auto mt-10 w-200",children:[g.jsx("img",{src:js("/pg4_2.png"),alt:"Wheelbarrow diagram",className:"w-full h-auto rounded-lg"}),g.jsx("p",{className:"text-left text-gray-700 text-xl font-Rob mt-2",children:"(Waugh & Crane, 2013)"})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Common Measurements"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"The necessary body measurements depend on the user's postural symmetry and support needs. Here are commonly taken body measurements and how they inform the specifications for seating components and the wheelchair frame itself (Agency for Clinical Innovation, 2017b):"}),g.jsxs("div",{className:"ml-8 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("div",{children:[g.jsx("b",{children:"Hip Width:"})," Determines overall seat and cushion width for postural support and comfort."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Greater Trochanter Width:"})," Critical for sizing pressure-mapping and offloading cushions."]}),g.jsxs("div",{children:[g.jsx("b",{children:"External Knee Width:"})," Guides seat width adjustment and footplate hanger selection to prevent leg rubbing."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Chest Width:"})," Sets the width between lateral trunk supports and informs backrest size selection."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Shoulder Width:"})," Determines the optimal distance between arm supports for upper limb positioning and function."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Foot Width (with shoes):"})," Defines the minimum required frame width at the base and informs footplate size."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Thigh Depth:"})," Guides ideal seat depth (measurement minus 2550mm) to avoid popliteal pressure."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Lower Leg Length:"})," Determines the distance from seat to footplate (accounting for cushion and shoe height)."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Foot Depth:"})," Selects appropriate footplate size and style to prevent interference with front castors."]}),g.jsxs("div",{children:[g.jsx("b",{children:"Maximum Sitting Height:"})," Ensures adequate backrest height for full postural support."]})]}),g.jsxs("div",{className:"mx-auto mt-10 w-200",children:[g.jsx("img",{src:js("/pg4_3.png"),alt:"Wheelbarrow diagram",className:"w-full h-auto rounded-lg"}),g.jsx("p",{className:"text-left text-gray-700 text-xl font-Rob mt-2",children:"(Waugh & Crane, 2013)"})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Basic Measurements for Symmetrical Sitters"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"For a person who sits symmetrically and has simple seating needs (e.g., a Hands-Free Sitter, see Types of Sitters), the following core measurements are typically sufficient:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-4 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Width Measurements:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"Hip Width"}),g.jsx("li",{children:"Chest Width"}),g.jsx("li",{children:"Shoulder Width"}),g.jsx("li",{children:"External Knee Width (if wider than the hips)"})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Depth & Height Measurements:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"Buttock/Thigh Depth"}),g.jsx("li",{children:"Lower Leg Length"}),g.jsx("li",{children:"Elbow Height"}),g.jsx("li",{children:"Shoulder Height (or Scapula/Axilla Height, to determine backrest height)"}),g.jsx("li",{children:"Maximum Sitting Height"})]})]})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Additional Measurements for Complex Seating Needs"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"For individuals requiring more postural support or who have asymmetries, additional measurements are needed to ensure a proper and accommodating fit."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob",children:"Common additional measures include:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob mt-5",children:[g.jsx("li",{children:"Trunk Depth"}),g.jsx("li",{children:"Ischial Depth"}),g.jsx("li",{children:"Foot Depth"}),g.jsx("li",{children:"Posterior Superior Iliac Spine (PSIS) Height"}),g.jsx("li",{children:"External Thigh or Knee Width"}),g.jsx("li",{children:"Internal Knee Width"})]}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"These measurements ensure the seating system and wheelchair frame accommodate the individual's true sitting posture for optimal support, comfort, and function (Lange & Minkel, 2025; Ward, 1994)."})]})},{id:"measure",label:"Angular Measurements",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"A Guide to Angular Measurements"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Angular measurements describe the orientation of a person's body segments and their corresponding support surfaces in a wheelchair. These angles define the individual's overall seated posture (Waugh et al., 2013)."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"General Principles"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Three foundational concepts are critical for applying angular measures in practice:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-4 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"The Three Body Planes:"})," Measurements are taken within the sagittal, frontal, and transverse planes."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Reference Lines:"})," Angles are created by comparing a body segment line (e.g., along the thigh) to a support surface reference plane (e.g., the seat)."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Types of Angles:"}),g.jsxs("ol",{className:"list-decimal ml-12 space-y-2 mt-4",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Relative Angles:"})," Describe the angle between two adjacent body segments (e.g., the thightotrunk angle)."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Absolute Angles:"})," Describe the orientation of a single body segment in space, relative to a fixed vertical or horizontal line (e.g., the sagittal trunk angle)."]})]})]})]}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob",children:"THere are some examples of relative body segment angles:"}),g.jsxs("div",{className:"ml-12 space-y-2 text-gray-700 text-xl font-Rob mt-5",children:[g.jsxs("div",{children:[g.jsx("b",{children:"Thigh to trunk angle:"})," Informs seat to back support angle"]}),g.jsxs("div",{children:[g.jsx("b",{children:"Thigh to lower leg angle:"})," Informs seat to lower leg support angle"]}),g.jsxs("div",{children:[g.jsx("b",{children:"Lower leg to foot angle:"})," Informs lower leg support to foot support angle"]})]}),g.jsxs("div",{className:"mx-auto mt-10 w-250",children:[g.jsx("img",{src:js("/pg4_4.png"),alt:"Wheelbarrow diagram",className:"w-full h-auto rounded-lg"}),g.jsx("p",{className:"text-left text-gray-700 text-xl font-Rob mt-2",children:"(Waugh & Crane, 2013)"})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"ROM vs. Seating Angles"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"It is crucial to distinguish between joint range of motion (ROM) and functional sitting angles:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Passive Range of Motion:"})," Often measured on a mat, this tells us the maximum range a joint can be moved through. It defines the person's potential for movement."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Relative Body Segment Angles:"})," Describe the actual angles the person will be supported in within the seating system. The prescribed sitting angles are often different from their full PROM."]})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Why Absolute Angles Are Useful"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsx("li",{children:"Understanding the impact of gravity on a body segment."}),g.jsx("li",{children:"Quantifying posture when complex postural deviations are present."}),g.jsx("li",{children:"Setting measurable goals for improving seated posture."})]})]})},{id:"4",label:"Types of Sitters",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-5xl font-Cap",children:"Understanding Trunk Control"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Clients require different levels of support depending on their sitting balance."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Hands-Free Sitter."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"A person who can sit upright without using their hands for support."}),g.jsxs("ul",{className:"list-disc ml-12 space-y-4 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Implication:"})," Strong, voluntary control of their trunk muscles"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Seating & Support Needs:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-4",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Minimal Support Required:"})," Users typically need only a basic backrest (often stopping below the shoulder blades) to allow for full upper limb range of movement."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Cushion Focus:"})," The primary consideration is pressure management. A simple foam cushion may be sufficient, but those with reduced sensation may need a more contoured cushion to distribute pressure and prevent skin issues."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Other Components:"})," Usually, only a footplate and possibly a pelvic belt are needed."]})]})]})]}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold mt-10",children:"Hands-Dependent Sitter"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"A person who uses one or both hands on a surface to maintain their sitting balance."}),g.jsxs("ul",{className:"list-disc ml-12 space-y-4 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Implication:"})," Strong, voluntary control of their trunk muscles"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Seating & Support Needs:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-4",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Minimal Support Required:"})," Users typically need only a basic backrest (often stopping below the shoulder blades) to allow for full upper limb range of movement."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Cushion Focus:"})," The primary consideration is pressure management. A simple foam cushion may be sufficient, but those with reduced sensation may need a more contoured cushion to distribute pressure and prevent skin issues."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Other Components:"})," Usually, only a footplate and possibly a pelvic belt are needed."]})]})]})]}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Prop Sitter"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"A person who is unable to sit upright without significant external support."}),g.jsxs("ul",{className:"list-disc ml-12 space-y-4 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Implication:"})," Trunk muscles are not strong enough to hold them upright against gravity without assistance"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Seating & Support Needs:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-4",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Trunk Support is Key:"})," Users need a backrest that provides both posterior and lateral support to free up their hands for tasks."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Stability & Pressure:"})," They often cannot shift weight easily, so a more supportive and deeply contoured seat cushion is required for stability and superior pressure distribution."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Additional Components:"})," Often require pelvic belts, arm supports, and possibly a headrest for vehicle travel."]})]})]})]})]})},{id:"5",label:"Posture and Sitting",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"Postural Abnormalities"}),g.jsxs("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:["Postural abnormalities are either ",g.jsx("b",{children:"reducible"})," (flexible) or ",g.jsx("b",{children:"non-reducible"})," (fixed). To optimise function, proper support should be in place to accommodate for, or to correct abnormal postural."]}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"> Reducible Postures"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"A reducible posture demonstrates flexibility, allowing movement from the abnormal position towards a more upright and midline alignment. However, this flexibility also permits movement into further deformity. Thus, the clinical goal is to achieve correction guided by the individual's tolerance."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"> Non-Reducible Postures"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"A non-reducible posture is fixed due to soft tissue or joint limitations that prevent the client from achieving an upright, midline position. Movement is only possible into further deformity, so the primary goal shifts from correction to accommodation within the existing postural alignment."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Seating and Pressure Management"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"The primary aim of pressure management in wheelchair seating is to provide a stable seating system that distributes pressure away from vulnerable areas, allowing tissues to sustain the load without injury for a reasonable period of time."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Cushion design strategies to limit these peak pressures are generally based on the principles of immersion (allowing the body to sink into the cushion), envelopment (the cushion conforming to the body's shape), and pre-contouring (shaping the cushion to match typical anatomy)."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Further Resources"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"The full complexities of seating, pressure management and approaches to seating intervention are beyond the scope of this resource. However, please see the follow resources for further information:"}),g.jsxs("ul",{className:"ml-6 space-y-3 text-blue-700 text-xl font-Rob",children:[g.jsx("li",{children:g.jsx("a",{href:"https://aci.health.nsw.gov.au/__data/assets/pdf_file/0006/312792/ACI-SSCIS-RD6.1-hints-checking-commonly-used-cushions.pdf",target:"_blank",rel:"noopener noreferrer",className:"hover:text-violet-800 underline transition-colors duration-200",children:"Spinal Seating Professional Development Project Assessment Form RD6.1: Handy Hints for Checking Commonly Used Cushions"})}),g.jsx("li",{children:g.jsx("a",{href:"https://1624307.fs1.hubspotusercontent-na1.net/hubfs/1624307/Education%20Resources/General%20Rehab%20Seating%20%26%20Positioning%20Guide.pdf?utm_medium=email&_hsenc=p2ANqtz-_9FySKdn6mHEFlPrhgwCTjZJV_YYBj2AiolC9OPMqzG6_fw0eGyI821UNmpjlsKeM1TuVUGN0GyouZEK6n2KcoOEWzNw&_hsmi=331724455&utm_content=331724455&utm_source=hs_automation",target:"_blank",rel:"noopener noreferrer",className:"hover:text-violet-800 underline transition-colors duration-200",children:"Seating & Positioning Guide: A comprehensive introduction to seating and positioning"})}),g.jsx("li",{children:g.jsx("a",{href:"https://drive.google.com/file/d/13e2Q4RW83L3luzgxRhBBPgygmpprbZps/view?usp=sharing",target:"_blank",rel:"noopener noreferrer",className:"hover:text-violet-800 underline transition-colors duration-200",children:"Wheelchair Service Training Package: Trainers Manual, Intermediate Level"})})]})]})},{id:"6",label:"Postural Support Devices",content:g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"This section focuses on postural support devices for hands-free sitters."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Head & Neck Support"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"The type of support is determined by the user's specific needs and the degree of support required."}),g.jsx("ul",{className:"list-disc ml-12 space-y-4 text-gray-700 text-xl font-Rob",children:g.jsxs("li",{children:[g.jsx("b",{children:"Examples of Types of Support:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-4",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Flat Headrest:"})," Provides minimal support; prevents the head from extending backward, especially in tilted/reclined systems."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Flip-Down or Removable Headrest:"})," Facilitates transfers by moving out of the way easily."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Curved or Winged Headrest:"})," Adds lateral contours to gently keep the head centered."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Occipital Headrest / Neck Yoke:"})," A U-shaped support that provides moderate lateral support and encourages neck flexion."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Lateral Head Supports:"})," Padded arms on both sides for a high degree of lateral control and stability."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Head Sling:"})," A molded, reinforced shelf to fully support the head for conditions like hydrocephalus."]})]})]})}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Back Supports"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Contour and stability may be added via carved foam, custom molds, or lateral supports for lateral stability."}),g.jsxs("ul",{className:"list-disc ml-12 space-y-4 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Examples of Specialised Systems:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Scoliosis Supports:"})," Wrap-around designs with quick-adjust mechanisms and straps for maximum support and easier transfers."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Spasticity Supports:"})," Side-wings or wrap-around backrests act as barriers to confine the user within the chair."]})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Comfort Features:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Lumbar Support:"})," Helps maintain the spine's natural curvature, improving comfort, balance, and mobility."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Padding & Safety:"})," All supports require padding (825mm); the user must be isolated from any fasteners."]})]})]})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Pelvic Positioning"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Proper positioning starts with correct seat depth."}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Clearance:"})," Ensure space behind the knees (~25mm for children, ~50mm for adults)."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Hip Angle:"})," Adjusted via the backrest pivot or (on some chairs) the seat angle."]})]}),g.jsxs("div",{className:"ml-12 text-gray-700 text-xl font-Rob space-y-4",children:[g.jsx("span",{className:"font-bold",children:"Examples of Support Devices:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-4 mt-4",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Pelvic Belt / Subasis Bar"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Purpose:"})," Prevents sliding forward and corrects slouching."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Fit:"})," Snug, allowing about two fingers between the belt and abdomen."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Safety:"})," The latch must be secure and match the user's abilities."]})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Antithrust Cushion"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Purpose:"})," Positions the ischial tuberosities to maintain a neutral pelvis."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Placement:"}),' The "step" must be in front of the sitting bones.']})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Abduction Pommel"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Purpose:"})," Promotes hip joint alignment; counters inward hip adduction."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Placement:"})," Sized to be clear of the groin. Not for keeping the user in the seat."]})]})]})]})]}),g.jsxs("p",{className:"text-gray-700 text-xl font-Rob ml-12",children:[g.jsx("b",{children:"Safety Note:"})," Improperly adjusted pelvic belts can cause the user to slump, leading to bruising from thoracic supports or, in severe cases, choking. Systems must work in concert and be correctly fitted."]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Chest & Thoracic Support"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"These help the user remain upright and provide medio-lateral stability for those with reduced trunk control."}),g.jsxs("div",{className:"ml-12 text-gray-700 text-xl font-Rob space-y-6",children:[g.jsx("span",{className:"font-bold",children:"Types of Support:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-4 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"H-Strap / Thoracic Vest:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"A strap system with a chest pad that wraps around the chest and over the shoulders."}),g.jsx("li",{children:"Secured with D-rings, Velcro, or buckles."})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Lateral Thoracic Supports:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"Padded metal brackets that provide side support."}),g.jsx("li",{children:"Can be removable or swing-away for transfers."})]})]})]}),g.jsx("span",{className:"font-bold",children:"Fitting & Safety Notes:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-4 mt-2",children:[g.jsx("li",{children:"Must be used with a pelvic support. Without it, the user can slide down, and the chest support can restrict breathing, posing the risk of injury or death."}),g.jsxs("li",{children:[g.jsx("b",{children:"Positioning:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"The top of the chest pad or support must be at least 1 inch (25mm) below the sternal notch and must never rub the neck."}),g.jsx("li",{children:"Lateral thoracic supports should be at mid-chest level (approx. nipple line), never in the underarms."})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Tightness:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"Should be snug but not tight. You should be able to fit adult fingers between the support and the chest."}),g.jsx("li",{children:"Must not squeeze the chest or compromise breathing."})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Final Check:"}),g.jsx("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:g.jsx("li",{children:"Once all supports are adjusted, the user should be centered in the seat with their pelvis against the backrest, hips level, and weight evenly distributed."})})]})]})]})]})},{id:"7",label:"Fitting Checklist: Posture",content:g.jsx(g.Fragment,{children:g.jsx(Lj,{})})},{id:"8",label:"Page References",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap mt-8",children:'References for: "Seating and Positioning"'}),g.jsxs("div",{className:"text-sm font-YakuHanJP",children:[g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Cooper, R. A. (1998). ",g.jsx("i",{children:"Wheelchair selection and configuration"}),". Demos."]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Dillbeck Regier, A., Berryman, A., Hays, K., Smith, C., Staniszewski, K., & Gerber, D. (2014). Two approaches to manual wheelchair configuration and effects on function for individuals with acquired brain injury. ",g.jsx("i",{children:"NeuroRehabilitation, 35"}),"(3), 467473. https://doi.org/10.3233/nre-141138"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Frost, S., Noon, J., Scheffler, E., & Stoeckle, R. J. (2013). ",g.jsx("i",{children:"Wheelchair service training package: trainers manual intermediate level"})," (C. Khasnabis & K. Mines, Eds.). World Health Organization."]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["International Organization for Standardization. (2018). ",g.jsx("i",{children:"ISO 168402: Wheelchair seating  Part 2: Determination of physical and mechanical characteristics of devices intended to manage tissue integrity  Seat cushions."})]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Nace, S., Tiernan, J., & N Annaidh, A. (2019). Manufacturing custom-contoured wheelchair seating: A state-of-the-art review. ",g.jsx("i",{children:"Prosthetics and Orthotics International, 43"}),"(4), 382395. https://doi.org/10.1177/0309364619836028"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Pedersen, J. P., Smith, C., Dahlin, M., Henry, M., Jones, J., McKenzie, K., Sevigny, M., & Yingling, L. (2020). Wheelchair backs that support the spinal curves: Assessing postural and functional changes. ",g.jsx("i",{children:"The Journal of Spinal Cord Medicine, 45"}),"(2), 194203. https://doi.org/10.1080/10790268.2020.1760530"]}),g.jsxs("p",{className:"text-gray-700   leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Sonenblum, S. E., Seol, D., Sprigle, S. H., & Cathcart, J. M. (2020). Seated buttocks anatomy and its impact on biomechanical risk. ",g.jsx("i",{children:"Journal of Tissue Viability, 29"}),"(2), 6975. https://doi.org/10.1016/j.jtv.2020.01.004"]}),g.jsxs("p",{className:"text-gray-700   leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Sprigle, S., Wootten, M., Sawacha, Z., & Theilman, G. (2003). Relationships Among Cushion Type, Backrest Height, Seated Posture, And Reach Of Wheelchair Users With Spinal Cord Injury. ",g.jsx("i",{children:"The Journal of Spinal Cord Medicine, 26"}),"(3), 236243. https://doi.org/10.1080/10790268.2003.11753690"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Walford, S. L., Requejo, P. S., Mulroy, S. J., & Neptune, R. R. (2019). Predictors of shoulder pain in manual wheelchair users. ",g.jsx("i",{children:"Clinical Biomechanics, 65"}),", 112. https://doi.org/10.1016/j.clinbiomech.2019.03.003"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Ward, D. E. (1994). ",g.jsx("i",{children:"Prescriptive seating for wheeled mobility"}),". Healthwealth International. Waugh, K., & Crane, B. (2013). A clinical application guide to standardized wheelchair seating measures of the body and seating support surfaces. In http://www.assistivetechnologypartners."]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Waugh, K., & Crane, B. (2013). A clinical application guide to standardized wheelchair seating measures of the body and seating support surfaces. In ",g.jsx("i",{children:"http://www.assistivetechnologypartners"}),"."]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Waugh, K., Crane, B., Taylor, S. J., Cwiertnia, S., Savage, S. S., Davis, K., Brown, L., & Christie, S. (2013). ",g.jsx("i",{children:"Glossary of wheelchair terms and definitions"}),". University of Colorado Anschutz Medical Campus."]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["World Health Organization. (2023). ",g.jsx("i",{children:"Wheelchair provision guidelines"}),". World Health Organization"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Ye, J., Jiang, Z., Chen, S., Cheng, R., Xu, L., & Tsai, T.-Y. (2023). Rehabilitation Practitioners Perceptions of Optimal Sitting and Standing Posture in Men with Normal Weight and Obesity. ",g.jsx("i",{children:"Bioengineering, 10"}),"(2), 210. https://doi.org/10.3390/bioengineering10020210"]})]})]})}],s=n.findIndex(p=>p.id===e),r=n[s],c=Ae.useRef(null),h=()=>{s>0&&t(n[s-1].id,"page4")},d=()=>{s<n.length-1&&t(n[s+1].id,"page4")};return Ae.useEffect(()=>{c.current&&c.current.scrollTo({top:0,behavior:"instant"})},[e]),g.jsxs("div",{className:"w-full h-full flex",children:[g.jsxs("div",{className:"w-72 bg-gray-100 border-r border-gray-300 p-6 flex-shrink-0 h-screen flex flex-col transition-opacity duration-300",children:[g.jsx("p",{className:"text-4xl font-mono font-bold mb-6 text-gray-800 tracking-tight",children:i}),g.jsx("div",{className:"flex flex-col gap-3",children:n.map(p=>g.jsx("div",{onClick:()=>t(p.id,"page4"),className:`cursor-pointer px-3 py-2 rounded font-Pixelmono text-xl
                ${e===p.id?"bg-black text-white":"hover:bg-gray-300 text-black"}`,children:p.label},p.id))})]}),g.jsxs("div",{ref:c,className:"flex-1 p-8 overflow-y-auto relative transition-opacity duration-300 bg-white",children:[g.jsx("h2",{className:"text-6xl font-bold mb-6 font-Cap text-gray-700",children:r?.label}),g.jsx("div",{className:"space-y-6",children:r?.content}),g.jsxs("div",{className:"flex justify-between mt-8",children:[g.jsx("div",{onClick:h,className:`px-6 py-2 font-Pixelmono text-2xl font-bold rounded
                        ${s===0?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-black text-white hover:bg-gray-800 hover:cursor-pointer"}`,children:"< Previous"}),g.jsx("div",{onClick:d,className:`px-6 py-2 font-Pixelmono text-2xl font-bold rounded
                        ${s===n.length-1?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-black text-white hover:bg-gray-800 hover:cursor-pointer"}`,children:"Next >"})]})]})]})};function Pj(){const i=["There are no sharp edges","PSDs are well padded and tightly fixed","No parts are damaged or scratched","The wheelchair travels in a straight line"],e=["Spin freely","Spin without touching the fork","Bolts are tight"],t=["Castor fork spins freely"],n=["Spin freely","Axle bolts are tight","Tires inflated correctly (with thumb pressure, wheel can be depressed less than 5mm)","Push rims are secure"],s=["Function properly"],r=["Footrests are securely attached"],c=["For a cross-folding wheelchair  the wheelchair folds and unfolds easily","For a wheelchair with fold-down backrest  the backrest folds and unfolds easily"],h=["The cushion is in the cover correctly","The cushion is sitting on the wheelchair correctly","The cushion cover fabric is tight but not too tight","If the wheelchair has a solid seat: the cushion fully covers the solid seat"],d=["Has the wheelchair been checked to make sure it is safe and ready to use and all parts are working?"],p=["Does the backrest allow the wheelchair user freedom to move their shoulders to push?","Does movement of the wheelchair or the action of pushing cause the wheelchair user to change their posture or feel uncomfortable or unstable in any way?","Hand propelling: Is the rear wheel position correct for the wheelchair user to push as well as he/she can?","Foot propelling Is the seat height and depth correct for the user to push with their leg/s?","Do the posture supports allow for unrestricted and safe wheelchair mobility?"],y=["Is there any further action necessary? Write any actions in the wheelchair user's file."];return g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Whole wheelchair including PSDs"}),g.jsx("div",{className:"ml-6 my-4",children:g.jsx(ps,{id:"1",items:i})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Front castor wheels"}),g.jsx("div",{className:"ml-6 my-4",children:g.jsx(ps,{id:"2",items:e})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Front castor barrels"}),g.jsx("div",{className:"ml-6 my-4",children:g.jsx(ps,{id:"3",items:t})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Rear wheels"}),g.jsx("div",{className:"ml-6 my-4",children:g.jsx(ps,{id:"4",items:n})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Brakes"}),g.jsx("div",{className:"ml-6 my-4",children:g.jsx(ps,{id:"5",items:s})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Footrests"}),g.jsx("div",{className:"ml-6 my-4",children:g.jsx(ps,{id:"6",items:r})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Frame"}),g.jsx("div",{className:"ml-6 my-4",children:g.jsx(ps,{id:"7",items:c})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Cushion"}),g.jsx("div",{className:"ml-6 my-4",children:g.jsx(ps,{id:"8",items:h})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Is the Wheelchair Ready?"}),g.jsx("div",{className:"ml-6 my-4",children:g.jsx(ps,{id:"9",items:d})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Check fit while the wheelchair is moving FINAL"}),g.jsx("div",{className:"ml-6 my-4",children:g.jsx(ps,{id:"10",items:p})}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Decide if any further action is required"}),g.jsx("div",{className:"ml-6 my-4",children:g.jsx(ps,{id:"11",items:y})})]})}const Fj=({title:i,activeSubtab:e,onSubtabClick:t})=>{const n=[{id:"intro",label:"Common Types of Wheelchairs",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap",children:"Standard Wheelchairs"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Purpose:"})," Designed for short-term, multi-user applications in controlled environments such as hospitals and airports."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Designed For:"})," Short-term conditions (e.g., post-operative recovery) lasting a few weeks to several months."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Limitations:"})," Heavy, inefficient for self-propulsion due to non-adjustable wheels, and limited sizing options. Not intended for individual customisation."]})]}),g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap",children:"Lightweight Wheelchairs"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Purpose:"})," Provides basic, intermittent mobility at a lower cost."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Designed For:"})," Users who need assistance for short periods (20% of the day) or on uneven terrain, but who are primarily ambulatory."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Limitations:"})," Fixed axle position makes self-propulsion inefficient, precluding its use as a primary mobility device."]})]}),g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap",children:"High-Strength Lightweight Wheelchairs"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Purpose:"})," Offers a balance of durability and limited adjustability for regular, part-time use."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Designed For:"})," Users who require a wheelchair for a significant portion (20-70%) of their daily mobility."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Limitations:"})," Limited axle adjustability may not meet the biomechanical needs of full-time users, making it unsuitable as a primary chair."]})]}),g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap",children:"Ultralightweight Wheelchairs"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Purpose:"})," The standard for full-time, long-term use, designed to maximise efficiency and minimize injury risk."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Designed For:"})," Users who rely on a wheelchair as their primary means of mobility (80-100% of the time)."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Features:"})," Highly adjustable rear axle and frame components allow for precise configuration to the user's body and functional needs."]})]}),g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap",children:"Hemi-Height Wheelchairs"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Purpose:"})," Features a lower seat-to-floor height to facilitate foot propulsion."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Designed For:"})," Users of short stature or those who use their feet for mobility and stability (e.g., individuals with hemiplegia or balance deficits)."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Limitations:"})," Often heavy and typically lacks the sophisticated adjustability of an ultralightweight chair."]})]}),g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap",children:"Manual Tilt-in-Space Wheelchairs"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Purpose:"})," Allows the seat and back angle to tilt together, maintaining postural alignment."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Designed For:"})," Users requiring pressure redistribution, improved postural control, and assisted positioning for functions like respiration and swallowing."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Features:"})," Highly configurable with options for supports and brakes to assist caregivers."]})]}),g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap",children:"Paediatric Wheelchairs"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Purpose:"})," Scaled for smaller users with built-in adjustability to accommodate growth."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Designed For:"})," Children who need a wheelchair for mobility augmentation or as their primary device."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Considerations:"})," Ongoing configuration is essential to protect developing joints, maximise energy efficiency, and adjust for growth, necessitating regular clinical follow-up."]})]}),g.jsx("h2",{className:"text-gray-700 text-5xl font-Cap mt-10",children:"Sport-Specific Wheelchairs"}),g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap",children:"Tennis Wheelchairs"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Optimised for speed and rapid directional changes to cover the entire court."}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Frame & Wheels:"})," Three-wheel design (two large rear, one small front caster) for lightness and fast acceleration."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Wheel Configuration:"})," Significant camber is applied to enhance lateral stability during reaches and improve turning speed."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Seating System:"})," Features a steep seat angle (pitch) to keep the player securely positioned, improving balance and control."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Athlete Positioning:"}),` The knees are abducted and feet are placed on a rigid footrest behind the knees. This "closed" posture lowers the combined inertia of the player and chair, mimicking a figure skater's spin, for vastly improved maneuverability.`]}),g.jsxs("li",{children:[g.jsx("b",{children:"Special Features:"})," Handles are integrated into the front of the seat to aid balance during lateral reaches and to help maintain knee position."]})]}),g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap",children:"Basketball Wheelchairs"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Engineered for explosive acceleration, braking, and durability to withstand incidental contact."}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Frame & Wheels:"})," Standard four-wheel design. Uses high-pressure, smooth-tread tires for maximum speed on the court."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Wheel Configuration:"})," Camber is critical for quick turning and to protect players' hands during side impacts by creating a gap between the wheels at the top."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Protective Features:"})," Spoke guards are mandatory to prevent wheel damage and facilitate picking up the ball. Anti-tip rollers or skids are required on the front to prevent forward falls."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Seating & Positioning:"})," Rules limit seat height, leading to a near-level seat angle. However, guards often use a lower seat and steeper angle for enhanced speed and maneuverability. Strategic strapping systems are commonly used to optimize a player's positioning and functional performance."]})]})]})},{id:"fit",label:"Wheelchair Frame",content:g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"The design of the wheelchair frame and its components directly impacts the user's experience. This section outlines common styles and variations, explaining how they influence propulsion efficiency, functional needs, and overall mobility."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"Frame Design"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Wheelchairs are commonly made from lightweight tubing which may be welded or bolted together using lugs (fittings made to match pieces of a joint). The selection of a rigid or folding frame often heavily depends on the user's transportation needs."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"There are two basic frame types:"}),g.jsxs("div",{className:"ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsx("p",{children:g.jsx("b",{children:"> Folding"})}),g.jsx("p",{children:g.jsx("b",{children:"> Rigid"})})]}),g.jsxs("div",{className:" text-gray-700 text-xl font-Rob space-y-6",children:[g.jsx("span",{className:"font-bold",children:"Folding frames"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"Have a cross brace (X-shaped) underneath the seat frame."}),g.jsxs("li",{children:["This ",g.jsx("b",{children:"enables the wheelchair to collapse"})," in half for storage or transport purposes."]})]}),g.jsx("span",{className:"font-bold",children:"Rigid frames"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"Have solid horizontal tubing underneath the seat frame and at the back support and foot support."}),g.jsxs("li",{children:["Are a single solid structure that does not fold side-to-side, but ",g.jsx("b",{children:"can be disassembled."})," "]})]})]}),g.jsx("img",{src:js("/pg5_1.png"),alt:"Wheelbarrow diagram",className:"w-230 h-auto rounded-lg shadow mx-auto mb-10"}),g.jsxs("table",{className:"table-auto border-collapse border border-gray-300 text-xl font-Rob w-full",children:[g.jsx("thead",{className:"bg-gray-100 text-center",children:g.jsxs("tr",{children:[g.jsx("th",{className:"border border-gray-300 px-4 py-2"}),g.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-green-600",children:"Advantages"}),g.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left text-red-500",children:"Disadvantages"})]})}),g.jsxs("tbody",{children:[g.jsxs("tr",{children:[g.jsx("td",{className:"border border-gray-300 px-4 py-2 font-bold text-gray-700",children:"Non-rigid Frame Wheelchairs"}),g.jsx("td",{className:"border border-gray-300 px-4 py-2 text-gray-700 align-top",children:g.jsxs("ul",{className:"list-disc ml-6 space-y-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Folding mechanism:"})," Common and more intuitive than disassembly"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Shock absorption:"})," Better shock absorption over uneven surfaces"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Removable foot supports:"})," Helps facilitate standing transfers"]})]})}),g.jsx("td",{className:"border border-gray-300 px-4 py-2 text-gray-700 align-top",children:g.jsxs("ul",{className:"list-disc ml-6 space-y-2 text-gray-700",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Weight:"})," Heavier, due to folding mechanism components"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Propulsion efficiency:"})," Reduced, as energy is dissipated through the flexed cross-brace frame"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Durability:"})," Lower, due to moving and removable parts"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Maneuverability:"})," Decreased, as swing-away or removable foot supports have greater overall length"]})]})})]}),g.jsxs("tr",{children:[g.jsx("td",{className:"border border-gray-300 px-4 py-2 font-bold text-gray-700",children:"Rigid Frame Wheelchairs"}),g.jsx("td",{className:"border border-gray-300 px-4 py-2 align-top text-gray-700",children:g.jsxs("ul",{className:"list-disc ml-6 space-y-2 text-gray-700",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Weight:"})," Lighter with fewer moving parts"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Propulsion efficiency:"})," Increased, due to weight and decreased flex in the frame"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Durability:"})," Higher, due to structural rigidity and fewer moving parts"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Maneuverability:"})," Slightly increased, due to foot support design and shorter overall length"]})]})}),g.jsx("td",{className:"border border-gray-300 px-4 py-2 align-top text-gray-700",children:g.jsxs("ul",{className:"list-disc ml-6 space-y-2 text-gray-700",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Disassembly:"})," Less intuitive than a folding mechanism"]}),g.jsxs("li",{children:[g.jsx("b",{children:"Shock absorption:"})," Decreased due to frame rigidity"]})]})})]})]})]}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Key Considerations:"}),g.jsxs("ol",{className:"list-decimal ml-12 space-y-3 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("span",{className:"font-bold",children:"Frame Type:"})," Does the user need a rigid frame or a folding frame? How much weight and what size can they lift and manoeuvre?"]}),g.jsxs("li",{children:[g.jsx("span",{className:"font-bold",children:"Folding Style:"})," If a folding frame is needed, which style is best, i.e., one that folds from the sides or one where the back folds down onto the seat?"]}),g.jsxs("li",{children:[g.jsx("span",{className:"font-bold",children:"User Independence:"})," If disassembly is required, can the user perform it independently? Are tools needed, and can the process be modified for their independence?"]})]}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"A Different Front End"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Most rigid wheelchairs are configured with a rigid foot support as part of the frame, and most folding wheelchairs have a swing-away foot support. Though, depending on the clients specific needs, a rigid wheelchair with a swing-away foot support and folding wheelchairs with a rigid front end may be available."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"Frame Geometric Styles"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"The structural configuration or geometry of the wheelchairs frame affects its strength, rigidity, weight, and how it responds during propulsion. Frame geometry can be used to reduce the effects of the impulse observed when going off a curb, or to minimise road vibration."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Three common frame styles include the:"}),g.jsxs("div",{className:"ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsx("p",{children:g.jsx("b",{children:"> Box frame"})}),g.jsx("p",{children:g.jsx("b",{children:"> Dual tube frame"})}),g.jsx("p",{children:g.jsx("b",{children:"> Cantilever frame"})})]}),g.jsxs("div",{className:"text-gray-700 text-xl font-Rob space-y-4",children:[g.jsx("img",{src:js("placeholder.png"),alt:"Wheelbarrow diagram",className:"float-right w-100 h-auto rounded-lg shadow ml-4 mb-2 border-2"}),g.jsx("span",{className:"font-bold",children:"Box frames"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"Commonly found in rigid-frame wheelchairs, where they form the main structural rectangle."}),g.jsx("li",{children:"The design is characterised by frame members arranged in a rectangular, box-like shape."}),g.jsx("li",{children:"This geometry provides excellent vertical rigidity and torsional strength, resulting in a highly durable and stable frame."}),g.jsx("li",{children:"Due to this inherent stiffness, the frame itself is not the most effective for vibration dispersion, resulting in the transfer of road noise to the user."}),g.jsx("li",{children:"In this design, suspension and shock absorption are the responsibility of other components, such as the tires and cushion. The frame's primary role is to provide a solid, rigid foundation."})]})]}),g.jsxs("div",{className:"text-gray-700 text-xl font-Rob space-y-4",children:[g.jsx("img",{src:js("beans1.png"),alt:"Wheelbarrow diagram",className:"float-right w-100 h-auto rounded-lg shadow ml-4 mb-2 border-2"}),g.jsx("span",{className:"font-bold",children:"Dual tube frames"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"Feature a second, (often triangulated) frame tube, which creates a structure that balances rigidity for propulsion efficiency with controlled flex for shock absorption."}),g.jsx("li",{children:"This flexibility allows the frame to absorb more vibration and road noise than a rigid box frame."}),g.jsx("li",{children:"The triangulated design is often perceived as more modern and aesthetically streamlined."}),g.jsx("li",{children:"The compact, often tapered shape of the frame can improve transportability by reducing the overall folded width of the wheelchair."})]})]}),g.jsxs("div",{className:"text-gray-700 text-xl font-Rob space-y-4",children:[g.jsx("img",{src:js("beans2.png"),alt:"Wheelbarrow diagram",className:"float-right w-100 h-auto rounded-lg shadow ml-4 mb-2 border-2"}),g.jsx("span",{className:"font-bold",children:"Cantilever frames"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"Are exclusive to rigid wheelchairs, where the front and rear sections are connected by a single main tube, resembling a cantilever beam anchored at the rear wheels."}),g.jsx("li",{children:"They are among the most compact for transport and the lightest type of rigid frame available."}),g.jsxs("li",{children:[g.jsx("span",{children:"Design principles include:"}),g.jsxs("ol",{className:"list-decimal ml-8 space-y-2 mt-4",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Built-in suspension:"})," The frame's controlled flex absorbs vibration and shock, providing a smoother ride than a fully rigid frame."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Structural efficiency:"})," The use of fewer tubes positioned closer to the user makes the chair lightweight and reduces its visual bulk."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Simplified construction:"})," Minimal parts and welds lower manufacturing complexity and reduce potential structural weaknesses."]})]})]})]})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"Folding mechanisms"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"There are three commonly used folding mechanisms used with wheelchair frames:"}),g.jsxs("div",{className:"ml-12 space-y-2 text-gray-700 text-xl font-Rob",children:[g.jsx("p",{children:g.jsx("b",{children:"> Cross-brace"})}),g.jsx("p",{children:g.jsx("b",{children:"> Parallel-brace"})}),g.jsx("p",{children:g.jsx("b",{children:"> Forward folding"})})]}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Variations on the cross-brace design (single or double cross-brace mechanisms) are most commonly used in folding wheelchairs."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Cross-brace Mechanism"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2 mb-8",children:"Consists of two crossing frame members forming an X when viewed from behind, hinged at the bottom and pinned centrally. It folds by lifting the seat upholstery, which draws the cross-members upward and pulls the side frames together. The users weight stabilises the frame when opened, preventing accidental folding. Double cross-brace designs increase frame stiffness. This is a simple and reliable mechanism albeit may be prone to collapse under lateral tilt and increases the folded height. Some designs incorporate over-centre locks or snap systems to enhance stability."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Parallel-brace Mechanism"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2 mb-8",children:"The frame folds laterally via cross-members hinged at both ends and at the centre. In the open position, the centre hinge locks; folding occurs when the lock is released and the user pulls the frame forward. Cross-members can be secured with pin or cam locks. This design provides rigid-like performance when extended and can be partially folded with the user seated, aiding access through narrow spaces. The mechanism is more complex, requiring greater effort to operate and maintain."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Forward-folding Mechanism"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Involves hinging both the front frame and backrest, allowing the backrest to fold onto the seat and the front section to fold beneath it. This achieves very compact storage, especially when combined with quick-release rear wheels. Common in ultralight wheelchairs, this design is often limited to forward-folding backrests. It offers significant portability advantages but requires multiple operations to fold and is less commonly used."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"Materials Used in Wheelchair Frames"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Modern wheelchairs are commonly constructed from aluminium, steel, titanium, or advanced composite materials such as carbon fibre and Kevlar. Each material offers distinct advantages in terms of strength, weight, durability, and cost."}),g.jsx("img",{src:js("/pg5_2.png"),alt:"Wheelbarrow diagram",className:"w-230 h-auto rounded-lg shadow mx-auto"}),g.jsxs("div",{className:" text-gray-700 text-xl font-Rob",children:[g.jsx("span",{className:"font-bold",children:"Aluminium"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"Most aluminium frames use round drawn 6061 aluminium tubing."}),g.jsx("li",{children:"Among the least expensive and most versatile heat-treatable alloys."}),g.jsx("li",{children:"Offers good mechanical properties and high corrosion resistance."}),g.jsxs("li",{children:[g.jsx("span",{className:"",children:"Widely used due to its:"}),g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsx("li",{children:"Availability and visual appeal"}),g.jsx("li",{children:"Low weight and adequate strength"}),g.jsx("li",{children:"Resistance to environmental corrosion"})]})]})]})]}),g.jsxs("div",{className:" text-gray-700 text-xl font-Rob",children:[g.jsx("span",{className:"font-bold",children:"Steel"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"Typically made from chromiummolybdenum (chro-moly) alloy steel (e.g., 4130 or 4140) or mild steel (e.g., 1010 or 1020)."}),g.jsxs("li",{children:["Chro-moly steel is valued for:",g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsx("li",{children:"Excellent weldability and ease of fabrication"}),g.jsx("li",{children:"Moderate hardenability with high fatigue resistance"}),g.jsx("li",{children:"Option for nitriding treatment to increase wear and abrasion resistance"})]})]}),g.jsx("li",{children:"Provides high durability but adds significant weight compared with aluminium or titanium"})]})]}),g.jsxs("div",{className:" text-gray-700 text-xl font-Rob",children:[g.jsx("span",{className:"font-bold",children:"Titanium"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:"A lightweight, strong, non-ferrous metal known for exceptional corrosion resistance and long-term durability."}),g.jsxs("li",{children:["Used for its:",g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsx("li",{children:"High strength-to-weight ratio"}),g.jsx("li",{children:"Attractive finish and resistance to wear"})]})]}),g.jsxs("li",{children:["Limitations:",g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsx("li",{children:"High cost and specialised fabrication requirements (requires skilled welders and precision tools)."}),g.jsx("li",{children:"Brittle fracture risk if flawed or worn  failure can occur suddenly."})]})]})]})]}),g.jsxs("div",{className:" text-gray-700 text-xl font-Rob",children:[g.jsx("span",{className:"font-bold",children:"Carbon Fibre and Kevlar Composites"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:["Carbon fibre:",g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsx("li",{children:"Extremely stiff and offers high tensile strength."}),g.jsx("li",{children:"Very low density, offers superior weight reduction without compromising rigidity."}),g.jsx("li",{children:"Demonstrates the lowest vibration transmission."})]})]}),g.jsxs("li",{children:["Kevlar:",g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsx("li",{children:"A light, organic, yellow fibre soft to the touch and highly impact-resistant."}),g.jsx("li",{children:"Provides excellent toughness, though poor compression strength."})]})]}),g.jsx("li",{children:"Composite frames combine these materials to achieve lightweight yet robust structures, ideal for high-performance and sports wheelchairs."})]})]})]})},{id:"measure",label:"Rear Wheels",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap",children:"Tires"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"The performance of a manual wheelchair is greatly influenced by the choice of rear tire. These can be categorised into three primary types: pneumatic, solid, and hybrid airless inserts. Each present distinct trade-offs in comfort, efficiency, durability, reliability and maintenance."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"1. Pneumatic (Air-Filled)"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Pneumatic tires offer a more cushioned ride and are better at navigating obstacles with good traction on most terrain. They are generally the lightest and provide the best propulsion efficiency, along with superior shock absorption and vibration dampening for pain control, spasm management, and comfort."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Their main drawbacks include regular maintenance, susceptibility to punctures, and more frequent replacement than solid tires due to a thinner outer tread layer. A deeper tread increases durability and off-road traction but also raises rolling resistance, requiring greater propulsion force. A thin profile decreases friction during turning, making the chair more agile and ideal for sports, though some users report decreased hand comfort."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"2. Solid (Urethane)"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Solid tires offer the reliability of being puncture-proof and require little to no maintenance. They have higher tensile strength and load capacity. The significant trade-off is markedly decreased vibration and shock absorption, and reduced traction, giving a bumpier ride. They are typically heavier due to increased rubber mass and have increased rolling resistance. Hence, they perform best on smooth, even, and indoor surfaces."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"3. Hybrid Tires (Pneumatic Casing with Airless Insert)"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"This category uses a pneumatic-style casing filled with a solid insertsuch as foam or rubberto eliminate flats while providing more cushioning than a solid tire (though less than a true pneumatic). They are the heaviest option and exhibit the greatest rolling resistance, impacting propulsion efficiency. Foam-filled inserts generally provide a smoother ride and better rollability than rubber inserts that cause a faster loss of momentum."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Rear Wheel Styles"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"The two most common rear wheel styles are spoked and mag (moulded composite) wheels, each with distinct performance characteristics."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Spoked Wheels"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Spoked wheels consist of a rim, a central hub, and tensioned spokes connecting them. They are substantially lighter and more responsive than mag wheels, making them the preferred choice for sports and active users seeking maximum propulsion efficiency."}),g.jsxs("ul",{className:"list-disc ml-12 space-y-4 mt-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Rims:"})," Available in single, double, or triple-wall constructions, referring to the number of material layers, which directly impacts strength. Materials range from standard steel and aluminum to high-performance titanium, magnesium, or carbon fibre for an optimal stiffness-to-weight ratio."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Spokes:"})," Materials include steel, aluminum, carbon fibre, and titanium, affecting weight and durability.",g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"J-bend:"})," Traditional but less durable due to a stress point at the bend."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Straight-pull:"})," Allows for higher, more uniform tension, increasing strength and durability."]})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Spoke Count:"})," A higher number of spokes distributes the load more evenly, increasing wheel strength and stiffness at the cost of added weight. Proper, even spoke tension is critical for a wheel that rolls straight and efficiently."]})]}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Mag (Moulded Composite) Wheels"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Mag wheels are single-piece units moulded from composite materials like fibre-reinforced ABS or PVC plastic. They prioritize durability and low maintenance over performance."}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Performance:"})," They are heavier (adding ~1 kg per pair) and less efficient than spoked wheels due to their weight and structural flex, which absorbs some energy during propulsion."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Durability & Cost:"})," They are more impact-resistant, require virtually no maintenance, and are generally less expensive than equivalent spoked wheel systems."]})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Handrims"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Handrims are the metal rings attached to the rear wheels, which the user grips to propel and steer the wheelchair. They are typically fabricated from circular aluminium tubing and have a slightly smaller diameter than the wheel."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Standard single-tube rims are usually the lightest options, but are not ergonomic as they force a tight grip that can lead to upper limb strain and fatigue. Selecting the appropriate handrim, based on its material, coating, and ergonomic design, can enhance propulsion efficiency, user comfort, and the long-term preservation of upper limb function."})]})},{id:"5",label:"Castors",content:g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Castor choice directly influences front seat-to-floor height, frame angle, lower extremity positioning, ride characteristics, and propulsion efficiency. Selection is based on the user's lifestyle, capabilities, preferences, and environment, considering factors such as indoor maneuverability, outdoor use, and wheelchair skills."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Examples:"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-4 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Environment:"})," Larger/wider castors may be prioritised for outdoor/rough terrain, and smaller/narrower castors for tight indoor spaces."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Rolling Resistance:"})," A wider, smaller-diameter castor may deliver similar propulsion performance to a narrower, larger-diameter castor on mixed surfaces."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Weight & Stability:"})," Heavier castors are more prone to flutter at high speeds."]})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Castor Size"}),g.jsxs("div",{className:" text-gray-700 text-xl font-Rob space-y-6 mt-5",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-bold",children:"Diameter"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Larger Diameter:"}),g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsx("li",{children:"Allows for a higher front seat to floor height and a greater front frame angle."}),g.jsx("li",{children:"Clear obstacles more easily and maintain propulsion speed due to decreased rolling resistance."})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Smaller Diameter:"}),g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsx("li",{children:"Permits a lower front seat to floor height and a smaller front frame angle."}),g.jsx("li",{children:"Offers greater manoeuverability and versatility due to smaller turning radius and castor footprint."})]})]})]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-bold",children:"Width"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Wider"}),g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsx("li",{children:"Increases rolling resistance due to greater surface contact."}),g.jsx("li",{children:"Rolls easier over rough/uneven terrain and is less prone to getting caught in cracks."})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Narrower"}),g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsx("li",{children:"Decreases rolling resistance due to lesser surface contact."}),g.jsx("li",{children:"More efficient on smooth, hard surfaces."})]})]})]})]})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Castor Tire Types"}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Solid (Polyurethane/Rubber)"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-4 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Standard:"})," Made of hard polyurethane or rubber. Durable with moderate rolling resistance."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Soft-Roll:"})," Uses a softer polyurethane compound and a convex shape. Reduces rolling resistance on hard surfaces and increases compliance on softer terrain. However, the softer material causes faster wear compared to standard solid castors."]})]}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Pneumatic (Air-Filled)"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Provides improved comfort and a smoother ride over irregular surfaces by absorbing shock. Their main drawbacks are lower durability, susceptibility to punctures, and the requirement for regular air pressure maintenance to preserve propulsion efficiency, making them less common."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Castor Hub Material"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Composite/Plastic:"})," Lighter weight, reducing overall chair mass."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Aluminium/Metal Alloy:"})," Offers superior durability and strength, better withstanding impacts and heavy use."]})]})]})},{id:"6",label:"Armrests",content:g.jsxs(g.Fragment,{children:[g.jsxs("p",{className:"text-gray-700 text-xl font-Rob",children:["Armrests provide ",g.jsx("b",{children:"lateral support"})," and serve as ",g.jsx("b",{children:"stabilising handles"})," when the user leans to either side. They also improve ",g.jsx("b",{children:"comfort, function, and wheelchair aesthetics"}),", and help ",g.jsx("b",{children:"protect clothing"})," from wheel contact."]}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Primary Functions"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2 text-gray-700 text-xl font-Rob mt-4",children:[g.jsxs("li",{children:["Provide ",g.jsx("b",{children:"upper-limb and trunk support"}),"."]}),g.jsxs("li",{children:["Serve as ",g.jsx("b",{children:"handholds"})," for repositioning or leaning."]}),g.jsxs("li",{children:["Enable ",g.jsx("b",{children:"pressure relief strategies"}),"."]}),g.jsxs("li",{children:["Help maintain ",g.jsx("b",{children:"cleanliness"})," by shielding clothing from wheels."]}),g.jsxs("li",{children:["Support ",g.jsx("b",{children:"reaching tasks"})," by providing leverage or stability."]})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Armrest Styles"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Armrests are categorised by their design and length, each offering distinct functional trade-offs between support, access, and chair width. Styles include:"}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Wrap-Around Armrests"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Mounted to the rear of the frame, these wrap forward along the backrest canes. Their key advantage is that they do not increase overall chair width, enhancing manoeuvrability for active users. A limitation is that they offer no side-guard protection, allowing clothing to contact the wheels."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Full-Length Armrests"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"These extend along almost the entire forearm, providing maximum support. Common in power chairs for mounting controls, they offer excellent side-guard protection. Their full length restricts close access to tables and desks. They increase the chair's overall width."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Desk-Length Armrests"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"A shorter variant of the full-length style, desk-length armrests provide side-guard protection while allowing the user to position closer to tables and desks for daily activities. Like full-length styles, they are side-mounted and will increase chair width."}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Armrest Adjustability & Mounting"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Height:"})," Armrests can be fixed-height or adjustable to match the user's trunk and arm length."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Function:"})," Most designs feature a user-accessible latch that allows the armrest to flip back or detach completely, facilitating transfers or side-leaning."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Safety Note:"})," While engineered latches on some models permit assisted lifting of the chair with the user seated, many designs will detach under upward force and are not intended for this purpose."]})]})]})},{id:"7",label:"Footrests",content:g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Footrests are critical for seated stability, pelvic alignment, and upper limb function. They are available as fixed, folding, or swing-away designs."}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Proper adjustment is essential: a footrest that is too long results in a loss of optimal lower limb posture, compromised pelvic stability, and discomfort. Types of footrests and legrests include:"}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Tubular Rigid Footrests"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"These provide maximum rigidity and durability, ideal for sports and highly active users. Their fixed position requires adapted transfer techniques, most commonly a side-to-side transfer, though skilled users can perform forward transfers."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Swing-Away Footrests"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Common on folding wheelchairs, these footrests fold upwards and swing laterally to clear the front area of the wheelchair, facilitating forward and standing transfers. They also shorten the wheelchair for transport and narrow access. While less durable than rigid designs, they provide a fixed knee and ankle angle to maintain postural alignment."}),g.jsx("span",{className:"text-gray-700 text-xl font-Rob font-bold",children:"Elevating Legrests"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob mt-2",children:"Elevating legrests extend the overall length of the wheelchair, which increases its turning radius and reduces manoeuvrability. They are indicated for users who cannot achieve the standard legrest angle due to reduced flexibility (e.g., from knee contractures) or who require periodic postural changes for physiological management. A primary function is to assist in reducing lower-limb oedema and venous pooling by elevating the extremities."}),g.jsx("img",{src:js("/pg5_3.png"),alt:"Wheelbarrow diagram",className:"w-240 h-auto shadow mx-auto border-2"}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Anti-Tip Rollers (Forward)"}),g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"Forward anti-tip rollers are attachments that can be fitted to both rigid and swing-away footrests. Originally designed for wheelchair sports such as basketball and quad rugby (where rules mandate their use to prevent forward falls and floor damage), they can also benefit everyday users at risk of tipping forwards. A critical clinical consideration is their height adjustment; they must be set high enough to avoid catching on common obstacles like thresholds and pavement cracks, which would impede mobility."})]})},{id:"8",label:"Wheel Locks",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Engagement Mechanism: Push vs. Pull"}),g.jsxs("p",{className:"text-gray-700 text-xl font-Rob",children:[g.jsx("b",{children:"Note:"})," Changes to wheel specificationssuch as size, tire type, air pressure, or axle positionmay affect wheel lock function and engagement."]}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Push-to-Lock:"})," Engaged by pushing the lever down and away. As greater force is required for engagement than disengagement, the design is often preferred as it allows the user to apply force with the palm."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Pull-to-Lock:"})," Engaged by pulling a lever up towards the user. This may be suitable for clients with stronger grip strength and pulling ability, but is less intuitive for most."]})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Mounting Position"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-4 mt-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"High Wheel Locks"}),g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Mounting:"})," Attached to the upper side frame tube."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Advantage:"})," Requires the least dexterity and trunk flexion to operate."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Disadvantage:"})," Disengaged levers can swing and hit or trap fingers. This risk can be mitigated by selecting retractable (scissor/butterfly) designs or opting for low wheel locks."]})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Low Wheel Locks"}),g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Mounting:"})," Attached to the lower side frame tube."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Advantage:"})," Prevents thumb jamming and can accommodate a wide range of wheel camber angles."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Disadvantage:"})," Requires greater mobility, reach, and trunk flexion to operate, making them more difficult for many users."]})]})]})]}),g.jsx("h2",{className:"text-gray-700 text-4xl font-Cap mt-10",children:"Adaptations & Other Types"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2 text-gray-700 text-xl font-Rob",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Extension Levers:"})," Can be added for users with limited reach, strength, or range of motion."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Sweeper Brakes:"})," Allow for adjustable braking force."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Hub Locks:"})," A cable-actuated system where a piston engages directly at the wheel hub, often providing a very secure lock."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Attendant Locks:"})," Mounted to the rear of the wheelchair frame to be operated by a carer or assistant."]})]})]})},{id:"9",label:"Chair Configuration",content:g.jsxs(g.Fragment,{children:[g.jsx("p",{className:"text-gray-700 text-xl font-Rob",children:"The following guidelines provide a starting point for wheelchair configuration, though clinical decision-making must be applied in every individual case. These recommendations have been synthesised from general principles in the literature and clinical manuals, notably informed by Worobey et al. (2023) and Lange & Minkel (2025), and should be adapted according to specific user assessment and context."}),g.jsxs("div",{className:"text-gray-700 text-xl font-Rob space-y-6",children:[g.jsxs("div",{children:[g.jsx("span",{className:"font-bold",children:"Seat Width"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Guideline:"})," Add 1.252 inches to the user's hip width for clothing and to prevent skin irritation."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Too Wide:"}),g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsx("li",{children:"Compromises pelvic positioning and trunk alignment, reducing sitting stability."}),g.jsx("li",{children:"Decreases maneuverability and access through doorways."}),g.jsx("li",{children:"For self-propellers: Reduces wheel access and propulsion efficiency, forcing the arms into a position that increases the risk of shoulder and wrist injury."})]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Too Narrow:"})," Can cause pelvic rotation and pressure injuries on the outer hips."]})]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-bold",children:"Seat Depth"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Guideline:"})," For self-propelling adults, the seat depth should be at least 2 inches (50mm) shorter than the user's buttock-thigh length. For children, about 1 inch (25mm) is appropriate."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Too Long:"})," Causes the user to slide forward, leading to a posterior pelvic tilt, improper leg positioning, and reduced maneuverability."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Too Short:"})," Provides inadequate thigh support, increasing pressure on the buttocks and the risk of pressure ulcers."]})]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-bold",children:"Seat-to-Footrest Length"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Guideline:"})," Set to provide a 2-inch footrest clearance from the floor, with no gap between the thighs and the seat cushion."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Footplate Too High:"})," Increases pressure on the buttocks, raising the risk of pressure injuries."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Footplate Too Low:"})," Decreases stability, causes footrests to contact the ground, and increases the risk of falling."]})]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-bold",children:"Seat Height & Wheel Position"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Guideline:"})," Ensure footrests clear the ground and the user's elbow is at a 100120 angle when their hand is on top of the pushrim."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Seat Too High:"})," Hinders table access and transfers; results in a short, inefficient push stroke."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Seat Too Low:"})," Causes footrests to hit the floor and forces the user into a poor shoulder position, increasing injury risk."]})]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-bold",children:"Wheel Axle Position"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Guideline:"})," A common starting point is aligning the axle with the user's middle finger when their arm hangs straight down."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Too Far Forward:"})," Makes the chair unstable and prone to tipping backwards."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Too Far Back:"})," Makes the chair harder to propel and reduces functional efficiency."]})]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-bold",children:"Seat Slope"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Guideline:"})," A slight posterior slope (where the rear of the seat is lower than the front) is standard. A common starting point is a 2-inch difference."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Benefits:"})," Utilises gravity to improve pelvic and trunk stability, helps prevent the user from sliding forward in the seat (sacral sitting)."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Considerations:"})," A steep slope can make transfers challenging, reduce effective reach to the pushrims and impact foot propulsion."]})]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-bold",children:"Rear Wheel Camber"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Guideline:"})," 2 to 5 degrees is typical for most users."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Benefits:"})," Improves propulsion access and lateral stability."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Consideration:"})," Increases the overall width of the wheelchair, which may limit access in tight spaces."]})]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-bold",children:"Back Support Height"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsx("li",{children:g.jsx("b",{children:"Guideline:"})}),g.jsxs("ul",{className:"list-disc ml-8 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Limited Trunk Control:"})," Position the backrest just below the scapula."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Intact Trunk Control:"})," A lower backrest (e.g., lumbar support) allows freedom for propulsion."]})]}),g.jsxs("li",{children:[g.jsx("b",{children:"Too Tall:"})," Restricts shoulder movement, making propulsion less effective."]})]})]}),g.jsxs("div",{children:[g.jsx("span",{className:"font-bold",children:"Rear Wheel Size"}),g.jsxs("ul",{className:"list-disc ml-12 space-y-2 mt-2",children:[g.jsxs("li",{children:[g.jsx("b",{children:"Guideline:"})," Common adult wheel sizes are 24 or 26 inches. Paediatric sizes range from 18 to 22 inches."]}),g.jsxs("li",{children:[g.jsx("b",{children:"Consideration:"})," A smaller wheel (e.g., 22-inch) can help a shorter individual achieve the optimal 120 elbow angle for efficient propulsion. Heavier wheels are more difficult to start moving from a stop."]})]})]})]})]})},{id:"10",label:"Fitting Checklist: The Chair",content:g.jsx(g.Fragment,{children:g.jsx(Pj,{})})},{id:"11",label:"Page References",content:g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:"text-gray-700 text-3xl font-Cap mt-8",children:'References for: "The Wheelchair"'}),g.jsxs("div",{className:"text-sm font-YakuHanJP hidden",children:[g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Bhatt, P., & Goe, A. (2017). Carbon Fibres: Production, Properties and Potential Use. ",g.jsx("i",{children:"Material Science Research India, 14"}),"(1), 5257. https://doi.org/10.13005/msri/140109"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Chan, F. H. N., Eshraghi, M., Alhazmi, M. A., & Sawatzky, B. J. (2017). The effect of caster types on global rolling resistance in manual wheelchairs on indoor and outdoor surfaces. ",g.jsx("i",{children:"Assistive Technology, 30"}),"(4), 176182. https://doi.org/10.1080/10400435.2017.1307880"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Cooper, R. (1995). ",g.jsx("i",{children:"Rehabilitation Engineering Applied to Mobility and Manipulation."})," Taylor & Francis."]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Frost, S., Noon, J., Scheffler, E., & Stoeckle, R. J. (2013). ",g.jsx("i",{children:"Wheelchair service training package: trainers manual intermediate level"})," (C. Khasnabis & K. Mines, Eds.). World Health Organization."]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Garcia-Mendez, Y., Pearlman, J. L., Boninger, M. L., & Cooper, R. A. (2013). Health risks of vibration exposure to wheelchair users in the community. ",g.jsx("i",{children:"The Journal of Spinal Cord Medicine, 36"}),"(4), 365375. https://doi.org/10.1179/2045772313y.0000000124"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Lange, M. L., & Minkel, J. (2025). ",g.jsx("i",{children:"Seating and wheeled mobility: A clinical resource guide"})," (2nd ed.). Routledge."]}),g.jsxs("p",{className:"text-gray-700   leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Lin, J.-T., & Sprigle, S. (2019). The influence of operator and wheelchair factors on wheelchair propulsion effort. ",g.jsx("i",{children:"Disability and Rehabilitation: Assistive Technology, 15"}),"(3), 328335. https://doi.org/10.1080/17483107.2019.1578425"]}),g.jsxs("p",{className:"text-gray-700   leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Medola, F. O., Silva, D. C., Fortulan, C. A., Carril Elui, V. M., & Paschoarelli, L. C. (2014). The influence of handrim design on the contact forces on hands surface: A preliminary study. ",g.jsx("i",{children:"International Journal of Industrial Ergonomics, 44"}),"(6), 851856. https://doi.org/10.1016/j.ergon.2014.09.005"]}),g.jsxs("p",{className:"text-gray-700 leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Misch, J., & Sprigle, S. (2021). Effects of wheels and tires on high-strength lightweight wheelchair propulsion cost using a robotic wheelchair tester. ",g.jsx("i",{children:"Disability and Rehabilitation: Assistive Technology"}),", 111. https://doi.org/10.1080/17483107.2021.2012274"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Ott, J., & Pearlman, J. (2021). Scoping review of the rolling resistance testing methods and factors that impact manual wheelchairs. ",g.jsx("i",{children:"Journal of Rehabilitation and Assistive Technologies Engineering, 8"}),", 205566832098030. https://doi.org/10.1177/2055668320980300"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Permobil. (2024). Manual wheelchair guide: A comprehensive introduction to optimizing manual mobility for client function. In ",g.jsx("i",{children:"https://hub.permobil.com/manual-wheelchair-guide-download"}),". Permobil."]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Requejo, P. S., Furumasu, J., & Mulroy, S. J. (2015). Evidence-Based Strategies for Preserving Mobility for Elderly and Aging Manual Wheelchair Users. ",g.jsx("i",{children:"Topics in Geriatric Rehabilitation, 31"}),"(1), 2641. https://doi.org/10.1097/tgr.0000000000000042"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Requejo, P. S., & McNitt-Gray, J. L. (2016). ",g.jsx("i",{children:"Wheeled Mobility Biomechanics"}),". Frontiers Media SA."]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Richter, W. M., Rodriguez, R., Woods, K. R., Karpinski, A. P., & Axelson, P. W. (2006). Reduced Finger and Wrist Flexor Activity During Propulsion With a New Flexible Handrim. ",g.jsx("i",{children:"Archives of Physical Medicine and Rehabilitation, 87"}),"(12), 16431647. https://doi.org/10.1016/j.apmr.2006.09.009"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Worobey, L. A., Bernstein, J., Ott, J., Berner, T., Black, J., Cabarle, M., Roesler, T., Scarborough, S., & Betz, K. (2023). RESNA position on the application of ultralight manual wheelchairs. Assistive Technology: ",g.jsx("i",{children:"The Official Journal of RESNA"}),", 118. https://doi.org/10.1080/10400435.2023.2221148"]}),g.jsxs("p",{className:"text-gray-700  leading-13",style:{textIndent:"-3.5em",paddingLeft:"3.5em"},children:["Zepeda, R., Chan, F., & Sawatzky, B. (2016). The effect of caster wheel diameter and mass distribution on drag forces in manual wheelchairs. ",g.jsx("i",{children:"Journal of Rehabilitation Research and Development, 53"}),"(6), 893900. https://doi.org/10.1682/jrrd.2015.05.0074"]})]})]})}],s=n.findIndex(p=>p.id===e),r=n[s],c=Ae.useRef(null),h=()=>{s>0&&t(n[s-1].id,"page5")},d=()=>{s<n.length-1&&t(n[s+1].id,"page5")};return Ae.useEffect(()=>{c.current&&c.current.scrollTo({top:0,behavior:"instant"})},[e]),g.jsxs("div",{className:"w-full h-full flex",children:[g.jsxs("div",{className:"w-72 bg-gray-100 border-r border-gray-300 p-6 flex-shrink-0 h-screen flex flex-col transition-opacity duration-300",children:[g.jsx("p",{className:"text-4xl font-mono font-bold mb-6 text-gray-800 tracking-tight",children:i}),g.jsx("div",{className:"flex flex-col gap-3",children:n.map(p=>g.jsx("div",{onClick:()=>t(p.id,"page5"),className:`cursor-pointer px-3 py-2 rounded font-Pixelmono text-xl
                ${e===p.id?"bg-black text-white":"hover:bg-gray-300 text-black"}`,children:p.label},p.id))})]}),g.jsxs("div",{ref:c,className:"flex-1 p-8 overflow-y-auto relative transition-opacity duration-300 bg-white",children:[g.jsx("h2",{className:"text-6xl font-bold mb-6 font-Cap text-gray-700",children:r?.label}),g.jsx("div",{className:"space-y-6",children:r?.content}),g.jsxs("div",{className:"flex justify-between mt-8",children:[g.jsx("div",{onClick:h,className:`px-6 py-2 font-Pixelmono text-2xl font-bold rounded
                        ${s===0?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-black text-white hover:bg-gray-800 hover:cursor-pointer"}`,children:"< Previous"}),g.jsx("div",{onClick:d,className:`px-6 py-2 font-Pixelmono text-2xl font-bold rounded
                        ${s===n.length-1?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-black text-white hover:bg-gray-800 hover:cursor-pointer"}`,children:"Next >"})]})]})]})};function Hj(){Ae.useEffect(()=>{const Y=ie=>ie.preventDefault();return document.addEventListener("contextmenu",Y),()=>{document.removeEventListener("contextmenu",Y)}},[]);const i=Ae.useRef(null),[e,t]=Ae.useState(null),[n,s]=Ae.useState(!1),[r,c]=Ae.useState(!1),[h,d]=Ae.useState(null),[p,y]=Ae.useState(!1),[x,b]=Ae.useState(!1),[_,E]=Ae.useState("page1"),[R,T]=Ae.useState("intro"),[M,B]=Ae.useState(!1),[N,D]=Ae.useState(!1),L=[{id:"h2",label:"Rear Wheels",position:[-1.4,1.15,-1.06],offset:[-2.3,.5,1.2],distance:"7",overview:"The rear wheel, including its tire and rim, is the primary contact point with the ground. The choice of tire (e.g., pneumatic tires for shock absorption or solid tires for zero maintenance) and wheel camber (angle for stability vs. width) can significantly influence rolling resistance, propulsion efficiency, maneuverability, and overall user comfort.",links:[{id:"measure",page:"page5",label:"More Info on Rear Wheels"}]},{id:"h4",label:"Push Handles",position:[1,3.56,-2.02],offset:[.9,.3,2],distance:"7",overview:"Push handles are extensions to the top of the backrest frame that project backwards from the wheelchair and permit an aid to help propel the chair from behind.",links:[]},{id:"h5",label:"Back Support",position:[-.05,2.75,-1],offset:[0,.3,2.9],distance:"7",overview:"The back support provides the surface against which the user rests their back and pelvis. Its height and contour are clinically selected based on the user's trunk control and postural needs. A lower back support accommodates active trunk movement and allows for upper extremity propulsion, while a higher, more contoured support is necessary for users requiring significant postural support.",links:[]},{id:"h6",label:"Arm Rests",position:[-1.12,2.55,0],offset:[2.2,-.3,1],distance:"7",overview:g.jsxs(g.Fragment,{children:[g.jsx("p",{children:"Arm rests primarily serve to provide good resting posture for the arms. They are also used as a point of stability and leverage during transfers, weight shifting and reaching. Features such as removable designs, adjustable height, and integrated accessories (e.g., cup holders) can promote the user's function and independence."}),g.jsx("p",{className:"mt-5",children:"Skirt guards protect clothing from the wheel and keep debris off the user. Specialised arm troughs may be used to provide secure positioning and support for users with residual limbs."})]}),links:[{id:"6",page:"page5",label:"More Info on Armrests"}]},{id:"h7",label:"Push Rim",position:[1.28,1.85,-.17],offset:[.4,0,.4],distance:"7",overview:"The push rim is the outer ring on the wheel that the user grips to propel the chair. Its design directly impacts propulsion biomechanics and upper limb health. Push rims can be coated for improved grip (reducing force per push) and contoured for users with limited hand function, both aimed at decreasing the risk of repetitive strain injuries. Standard handrims are a single round tube with about  inch diameter.",links:[{id:"measure",page:"page5",label:"Go to 'Rear Wheels' for More Info"}]},{id:"h8",label:"Anti-tip Wheels",position:[1.05,.4,-1.76],offset:[.8,.25,-.4],distance:"7",overview:"Anti-tip wheels are small auxiliary wheels attached to the rear of the frame to prevent the wheelchair from tipping over backwards. They ensuring a smoother and more confident mobility experience for users.",links:[]},{id:"h9",label:"Wheel Locks",position:[-1.1,1.5,.5],offset:[-1,-.2,-.3],distance:"7",overview:"Wheel locks are safety devices that prevent the wheelchair from rolling when stationary and help facilitate safe transfers. The type (e.g., standard scissor vs. easy-reach lever) and placement should ensure the user can engage and disengage them effectively without compromising their posture or safety.",links:[{id:"7",page:"page5",label:"Go to 'Footrests' for More Info"}]},{id:"h10",label:"Rear Wheel Hub",position:[-1.25,1.15,-.75],offset:[-.3,.4,.8],distance:"7",overview:"The hub is the center component of the wheel to which the spokes connect. The hub also houses the axle.",links:[]},{id:"h11",label:"Release Axle",position:[1.35,1.13,-.63],offset:[.5,0,0],distance:"5.5",overview:"This mechanism allows for the rapid removal of the rear wheels without tools. It allows for easy transportationsuch as placing the chair in a carand maintenance.",links:[]},{id:"h12",label:"Seat Cushion",position:[-.05,1.7,0],offset:[0,.75,2],distance:"7",overview:"Seat cushions are placed inferior to the buttocks and thighs. Their primary functions include redistributing pressure to prevent pressure injuries, providing postural support and stability for the pelvis and spine, and enhance sitting comfort. Seat cushion are often categorised by their design intentfocusing on comfort, pressure relief, or postural control.",links:[]},{id:"h13",label:"Foot Rest",position:[-.9,.83,1.8],offset:[1.4,.5,1.4],distance:"7",overview:"Foot rests support the feet to maintain proper lower limb alignment, which is critical for posture, circulation, and comfort. Features such as flip-up or swing-away designs clear space anterior to the chair, facilitating safe and independent transfers. Heel loops, often made of nylon, help maintain foot positioning, especially for users with limited lower extremity control or sensation.",links:[{id:"7",page:"page5",label:"Go to 'Footrests' for More Info"}]},{id:"h14",label:"Cross Braces",position:[-.075,1.2,.48],offset:[0,-.1,1.9],distance:"7",overview:g.jsxs(g.Fragment,{children:[g.jsx("p",{children:"The X-brace is the hinged, folding mechanism that connects the two sides of the wheelchair frame. Its primary purpose is to allow the chair to collapse for transportation and storage. It also introduces a degree of flexibility compared to a rigid frame, which can affect propulsion efficiency and the solidity of the ride for very active users."}),g.jsx("p",{className:"mt-5",children:"The wheelchair frame is the rigid, tubular structure that supports the seat and the wheels."})]}),links:[{id:"fit",page:"page5",label:"More Info on Frames"}]},{id:"h15",label:"Castor Fork",position:[-1.22,.63,1],offset:[-.75,0,.75],distance:"7",overview:"The castor fork is the connecting component that attaches the front castor wheel to the wheelchair frame via the castor housing. Its design and durability are essential for maintaining proper front-end alignment, which directly affects steering responsiveness, tracking, and the overall stability of the wheelchair during turns and over uneven surfaces.",links:[{id:"5",page:"page5",label:"More Info on Castors"}]},{id:"h16",label:"Castor Wheel",position:[1.22,.35,1.08],offset:[1,.5,-1],distance:"7",overview:"The castor tire is the front wheel's point of contact with the ground and greatly influences maneuverability and ride comfort. The smaller the castor the greater the mobility, the larger the castor the greater the stability. The firmer the material the greater the maneuverability, the softer the material the more cushioned the ride.",links:[{id:"5",page:"page5",label:"More Info on Castors"}]}],I=Y=>{h?.id===Y.id?(s(!1),d(null),t(null)):(d(Y),s(!0),t(Y))},j=Y=>{Y!==_&&(s(!1),d(null),t(null),B(!0),setTimeout(()=>{E(Y),B(!1),T("intro")},300))},k=(Y,ie,re=!1)=>{re?(D(!0),setTimeout(()=>{E(ie),T(Y),s(!1),D(!1)},300)):(E(ie),T(Y))},O=()=>{b(!0),setTimeout(()=>{y(!0),E("page1")},1e3)},P=()=>{d(null),s(!1),t(null)};return g.jsx(g.Fragment,{children:p?g.jsxs("div",{className:`select-none transition-opacity duration-1000 ${p?"opacity-100":"opacity-0"}`,children:[g.jsxs("div",{className:"flex flex-col w-full h-screen overflow-hidden",children:[g.jsx(KN,{activePage:_,handlePageSwitch:j,audioRef:i}),g.jsx("div",{className:"flex-1 overflow-hidden",children:g.jsxs("div",{className:"flex w-full h-full relative",children:[g.jsx("div",{className:"flex-1",children:g.jsxs("div",{className:`h-full transition-opacity duration-300 ${M||N?"opacity-0":"opacity-100"}`,children:[_==="page1"&&g.jsx(Ej,{className:"z-10",cameraTarget:e,onHotspotClick:I,hotspots:L,activeHotspot:h,activePage:_}),_==="page2"&&g.jsx(Nj,{title:"Overview",activeSubtab:R,onSubtabClick:k}),_==="page3"&&g.jsx(Dj,{title:"The Person",activeSubtab:R,onSubtabClick:k}),_==="page4"&&g.jsx(Ij,{title:"Seating and Positioning",activeSubtab:R,onSubtabClick:k}),_==="page5"&&g.jsx(Fj,{title:"The Wheelchair",activeSubtab:R,onSubtabClick:k})]})}),g.jsx(ZN,{className:"relative z-30",isOpen:n,activeHotspot:h,onSubtabClick:k,onCloseSidebar:P}),g.jsx("div",{id:"overlay-root",className:"fixed inset-0 pointer-events-none z-20"})]})})]}),g.jsx("audio",{ref:i,className:"hidden",src:"miimusic.mp3",controls:!0,autoPlay:!0,loop:!0})]}):g.jsx("div",{className:`fixed inset-0 flex items-center justify-center bg-white z-50 transition-opacity duration-1000 ${x?"opacity-0":"opacity-100"}`,children:g.jsxs("div",{className:"flex flex-col items-center scale-150",children:[g.jsx(Tj,{}),g.jsxs("div",{className:"mt-5 flex flex-col items-center justify-between h-25 w-65 bg-white border-black border-5 font-mono p-3 text-black text-xs",children:[g.jsxs("div",{className:"text-left font-bold",children:[g.jsx("div",{children:"A Wheel Good Fit: PEEK Project"}),g.jsxs("div",{className:"text-center",children:["Press start to begin",g.jsx("span",{className:"blinking-cursor",children:"_"})]})]}),g.jsx("div",{className:"nothing for now",children:g.jsx("div",{onClick:O,className:"m-3 p-1 border-2 border-black bg-white text-black font-mono font-bold cursor-pointer hover:bg-black hover:text-white",children:"START"})})]}),g.jsx("div",{className:"pt-20 hidden",children:g.jsx(wj,{})}),g.jsx("div",{className:"pt-5 hidden",children:g.jsx(Bj,{})})]})})})}fw.createRoot(document.getElementById("root")).render(g.jsx(Ae.StrictMode,{children:g.jsx(Hj,{})}));
